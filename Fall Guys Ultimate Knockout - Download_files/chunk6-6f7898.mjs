(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{451:function(t,e,r){"use strict";r.r(e);var s=r(456);var o={start(){document.querySelectorAll(".js-button-loading")&&Object(s.b)({downloadButtonsSelector:".js-button-loading",slotId:"top-leaderboard-app-page-desktop"}).start()}},a=r(459);var i={start(){const t=document.querySelector(".js-modal-di")&&document.querySelector(".js-trigger-modal-di");document.querySelector(".js-header-bar")&&document.querySelector(".js-header-bar__cta")&&Object(a.a)().start(),t&&Object(a.c)().start()}};var n={start(){document.querySelector(".js-mobile-modal-di")&&document.querySelector(".js-trigger-mobile-modal-di")&&Object(a.d)().start()}},u=r(457),c=r(0);var l={start(){c.a.hasDirectOrExternalDownload&&Object(u.a)().start()}};var d={start(){Object(s.d)().start()}};var h={start(){Boolean(document.querySelector(".js-modal-security-status"))&&Object(s.e)(".js-modal-security-status").start()}},m=r(26),g=r.n(m);const S=c.a.displayType;var _={start(){Boolean(document.querySelector(".js-button-social"))&&"desktop"===S&&new g.a(document).on("click",".js-button-social",(t,e)=>{t.preventDefault(),window.open(e.href,e.title,"height=500,width=600")})}},p=r(154),R=r.n(p),b=r(465),v=r.n(b);function y(t,e){const r={method:"post",credentials:"include",mode:"no-cors",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:R.a.stringify(e)};return fetch(t,r).then(v.a).then(t=>t.json())}var f=r(27);class j{constructor(t){let e=t.modal,r=t.postRequest,s=t.domDelegateScope,o=t.sessionStorage,a=t.triggerSelector,i=void 0===a?".js-modal-user-rating-trigger":a,n=t.formSelector,u=void 0===n?".js-modal-user-rating-form":n,c=t.userRatingOkSelector,l=void 0===c?".js-modal-user-rating-ok":c,d=t.userRatingKoSelector,h=void 0===d?".js-modal-user-rating-ko":d,m=t.userRatingFirstStepSelector,g=void 0===m?".js-modal-user-rating-first-step":m,S=t.radioSelector,_=void 0===S?".js-selector-rating-value":S,p=t.userRatingFormButtonSelector,R=void 0===p?".js-modal-user-rating-button":p,b=t.userRatingStarsSelector,v=void 0===b?".js-modal-user-rating-stars .js-rating-stars-use":b,y=t.modalSelector,f=void 0===y?".js-modal-user-rating":y;this._modal=e,this._postRequest=r,this._domDelegateScope=s,this._sessionStorage=o,this._triggerSelector=i,this._formSelector=u,this._radioSelector=_,this._userRatingOkSelector=l,this._userRatingKoSelector=h,this._userRatingFormButtonSelector=R,this._userRatingFirstStepSelector=g,this._userRatingStarsSelector=v,this._modalSelector=f}start(){this._buttonsRateIt=Array.from(document.querySelectorAll(this._triggerSelector)),this._form=document.querySelector(this._formSelector),this._userRatingOk=document.querySelector(this._userRatingOkSelector),this._userRatingKo=document.querySelector(this._userRatingKoSelector),this._userRatingValues=Array.from(document.querySelectorAll(this._radioSelector)),this._userRatingFormButton=document.querySelector(this._userRatingFormButtonSelector),this._userRatingFirstStep=document.querySelector(this._userRatingFirstStepSelector),this._userRatingStars=Array.from(document.querySelectorAll(this._userRatingStarsSelector)),this._popup=document.querySelector(this._modalSelector),this._appRatedKey=`APP_${this._form.dataset.appId}_RATED`,this._domDelegateScope.on("click",this._triggerSelector,this._showModal.bind(this))}_showModal(t){t.preventDefault(),this._domDelegateScope.on("change",this._radioSelector,this._handleRadioChange.bind(this)),this._form.addEventListener("submit",this._handleSubmit.bind(this)),this._modal.show()}_handleRadioChange(){this._userRatingFormButton.removeAttribute("disabled"),this._domDelegateScope.off("change",this._radioSelector)}async _handleSubmit(t){t.preventDefault(),this._popup.setAttribute("data-meta","user-rating-modal-review"),this._userRatingFormButton.setAttribute("disabled",!0);const e=this._form.getAttribute("data-app-id"),r=2*this._userRatingValues.find(t=>t.checked).value;try{const t=this._sessionStorage.hasItem(this._appRatedKey)?{value:r}:await this._postRequest("/rate-app",{value:r,appId:e});this._userRatingSuccess(t)}catch(t){this._userRatingError()}}_userRatingSuccess(t){let e=t.value;this._userRatingFirstStep.classList.add("is-hidden");const r=e/2;this._userRatingStars.forEach((t,e)=>{const s=r>=e+1?"#star-full":"#star-empty";t.setAttribute("xlink:href",s)}),this._userRatingOk.classList.remove("is-hidden"),this._buttonsRateIt.forEach(t=>{t.setAttribute("disabled",!0)}),this._sessionStorage.setItem(this._appRatedKey,"1")}_userRatingError(){this._userRatingFirstStep.classList.add("is-hidden"),this._userRatingKo.classList.remove("is-hidden")}}var w=r(458);var q={start(){Boolean(document.querySelector(".js-modal-user-rating"))&&new j({modal:new w.a({modalSelector:".js-modal-user-rating"}),domDelegateScope:new g.a(document),postRequest:y,sessionStorage:Object(f.b)()}).start()}};function A(){o.start(),i.start(),n.start(),l.start(),d.start(),h.start(),_.start(),q.start()}r.d(e,"boot",(function(){return A}))},465:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.status,r=t.statusText;if(e>=200&&e<300)return t;var s=new Error(r);throw s.response=t,s}}}]);