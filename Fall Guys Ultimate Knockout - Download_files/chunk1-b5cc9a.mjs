(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{457:function(e,t,o){"use strict";var a=o(26),s=o.n(a);class n{constructor(e){let t=e.downloadDataAttribute,o=void 0===t?"data-download":t,a=e.buttonSelector,s=void 0===a?".js-launch-download":a,n=e.iframeSelector,i=void 0===n?"#iframe-download-launcher":n,l=e.downloadTracker,d=e.storage,r=e.DomDelegate,c=e.delayLaunchDownload,h=void 0===c?3e3:c,_=e.allowedReferralPageId,m=void 0===_?["app-download"]:_,p=e.appSupportMessageSelector,u=e.loadingBarSelector,w=e.appIdReferrerSelector,S=e.eventTracker,D=e.canLaunchDownloadOnClick,g=void 0===D||D;this._downloadDataAttribute=o,this._buttonSelector=s,this._downloadTracker=l,this._downloadIframe=document.querySelector(i),this._storage=d,this._DomDelegate=r,this._domDelegateScope=null,this._delayLaunchDownload=h,this._allowedReferralPageId=m,this._appSupportMessageSelector=p,this._appIdReferrerSelector=w,this._loadingBarSelector=u,this._onClickButton=this._onClickButton.bind(this),this._eventTracker=S,this._canLaunchDownloadOnClick=g}start(){const e=Array.from(document.querySelectorAll(this._buttonSelector)),t=this._getMainDownloadData(e);this._appSupportMessageElement=document.querySelector(this._appSupportMessageSelector),this._appIdReferrerElement=document.querySelector(this._appIdReferrerSelector),this._loadingBarElement=document.querySelector(this._loadingBarSelector),this._domDelegateScope=new this._DomDelegate(document),this._domDelegateScope.on("click",this._buttonSelector,this._onClickButton),t&&t.downloadUrl&&(this._canLaunchDownloadOnStart(t)&&window.setTimeout(()=>{this._launchDownload(t)},this._delayLaunchDownload),this._canTrackOnStart()&&this._track(),setTimeout(()=>{this._showAppSupportMessage(),this._showAppReferrerPopUp()},this._delayLaunchDownload))}_getMainDownloadData(e){return e.map(e=>this._extractDownloadData(e)).filter(this._hasLaunchDownloadOnStart)[0]}_extractDownloadData(e){return JSON.parse(e.getAttribute(this._downloadDataAttribute))}_hasLaunchDownloadOnStart(e){return e.launchDownloadOnStart}_canLaunchDownloadOnStart(e){return!e.isExternalDownload&&this._isReferrerAllowed()}_canTrackOnStart(){return this._isReferrerAllowed()}_isReferrerAllowed(){const e=this._storage.getItem(n.STORAGE_REFERRER_PAGE_ID);return this._allowedReferralPageId.includes(e)}_showAppSupportMessage(){this._appSupportMessageElement&&(this._appSupportMessageElement.classList.remove(n.HIDDEN_CLASS),this._loadingBarElement.classList.add(n.HIDDEN_CLASS))}_showAppReferrerPopUp(){if(!this._appIdReferrerElement)return;this._appIdReferrerElement.classList.remove(n.HIDDEN_CLASS),this._domDelegateScope.on("click",".js-close-app-referrer",()=>this._appIdReferrerElement.classList.add(n.HIDDEN_CLASS));const e=this._appIdReferrerElement.dataset.trackAppSlug;this._eventTracker.trackEvent("showDownloadQueueModule",{appSlug:e})}_track(){this._downloadTracker.track()}_launchDownload(e){const t=e.downloadUrl;e.isExternalDownload?window.open(t,"_blank"):this._downloadIframe.src=t}_onClickButton(e,t){e.preventDefault(),e.stopPropagation();const o=this._extractDownloadData(t);this._canLaunchDownloadOnClick&&this._launchDownload(o),o.redirectUrl&&this.setWindowLocation(o.redirectUrl)}setWindowLocation(e){window.location=e}}n.STORAGE_REFERRER_PAGE_ID="referrerPageId",n.HIDDEN_CLASS="is-hidden";var i=n,l=o(27),d=o(23);o.d(t,"a",(function(){return r}));const r=function(e){let t=void 0===e?{}:e,o=t.appSupportMessageSelector,a=t.appIdReferrerSelector,n=t.loadingBarSelector,r=t.allowedReferralPageId;return new i({downloadTracker:Object(d.c)(),storage:Object(l.b)(),DomDelegate:s.a,eventTracker:Object(d.e)(),appSupportMessageSelector:o,appIdReferrerSelector:a,loadingBarSelector:n,allowedReferralPageId:r})}},459:function(e,t,o){"use strict";var a=o(26),s=o.n(a),n=o(458),i=o(460),l=o(23),d=o(27),r=o(0),c=o(152);const h="bottom-slide",_={overlay:`.js-${h}-overlay`,close:`.js-${h}-close`,retry:`.js-${h}-retry`};class m{constructor(e){let t=e.adBlockerDetector,o=e.adBlockPlusDetector,a=e.barSelector,s=e.buttonSelector,n=e.slideSelector,i=e.wrapperToReplaceId,l=e.DomDelegate,d=e.stateClasses,r=void 0===d?{hidden:"is-hidden",shown:"is-shown"}:d,c=e.trackAction,h=void 0===c?{show:"Show",close:"Close"}:c;this._adBlockerDetector=t,this._adBlockPlusDetector=o,this._barSelector=a,this._buttonSelector=s,this._slideSelector=n,this._wrapperToReplaceId=i,this._stateClasses=r,this._trackAction=h,this._DomDelegate=l,this._domDelegateScope=null,this._domDelegateScopeSlide=null,this._urlToDownload=null,this._isAdBlockActive=!0,this._showBar=this._showBar.bind(this),this._slideUp=this._slideUp.bind(this),this._closeModal=this._closeModal.bind(this),this._retryDownload=this._retryDownload.bind(this),this._onKeyDown=this._onKeyDown.bind(this)}start(){this._barElement=document.querySelector(this._barSelector),this._buttonElement=document.querySelector(this._buttonSelector),this._barElement&&this._buttonElement&&(this._setAdsBlockValue(),this._dataAttributes=this._barElement.dataset,this._slideElement=document.querySelector(this._slideSelector),this._slideElement&&(this._urlToDownload=this._buttonElement.href,this._buttonElement.href="#",this._addListeners()))}_setAdsBlockValue(){Promise.all([this._adBlockerDetector.detect(),this._adBlockPlusDetector.detect({force:!0,timeout:2e3})]).then(e=>{let t=e[0],o=e[1];this._isAdBlockActive=t||o,this._isAdBlockActive&&this._showBar()})}_addListeners(){this._domDelegateScopeBar||this._domDelegateScopeSlide||(this._domDelegateScopeBar=new this._DomDelegate(this._barElement),this._domDelegateScopeBar.on("click",this._buttonSelector,this._slideUp),this._domDelegateScopeSlide=new this._DomDelegate(this._slideElement),this._domDelegateScopeSlide.on("click",_.close,this._closeModal),this._domDelegateScopeSlide.on("click",_.overlay,this._closeModal),this._domDelegateScopeSlide.on("click",_.retry,this._retryDownload),document.addEventListener("keydown",this._onKeyDown))}_showBar(){this._barElement.classList.remove(this._stateClasses.hidden),this._barElement.classList.add(this._stateClasses.shown),this._hideOriginalSlotWrapper(),this._dataAttributes.uaAction=this._trackAction.show}_hideOriginalSlotWrapper(){document.getElementById(this._wrapperToReplaceId).classList.add(this._stateClasses.hidden)}_slideUp(e){e.preventDefault(),this._slideElement.classList.remove(this._stateClasses.hidden),this._slideElement.classList.add(this._stateClasses.shown),setTimeout(()=>{this._setWindowLocation()},500)}_retryDownload(e){e.preventDefault(),this._setWindowLocation()}_setWindowLocation(){window.location.href=this._urlToDownload}_onKeyDown(e){const t=void 0!==e.key&&"Escape"===e.key,o=void 0!==e.keyCode&&27===e.keyCode;(t||o)&&this._closeModal(e)}_closeModal(e){e.preventDefault(),this._slideElement.classList.add(this._stateClasses.hidden),this._slideElement.classList.remove(this._stateClasses.shown),this._dataAttributes.uaAction=this._trackAction.close,"true"!==this._dataAttributes.keepBar&&(this._barElement.classList.add(this._stateClasses.hidden),this._barElement.classList.remove(this._stateClasses.shown))}}const p={wrapper_modal:".js-mobile-modal-di",recommended_app_button:".js-di-recommended-app-content-install",no_thanks_link:".js-di-recommended-app-content-no-thanks",continue_link:".js-di-instructions-content-continue"},u="RecommendedAppPopup",w={clickContinue:"ClickContinue",clickProgram:"ClickProgram",show:"Show"},S={step1:{action:"ClickContinue",label:"step_1"},step2:{action:"ClickContinue",label:"step_2"}},D={step1:{action:"ClickX",label:"step_1"},step2:{action:"ClickX",label:"step_2"}},g={step1:{action:"ClickBg",label:"step_1"},step2:{action:"ClickBg",label:"step_2"}};class k{constructor(e){let t=e.buttonSelector,o=e.DomDelegate,a=e.eventTracker,s=e.modalRecommendedApp,n=e.modalInstructions,i=e.storage;this._buttonSelector=t,this._domDelegate=o,this._eventTracker=a,this._modalRecommendedApp=s,this._modalInstructions=n,this._storage=i,this._hasBeenModalShown=!1,this._modalRecommendedElement=!1,this._modalInstructionsElement=!1,this._domDelegateDocumentScope=null,this._domDelegateScope=null,this._show=this._show.bind(this),this._launchOriginalDownload=this._launchOriginalDownload.bind(this),this._downloadRecommendApp=this._downloadRecommendApp.bind(this)}start(){this._modalRecommendedElement=this._modalRecommendedApp.getElement(),this._hasBeenModalShown=this._hasBeenDownloadIntentShown(),this._modalRecommendedElement&&!this._hasBeenModalShown&&(this._recommendedAppId=this._getRecommendedAppId(),this._modalInstructionsElement=this._modalInstructions.getElement(),this._addListeners())}_getRecommendedAppId(){const e=document.querySelector(p.wrapper_modal);return(null==e?void 0:e.dataset).trackRecommendedAppId}_addListeners(){this._domDelegateDocumentScope=new this._domDelegate(document),this._domDelegateDocumentScope.on("click",this._buttonSelector,this._show),this._domDelegateRecommendedScope=new this._domDelegate(this._modalRecommendedElement),this._domDelegateRecommendedScope.on("click",p.recommended_app_button,this._downloadRecommendApp),this._domDelegateRecommendedScope.on("click",p.no_thanks_link,()=>this._launchOriginalDownload(S.step1)),this._modalRecommendedApp.on("hide-close",()=>this._launchOriginalDownload(D.step1)),this._modalRecommendedApp.on("hide-overlay",()=>this._launchOriginalDownload(g.step1)),this._modalInstructionsElement&&(this._domDelegateInstructionsScope=new this._domDelegate(this._modalInstructionsElement),this._domDelegateInstructionsScope.on("click",p.continue_link,()=>this._launchOriginalDownload(S.step2)),this._modalInstructions.on("hide-close",()=>this._launchOriginalDownload(D.step2)),this._modalInstructions.on("hide-overlay",()=>this._launchOriginalDownload(g.step2)))}_hasBeenDownloadIntentShown(){return Boolean(this._storage.getItem(k.STORAGE_MODAL_SHOWN))}_show(e){e.preventDefault(),this._hasBeenModalShown||(this._setStorageShowModal(),this._trackShowModal(),this._modalRecommendedApp.show())}_downloadRecommendApp(e,t){e.preventDefault();const o=t.dataset,a=o.downloadUrl,s=o.redirect;!s&&a&&(this._setWindowLocation(a),this._modalInstructionsElement&&(this._modalRecommendedApp.hide(),this._modalInstructions.show())),s&&a&&(setTimeout(()=>{this._setWindowLocation(s)},500),window.open(a,"_blank")),this._trackClickRecommendedApp()}_launchOriginalDownload(e){let t=e.action,o=e.label;const a=document.querySelector(this._buttonSelector),s=null==a?void 0:a.href;s&&this._setWindowLocation(s),this._trackCloseModal({action:t,label:o}),this._modalRecommendedApp.hide()}_setWindowLocation(e){window.location.href=e}_setStorageShowModal(){this._hasBeenModalShown=!0,this._storage.setItem(k.STORAGE_MODAL_SHOWN,1)}_trackClickRecommendedApp(){this._trackEvent({category:u,action:w.clickProgram,label:this._recommendedAppId})}_trackShowModal(){this._trackEvent({category:u,action:w.show,label:this._recommendedAppId})}_trackCloseModal(e){let t=e.action,o=e.label;this._trackEvent({category:u,action:t,label:o})}_trackEvent(e){let t=e.category,o=void 0===t?"":t,a=e.action,s=void 0===a?"":a,n=e.label,i=void 0===n?"":n;this._eventTracker.trackEvent("generic",{category:o,action:s,label:i})}}k.STORAGE_MODAL_SHOWN="DI_ModalShown";var b=k,v=o(464),E=o.n(v);function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e}).apply(this,arguments)}const L={recommended_app:".js-modal-di-recommended-app",main_app:".js-main-app",tracking_show:".js-modal-track-show",tracking_close:".js-modal-track-close",first_step:"#modal-di-step-1",second_step:"#modal-di-step-2",download_arrow:"#download-arrow",close_selector:".js-modal-window-close",overlay_selector:".js-modal-window-overlay"},C=30;class O{constructor(e){let t=e.buttonSelector,o=e.dataLayer,a=e.DomDelegate,s=e.eventTracker,n=e.experiments,i=e.modal,l=e.modalSelector,d=e.setCookie,r=e.siteDomain,c=e.storage,h=e.stateClasses,_=void 0===h?{hidden:"is-hidden",shown:"is-shown"}:h;this.hasBeenModalShown=!1,this.stateClasses=_,this._buttonSelector=t,this._modalSelector=l,this._domDelegate=a,this._domDelegateScope=null,this._domDelegateDocumentScope=null,this._modal=i,this._eventTracker=s,this._storage=c,this._setCookie=d,this._siteDomain=r,this._originalUrlToContinue=null,this._hasDownloadedRecommendedApp=!1,this.closeModal=this.closeModal.bind(this),this.launchOriginalDownload=this.launchOriginalDownload.bind(this),this._showModal=this._showModal.bind(this),this._continueWithOriginalDownload=this._continueWithOriginalDownload.bind(this),this._navigateToRecommendedApp=this._navigateToRecommendedApp.bind(this),this._experiments=n||{},this._dataLayer=o||[],this._currentStep=null}start(){const e=document.querySelector(this._modalSelector);this.hasBeenModalShown=this._hasBeenDownloadIntentShown(),e&&!this.hasBeenModalShown&&(this._DomDelegateDocumentScope=new this._domDelegate(document),this._DomDelegateDocumentScope.on("click",this._buttonSelector,this._showModal),this._domDelegateScope=new this._domDelegate(e),this._domDelegateScope.on("click",L.recommended_app,this._navigateToRecommendedApp),this._domDelegateScope.on("click",L.main_app,this._continueWithOriginalDownload),this._domDelegateScope.on("click",L.close_selector,()=>this.launchOriginalDownload({action:"ClickX"})),this._domDelegateScope.on("click",L.overlay_selector,()=>this.launchOriginalDownload({action:"ClickBg"})))}_showModal(e){e.preventDefault(),this.hasBeenModalShown||(this._currentStep=1,this._setStorageShowModal(),this._trackShowModal(),this._modal.show())}_navigateToRecommendedApp(e,t){e.preventDefault(),this._hasDownloadedRecommendedApp=!0;const o=t.dataset;E()(o)||(this._trackRecommendedApp(o),this._setCookieHasDownloadedRecommendedApp(o),this._changeToStep2(),setTimeout(()=>{this.setWindowLocation(o.downloadLaunchUrl)},300))}_continueWithOriginalDownload(e,t){e.preventDefault(),this._trackMainApp(t),this.launchOriginalDownload({})}launchOriginalDownload(e){let t=e.action;t&&this.closeModal({action:t});const o=document.querySelector(this._buttonSelector),a=null==o?void 0:o.href;a&&this.setWindowLocation(a)}closeModal(e){let t=e.action;this._trackCloseModal({action:t}),this._modal.hide()}_changeToStep2(){const e=document.querySelector(L.first_step),t=document.querySelector(L.second_step),o=document.querySelector(L.download_arrow);t&&(e.classList.add(this.stateClasses.hidden),e.classList.remove(this.stateClasses.shown),t.classList.add(this.stateClasses.shown),t.classList.remove(this.stateClasses.hidden)),o&&(o.classList.add(this.stateClasses.shown),o.classList.remove(this.stateClasses.hidden)),this._currentStep=2}_trackShowModal(){const e=document.querySelector(L.tracking_show),t=null==e?void 0:e.dataset;E()(t)||this._trackEvent(t)}_trackCloseModal(e){let t=e.action;const o=document.querySelector(L.tracking_close),a=null==o?void 0:o.dataset;if(!E()(a)&&(this._trackEvent(A({},a,{action:t,label:`step_${this._currentStep}`})),!this._hasDownloadedRecommendedApp)){var s;const e=null===(s=a.label)||void 0===s?void 0:s.toLowerCase();this._trackFacebookEvent({action:"Skip",appName:e})}}_trackRecommendedApp(e){var t;const o=null===(t=e.label)||void 0===t?void 0:t.toLowerCase();this._trackEvent(e),this._trackFacebookEvent({action:"Take",appName:o})}_trackMainApp(e){const t=e.dataset;if(!E()(t)&&(this._trackEvent(t),!this._hasDownloadedRecommendedApp)){var o;const e=null===(o=t.campaignId)||void 0===o?void 0:o.toLowerCase();this._trackFacebookEvent({action:"Skip",appName:e})}}_trackFacebookEvent(e){let t=e.action,o=void 0===t?"":t,a=e.appName,s=void 0===a?"":a;this._eventTracker.trackEvent("fbRecommendedOffer",{action:o,appName:s})}_trackEvent(e){let t=e.category,o=void 0===t?"":t,a=e.action,s=void 0===a?"":a,n=e.label,i=void 0===n?"":n;this._eventTracker.trackEvent("generic",{category:o,action:s,label:i})}_hasBeenDownloadIntentShown(){return Boolean(this._storage.getItem(O.STORAGE_MODAL_SHOWN))}setWindowLocation(e){window.location.href=e}_setStorageShowModal(){this._storage.setItem(O.STORAGE_MODAL_SHOWN,!0),this.hasBeenModalShown=!0;const e=document.querySelector(L.recommended_app),t=null==e?void 0:e.dataset,o=null==t?void 0:t.campaignId;o&&(this._dataLayer.push({diCampaign:o}),this._storage.setItem(O.STORAGE_LAST_CAMPAIGN_SHOWN,o))}_setCookieHasDownloadedRecommendedApp(e){let t=e.storeDiDownloaded,o=e.label,a=void 0===o?"":o;if("true"===t&&""!==a){const e=O.COOKIE_RECOMMENDED_APP_TEMPLATE.replace("{appName}",a);this._setCookie(e,1,C,this._siteDomain)}}}O.COOKIE_RECOMMENDED_APP_TEMPLATE="DI_HasDownloaded{appName}",O.STORAGE_MODAL_SHOWN="DI_ModalShown",O.STORAGE_LAST_CAMPAIGN_SHOWN="CPI_LastCampaignShown";var R=O;const f={modal_container:".js-modal-di-external .js-modal-window-container",modal_wait_step:"#step-wait",download_arrow:"#download-arrow"};var y=class extends R{constructor(e){let t=e.buttonSelector,o=e.buttonSelectorLaunchDownload,a=e.dataLayer,s=e.DomDelegate,n=e.eventTracker,i=e.experiments,l=e.modal,d=e.modalSelector,r=e.setCookie,c=e.siteDomain,h=e.storage,_=e.stateClasses;super({buttonSelector:t,dataLayer:a,DomDelegate:s,eventTracker:n,experiments:i,modal:l,modalSelector:d,setCookie:r,siteDomain:c,stateClasses:void 0===_?{hidden:"is-hidden",shown:"is-shown"}:_,storage:h}),this._buttonSelectorLaunchDownload=o,this.launchOriginalDownload=this.launchOriginalExternalDownload.bind(this)}start(){super.start(),this.hasBeenModalShown||(this._buttonElement=document.querySelector(this._buttonSelector),this._buttonElement.classList.remove(this._buttonSelectorLaunchDownload.substr(1)))}launchOriginalExternalDownload(e){var t;let o=e.action;this._changeToStepWait();const a=null===(t=this._buttonElement.dataset)||void 0===t?void 0:t.download,s=a&&JSON.parse(a),n=s.downloadUrl,i=s.redirectUrl;setTimeout(()=>{o&&super.closeModal({action:o}),window.open(n,"_blank"),super.setWindowLocation(i)},3e3)}_changeToStepWait(){const e=document.querySelector(f.modal_container),t=document.querySelector(f.modal_wait_step);e.classList.add(this.stateClasses.hidden),e.classList.remove(this.stateClasses.shown),t.classList.remove(this.stateClasses.hidden),t.classList.add(this.stateClasses.shown);const o=document.querySelector(f.download_arrow);o&&(o.classList.add(this.stateClasses.hidden),o.classList.remove(this.stateClasses.shown))}};o.d(t,"a",(function(){return T})),o.d(t,"c",(function(){return B})),o.d(t,"b",(function(){return j})),o.d(t,"d",(function(){return P}));const I=r.a.siteDomain,M=r.a.experiments,T=()=>new m({adBlockerDetector:Object(c.b)(),adBlockPlusDetector:Object(c.a)(),barSelector:".js-header-bar",buttonSelector:".js-header-bar__cta",slideSelector:".js-bottom-slide",wrapperToReplaceId:"top-notification-bar-wrapper",DomDelegate:s.a}),B=()=>{const e=new n.a({modalSelector:".js-modal-di",closeSelector:null,overlaySelector:null});return new R({buttonSelector:".js-trigger-modal-di",dataLayer:window.dataLayer,DomDelegate:s.a,eventTracker:Object(l.e)(),experiments:M,modal:e,modalSelector:".js-modal-di",setCookie:i.a,siteDomain:I,storage:Object(d.b)({expires:3600})})},j=()=>{const e=new n.a({modalSelector:".js-modal-di-external",closeSelector:null,overlaySelector:null});return new y({buttonSelector:".js-trigger-modal-di-external",buttonSelectorLaunchDownload:".js-launch-download",dataLayer:window.dataLayer,DomDelegate:s.a,eventTracker:Object(l.e)(),experiments:M,modal:e,modalSelector:".js-modal-di-external",setCookie:i.a,siteDomain:I,storage:Object(d.b)({expires:3600})})},P=()=>{const e=new n.a({modalSelector:".js-modal-di-recommended-app"}),t=new n.a({modalSelector:".js-modal-di-instructions"});return new b({buttonSelector:".js-trigger-mobile-modal-di",DomDelegate:s.a,eventTracker:Object(l.e)(),modalRecommendedApp:e,modalInstructions:t,storage:Object(d.b)({expires:3600})})}},464:function(e,t,o){var a=o(153),s=o(43),n=o(58),i=o(7),l=o(59),d=o(60),r=o(107),c=o(108),h="[object Map]",_="[object Set]",m=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(l(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||d(e)||c(e)||n(e)))return!e.length;var t=s(e);if(t==h||t==_)return!e.size;if(r(e))return!a(e).length;for(var o in e)if(m.call(e,o))return!1;return!0}}}]);