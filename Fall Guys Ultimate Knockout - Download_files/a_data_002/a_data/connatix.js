!function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"S",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.S)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t.S?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=165)}([function(t,i,e){"use strict";var s,n,r=e(60),h=r.Reader,a=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.types&&t.types.length){i.uint32(10).fork();for(var e=0;e<t.types.length;++e)i.int32(t.types[e]);i.ldelim()}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&i.uint32(16).int32(t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&i.uint32(24).int32(t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&i.uint32(32).int32(t.numberOfAdSlots),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAdBreak)return t;var i=new c.ProtoAdBreak;if(t.types){if(!Array.isArray(t.types))throw TypeError(".ProtoAdBreak.types: array expected");i.types=[];for(var e=0;e<t.types.length;++e)switch(t.types[e]){default:case"None":case 0:i.types[e]=0;break;case"PreRoll":case 1:i.types[e]=1;break;case"MidRoll":case 2:i.types[e]=2;break;case"PostRoll":case 3:i.types[e]=3}}return null!=t.maxAdPodDuration&&(i.maxAdPodDuration=0|t.maxAdPodDuration),null!=t.maxAdSlotDuration&&(i.maxAdSlotDuration=0|t.maxAdSlotDuration),null!=t.numberOfAdSlots&&(i.numberOfAdSlots=0|t.numberOfAdSlots),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayerPlaybackModeEnum=(s={},(n=Object.create(s))[s[0]="Autoplay"]=0,n[s[1]="ScrollToPlay"]=1,n[s[2]="ClickToPlay"]=2,n),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoVideoQuality=function(){var t={},i=Object.create(t);return i[t[0]="Auto"]=0,i[t[1]="High1080p"]=1,i[t[2]="High720p"]=2,i[t[3]="Medium360p"]=3,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoAdDomainBlockingResponse=function(){function t(t){if(this.domains=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.domains=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.domains&&t.domains.length)for(var e=0;e<t.domains.length;++e)i.uint32(10).string(t.domains[e]);return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdDomainBlockingResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.domains&&s.domains.length||(s.domains=[]),s.domains.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAdDomainBlockingResponse)return t;var i=new c.ProtoAdDomainBlockingResponse;if(t.domains){if(!Array.isArray(t.domains))throw TypeError(".ProtoAdDomainBlockingResponse.domains: array expected");i.domains=[];for(var e=0;e<t.domains.length;++e)i.domains[e]=String(t.domains[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.domains=[]),t.domains&&t.domains.length){e.domains=[];for(var s=0;s<t.domains.length;++s)e.domains[s]=t.domains[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCoreTamBidRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.lineItemId="",t.prototype.code="",t.prototype.metadata=null,t.prototype.exploration=!1,t.encode=function(t,i){return i||(i=a.create()),null!=t.lineItemId&&t.hasOwnProperty("lineItemId")&&i.uint32(10).string(t.lineItemId),null!=t.code&&t.hasOwnProperty("code")&&i.uint32(18).string(t.code),null!=t.metadata&&t.hasOwnProperty("metadata")&&c.MetadataModel.encode(t.metadata,i.uint32(26).fork()).ldelim(),null!=t.exploration&&t.hasOwnProperty("exploration")&&i.uint32(32).bool(t.exploration),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCoreTamBidRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.lineItemId=t.string();break;case 2:s.code=t.string();break;case 3:s.metadata=c.MetadataModel.decode(t,t.uint32());break;case 4:s.exploration=t.bool();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoCoreTamBidRequest)return t;var i=new c.ProtoCoreTamBidRequest;if(null!=t.lineItemId&&(i.lineItemId=String(t.lineItemId)),null!=t.code&&(i.code=String(t.code)),null!=t.metadata){if("object"!=typeof t.metadata)throw TypeError(".ProtoCoreTamBidRequest.metadata: object expected");i.metadata=c.MetadataModel.fromObject(t.metadata)}return null!=t.exploration&&(i.exploration=Boolean(t.exploration)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.lineItemId="",e.code="",e.metadata=null,e.exploration=!1),null!=t.lineItemId&&t.hasOwnProperty("lineItemId")&&(e.lineItemId=t.lineItemId),null!=t.code&&t.hasOwnProperty("code")&&(e.code=t.code),null!=t.metadata&&t.hasOwnProperty("metadata")&&(e.metadata=c.MetadataModel.toObject(t.metadata,i)),null!=t.exploration&&t.hasOwnProperty("exploration")&&(e.exploration=t.exploration),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.MetadataModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.version=0,t.prototype.sessionId="",t.prototype.playerId="",t.prototype.userId="",t.prototype.browser=null,t.prototype.geo=null,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.pageUrl="",t.prototype.bundleId="",t.prototype.implementationType=0,t.prototype.trackAllRequests=!1,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.prototype.abTestId="",t.prototype.pageInFocus=!1,t.encode=function(t,i){return i||(i=a.create()),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(8).int32(t.version),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(18).string(t.sessionId),null!=t.playerId&&t.hasOwnProperty("playerId")&&i.uint32(26).string(t.playerId),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(34).string(t.userId),null!=t.browser&&t.hasOwnProperty("browser")&&c.Browser.encode(t.browser,i.uint32(42).fork()).ldelim(),null!=t.geo&&t.hasOwnProperty("geo")&&c.GeoLocation.encode(t.geo,i.uint32(50).fork()).ldelim(),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(56).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(64).int32(t.clientAb1),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&i.uint32(72).int32(t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&i.uint32(80).int32(t.serverAb1),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(122).string(t.pageUrl),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(138).string(t.bundleId),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(144).int32(t.implementationType),null!=t.trackAllRequests&&t.hasOwnProperty("trackAllRequests")&&i.uint32(152).bool(t.trackAllRequests),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(162).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(170).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(178).string(t.customParam3),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&i.uint32(194).string(t.abTestId),null!=t.pageInFocus&&t.hasOwnProperty("pageInFocus")&&i.uint32(200).bool(t.pageInFocus),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.MetadataModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.version=t.int32();break;case 2:s.sessionId=t.string();break;case 3:s.playerId=t.string();break;case 4:s.userId=t.string();break;case 5:s.browser=c.Browser.decode(t,t.uint32());break;case 6:s.geo=c.GeoLocation.decode(t,t.uint32());break;case 7:s.clientAb0=t.int32();break;case 8:s.clientAb1=t.int32();break;case 9:s.serverAb0=t.int32();break;case 10:s.serverAb1=t.int32();break;case 15:s.pageUrl=t.string();break;case 17:s.bundleId=t.string();break;case 18:s.implementationType=t.int32();break;case 19:s.trackAllRequests=t.bool();break;case 20:s.customParam1=t.string();break;case 21:s.customParam2=t.string();break;case 22:s.customParam3=t.string();break;case 24:s.abTestId=t.string();break;case 25:s.pageInFocus=t.bool();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.MetadataModel)return t;var i=new c.MetadataModel;if(null!=t.version&&(i.version=0|t.version),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.playerId&&(i.playerId=String(t.playerId)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.browser){if("object"!=typeof t.browser)throw TypeError(".MetadataModel.browser: object expected");i.browser=c.Browser.fromObject(t.browser)}if(null!=t.geo){if("object"!=typeof t.geo)throw TypeError(".MetadataModel.geo: object expected");i.geo=c.GeoLocation.fromObject(t.geo)}switch(null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),null!=t.serverAb0&&(i.serverAb0=0|t.serverAb0),null!=t.serverAb1&&(i.serverAb1=0|t.serverAb1),null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}return null!=t.trackAllRequests&&(i.trackAllRequests=Boolean(t.trackAllRequests)),null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),null!=t.abTestId&&(i.abTestId=String(t.abTestId)),null!=t.pageInFocus&&(i.pageInFocus=Boolean(t.pageInFocus)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.version=0,e.sessionId="",e.playerId="",e.userId="",e.browser=null,e.geo=null,e.clientAb0=0,e.clientAb1=0,e.serverAb0=0,e.serverAb1=0,e.pageUrl="",e.bundleId="",e.implementationType=i.enums===String?"Web":0,e.trackAllRequests=!1,e.customParam1="",e.customParam2="",e.customParam3="",e.abTestId="",e.pageInFocus=!1),null!=t.version&&t.hasOwnProperty("version")&&(e.version=t.version),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&(e.sessionId=t.sessionId),null!=t.playerId&&t.hasOwnProperty("playerId")&&(e.playerId=t.playerId),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.browser&&t.hasOwnProperty("browser")&&(e.browser=c.Browser.toObject(t.browser,i)),null!=t.geo&&t.hasOwnProperty("geo")&&(e.geo=c.GeoLocation.toObject(t.geo,i)),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&(e.clientAb0=t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&(e.clientAb1=t.clientAb1),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&(e.serverAb0=t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&(e.serverAb1=t.serverAb1),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&(e.pageUrl=t.pageUrl),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&(e.bundleId=t.bundleId),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&(e.implementationType=i.enums===String?c.ProtoImplementationType[t.implementationType]:t.implementationType),null!=t.trackAllRequests&&t.hasOwnProperty("trackAllRequests")&&(e.trackAllRequests=t.trackAllRequests),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&(e.customParam1=t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&(e.customParam2=t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&(e.customParam3=t.customParam3),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&(e.abTestId=t.abTestId),null!=t.pageInFocus&&t.hasOwnProperty("pageInFocus")&&(e.pageInFocus=t.pageInFocus),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCoreTamBidResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.encryptedBidPrice="",t.prototype.ofskp=0,t.prototype.impressionTimeSpent=0,t.prototype.bidRate=0,t.prototype.successRate=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&i.uint32(10).string(t.errorMessage),null!=t.encryptedBidPrice&&t.hasOwnProperty("encryptedBidPrice")&&i.uint32(82).string(t.encryptedBidPrice),null!=t.ofskp&&t.hasOwnProperty("ofskp")&&i.uint32(97).double(t.ofskp),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&i.uint32(104).int32(t.impressionTimeSpent),null!=t.bidRate&&t.hasOwnProperty("bidRate")&&i.uint32(113).double(t.bidRate),null!=t.successRate&&t.hasOwnProperty("successRate")&&i.uint32(121).double(t.successRate),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCoreTamBidResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.errorMessage=t.string();break;case 10:s.encryptedBidPrice=t.string();break;case 12:s.ofskp=t.double();break;case 13:s.impressionTimeSpent=t.int32();break;case 14:s.bidRate=t.double();break;case 15:s.successRate=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoCoreTamBidResponse)return t;var i=new c.ProtoCoreTamBidResponse;return null!=t.errorMessage&&(i.errorMessage=String(t.errorMessage)),null!=t.encryptedBidPrice&&(i.encryptedBidPrice=String(t.encryptedBidPrice)),null!=t.ofskp&&(i.ofskp=Number(t.ofskp)),null!=t.impressionTimeSpent&&(i.impressionTimeSpent=0|t.impressionTimeSpent),null!=t.bidRate&&(i.bidRate=Number(t.bidRate)),null!=t.successRate&&(i.successRate=Number(t.successRate)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.errorMessage="",e.encryptedBidPrice="",e.ofskp=0,e.impressionTimeSpent=0,e.bidRate=0,e.successRate=0),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(e.errorMessage=t.errorMessage),null!=t.encryptedBidPrice&&t.hasOwnProperty("encryptedBidPrice")&&(e.encryptedBidPrice=t.encryptedBidPrice),null!=t.ofskp&&t.hasOwnProperty("ofskp")&&(e.ofskp=i.json&&!isFinite(t.ofskp)?String(t.ofskp):t.ofskp),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCookieSettings=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.name="",t.prototype.value="",t.prototype.timestamp=o.Long?o.Long.fromBits(0,0,!1):0,t.encode=function(t,i){return i||(i=a.create()),null!=t.name&&t.hasOwnProperty("name")&&i.uint32(10).string(t.name),null!=t.value&&t.hasOwnProperty("value")&&i.uint32(18).string(t.value),null!=t.timestamp&&t.hasOwnProperty("timestamp")&&i.uint32(24).int64(t.timestamp),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCookieSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.name=t.string();break;case 2:s.value=t.string();break;case 3:s.timestamp=t.int64();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoCookieSettings)return t;var i=new c.ProtoCookieSettings;return null!=t.name&&(i.name=String(t.name)),null!=t.value&&(i.value=String(t.value)),null!=t.timestamp&&(o.Long?(i.timestamp=o.Long.fromValue(t.timestamp)).unsigned=!1:"string"==typeof t.timestamp?i.timestamp=parseInt(t.timestamp,10):"number"==typeof t.timestamp?i.timestamp=t.timestamp:"object"==typeof t.timestamp&&(i.timestamp=new o.LongBits(t.timestamp.low>>>0,t.timestamp.high>>>0).toNumber())),i},t.toObject=function(t,i){i||(i={});var e={};if(i.defaults)if(e.name="",e.value="",o.Long){var s=new o.Long(0,0,!1);e.timestamp=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else e.timestamp=i.longs===String?"0":0;return null!=t.name&&t.hasOwnProperty("name")&&(e.name=t.name),null!=t.value&&t.hasOwnProperty("value")&&(e.value=t.value),null!=t.timestamp&&t.hasOwnProperty("timestamp")&&("number"==typeof t.timestamp?e.timestamp=i.longs===String?String(t.timestamp):t.timestamp:e.timestamp=i.longs===String?o.Long.prototype.toString.call(t.timestamp):i.longs===Number?new o.LongBits(t.timestamp.low>>>0,t.timestamp.high>>>0).toNumber():t.timestamp),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCookieSecureModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Secure"]=0,i[t[1]="Unsecure"]=1,i[t[2]="Auto"]=2,i}(),c.ProtoCookieSyncRequest=function(){function t(t){if(this.cookieList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.cookieList=o.emptyArray,t.prototype.secureMode=0,t.prototype.browserInfo=null,t.encode=function(t,i){if(i||(i=a.create()),null!=t.cookieList&&t.cookieList.length)for(var e=0;e<t.cookieList.length;++e)c.ProtoCookieSettings.encode(t.cookieList[e],i.uint32(10).fork()).ldelim();return null!=t.secureMode&&t.hasOwnProperty("secureMode")&&i.uint32(16).int32(t.secureMode),null!=t.browserInfo&&t.hasOwnProperty("browserInfo")&&c.Browser.encode(t.browserInfo,i.uint32(26).fork()).ldelim(),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCookieSyncRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.cookieList&&s.cookieList.length||(s.cookieList=[]),s.cookieList.push(c.ProtoCookieSettings.decode(t,t.uint32()));break;case 2:s.secureMode=t.int32();break;case 3:s.browserInfo=c.Browser.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoCookieSyncRequest)return t;var i=new c.ProtoCookieSyncRequest;if(t.cookieList){if(!Array.isArray(t.cookieList))throw TypeError(".ProtoCookieSyncRequest.cookieList: array expected");i.cookieList=[];for(var e=0;e<t.cookieList.length;++e){if("object"!=typeof t.cookieList[e])throw TypeError(".ProtoCookieSyncRequest.cookieList: object expected");i.cookieList[e]=c.ProtoCookieSettings.fromObject(t.cookieList[e])}}switch(t.secureMode){case"Secure":case 0:i.secureMode=0;break;case"Unsecure":case 1:i.secureMode=1;break;case"Auto":case 2:i.secureMode=2}if(null!=t.browserInfo){if("object"!=typeof t.browserInfo)throw TypeError(".ProtoCookieSyncRequest.browserInfo: object expected");i.browserInfo=c.Browser.fromObject(t.browserInfo)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.cookieList=[]),i.defaults&&(e.secureMode=i.enums===String?"Secure":0,e.browserInfo=null),t.cookieList&&t.cookieList.length){e.cookieList=[];for(var s=0;s<t.cookieList.length;++s)e.cookieList[s]=c.ProtoCookieSettings.toObject(t.cookieList[s],i)}return null!=t.secureMode&&t.hasOwnProperty("secureMode")&&(e.secureMode=i.enums===String?c.ProtoCookieSecureModeEnum[t.secureMode]:t.secureMode),null!=t.browserInfo&&t.hasOwnProperty("browserInfo")&&(e.browserInfo=c.Browser.toObject(t.browserInfo,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.encode=function(t,i){return i||(i=a.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&i.uint32(26).string(t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&i.uint32(32).int32(t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&i.uint32(40).bool(t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&i.uint32(50).string(t.publisherAdsTxt),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoUserInformation)return t;var i=new c.ProtoUserInformation;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.lookupId&&(i.lookupId=String(t.lookupId)),null!=t.lookupResponseCode&&(i.lookupResponseCode=0|t.lookupResponseCode),null!=t.callFraudSensor&&(i.callFraudSensor=Boolean(t.callFraudSensor)),null!=t.publisherAdsTxt&&(i.publisherAdsTxt=String(t.publisherAdsTxt)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"Image":0,e.trigger=i.enums===String?"Impression":0,e.url=""),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoTrackerType[t.type]:t.type),null!=t.trigger&&t.hasOwnProperty("trigger")&&(e.trigger=i.enums===String?c.ProtoTrackerTriggerType[t.trigger]:t.trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItemPriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemPauseAdOutOfViewEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.encode=function(t,i){return i||(i=a.create()),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&i.uint32(8).int32(t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&i.uint32(16).int32(t.adBreakTypeEnum),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakTargeting)return t;var i=new c.ProtoLineItemAdBreakTargeting;switch(t.adRollType){case"None":case 0:i.adRollType=0;break;case"PreRoll":case 1:i.adRollType=1;break;case"MidRoll":case 2:i.adRollType=2;break;case"PostRoll":case 3:i.adRollType=3}switch(t.adBreakTypeEnum){case"All":case 1:i.adBreakTypeEnum=1;break;case"SingleAd":case 2:i.adBreakTypeEnum=2;break;case"AdPod":case 3:i.adBreakTypeEnum=3}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&i.uint32(8).int32(t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&i.uint32(16).int32(t.adSlotTargetingType),null!=t.adSlotPositions&&t.adSlotPositions.length){i.uint32(26).fork();for(var e=0;e<t.adSlotPositions.length;++e)i.int32(t.adSlotPositions[e]);i.ldelim()}return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdPodTargeting)return t;var i=new c.ProtoLineItemAdPodTargeting;switch(t.targetingType){case"Only":case 0:i.targetingType=0;break;case"Except":case 1:i.targetingType=1}switch(t.adSlotTargetingType){case"SpecificSlots":case 1:i.adSlotTargetingType=1;break;case"Interval":case 2:i.adSlotTargetingType=2}if(t.adSlotPositions){if(!Array.isArray(t.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");i.adSlotPositions=[];for(var e=0;e<t.adSlotPositions.length;++e)i.adSlotPositions[e]=0|t.adSlotPositions[e]}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.encode=function(t,i){if(i||(i=a.create()),null!=t.adBreakTargeting&&t.adBreakTargeting.length)for(var e=0;e<t.adBreakTargeting.length;++e)c.ProtoLineItemAdBreakTargeting.encode(t.adBreakTargeting[e],i.uint32(10).fork()).ldelim();return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&c.ProtoLineItemAdPodTargeting.encode(t.adPodTargeting,i.uint32(18).fork()).ldelim(),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakSettings)return t;var i=new c.ProtoLineItemAdBreakSettings;if(t.adBreakTargeting){if(!Array.isArray(t.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");i.adBreakTargeting=[];for(var e=0;e<t.adBreakTargeting.length;++e){if("object"!=typeof t.adBreakTargeting[e])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");i.adBreakTargeting[e]=c.ProtoLineItemAdBreakTargeting.fromObject(t.adBreakTargeting[e])}}if(null!=t.adPodTargeting){if("object"!=typeof t.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");i.adPodTargeting=c.ProtoLineItemAdPodTargeting.fromObject(t.adPodTargeting)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeSpent=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.bidRate=0,t.prototype.pauseAdOutOfView=0,t.prototype.moatTrackingEnabled=!1,t.prototype.cnxCreativeId="",t.prototype.blockedDomainsRevisionNumber=0,t.prototype.playerSize="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeSpent=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 39:s.bidRate=t.double();break;case 40:s.pauseAdOutOfView=t.int32();break;case 41:s.moatTrackingEnabled=t.bool();break;case 42:s.cnxCreativeId=t.string();break;case 44:s.blockedDomainsRevisionNumber=t.int32();break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.sound=!1,e.viewability=!1,e.impressionTimeSpent=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.bidRate=0,e.pauseAdOutOfView=i.enums===String?"Default":0,e.moatTrackingEnabled=!1,e.cnxCreativeId="",e.blockedDomainsRevisionNumber=0,e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItemPriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}return null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.pauseAdOutOfView&&t.hasOwnProperty("pauseAdOutOfView")&&(e.pauseAdOutOfView=i.enums===String?c.ProtoLineItemPauseAdOutOfViewEnum[t.pauseAdOutOfView]:t.pauseAdOutOfView),null!=t.moatTrackingEnabled&&t.hasOwnProperty("moatTrackingEnabled")&&(e.moatTrackingEnabled=t.moatTrackingEnabled),null!=t.cnxCreativeId&&t.hasOwnProperty("cnxCreativeId")&&(e.cnxCreativeId=t.cnxCreativeId),null!=t.blockedDomainsRevisionNumber&&t.hasOwnProperty("blockedDomainsRevisionNumber")&&(e.blockedDomainsRevisionNumber=t.blockedDomainsRevisionNumber),null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&i.uint32(8).int32(t.choiceCriteria),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoTargetingChoiceModel)return t;var i=new c.ProtoTargetingChoiceModel;switch(t.choiceCriteria){case"Only":case 0:i.choiceCriteria=0;break;case"Except":case 1:i.choiceCriteria=1}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoLiveMediaMetadataResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.startDate="",t.prototype.outputUrl="",t.prototype.thumbnailUrl="",t.prototype.altText="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLiveMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.startDate=t.string();break;case 2:s.outputUrl=t.string();break;case 3:s.thumbnailUrl=t.string();break;case 4:s.altText=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.startDate="",e.outputUrl="",e.thumbnailUrl="",e.altText=""),null!=t.startDate&&t.hasOwnProperty("startDate")&&(e.startDate=t.startDate),null!=t.outputUrl&&t.hasOwnProperty("outputUrl")&&(e.outputUrl=t.outputUrl),null!=t.thumbnailUrl&&t.hasOwnProperty("thumbnailUrl")&&(e.thumbnailUrl=t.thumbnailUrl),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),e},t}(),c.ProtoLoggingLevelEnum=function(){var t={},i=Object.create(t);return i[t[0]="FATAL"]=0,i[t[1]="WARNING"]=1,i[t[2]="INFO"]=2,i}(),c.ProtoLoggingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.message="",t.prototype.version=0,t.prototype.level=0,t.prototype.callStack="",t.prototype.pageUrl="",t.prototype.exception="",t.prototype.sessionId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.message&&t.hasOwnProperty("message")&&i.uint32(10).string(t.message),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(16).int32(t.version),null!=t.level&&t.hasOwnProperty("level")&&i.uint32(24).int32(t.level),null!=t.callStack&&t.hasOwnProperty("callStack")&&i.uint32(34).string(t.callStack),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(42).string(t.pageUrl),null!=t.exception&&t.hasOwnProperty("exception")&&i.uint32(50).string(t.exception),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(58).string(t.sessionId),i},t.fromObject=function(t){if(t instanceof c.ProtoLoggingRequest)return t;var i=new c.ProtoLoggingRequest;switch(null!=t.message&&(i.message=String(t.message)),null!=t.version&&(i.version=0|t.version),t.level){case"FATAL":case 0:i.level=0;break;case"WARNING":case 1:i.level=1;break;case"INFO":case 2:i.level=2}return null!=t.callStack&&(i.callStack=String(t.callStack)),null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.exception&&(i.exception=String(t.exception)),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoSpriteSheet=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.file="",t.prototype.height=0,t.prototype.count=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSpriteSheet;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.file=t.string();break;case 2:s.height=t.int32();break;case 3:s.count=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.file="",e.height=0,e.count=0),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.count&&t.hasOwnProperty("count")&&(e.count=t.count),e},t}(),c.ProtoTrack=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTrack;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.file=""),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoCustomField=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.name="",t.prototype.value="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCustomField;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.name=t.string();break;case 2:s.value=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.name="",e.value=""),null!=t.name&&t.hasOwnProperty("name")&&(e.name=t.name),null!=t.value&&t.hasOwnProperty("value")&&(e.value=t.value),e},t}(),c.ProtoMediaMetadataResponse=function(){function t(t){if(this.keywordList=[],this.trackList=[],this.renditionList=[],this.customFields=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.description="",t.prototype.duration=0,t.prototype.clickUrl="",t.prototype.keywordList=o.emptyArray,t.prototype.trackList=o.emptyArray,t.prototype.spriteSheet=null,t.prototype.thumbnail="",t.prototype.renditionList=o.emptyArray,t.prototype.customFields=o.emptyArray,t.prototype.hlsFilePath="",t.prototype.languageId="",t.prototype.sourceItemId="",t.prototype.altText="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.description=t.string();break;case 3:s.duration=t.int32();break;case 4:s.clickUrl=t.string();break;case 5:s.keywordList&&s.keywordList.length||(s.keywordList=[]),s.keywordList.push(t.string());break;case 6:s.trackList&&s.trackList.length||(s.trackList=[]),s.trackList.push(c.ProtoTrack.decode(t,t.uint32()));break;case 7:s.spriteSheet=c.ProtoSpriteSheet.decode(t,t.uint32());break;case 8:s.thumbnail=t.string();break;case 9:s.renditionList&&s.renditionList.length||(s.renditionList=[]),s.renditionList.push(c.ProtoRendition.decode(t,t.uint32()));break;case 10:s.customFields&&s.customFields.length||(s.customFields=[]),s.customFields.push(c.ProtoCustomField.decode(t,t.uint32()));break;case 11:s.hlsFilePath=t.string();break;case 12:s.languageId=t.string();break;case 13:s.sourceItemId=t.string();break;case 14:s.altText=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.keywordList=[],e.trackList=[],e.renditionList=[],e.customFields=[]),i.defaults&&(e.title="",e.description="",e.duration=0,e.clickUrl="",e.spriteSheet=null,e.thumbnail="",e.hlsFilePath="",e.languageId="",e.sourceItemId="",e.altText=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.description&&t.hasOwnProperty("description")&&(e.description=t.description),null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&(e.clickUrl=t.clickUrl),t.keywordList&&t.keywordList.length){e.keywordList=[];for(var s=0;s<t.keywordList.length;++s)e.keywordList[s]=t.keywordList[s]}if(t.trackList&&t.trackList.length){e.trackList=[];for(s=0;s<t.trackList.length;++s)e.trackList[s]=c.ProtoTrack.toObject(t.trackList[s],i)}if(null!=t.spriteSheet&&t.hasOwnProperty("spriteSheet")&&(e.spriteSheet=c.ProtoSpriteSheet.toObject(t.spriteSheet,i)),null!=t.thumbnail&&t.hasOwnProperty("thumbnail")&&(e.thumbnail=t.thumbnail),t.renditionList&&t.renditionList.length){e.renditionList=[];for(s=0;s<t.renditionList.length;++s)e.renditionList[s]=c.ProtoRendition.toObject(t.renditionList[s],i)}if(t.customFields&&t.customFields.length){e.customFields=[];for(s=0;s<t.customFields.length;++s)e.customFields[s]=c.ProtoCustomField.toObject(t.customFields[s],i)}return null!=t.hlsFilePath&&t.hasOwnProperty("hlsFilePath")&&(e.hlsFilePath=t.hlsFilePath),null!=t.languageId&&t.hasOwnProperty("languageId")&&(e.languageId=t.languageId),null!=t.sourceItemId&&t.hasOwnProperty("sourceItemId")&&(e.sourceItemId=t.sourceItemId),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),e},t}(),c.ProtoMediaTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Video"]=1,i}(),c.ProtoRtbRequest=function(){function t(t){if(this.lineItems={},this.customMacros={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.metadata=null,t.prototype.coppa=!1,t.prototype.refererUrl="",t.prototype.testMode=!1,t.prototype.videoWidth=0,t.prototype.videoHeight=0,t.prototype.gdprCompliant=!1,t.prototype.soundOn=!1,t.prototype.gdprConsentData="",t.prototype.explorationMode=!1,t.prototype.viewability=!1,t.prototype.outstream=!1,t.prototype.domainURL="",t.prototype.isClickToPlay=!1,t.prototype.appVersion="",t.prototype.deviceID="",t.prototype.lineItems=o.emptyObject,t.prototype.isCcpaBlockingUserInfo=!1,t.prototype.usPrivacyString="",t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.gdprConsentMode=0,t.prototype.maxAdDuration=180,t.prototype.customMacros=o.emptyObject,t.encode=function(t,i){if(i||(i=a.create()),null!=t.metadata&&t.hasOwnProperty("metadata")&&c.MetadataModel.encode(t.metadata,i.uint32(10).fork()).ldelim(),null!=t.coppa&&t.hasOwnProperty("coppa")&&i.uint32(32).bool(t.coppa),null!=t.refererUrl&&t.hasOwnProperty("refererUrl")&&i.uint32(42).string(t.refererUrl),null!=t.testMode&&t.hasOwnProperty("testMode")&&i.uint32(48).bool(t.testMode),null!=t.videoWidth&&t.hasOwnProperty("videoWidth")&&i.uint32(56).int32(t.videoWidth),null!=t.videoHeight&&t.hasOwnProperty("videoHeight")&&i.uint32(64).int32(t.videoHeight),null!=t.gdprCompliant&&t.hasOwnProperty("gdprCompliant")&&i.uint32(72).bool(t.gdprCompliant),null!=t.soundOn&&t.hasOwnProperty("soundOn")&&i.uint32(80).bool(t.soundOn),null!=t.gdprConsentData&&t.hasOwnProperty("gdprConsentData")&&i.uint32(90).string(t.gdprConsentData),null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&i.uint32(96).bool(t.explorationMode),null!=t.viewability&&t.hasOwnProperty("viewability")&&i.uint32(104).bool(t.viewability),null!=t.outstream&&t.hasOwnProperty("outstream")&&i.uint32(112).bool(t.outstream),null!=t.domainURL&&t.hasOwnProperty("domainURL")&&i.uint32(130).string(t.domainURL),null!=t.isClickToPlay&&t.hasOwnProperty("isClickToPlay")&&i.uint32(144).bool(t.isClickToPlay),null!=t.appVersion&&t.hasOwnProperty("appVersion")&&i.uint32(170).string(t.appVersion),null!=t.deviceID&&t.hasOwnProperty("deviceID")&&i.uint32(194).string(t.deviceID),null!=t.lineItems&&t.hasOwnProperty("lineItems"))for(var e=Object.keys(t.lineItems),s=0;s<e.length;++s)i.uint32(202).fork().uint32(10).string(e[s]),c.ProtoRtbRequestLineItemEntry.encode(t.lineItems[e[s]],i.uint32(18).fork()).ldelim().ldelim();if(null!=t.isCcpaBlockingUserInfo&&t.hasOwnProperty("isCcpaBlockingUserInfo")&&i.uint32(208).bool(t.isCcpaBlockingUserInfo),null!=t.usPrivacyString&&t.hasOwnProperty("usPrivacyString")&&i.uint32(218).string(t.usPrivacyString),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&i.uint32(256).int32(t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&i.uint32(264).int32(t.skipAdAfter),null!=t.gdprConsentMode&&t.hasOwnProperty("gdprConsentMode")&&i.uint32(288).int32(t.gdprConsentMode),null!=t.maxAdDuration&&t.hasOwnProperty("maxAdDuration")&&i.uint32(296).int32(t.maxAdDuration),null!=t.customMacros&&t.hasOwnProperty("customMacros"))for(e=Object.keys(t.customMacros),s=0;s<e.length;++s)i.uint32(306).fork().uint32(10).string(e[s]).uint32(18).string(t.customMacros[e[s]]).ldelim();return i},t.fromObject=function(t){if(t instanceof c.ProtoRtbRequest)return t;var i=new c.ProtoRtbRequest;if(null!=t.metadata){if("object"!=typeof t.metadata)throw TypeError(".ProtoRtbRequest.metadata: object expected");i.metadata=c.MetadataModel.fromObject(t.metadata)}if(null!=t.coppa&&(i.coppa=Boolean(t.coppa)),null!=t.refererUrl&&(i.refererUrl=String(t.refererUrl)),null!=t.testMode&&(i.testMode=Boolean(t.testMode)),null!=t.videoWidth&&(i.videoWidth=0|t.videoWidth),null!=t.videoHeight&&(i.videoHeight=0|t.videoHeight),null!=t.gdprCompliant&&(i.gdprCompliant=Boolean(t.gdprCompliant)),null!=t.soundOn&&(i.soundOn=Boolean(t.soundOn)),null!=t.gdprConsentData&&(i.gdprConsentData=String(t.gdprConsentData)),null!=t.explorationMode&&(i.explorationMode=Boolean(t.explorationMode)),null!=t.viewability&&(i.viewability=Boolean(t.viewability)),null!=t.outstream&&(i.outstream=Boolean(t.outstream)),null!=t.domainURL&&(i.domainURL=String(t.domainURL)),null!=t.isClickToPlay&&(i.isClickToPlay=Boolean(t.isClickToPlay)),null!=t.appVersion&&(i.appVersion=String(t.appVersion)),null!=t.deviceID&&(i.deviceID=String(t.deviceID)),t.lineItems){if("object"!=typeof t.lineItems)throw TypeError(".ProtoRtbRequest.lineItems: object expected");i.lineItems={};for(var e=Object.keys(t.lineItems),s=0;s<e.length;++s){if("object"!=typeof t.lineItems[e[s]])throw TypeError(".ProtoRtbRequest.lineItems: object expected");i.lineItems[e[s]]=c.ProtoRtbRequestLineItemEntry.fromObject(t.lineItems[e[s]])}}switch(null!=t.isCcpaBlockingUserInfo&&(i.isCcpaBlockingUserInfo=Boolean(t.isCcpaBlockingUserInfo)),null!=t.usPrivacyString&&(i.usPrivacyString=String(t.usPrivacyString)),t.adSkippability){case"IfLongerThan31Sec":case 0:i.adSkippability=0;break;case"Always":case 1:i.adSkippability=1;break;case"NoRestrictions":case 2:i.adSkippability=2}switch(null!=t.skipAdAfter&&(i.skipAdAfter=0|t.skipAdAfter),t.gdprConsentMode){case"Unknown":case 0:i.gdprConsentMode=0;break;case"NoCmp":case 1:i.gdprConsentMode=1;break;case"NoConsent":case 2:i.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:i.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:i.gdprConsentMode=4;break;case"AllGood":case 5:i.gdprConsentMode=5}if(null!=t.maxAdDuration&&(i.maxAdDuration=0|t.maxAdDuration),t.customMacros){if("object"!=typeof t.customMacros)throw TypeError(".ProtoRtbRequest.customMacros: object expected");i.customMacros={};for(e=Object.keys(t.customMacros),s=0;s<e.length;++s)i.customMacros[e[s]]=String(t.customMacros[e[s]])}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbRequestLineItemEntry=function(){function t(t){if(this.ignoredFloorPriceFactorIndexes=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.availableRequests=0,t.prototype.cachedFloorPrice=0,t.prototype.ignoredFloorPriceFactorIndexes=o.emptyArray,t.prototype.gdprConsent=!1,t.prototype.publisherLineItemId="",t.prototype.slotWidth=0,t.prototype.slotHeight=0,t.encode=function(t,i){if(i||(i=a.create()),null!=t.availableRequests&&t.hasOwnProperty("availableRequests")&&i.uint32(8).int32(t.availableRequests),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&i.uint32(17).double(t.cachedFloorPrice),null!=t.ignoredFloorPriceFactorIndexes&&t.ignoredFloorPriceFactorIndexes.length){i.uint32(26).fork();for(var e=0;e<t.ignoredFloorPriceFactorIndexes.length;++e)i.int32(t.ignoredFloorPriceFactorIndexes[e]);i.ldelim()}return null!=t.gdprConsent&&t.hasOwnProperty("gdprConsent")&&i.uint32(32).bool(t.gdprConsent),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.slotWidth&&t.hasOwnProperty("slotWidth")&&i.uint32(48).int32(t.slotWidth),null!=t.slotHeight&&t.hasOwnProperty("slotHeight")&&i.uint32(56).int32(t.slotHeight),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbRequestLineItemEntry;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.availableRequests=t.int32();break;case 2:s.cachedFloorPrice=t.double();break;case 3:if(s.ignoredFloorPriceFactorIndexes&&s.ignoredFloorPriceFactorIndexes.length||(s.ignoredFloorPriceFactorIndexes=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.ignoredFloorPriceFactorIndexes.push(t.int32());else s.ignoredFloorPriceFactorIndexes.push(t.int32());break;case 4:s.gdprConsent=t.bool();break;case 5:s.publisherLineItemId=t.string();break;case 6:s.slotWidth=t.int32();break;case 7:s.slotHeight=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoRtbRequestLineItemEntry)return t;var i=new c.ProtoRtbRequestLineItemEntry;if(null!=t.availableRequests&&(i.availableRequests=0|t.availableRequests),null!=t.cachedFloorPrice&&(i.cachedFloorPrice=Number(t.cachedFloorPrice)),t.ignoredFloorPriceFactorIndexes){if(!Array.isArray(t.ignoredFloorPriceFactorIndexes))throw TypeError(".ProtoRtbRequestLineItemEntry.ignoredFloorPriceFactorIndexes: array expected");i.ignoredFloorPriceFactorIndexes=[];for(var e=0;e<t.ignoredFloorPriceFactorIndexes.length;++e)i.ignoredFloorPriceFactorIndexes[e]=0|t.ignoredFloorPriceFactorIndexes[e]}return null!=t.gdprConsent&&(i.gdprConsent=Boolean(t.gdprConsent)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.slotWidth&&(i.slotWidth=0|t.slotWidth),null!=t.slotHeight&&(i.slotHeight=0|t.slotHeight),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.ignoredFloorPriceFactorIndexes=[]),i.defaults&&(e.availableRequests=0,e.cachedFloorPrice=0,e.gdprConsent=!1,e.publisherLineItemId="",e.slotWidth=0,e.slotHeight=0),null!=t.availableRequests&&t.hasOwnProperty("availableRequests")&&(e.availableRequests=t.availableRequests),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&(e.cachedFloorPrice=i.json&&!isFinite(t.cachedFloorPrice)?String(t.cachedFloorPrice):t.cachedFloorPrice),t.ignoredFloorPriceFactorIndexes&&t.ignoredFloorPriceFactorIndexes.length){e.ignoredFloorPriceFactorIndexes=[];for(var s=0;s<t.ignoredFloorPriceFactorIndexes.length;++s)e.ignoredFloorPriceFactorIndexes[s]=t.ignoredFloorPriceFactorIndexes[s]}return null!=t.gdprConsent&&t.hasOwnProperty("gdprConsent")&&(e.gdprConsent=t.gdprConsent),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.slotWidth&&t.hasOwnProperty("slotWidth")&&(e.slotWidth=t.slotWidth),null!=t.slotHeight&&t.hasOwnProperty("slotHeight")&&(e.slotHeight=t.slotHeight),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbResponse=function(){function t(t){if(this.lineItemResponses=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.lineItemResponses=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 3:s.lineItemResponses&&s.lineItemResponses.length||(s.lineItemResponses=[]),s.lineItemResponses.push(c.ProtoRtbLineItem.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.lineItemResponses=[]),t.lineItemResponses&&t.lineItemResponses.length){e.lineItemResponses=[];for(var s=0;s<t.lineItemResponses.length;++s)e.lineItemResponses[s]=c.ProtoRtbLineItem.toObject(t.lineItemResponses[s],i)}return e},t}(),c.ProtoRtbBid=function(){function t(t){if(this.billingNoticeUrlList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.winNoticeUrl="",t.prototype.adQualityCheckUrl="",t.prototype.vastTag="",t.prototype.encryptedPrice="",t.prototype.creativeId="",t.prototype.seatId="",t.prototype.adomain="",t.prototype.syncedUser=!1,t.prototype.requestedFloorPrice=0,t.prototype.floorPriceFactorIndex=0,t.prototype.campaignId="",t.prototype.width=0,t.prototype.height=0,t.prototype.billingNoticeUrlList=o.emptyArray,t.prototype.mime="text/html",t.prototype.gtkpbp=0,t.prototype.successRate=0,t.prototype.impressionTimeSpent=0,t.prototype.bidRate=0,t.prototype.dspId="",t.prototype.cnxBidId="",t.encode=function(t,i){if(i||(i=a.create()),null!=t.winNoticeUrl&&t.hasOwnProperty("winNoticeUrl")&&i.uint32(18).string(t.winNoticeUrl),null!=t.adQualityCheckUrl&&t.hasOwnProperty("adQualityCheckUrl")&&i.uint32(26).string(t.adQualityCheckUrl),null!=t.vastTag&&t.hasOwnProperty("vastTag")&&i.uint32(34).string(t.vastTag),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&i.uint32(50).string(t.encryptedPrice),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(58).string(t.creativeId),null!=t.seatId&&t.hasOwnProperty("seatId")&&i.uint32(66).string(t.seatId),null!=t.adomain&&t.hasOwnProperty("adomain")&&i.uint32(74).string(t.adomain),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(80).bool(t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(89).double(t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&i.uint32(96).int32(t.floorPriceFactorIndex),null!=t.campaignId&&t.hasOwnProperty("campaignId")&&i.uint32(106).string(t.campaignId),null!=t.width&&t.hasOwnProperty("width")&&i.uint32(112).int32(t.width),null!=t.height&&t.hasOwnProperty("height")&&i.uint32(120).int32(t.height),null!=t.billingNoticeUrlList&&t.billingNoticeUrlList.length)for(var e=0;e<t.billingNoticeUrlList.length;++e)i.uint32(130).string(t.billingNoticeUrlList[e]);return null!=t.mime&&t.hasOwnProperty("mime")&&i.uint32(138).string(t.mime),null!=t.gtkpbp&&t.hasOwnProperty("gtkpbp")&&i.uint32(145).double(t.gtkpbp),null!=t.successRate&&t.hasOwnProperty("successRate")&&i.uint32(153).double(t.successRate),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&i.uint32(160).int32(t.impressionTimeSpent),null!=t.bidRate&&t.hasOwnProperty("bidRate")&&i.uint32(169).double(t.bidRate),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(178).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(186).string(t.cnxBidId),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbBid;t.pos<e;){var n=t.uint32();switch(n>>>3){case 2:s.winNoticeUrl=t.string();break;case 3:s.adQualityCheckUrl=t.string();break;case 4:s.vastTag=t.string();break;case 6:s.encryptedPrice=t.string();break;case 7:s.creativeId=t.string();break;case 8:s.seatId=t.string();break;case 9:s.adomain=t.string();break;case 10:s.syncedUser=t.bool();break;case 11:s.requestedFloorPrice=t.double();break;case 12:s.floorPriceFactorIndex=t.int32();break;case 13:s.campaignId=t.string();break;case 14:s.width=t.int32();break;case 15:s.height=t.int32();break;case 16:s.billingNoticeUrlList&&s.billingNoticeUrlList.length||(s.billingNoticeUrlList=[]),s.billingNoticeUrlList.push(t.string());break;case 17:s.mime=t.string();break;case 18:s.gtkpbp=t.double();break;case 19:s.successRate=t.double();break;case 20:s.impressionTimeSpent=t.int32();break;case 21:s.bidRate=t.double();break;case 22:s.dspId=t.string();break;case 23:s.cnxBidId=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoRtbBid)return t;var i=new c.ProtoRtbBid;if(null!=t.winNoticeUrl&&(i.winNoticeUrl=String(t.winNoticeUrl)),null!=t.adQualityCheckUrl&&(i.adQualityCheckUrl=String(t.adQualityCheckUrl)),null!=t.vastTag&&(i.vastTag=String(t.vastTag)),null!=t.encryptedPrice&&(i.encryptedPrice=String(t.encryptedPrice)),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.seatId&&(i.seatId=String(t.seatId)),null!=t.adomain&&(i.adomain=String(t.adomain)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.floorPriceFactorIndex&&(i.floorPriceFactorIndex=0|t.floorPriceFactorIndex),null!=t.campaignId&&(i.campaignId=String(t.campaignId)),null!=t.width&&(i.width=0|t.width),null!=t.height&&(i.height=0|t.height),t.billingNoticeUrlList){if(!Array.isArray(t.billingNoticeUrlList))throw TypeError(".ProtoRtbBid.billingNoticeUrlList: array expected");i.billingNoticeUrlList=[];for(var e=0;e<t.billingNoticeUrlList.length;++e)i.billingNoticeUrlList[e]=String(t.billingNoticeUrlList[e])}return null!=t.mime&&(i.mime=String(t.mime)),null!=t.gtkpbp&&(i.gtkpbp=Number(t.gtkpbp)),null!=t.successRate&&(i.successRate=Number(t.successRate)),null!=t.impressionTimeSpent&&(i.impressionTimeSpent=0|t.impressionTimeSpent),null!=t.bidRate&&(i.bidRate=Number(t.bidRate)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.billingNoticeUrlList=[]),i.defaults&&(e.winNoticeUrl="",e.adQualityCheckUrl="",e.vastTag="",e.encryptedPrice="",e.creativeId="",e.seatId="",e.adomain="",e.syncedUser=!1,e.requestedFloorPrice=0,e.floorPriceFactorIndex=0,e.campaignId="",e.width=0,e.height=0,e.mime="text/html",e.gtkpbp=0,e.successRate=0,e.impressionTimeSpent=0,e.bidRate=0,e.dspId="",e.cnxBidId=""),null!=t.winNoticeUrl&&t.hasOwnProperty("winNoticeUrl")&&(e.winNoticeUrl=t.winNoticeUrl),null!=t.adQualityCheckUrl&&t.hasOwnProperty("adQualityCheckUrl")&&(e.adQualityCheckUrl=t.adQualityCheckUrl),null!=t.vastTag&&t.hasOwnProperty("vastTag")&&(e.vastTag=t.vastTag),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&(e.encryptedPrice=t.encryptedPrice),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&(e.creativeId=t.creativeId),null!=t.seatId&&t.hasOwnProperty("seatId")&&(e.seatId=t.seatId),null!=t.adomain&&t.hasOwnProperty("adomain")&&(e.adomain=t.adomain),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&(e.syncedUser=t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&(e.requestedFloorPrice=i.json&&!isFinite(t.requestedFloorPrice)?String(t.requestedFloorPrice):t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&(e.floorPriceFactorIndex=t.floorPriceFactorIndex),null!=t.campaignId&&t.hasOwnProperty("campaignId")&&(e.campaignId=t.campaignId),null!=t.width&&t.hasOwnProperty("width")&&(e.width=t.width),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),t.billingNoticeUrlList&&t.billingNoticeUrlList.length){e.billingNoticeUrlList=[];for(var s=0;s<t.billingNoticeUrlList.length;++s)e.billingNoticeUrlList[s]=t.billingNoticeUrlList[s]}return null!=t.mime&&t.hasOwnProperty("mime")&&(e.mime=t.mime),null!=t.gtkpbp&&t.hasOwnProperty("gtkpbp")&&(e.gtkpbp=i.json&&!isFinite(t.gtkpbp)?String(t.gtkpbp):t.gtkpbp),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.dspId&&t.hasOwnProperty("dspId")&&(e.dspId=t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&(e.cnxBidId=t.cnxBidId),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbNoBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.connatixReason=0,t.prototype.partnerReason=0,t.prototype.syncedUser=!1,t.prototype.requestedFloorPrice=0,t.prototype.floorPriceFactorIndex=0,t.prototype.partnerCustomHeaders="",t.encode=function(t,i){return i||(i=a.create()),null!=t.connatixReason&&t.hasOwnProperty("connatixReason")&&i.uint32(8).int32(t.connatixReason),null!=t.partnerReason&&t.hasOwnProperty("partnerReason")&&i.uint32(16).int32(t.partnerReason),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(33).double(t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&i.uint32(40).int32(t.floorPriceFactorIndex),null!=t.partnerCustomHeaders&&t.hasOwnProperty("partnerCustomHeaders")&&i.uint32(50).string(t.partnerCustomHeaders),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbNoBid;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.connatixReason=t.int32();break;case 2:s.partnerReason=t.int32();break;case 3:s.syncedUser=t.bool();break;case 4:s.requestedFloorPrice=t.double();break;case 5:s.floorPriceFactorIndex=t.int32();break;case 6:s.partnerCustomHeaders=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoRtbNoBid)return t;var i=new c.ProtoRtbNoBid;switch(t.connatixReason){case"RequestException":case 0:i.connatixReason=0;break;case"Timeout":case 1:i.connatixReason=1;break;case"EmptyResponse":case 2:i.connatixReason=2;break;case"InvalidResponse":case 3:i.connatixReason=3;break;case"NoBid":case 4:i.connatixReason=4;break;case"BidBelowFloor":case 5:i.connatixReason=5;break;case"DealIdMismatch":case 6:i.connatixReason=6;break;case"CsInvalidResponse":case 7:i.connatixReason=7;break;case"CsRequestException":case 8:i.connatixReason=8;break;case"CsEmptyResponse":case 9:i.connatixReason=9;break;case"NoLibInPage":case 11:i.connatixReason=11}switch(t.partnerReason){case"Unknown":case 0:i.partnerReason=0;break;case"TechnicalError":case 1:i.partnerReason=1;break;case"InvalidRequest":case 2:i.partnerReason=2;break;case"KnownWebSpider":case 3:i.partnerReason=3;break;case"SuspectedNonHumanTraffic":case 4:i.partnerReason=4;break;case"CloudIP":case 5:i.partnerReason=5;break;case"UnsupportedDevice":case 6:i.partnerReason=6;break;case"BlockedPublisher":case 7:i.partnerReason=7;break;case"UnmatchedUser":case 8:i.partnerReason=8;break;case"DailyReaderCapMet":case 9:i.partnerReason=9;break;case"DailyDomainCapMet":case 10:i.partnerReason=10}return null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.floorPriceFactorIndex&&(i.floorPriceFactorIndex=0|t.floorPriceFactorIndex),null!=t.partnerCustomHeaders&&(i.partnerCustomHeaders=String(t.partnerCustomHeaders)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.connatixReason=i.enums===String?"RequestException":0,e.partnerReason=i.enums===String?"Unknown":0,e.syncedUser=!1,e.requestedFloorPrice=0,e.floorPriceFactorIndex=0,e.partnerCustomHeaders=""),null!=t.connatixReason&&t.hasOwnProperty("connatixReason")&&(e.connatixReason=i.enums===String?c.ConnatixNoBidReasonEnum[t.connatixReason]:t.connatixReason),null!=t.partnerReason&&t.hasOwnProperty("partnerReason")&&(e.partnerReason=i.enums===String?c.PartnerNoBidReasonEnum[t.partnerReason]:t.partnerReason),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&(e.syncedUser=t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&(e.requestedFloorPrice=i.json&&!isFinite(t.requestedFloorPrice)?String(t.requestedFloorPrice):t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&(e.floorPriceFactorIndex=t.floorPriceFactorIndex),null!=t.partnerCustomHeaders&&t.hasOwnProperty("partnerCustomHeaders")&&(e.partnerCustomHeaders=t.partnerCustomHeaders),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbLineItem=function(){function t(t){if(this.bids=[],this.noBids=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.id="",t.prototype.cachedFloorPrice=0,t.prototype.bids=o.emptyArray,t.prototype.noBids=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.id&&t.hasOwnProperty("id")&&i.uint32(10).string(t.id),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&i.uint32(17).double(t.cachedFloorPrice),null!=t.bids&&t.bids.length)for(var e=0;e<t.bids.length;++e)c.ProtoRtbBid.encode(t.bids[e],i.uint32(26).fork()).ldelim();if(null!=t.noBids&&t.noBids.length)for(e=0;e<t.noBids.length;++e)c.ProtoRtbNoBid.encode(t.noBids[e],i.uint32(34).fork()).ldelim();return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.id=t.string();break;case 2:s.cachedFloorPrice=t.double();break;case 3:s.bids&&s.bids.length||(s.bids=[]),s.bids.push(c.ProtoRtbBid.decode(t,t.uint32()));break;case 4:s.noBids&&s.noBids.length||(s.noBids=[]),s.noBids.push(c.ProtoRtbNoBid.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoRtbLineItem)return t;var i=new c.ProtoRtbLineItem;if(null!=t.id&&(i.id=String(t.id)),null!=t.cachedFloorPrice&&(i.cachedFloorPrice=Number(t.cachedFloorPrice)),t.bids){if(!Array.isArray(t.bids))throw TypeError(".ProtoRtbLineItem.bids: array expected");i.bids=[];for(var e=0;e<t.bids.length;++e){if("object"!=typeof t.bids[e])throw TypeError(".ProtoRtbLineItem.bids: object expected");i.bids[e]=c.ProtoRtbBid.fromObject(t.bids[e])}}if(t.noBids){if(!Array.isArray(t.noBids))throw TypeError(".ProtoRtbLineItem.noBids: array expected");i.noBids=[];for(e=0;e<t.noBids.length;++e){if("object"!=typeof t.noBids[e])throw TypeError(".ProtoRtbLineItem.noBids: object expected");i.noBids[e]=c.ProtoRtbNoBid.fromObject(t.noBids[e])}}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.bids=[],e.noBids=[]),i.defaults&&(e.id="",e.cachedFloorPrice=0),null!=t.id&&t.hasOwnProperty("id")&&(e.id=t.id),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&(e.cachedFloorPrice=i.json&&!isFinite(t.cachedFloorPrice)?String(t.cachedFloorPrice):t.cachedFloorPrice),t.bids&&t.bids.length){e.bids=[];for(var s=0;s<t.bids.length;++s)e.bids[s]=c.ProtoRtbBid.toObject(t.bids[s],i)}if(t.noBids&&t.noBids.length){e.noBids=[];for(s=0;s<t.noBids.length;++s)e.noBids[s]=c.ProtoRtbNoBid.toObject(t.noBids[s],i)}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ConnatixNoBidReasonEnum=function(){var t={},i=Object.create(t);return i[t[0]="RequestException"]=0,i[t[1]="Timeout"]=1,i[t[2]="EmptyResponse"]=2,i[t[3]="InvalidResponse"]=3,i[t[4]="NoBid"]=4,i[t[5]="BidBelowFloor"]=5,i[t[6]="DealIdMismatch"]=6,i[t[7]="CsInvalidResponse"]=7,i[t[8]="CsRequestException"]=8,i[t[9]="CsEmptyResponse"]=9,i[t[11]="NoLibInPage"]=11,i}(),c.PartnerNoBidReasonEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="TechnicalError"]=1,i[t[2]="InvalidRequest"]=2,i[t[3]="KnownWebSpider"]=3,i[t[4]="SuspectedNonHumanTraffic"]=4,i[t[5]="CloudIP"]=5,i[t[6]="UnsupportedDevice"]=6,i[t[7]="BlockedPublisher"]=7,i[t[8]="UnmatchedUser"]=8,i[t[9]="DailyReaderCapMet"]=9,i[t[10]="DailyDomainCapMet"]=10,i}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoAdClickTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.type=1,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(26).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(34).string(t.advertiserLineItemId),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(40).int32(t.type),i},t.fromObject=function(t){if(t instanceof c.ProtoAdClickTrackingRequest)return t;var i=new c.ProtoAdClickTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoAdClickTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),t.type){case"AdClick":case 1:i.type=1;break;case"AdClickThrough":case 2:i.type=2;break;case"AdSkipClick":case 3:i.type=3;break;case"VolumeClick":case 4:i.type=4;break;case"PauseClick":case 5:i.type=5;break;case"PlayClick":case 6:i.type=6;break;case"FullScreenClick":case 7:i.type=7;break;case"MuteClick":case 8:i.type=8;break;case"UnmuteClick":case 9:i.type=9}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdClickTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="AdClick"]=1,i[t[2]="AdClickThrough"]=2,i[t[3]="AdSkipClick"]=3,i[t[4]="VolumeClick"]=4,i[t[5]="PauseClick"]=5,i[t[6]="PlayClick"]=6,i[t[7]="FullScreenClick"]=7,i[t[8]="MuteClick"]=8,i[t[9]="UnmuteClick"]=9,i}(),c.ProtoAdOpportunityRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.sessionId="",t.prototype.trackingRequestMeta=null,t.prototype.adBreak=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(10).string(t.sessionId),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(18).fork()).ldelim(),null!=t.adBreak&&t.hasOwnProperty("adBreak")&&i.uint32(24).int32(t.adBreak),i},t.fromObject=function(t){if(t instanceof c.ProtoAdOpportunityRequest)return t;var i=new c.ProtoAdOpportunityRequest;if(null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoAdOpportunityRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(t.adBreak){case"None":case 0:i.adBreak=0;break;case"PreRoll":case 1:i.adBreak=1;break;case"MidRoll":case 2:i.adBreak=2;break;case"PostRoll":case 3:i.adBreak=3}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdsourceTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="Vpaid"]=1,i[t[2]="VastMedia"]=2,i[t[3]="CnxMedia"]=3,i[t[4]="Jw"]=4,i[t[5]="Ima"]=5,i[t[6]="AOL"]=6,i}(),c.ProtoGdprConsentModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="NoCmp"]=1,i[t[2]="NoConsent"]=2,i[t[3]="NoConnatixConsent"]=3,i[t[4]="NotAllDemandConsent"]=4,i[t[5]="AllGood"]=5,i}(),c.ProtoPrebid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.reason=0,t.prototype.rtbRequestNumber=0,t.prototype.partnerReason=0,t.prototype.requestedFloorPrice=0,t.prototype.partnerCustomHeaders="",t.prototype.prebidJsBidderName="",t.encode=function(t,i){return i||(i=a.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.reason&&t.hasOwnProperty("reason")&&i.uint32(40).int32(t.reason),null!=t.rtbRequestNumber&&t.hasOwnProperty("rtbRequestNumber")&&i.uint32(48).int32(t.rtbRequestNumber),null!=t.partnerReason&&t.hasOwnProperty("partnerReason")&&i.uint32(56).int32(t.partnerReason),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(65).double(t.requestedFloorPrice),null!=t.partnerCustomHeaders&&t.hasOwnProperty("partnerCustomHeaders")&&i.uint32(74).string(t.partnerCustomHeaders),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(98).string(t.prebidJsBidderName),i},t.fromObject=function(t){if(t instanceof c.ProtoPrebid)return t;var i=new c.ProtoPrebid;switch(null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),t.reason){case"RequestException":case 0:i.reason=0;break;case"Timeout":case 1:i.reason=1;break;case"EmptyResponse":case 2:i.reason=2;break;case"InvalidResponse":case 3:i.reason=3;break;case"NoBid":case 4:i.reason=4;break;case"BidBelowFloor":case 5:i.reason=5;break;case"DealIdMismatch":case 6:i.reason=6;break;case"CsInvalidResponse":case 7:i.reason=7;break;case"CsRequestException":case 8:i.reason=8;break;case"CsEmptyResponse":case 9:i.reason=9;break;case"NoLibInPage":case 11:i.reason=11}switch(null!=t.rtbRequestNumber&&(i.rtbRequestNumber=0|t.rtbRequestNumber),t.partnerReason){case"Unknown":case 0:i.partnerReason=0;break;case"TechnicalError":case 1:i.partnerReason=1;break;case"InvalidRequest":case 2:i.partnerReason=2;break;case"KnownWebSpider":case 3:i.partnerReason=3;break;case"SuspectedNonHumanTraffic":case 4:i.partnerReason=4;break;case"CloudIP":case 5:i.partnerReason=5;break;case"UnsupportedDevice":case 6:i.partnerReason=6;break;case"BlockedPublisher":case 7:i.partnerReason=7;break;case"UnmatchedUser":case 8:i.partnerReason=8;break;case"DailyReaderCapMet":case 9:i.partnerReason=9;break;case"DailyDomainCapMet":case 10:i.partnerReason=10}return null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.partnerCustomHeaders&&(i.partnerCustomHeaders=String(t.partnerCustomHeaders)),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.rtbRequestNumber=0,t.prototype.creativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.encryptedPrice="",t.prototype.requestedFloorPrice=0,t.prototype.prebidJsBidderName="",t.prototype.customClientPrice=0,t.prototype.dspId="",t.prototype.cnxBidId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.rtbRequestNumber&&t.hasOwnProperty("rtbRequestNumber")&&i.uint32(40).int32(t.rtbRequestNumber),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(50).string(t.creativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(58).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(66).string(t.rtbAdomain),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&i.uint32(74).string(t.encryptedPrice),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(81).double(t.requestedFloorPrice),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(106).string(t.prebidJsBidderName),null!=t.customClientPrice&&t.hasOwnProperty("customClientPrice")&&i.uint32(113).double(t.customClientPrice),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(122).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(130).string(t.cnxBidId),i},t.fromObject=function(t){if(t instanceof c.ProtoBid)return t;var i=new c.ProtoBid;return null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.rtbRequestNumber&&(i.rtbRequestNumber=0|t.rtbRequestNumber),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),null!=t.encryptedPrice&&(i.encryptedPrice=String(t.encryptedPrice)),null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),null!=t.customClientPrice&&(i.customClientPrice=Number(t.customClientPrice)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPostBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.error="",t.prototype.loaded=!1,t.prototype.creativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.adsourceType=0,t.prototype.vastMediaType="",t.prototype.adPodSlotPosition=0,t.prototype.prebidJsBidderName="",t.prototype.dspId="",t.prototype.cnxBidId="",t.prototype.winToAdLoadedTime=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.error&&t.hasOwnProperty("error")&&i.uint32(42).string(t.error),null!=t.loaded&&t.hasOwnProperty("loaded")&&i.uint32(48).bool(t.loaded),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(58).string(t.creativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(66).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(74).string(t.rtbAdomain),null!=t.adsourceType&&t.hasOwnProperty("adsourceType")&&i.uint32(80).int32(t.adsourceType),null!=t.vastMediaType&&t.hasOwnProperty("vastMediaType")&&i.uint32(90).string(t.vastMediaType),null!=t.adPodSlotPosition&&t.hasOwnProperty("adPodSlotPosition")&&i.uint32(96).int32(t.adPodSlotPosition),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(106).string(t.prebidJsBidderName),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(114).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(122).string(t.cnxBidId),null!=t.winToAdLoadedTime&&t.hasOwnProperty("winToAdLoadedTime")&&i.uint32(128).int32(t.winToAdLoadedTime),i},t.fromObject=function(t){if(t instanceof c.ProtoPostBid)return t;var i=new c.ProtoPostBid;switch(null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.error&&(i.error=String(t.error)),null!=t.loaded&&(i.loaded=Boolean(t.loaded)),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),t.adsourceType){case"Unknown":case 0:i.adsourceType=0;break;case"Vpaid":case 1:i.adsourceType=1;break;case"VastMedia":case 2:i.adsourceType=2;break;case"CnxMedia":case 3:i.adsourceType=3;break;case"Jw":case 4:i.adsourceType=4;break;case"Ima":case 5:i.adsourceType=5;break;case"AOL":case 6:i.adsourceType=6}return null!=t.vastMediaType&&(i.vastMediaType=String(t.vastMediaType)),null!=t.adPodSlotPosition&&(i.adPodSlotPosition=0|t.adPodSlotPosition),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),null!=t.winToAdLoadedTime&&(i.winToAdLoadedTime=0|t.winToAdLoadedTime),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoBidTrackingsRequest=function(){function t(t){if(this.prebids=[],this.bids=[],this.postBids=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.prebids=o.emptyArray,t.prototype.bids=o.emptyArray,t.prototype.postBids=o.emptyArray,t.prototype.logEveryting=!1,t.prototype.hasGdprConsentPayload=!1,t.prototype.gdprConsentMode=0,t.prototype.useExploration=!1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.prebids&&t.prebids.length)for(var e=0;e<t.prebids.length;++e)c.ProtoPrebid.encode(t.prebids[e],i.uint32(34).fork()).ldelim();if(null!=t.bids&&t.bids.length)for(e=0;e<t.bids.length;++e)c.ProtoBid.encode(t.bids[e],i.uint32(42).fork()).ldelim();if(null!=t.postBids&&t.postBids.length)for(e=0;e<t.postBids.length;++e)c.ProtoPostBid.encode(t.postBids[e],i.uint32(50).fork()).ldelim();return null!=t.logEveryting&&t.hasOwnProperty("logEveryting")&&i.uint32(56).bool(t.logEveryting),null!=t.hasGdprConsentPayload&&t.hasOwnProperty("hasGdprConsentPayload")&&i.uint32(80).bool(t.hasGdprConsentPayload),null!=t.gdprConsentMode&&t.hasOwnProperty("gdprConsentMode")&&i.uint32(88).int32(t.gdprConsentMode),null!=t.useExploration&&t.hasOwnProperty("useExploration")&&i.uint32(96).bool(t.useExploration),i},t.fromObject=function(t){if(t instanceof c.ProtoBidTrackingsRequest)return t;var i=new c.ProtoBidTrackingsRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoBidTrackingsRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}if(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.prebids){if(!Array.isArray(t.prebids))throw TypeError(".ProtoBidTrackingsRequest.prebids: array expected");i.prebids=[];for(var e=0;e<t.prebids.length;++e){if("object"!=typeof t.prebids[e])throw TypeError(".ProtoBidTrackingsRequest.prebids: object expected");i.prebids[e]=c.ProtoPrebid.fromObject(t.prebids[e])}}if(t.bids){if(!Array.isArray(t.bids))throw TypeError(".ProtoBidTrackingsRequest.bids: array expected");i.bids=[];for(e=0;e<t.bids.length;++e){if("object"!=typeof t.bids[e])throw TypeError(".ProtoBidTrackingsRequest.bids: object expected");i.bids[e]=c.ProtoBid.fromObject(t.bids[e])}}if(t.postBids){if(!Array.isArray(t.postBids))throw TypeError(".ProtoBidTrackingsRequest.postBids: array expected");i.postBids=[];for(e=0;e<t.postBids.length;++e){if("object"!=typeof t.postBids[e])throw TypeError(".ProtoBidTrackingsRequest.postBids: object expected");i.postBids[e]=c.ProtoPostBid.fromObject(t.postBids[e])}}switch(null!=t.logEveryting&&(i.logEveryting=Boolean(t.logEveryting)),null!=t.hasGdprConsentPayload&&(i.hasGdprConsentPayload=Boolean(t.hasGdprConsentPayload)),t.gdprConsentMode){case"Unknown":case 0:i.gdprConsentMode=0;break;case"NoCmp":case 1:i.gdprConsentMode=1;break;case"NoConsent":case 2:i.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:i.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:i.gdprConsentMode=4;break;case"AllGood":case 5:i.gdprConsentMode=5}return null!=t.useExploration&&(i.useExploration=Boolean(t.useExploration)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoMediaClickTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.type=0,t.prototype.clickUrl="",t.prototype.slideTitle="",t.prototype.slideNumber=0,t.prototype.slideMediaType=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(24).int32(t.type),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&i.uint32(34).string(t.clickUrl),null!=t.slideTitle&&t.hasOwnProperty("slideTitle")&&i.uint32(42).string(t.slideTitle),null!=t.slideNumber&&t.hasOwnProperty("slideNumber")&&i.uint32(48).int32(t.slideNumber),null!=t.slideMediaType&&t.hasOwnProperty("slideMediaType")&&i.uint32(56).int32(t.slideMediaType),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoMediaClickTrackingRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.trackingRequestMeta=c.MetadataModel.decode(t,t.uint32());break;case 2:s.mediaGuid=t.string();break;case 3:s.type=t.int32();break;case 4:s.clickUrl=t.string();break;case 5:s.slideTitle=t.string();break;case 6:s.slideNumber=t.int32();break;case 7:s.slideMediaType=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoMediaClickTrackingRequest)return t;var i=new c.ProtoMediaClickTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoMediaClickTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.type){case"Click":case 0:i.type=0;break;case"UrlClick":case 1:i.type=1;break;case"VolumeClick":case 2:i.type=2;break;case"PlayClick":case 3:i.type=3;break;case"PauseClick":case 4:i.type=4;break;case"NextClick":case 5:i.type=5;break;case"PreviousClick":case 6:i.type=6;break;case"MuteClick":case 7:i.type=7;break;case"UnmuteClick":case 8:i.type=8;break;case"CloseClick":case 9:i.type=9;break;case"ScrollClick":case 10:i.type=10;break;case"GalleryClick":case 11:i.type=11;break;case"SubtitleClick":case 12:i.type=12;break;case"FullScreenClick":case 13:i.type=13;break;case"ExitFullScreenClick":case 14:i.type=14}switch(null!=t.clickUrl&&(i.clickUrl=String(t.clickUrl)),null!=t.slideTitle&&(i.slideTitle=String(t.slideTitle)),null!=t.slideNumber&&(i.slideNumber=0|t.slideNumber),t.slideMediaType){case"Image":case 0:i.slideMediaType=0;break;case"Video":case 1:i.slideMediaType=1}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.trackingRequestMeta=null,e.mediaGuid="",e.type=i.enums===String?"Click":0,e.clickUrl="",e.slideTitle="",e.slideNumber=0,e.slideMediaType=i.enums===String?"Image":0),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&(e.trackingRequestMeta=c.MetadataModel.toObject(t.trackingRequestMeta,i)),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&(e.mediaGuid=t.mediaGuid),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoMediaClickTypeEnum[t.type]:t.type),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&(e.clickUrl=t.clickUrl),null!=t.slideTitle&&t.hasOwnProperty("slideTitle")&&(e.slideTitle=t.slideTitle),null!=t.slideNumber&&t.hasOwnProperty("slideNumber")&&(e.slideNumber=t.slideNumber),null!=t.slideMediaType&&t.hasOwnProperty("slideMediaType")&&(e.slideMediaType=i.enums===String?c.ProtoMediaTypeEnum[t.slideMediaType]:t.slideMediaType),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoMediaClickTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Click"]=0,i[t[1]="UrlClick"]=1,i[t[2]="VolumeClick"]=2,i[t[3]="PlayClick"]=3,i[t[4]="PauseClick"]=4,i[t[5]="NextClick"]=5,i[t[6]="PreviousClick"]=6,i[t[7]="MuteClick"]=7,i[t[8]="UnmuteClick"]=8,i[t[9]="CloseClick"]=9,i[t[10]="ScrollClick"]=10,i[t[11]="GalleryClick"]=11,i[t[12]="SubtitleClick"]=12,i[t[13]="FullScreenClick"]=13,i[t[14]="ExitFullScreenClick"]=14,i}(),c.ProtoMediaTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.quartile=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.quartile&&t.hasOwnProperty("quartile")&&i.uint32(32).int32(t.quartile),i},t.fromObject=function(t){if(t instanceof c.ProtoMediaTrackingRequest)return t;var i=new c.ProtoMediaTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoMediaTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.quartile){case"Start":case 0:i.quartile=0;break;case"First":case 1:i.quartile=1;break;case"Second":case 2:i.quartile=2;break;case"Third":case 3:i.quartile=3;break;case"Fourth":case 4:i.quartile=4}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoQuartilesEnum=function(){var t={},i=Object.create(t);return i[t[0]="Start"]=0,i[t[1]="First"]=1,i[t[2]="Second"]=2,i[t[3]="Third"]=3,i[t[4]="Fourth"]=4,i}(),c.ProtoSessionTimeTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.timePlayed=0,t.prototype.timePlayedInView=0,t.prototype.sessionTime=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.timePlayed&&t.hasOwnProperty("timePlayed")&&i.uint32(16).int32(t.timePlayed),null!=t.timePlayedInView&&t.hasOwnProperty("timePlayedInView")&&i.uint32(24).int32(t.timePlayedInView),null!=t.sessionTime&&t.hasOwnProperty("sessionTime")&&i.uint32(32).int32(t.sessionTime),i},t.fromObject=function(t){if(t instanceof c.ProtoSessionTimeTrackingRequest)return t;var i=new c.ProtoSessionTimeTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoSessionTimeTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.timePlayed&&(i.timePlayed=0|t.timePlayed),null!=t.timePlayedInView&&(i.timePlayedInView=0|t.timePlayedInView),null!=t.sessionTime&&(i.sessionTime=0|t.sessionTime),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.hasAdBlocker=!1,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.hasAdBlocker&&t.hasOwnProperty("hasAdBlocker")&&i.uint32(32).bool(t.hasAdBlocker),i},t.fromObject=function(t){if(t instanceof c.ProtoTrackingRequest)return t;var i=new c.ProtoTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.hasAdBlocker&&(i.hasAdBlocker=Boolean(t.hasAdBlocker)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackingResponse=function(){function t(t){if(this.platformCappedLineItemIdList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.platformCappedLineItemIdList=o.emptyArray,t.prototype.impressionRevenue=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTrackingResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.errorMessage=t.string();break;case 2:s.platformCappedLineItemIdList&&s.platformCappedLineItemIdList.length||(s.platformCappedLineItemIdList=[]),s.platformCappedLineItemIdList.push(t.string());break;case 3:s.impressionRevenue=t.double();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.platformCappedLineItemIdList=[]),i.defaults&&(e.errorMessage="",e.impressionRevenue=0),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(e.errorMessage=t.errorMessage),t.platformCappedLineItemIdList&&t.platformCappedLineItemIdList.length){e.platformCappedLineItemIdList=[];for(var s=0;s<t.platformCappedLineItemIdList.length;++s)e.platformCappedLineItemIdList[s]=t.platformCappedLineItemIdList[s]}return null!=t.impressionRevenue&&t.hasOwnProperty("impressionRevenue")&&(e.impressionRevenue=i.json&&!isFinite(t.impressionRevenue)?String(t.impressionRevenue):t.impressionRevenue),e},t}(),c.ProtoVideoAdImpressionRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.encryptedPrice="",t.prototype.creativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.customClientPrice=0,t.prototype.adsourceType=0,t.prototype.vastMediaType="",t.prototype.adPodSlotPosition=0,t.prototype.prebidJsBidderName="",t.prototype.dspId="",t.prototype.cnxBidId="",t.prototype.winToAdLoadedTime=0,t.prototype.startAdToImpressionTime=0,t.prototype.declaredDuration=0,t.prototype.impressionDuration=0,t.prototype.useExploration=!1,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(56).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(64).int32(t.timeSpent),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&i.uint32(74).string(t.encryptedPrice),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(82).string(t.creativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(90).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(98).string(t.rtbAdomain),null!=t.customClientPrice&&t.hasOwnProperty("customClientPrice")&&i.uint32(105).double(t.customClientPrice),null!=t.adsourceType&&t.hasOwnProperty("adsourceType")&&i.uint32(112).int32(t.adsourceType),null!=t.vastMediaType&&t.hasOwnProperty("vastMediaType")&&i.uint32(122).string(t.vastMediaType),null!=t.adPodSlotPosition&&t.hasOwnProperty("adPodSlotPosition")&&i.uint32(144).int32(t.adPodSlotPosition),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(154).string(t.prebidJsBidderName),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(162).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(170).string(t.cnxBidId),null!=t.winToAdLoadedTime&&t.hasOwnProperty("winToAdLoadedTime")&&i.uint32(176).int32(t.winToAdLoadedTime),null!=t.startAdToImpressionTime&&t.hasOwnProperty("startAdToImpressionTime")&&i.uint32(184).int32(t.startAdToImpressionTime),null!=t.declaredDuration&&t.hasOwnProperty("declaredDuration")&&i.uint32(193).double(t.declaredDuration),null!=t.impressionDuration&&t.hasOwnProperty("impressionDuration")&&i.uint32(201).double(t.impressionDuration),null!=t.useExploration&&t.hasOwnProperty("useExploration")&&i.uint32(208).bool(t.useExploration),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdImpressionRequest)return t;var i=new c.ProtoVideoAdImpressionRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.encryptedPrice&&(i.encryptedPrice=String(t.encryptedPrice)),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),null!=t.customClientPrice&&(i.customClientPrice=Number(t.customClientPrice)),t.adsourceType){case"Unknown":case 0:i.adsourceType=0;break;case"Vpaid":case 1:i.adsourceType=1;break;case"VastMedia":case 2:i.adsourceType=2;break;case"CnxMedia":case 3:i.adsourceType=3;break;case"Jw":case 4:i.adsourceType=4;break;case"Ima":case 5:i.adsourceType=5;break;case"AOL":case 6:i.adsourceType=6}return null!=t.vastMediaType&&(i.vastMediaType=String(t.vastMediaType)),null!=t.adPodSlotPosition&&(i.adPodSlotPosition=0|t.adPodSlotPosition),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),null!=t.winToAdLoadedTime&&(i.winToAdLoadedTime=0|t.winToAdLoadedTime),null!=t.startAdToImpressionTime&&(i.startAdToImpressionTime=0|t.startAdToImpressionTime),null!=t.declaredDuration&&(i.declaredDuration=Number(t.declaredDuration)),null!=t.impressionDuration&&(i.impressionDuration=Number(t.impressionDuration)),null!=t.useExploration&&(i.useExploration=Boolean(t.useExploration)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoVideoAdImpressionViewableRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdImpressionViewableRequest)return t;var i=new c.ProtoVideoAdImpressionViewableRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionViewableRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoVideoAdQuartilesRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.quartile=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),null!=t.quartile&&t.hasOwnProperty("quartile")&&i.uint32(56).int32(t.quartile),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdQuartilesRequest)return t;var i=new c.ProtoVideoAdQuartilesRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdQuartilesRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),t.quartile){case"Start":case 0:i.quartile=0;break;case"First":case 1:i.quartile=1;break;case"Second":case 2:i.quartile=2;break;case"Third":case 3:i.quartile=3;break;case"Fourth":case 4:i.quartile=4}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoUserSyncRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.demandPartner=0,t.prototype.demandPartnerUserId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.demandPartner&&t.hasOwnProperty("demandPartner")&&i.uint32(16).int32(t.demandPartner),null!=t.demandPartnerUserId&&t.hasOwnProperty("demandPartnerUserId")&&i.uint32(26).string(t.demandPartnerUserId),i},t.fromObject=function(t){if(t instanceof c.ProtoUserSyncRequest)return t;var i=new c.ProtoUserSyncRequest;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.demandPartner&&(i.demandPartner=0|t.demandPartner),null!=t.demandPartnerUserId&&(i.demandPartnerUserId=String(t.demandPartnerUserId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=c},function(t,i,e){"use strict";function s(t){return"string"==typeof t}function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function r(t){return n(t)&&t>0}function h(t){return s(t)&&t.length>0}function a(t){return void 0!==t}function o(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function u(t){try{if(t.contentWindow||t.contentDocument)return!0}catch(t){}return!1}e.d(i,"g",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"e",function(){return r}),e.d(i,"h",function(){return h}),e.d(i,"a",function(){return a}),e.d(i,"b",function(){return o}),e.d(i,"f",function(){return c}),e.d(i,"c",function(){return u})},function(t,i,e){"use strict";e.d(i,"u",function(){return f}),e.d(i,"M",function(){return p}),e.d(i,"L",function(){return v}),e.d(i,"I",function(){return b}),e.d(i,"y",function(){return m}),e.d(i,"x",function(){return g}),e.d(i,"w",function(){return y}),e.d(i,"a",function(){return w}),e.d(i,"H",function(){return x}),e.d(i,"t",function(){return k}),e.d(i,"J",function(){return S}),e.d(i,"l",function(){return O}),e.d(i,"k",function(){return _}),e.d(i,"m",function(){return j}),e.d(i,"b",function(){return A}),e.d(i,"c",function(){return I}),e.d(i,"f",function(){return C}),e.d(i,"O",function(){return T}),e.d(i,"n",function(){return P}),e.d(i,"i",function(){return M}),e.d(i,"K",function(){return E}),e.d(i,"e",function(){return L}),e.d(i,"p",function(){return B}),e.d(i,"j",function(){return D}),e.d(i,"s",function(){return F}),e.d(i,"d",function(){return V}),e.d(i,"v",function(){return U}),e.d(i,"h",function(){return H}),e.d(i,"g",function(){return q}),e.d(i,"B",function(){return z}),e.d(i,"E",function(){return G}),e.d(i,"N",function(){return W}),e.d(i,"A",function(){return J}),e.d(i,"r",function(){return Q}),e.d(i,"q",function(){return X}),e.d(i,"G",function(){return Y}),e.d(i,"C",function(){return K}),e.d(i,"P",function(){return Z}),e.d(i,"o",function(){return tt}),e.d(i,"D",function(){return it}),e.d(i,"F",function(){return et}),e.d(i,"z",function(){return st});var s=e(25),n=e(1),r=e(6),h=e(4),a=e(8),o=e(0),c=e(5);function u(t,i){t&&(t.style.display=i?"":"none")}function l(t,i){if(Object(n.a)(t.classList))return void t.classList.add(i);const e=`${t.getAttribute("class")} ${i}`;t.setAttribute("class",e)}function d(t,i){if(Object(n.a)(t.classList))return void t.classList.remove(i);const e=t.getAttribute("class").replace(i,"");t.setAttribute("class",e)}function f(t){u(t,!1)}function p(t){u(t,!0)}function v(t,i){for(const e in i)i.hasOwnProperty(e)&&(t.style[e]=i[e])}function b(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function m(t,i,e,s,r){if(i)try{const h=e.document.createElement("link");return h.id=t.id,h.type="text/css",h.rel="stylesheet",h.href=t.src,Object(n.b)(s)&&(h.onload=()=>{s()}),Object(n.b)(r)&&(h.onerror=t=>{i.removeChild(h),Object(n.g)(t)?r(`link_stylesheet_load_error_${t}`):r(`link_stylesheet_load_error_${function(t,i){const e=t.document.createElement("div");return e.appendChild(i),e.innerHTML}(e,h)}`)}),i.appendChild(h),h}catch(t){return null}}function g(t,i,e,s,r,h=!0,a){try{const u=e.document.createElement("script");return u.src=t.src,u.async=!0,u.type="text/javascript",t.id&&(u.id=t.id),Object(n.b)(s)&&(u.onload=()=>{s()}),u.onerror=e=>{i.removeChild(u),h&&Object(c.a)({message:a,exception:"script_load_error",callStack:t.src,level:o.ProtoLoggingLevelEnum.INFO,throttle:2,sendMaxLog:!1}),Object(n.b)(r)&&r()},i.appendChild(u),u}catch(i){return h&&Object(c.a)({message:a,exception:`script_insert_error_${i.message}_${i.stack}`,callStack:t.src,level:o.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),Object(n.b)(r)&&r(),null}}function y(t,i,e){if(t)try{const s=i.document.createElement("script"),n=i.document.createTextNode(e);return s.appendChild(n),t.appendChild(s),s}catch(t){return null}}function w(t,...i){t&&i.forEach(i=>{Object(n.h)(i)&&l(t,i)})}function x(t,...i){t&&i.forEach(i=>{Object(n.h)(i)&&d(t,i)})}function k(t,i){return t&&t.classList.contains(i)}function S(t,i,e,s=!1){t&&(d(t,i),s&&M(t),l(t,e))}const O=(t,i)=>i.document.getElementById(t),_=(t,i,e)=>i.getComputedStyle(t,e),j=(t,i)=>i.document.getElementsByClassName(t);function A(t,i="",e){const s=e.document.getElementsByTagName("head")[0],n=e.document.createElement("style");n.setAttribute("type","text/css"),n.id=i,n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.document.createTextNode(t)),s.appendChild(n)}function I(t,i){const e=i.document.getElementsByTagName("head")[0],s=i.document.createElement("link");s.setAttribute("rel","preconnect"),s.setAttribute("link",t),e.appendChild(s)}function C(t,i){const e=i.document.createElement("div");return e.innerHTML=t,e.firstElementChild}function T(t,i){i>0?(t.removeAttribute("muted"),t.muted=!1):(t.setAttribute("muted",""),t.muted=!0)}function P(t){return s.b.find(i=>{if(i.keys.fullscreenEnabled in t)return!0})}function M(t){t.getBoundingClientRect()}function E(t,i){return(t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)})(i)}function L(t,i){return(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||function(t){return clearTimeout(t)})(i)}function R(t,i,e){const s=function(t,i){const e=function(t,i){let e=i;for(;e;){const i=e.parentNode;if(i){const e=t.reduce((t,e)=>t||i.querySelector(e),null);if(e)return e}e=i}return null}(t,i);return e?_(e,F(e)):null}(t,i);return s?function(t,i){return t.getPropertyValue(i)}(s,e):null}function B(t){const i=R(["h1","h2"],t,"font-family");return i||"inherit"}function D(t){const i=R(["p"],t,"font-family");return i||"inherit"}function F(t){try{return t.ownerDocument.defaultView}catch(t){return null}}function V(t,i){t&&i&&(Array.isArray(t)?t.forEach(t=>i.appendChild(t)):i.appendChild(t))}function U(t,i,e){let s=!1;const n=Object(r.c)(i.children);for(let i=0;i<n.length;i++)if(e-1===i||0===e){s=!0,Array.isArray(t)?N(n[i],...t):N(n[i],t);break}s||V(t,i)}function N(t,...i){if(t&&t.parentElement)for(let e=i.length;e--;)t.parentElement.insertBefore(i[e],t)}function $(t){const i=F(t);if(!i)return;const{display:e}=_(t,i);"none"===e&&(t.style.display="block")}function H(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(x(t,h.m.FadeOutBase,h.m.FadeOut),i(),t.removeEventListener("transitionend",e))};w(t,h.m.FadeOutBase),$(t),M(t),t.addEventListener("transitionend",e),w(t,h.m.FadeOut)}function q(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(x(t,h.m.FadeInBase,h.m.FadeIn),i(),t.removeEventListener("transitionend",e))};w(t,h.m.FadeInBase),$(t),M(t),t.addEventListener("transitionend",e),w(t,h.m.FadeIn)}function z(t){const i=F(t);if(!i)return!0;const{display:e,opacity:s}=_(t,i);return"none"===e||"0"===s}function G(t,i,e){const s=e.document.createElement("script");s.src="https://cdn.connatix.com/min/connatix.renderer.infeed.min.js",s.setAttribute("data-connatix-token",t),e.document.getElementById(i).parentElement.appendChild(s)}function W(t,i){const e=i.document.createElement("div");return e.innerHTML=t||"",e.innerText}function J(){const t=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===t||"yes"===t}function Q(t,i){const e=Object(a.f)(t).topFrame;return e[i]?e:null}function X(t,i){let e=t,s=null;try{for(;!s;){try{e.frames[i]&&(s=e)}catch(t){}if(!t.top||t.top===e)break;e=e.parent}}catch(t){}return s}function Y(t,i){let e=[];try{e=e.slice.call(i.document.querySelectorAll(t),0)}catch(t){}return e}function K(t){return-1!==Object(a.f)(t).topFrame.location.protocol.indexOf("https")}function Z(t){if(!K(t))return;[window,t].forEach(t=>{if(null===t.document.querySelector("meta[content=upgrade-insecure-requests]")){const i=t.document.createElement("meta");i.setAttribute("http-equiv","Content-Security-Policy"),i.content="upgrade-insecure-requests",t.document.head.appendChild(i)}})}function tt(t){return Object(a.f)(t).topFrame.document.referrer}function it(t,i){const e=Object(a.f)(i).topFrame.location.hostname,s=Object(a.g)(t);return s&&s.hostname===e}function et(t,i){try{t.onclick=t=>{const{tagName:e,className:s}=t.target;Object(c.a)({message:`${i} - click on tag:${e} class:${s}`,level:o.ProtoLoggingLevelEnum.INFO})}}catch(t){Object(c.a)({message:`${i}_Error - iframe click`,level:o.ProtoLoggingLevelEnum.WARNING,callStack:t.stack})}}function st(t){t.currentTime=t.currentTime+.01}},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n}),function(t){t.Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail"}(s||(s={})),function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"}(n||(n={}))},function(t,i,e){"use strict";var s,n,r;e.d(i,"h",function(){return s}),e.d(i,"g",function(){return n}),e.d(i,"j",function(){return r}),e.d(i,"r",function(){return h}),e.d(i,"i",function(){return a}),e.d(i,"k",function(){return o}),e.d(i,"f",function(){return c}),e.d(i,"l",function(){return l}),e.d(i,"e",function(){return d}),e.d(i,"n",function(){return f}),e.d(i,"m",function(){return p}),e.d(i,"q",function(){return b}),e.d(i,"o",function(){return m}),e.d(i,"b",function(){return g}),e.d(i,"c",function(){return y}),e.d(i,"d",function(){return w}),e.d(i,"p",function(){return x}),e.d(i,"a",function(){return k}),function(t){t.Invisible="cnx-mod-invisible",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none"}(s||(s={})),function(t){t.Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.CanClose="cnx-in-can-close",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.AlwaysOn="cnx-ui-always-on",t.PodLoadingScreen="cnx-in-pod-loading"}(n||(n={})),function(t){t.Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended"}(r||(r={}));const h={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"};var a,o,c,u,l,d,f;!function(t){t.Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed"}(a||(a={})),function(t){t.ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container"}(o||(o={})),function(t){t.Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill"}(c||(c={})),function(t){t.InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family"}(u||(u={})),function(t){t.Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF"}(l||(l={})),function(t){t.CaptionContainer="cnx-captions-text-holder"}(d||(d={})),function(t){t.MainClass="cnx-float",t.TransitionClass="cnx-float-transition"}(f||(f={}));const p={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};var v,b,m;!function(t){t.CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right"}(v||(v={})),function(t){t.OpacityInTransition="cnx-tooltip-animation-in"}(b||(b={})),function(t){t.Card="cnx-g-card",t.CardSlot="cnx-g-card-slot",t.CardImage="cnx-g-card-image",t.CardText="cnx-g-card-text",t.CardTextContainer="cnx-g-card-text-container",t.CardPlaceholder="cnx-g-card-placeholder",t.CardRail="cnx-g-rail",t.StyleDetailed="cnx-g-style-detailed",t.StyleVisual="cnx-g-style-visual",t.ExploreMore="cnx-g-explore-more",t.FadeOut="cnx-g-fade-out"}(m||(m={}));const g={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},y="cnx-ratio",w="cnx-hide-video",x={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},k={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"}},function(t,i,e){"use strict";var s=e(21),n=e(27),r=e(0),h=e(17),a=e(32);const o=!0,c=30;var u=e(37);e.d(i,"a",function(){return v});var l=function(t,i){var e={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)i.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(e[s[n]]=t[s[n]])}return e};const d=500;let f=window.location&&window.location.href,p=!1;try{f=window.top.location.href}catch(t){}function v(t){var{throttle:i=c,sendMaxLog:e=!0,logJsonState:b=!1}=t,m=l(t,["throttle","sendMaxLog","logJsonState"]);if(!p)if(m.playerDestroyed&&(p=!0),m.sessionId=a.a.sessionId,o&&(a.a.incrementLogCount(m.message),a.a.isMaxLogOverflow(m.message)&&v({message:"Logging_max_log_overflow_1000",exception:m.message,callStack:m.callStack,level:r.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,throttle:100,sessionId:a.a.sessionId}),a.a.isMaxLog(m.message,i)))e&&!a.a.isMaxLogSent(m.message)&&(a.a.setMaxLogSent(m.message),v({message:"Logging_max_log_sent",exception:m.message,callStack:m.callStack,level:r.ProtoLoggingLevelEnum.FATAL,sessionId:a.a.sessionId}));else{if(b&&(m.callStack=u.a.getJsonString()),void 0===m.callStack){const t=new Error(m.message);m.callStack=t.stack}if(m.callStack=m.callStack.substring(0,d),s.a.logToServer){m.pageUrl=f,m.version=s.a.version;const t={requestData:m,endpoint:h.a.endPoints.tracking.logging,ProtoRequest:r.ProtoLoggingRequest,logError:!0};m.sendBeacon?n.a.sendProtoBeaconRequest(t):n.a.sendProtoRequest(t).catch(t=>{})}s.a.logToConsole&&function(t){let i;switch(t.level){case r.ProtoLoggingLevelEnum.FATAL:i="#8B0000";break;case r.ProtoLoggingLevelEnum.WARNING:i="#FF8C00";break;case r.ProtoLoggingLevelEnum.INFO:i="#000000"}console.log(`%cConnatix Logging:\n   message: ${t.message}\n   exception: ${t.exception}\n   level: ${t.level}\n   version: ${t.version}\n   sessionId: ${t.sessionId}\n   callStack: ${t.callStack}`,`color:${i}`)}(m)}}},function(t,i,e){"use strict";e.d(i,"g",function(){return o}),e.d(i,"m",function(){return c}),e.d(i,"e",function(){return u}),e.d(i,"c",function(){return l}),e.d(i,"f",function(){return d}),e.d(i,"h",function(){return f}),e.d(i,"i",function(){return p}),e.d(i,"l",function(){return v}),e.d(i,"j",function(){return b}),e.d(i,"a",function(){return m}),e.d(i,"b",function(){return g}),e.d(i,"n",function(){return y}),e.d(i,"k",function(){return w}),e.d(i,"d",function(){return x});var s=e(30),n=e(8),r=e(1),h=e(5),a=e(0);function o(t,i){return i.indexOf(t)>-1}function c(t){return Array.isArray(t)?t:[t]}function u(t,i){const e=[],s=new Map;return i.forEach(i=>{s.has(i[t])||(s.set(i[t],!0),e.push(i))}),e}function l(t){return[].slice.call(t)}function d(t){const i=[];for(const e in t)e&&parseInt(e,10)>=0&&i.push(t[e]);return i}function f(t){return t&&t.length>0}function p(t){return t.every(t=>Object(r.d)(t))}function v(t){let i="[";for(let e=0;e<t.length;e++)i+=Object(s.c)(t[e])+(e===t.length-1?"":",");return i+="]"}function b(t,i){return!(!t||!i)&&(t.length===i.length&&(t===i||0===t.length&&0===i.length||t.every((t,e)=>Object(n.i)(t,i[e]))))}function m(t,i){return t.filter(t=>!i.includes(t))}function g(t,i){return t.filter(t=>i.includes(t))}function y(t){return t.filter((i,e)=>t.indexOf(i)===e)}function w(t,i){const e=t.indexOf(i);-1!==e?t.splice(e,1):Object(h.a)({message:"removeItemFromArray_error_item_not_found",exception:JSON.stringify(i),level:a.ProtoLoggingLevelEnum.WARNING})}function x(t){const i=[];return t.forEach(t=>i.push(t)),i}},function(t,i,e){"use strict";var s,n,r=e(60),h=r.Reader,a=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoElementsRequest=function(){function t(t){if(this.tokens=[],this.queryJsTargeting={},this.reloadedPlayers={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.tokens=o.emptyArray,t.prototype.pageUrl="",t.prototype.userId="",t.prototype.forceLineItemId="",t.prototype.forcePlayerId="",t.prototype.forceMediaId="",t.prototype.forcePlaylistId="",t.prototype.version=0,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.prototype.forceExploration=!1,t.prototype.es6=!1,t.prototype.bundleId="",t.prototype.forceSourceItemId="",t.prototype.parseDomain=!1,t.prototype.implementationType=0,t.prototype.queryJsTargeting=o.emptyObject,t.prototype.isConsentConnatix=!0,t.prototype.reloadedPlayers=o.emptyObject,t.prototype.disableTracking=!1,t.prototype.referrer="",t.prototype.localTimestamp=o.Long?o.Long.fromBits(0,0,!1):0,t.encode=function(t,i){if(i||(i=a.create()),null!=t.tokens&&t.tokens.length)for(var e=0;e<t.tokens.length;++e)i.uint32(10).string(t.tokens[e]);if(null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(26).string(t.pageUrl),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(42).string(t.userId),null!=t.forceLineItemId&&t.hasOwnProperty("forceLineItemId")&&i.uint32(50).string(t.forceLineItemId),null!=t.forcePlayerId&&t.hasOwnProperty("forcePlayerId")&&i.uint32(58).string(t.forcePlayerId),null!=t.forceMediaId&&t.hasOwnProperty("forceMediaId")&&i.uint32(66).string(t.forceMediaId),null!=t.forcePlaylistId&&t.hasOwnProperty("forcePlaylistId")&&i.uint32(74).string(t.forcePlaylistId),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(80).int32(t.version),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(96).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(104).int32(t.clientAb1),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(130).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(138).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(146).string(t.customParam3),null!=t.forceExploration&&t.hasOwnProperty("forceExploration")&&i.uint32(160).bool(t.forceExploration),null!=t.es6&&t.hasOwnProperty("es6")&&i.uint32(168).bool(t.es6),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(178).string(t.bundleId),null!=t.forceSourceItemId&&t.hasOwnProperty("forceSourceItemId")&&i.uint32(186).string(t.forceSourceItemId),null!=t.parseDomain&&t.hasOwnProperty("parseDomain")&&i.uint32(192).bool(t.parseDomain),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(200).int32(t.implementationType),null!=t.queryJsTargeting&&t.hasOwnProperty("queryJsTargeting")){var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.uint32(210).fork().uint32(10).string(s[e]).uint32(18).string(t.queryJsTargeting[s[e]]).ldelim()}if(null!=t.isConsentConnatix&&t.hasOwnProperty("isConsentConnatix")&&i.uint32(216).bool(t.isConsentConnatix),null!=t.reloadedPlayers&&t.hasOwnProperty("reloadedPlayers"))for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.uint32(234).fork().uint32(10).string(s[e]).uint32(18).string(t.reloadedPlayers[s[e]]).ldelim();return null!=t.disableTracking&&t.hasOwnProperty("disableTracking")&&i.uint32(248).bool(t.disableTracking),null!=t.referrer&&t.hasOwnProperty("referrer")&&i.uint32(258).string(t.referrer),null!=t.localTimestamp&&t.hasOwnProperty("localTimestamp")&&i.uint32(264).int64(t.localTimestamp),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e,s=void 0===i?t.len:t.pos+i,n=new c.ProtoElementsRequest;t.pos<s;){var r=t.uint32();switch(r>>>3){case 1:n.tokens&&n.tokens.length||(n.tokens=[]),n.tokens.push(t.string());break;case 3:n.pageUrl=t.string();break;case 5:n.userId=t.string();break;case 6:n.forceLineItemId=t.string();break;case 7:n.forcePlayerId=t.string();break;case 8:n.forceMediaId=t.string();break;case 9:n.forcePlaylistId=t.string();break;case 10:n.version=t.int32();break;case 12:n.clientAb0=t.int32();break;case 13:n.clientAb1=t.int32();break;case 16:n.customParam1=t.string();break;case 17:n.customParam2=t.string();break;case 18:n.customParam3=t.string();break;case 20:n.forceExploration=t.bool();break;case 21:n.es6=t.bool();break;case 22:n.bundleId=t.string();break;case 23:n.forceSourceItemId=t.string();break;case 24:n.parseDomain=t.bool();break;case 25:n.implementationType=t.int32();break;case 26:t.skip().pos++,n.queryJsTargeting===o.emptyObject&&(n.queryJsTargeting={}),e=t.string(),t.pos++,n.queryJsTargeting[e]=t.string();break;case 27:n.isConsentConnatix=t.bool();break;case 29:t.skip().pos++,n.reloadedPlayers===o.emptyObject&&(n.reloadedPlayers={}),e=t.string(),t.pos++,n.reloadedPlayers[e]=t.string();break;case 31:n.disableTracking=t.bool();break;case 32:n.referrer=t.string();break;case 33:n.localTimestamp=t.int64();break;default:t.skipType(7&r)}}return n},t.fromObject=function(t){if(t instanceof c.ProtoElementsRequest)return t;var i=new c.ProtoElementsRequest;if(t.tokens){if(!Array.isArray(t.tokens))throw TypeError(".ProtoElementsRequest.tokens: array expected");i.tokens=[];for(var e=0;e<t.tokens.length;++e)i.tokens[e]=String(t.tokens[e])}switch(null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.forceLineItemId&&(i.forceLineItemId=String(t.forceLineItemId)),null!=t.forcePlayerId&&(i.forcePlayerId=String(t.forcePlayerId)),null!=t.forceMediaId&&(i.forceMediaId=String(t.forceMediaId)),null!=t.forcePlaylistId&&(i.forcePlaylistId=String(t.forcePlaylistId)),null!=t.version&&(i.version=0|t.version),null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),null!=t.forceExploration&&(i.forceExploration=Boolean(t.forceExploration)),null!=t.es6&&(i.es6=Boolean(t.es6)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),null!=t.forceSourceItemId&&(i.forceSourceItemId=String(t.forceSourceItemId)),null!=t.parseDomain&&(i.parseDomain=Boolean(t.parseDomain)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}if(t.queryJsTargeting){if("object"!=typeof t.queryJsTargeting)throw TypeError(".ProtoElementsRequest.queryJsTargeting: object expected");i.queryJsTargeting={};var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.queryJsTargeting[s[e]]=String(t.queryJsTargeting[s[e]])}if(null!=t.isConsentConnatix&&(i.isConsentConnatix=Boolean(t.isConsentConnatix)),t.reloadedPlayers){if("object"!=typeof t.reloadedPlayers)throw TypeError(".ProtoElementsRequest.reloadedPlayers: object expected");i.reloadedPlayers={};for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.reloadedPlayers[s[e]]=String(t.reloadedPlayers[s[e]])}return null!=t.disableTracking&&(i.disableTracking=Boolean(t.disableTracking)),null!=t.referrer&&(i.referrer=String(t.referrer)),null!=t.localTimestamp&&(o.Long?(i.localTimestamp=o.Long.fromValue(t.localTimestamp)).unsigned=!1:"string"==typeof t.localTimestamp?i.localTimestamp=parseInt(t.localTimestamp,10):"number"==typeof t.localTimestamp?i.localTimestamp=t.localTimestamp:"object"==typeof t.localTimestamp&&(i.localTimestamp=new o.LongBits(t.localTimestamp.low>>>0,t.localTimestamp.high>>>0).toNumber())),i},t.toObject=function(t,i){i||(i={});var e,s={};if((i.arrays||i.defaults)&&(s.tokens=[]),(i.objects||i.defaults)&&(s.queryJsTargeting={},s.reloadedPlayers={}),i.defaults)if(s.pageUrl="",s.userId="",s.forceLineItemId="",s.forcePlayerId="",s.forceMediaId="",s.forcePlaylistId="",s.version=0,s.clientAb0=0,s.clientAb1=0,s.customParam1="",s.customParam2="",s.customParam3="",s.forceExploration=!1,s.es6=!1,s.bundleId="",s.forceSourceItemId="",s.parseDomain=!1,s.implementationType=i.enums===String?"Web":0,s.isConsentConnatix=!0,s.disableTracking=!1,s.referrer="",o.Long){var n=new o.Long(0,0,!1);s.localTimestamp=i.longs===String?n.toString():i.longs===Number?n.toNumber():n}else s.localTimestamp=i.longs===String?"0":0;if(t.tokens&&t.tokens.length){s.tokens=[];for(var r=0;r<t.tokens.length;++r)s.tokens[r]=t.tokens[r]}if(null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&(s.pageUrl=t.pageUrl),null!=t.userId&&t.hasOwnProperty("userId")&&(s.userId=t.userId),null!=t.forceLineItemId&&t.hasOwnProperty("forceLineItemId")&&(s.forceLineItemId=t.forceLineItemId),null!=t.forcePlayerId&&t.hasOwnProperty("forcePlayerId")&&(s.forcePlayerId=t.forcePlayerId),null!=t.forceMediaId&&t.hasOwnProperty("forceMediaId")&&(s.forceMediaId=t.forceMediaId),null!=t.forcePlaylistId&&t.hasOwnProperty("forcePlaylistId")&&(s.forcePlaylistId=t.forcePlaylistId),null!=t.version&&t.hasOwnProperty("version")&&(s.version=t.version),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&(s.clientAb0=t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&(s.clientAb1=t.clientAb1),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&(s.customParam1=t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&(s.customParam2=t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&(s.customParam3=t.customParam3),null!=t.forceExploration&&t.hasOwnProperty("forceExploration")&&(s.forceExploration=t.forceExploration),null!=t.es6&&t.hasOwnProperty("es6")&&(s.es6=t.es6),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&(s.bundleId=t.bundleId),null!=t.forceSourceItemId&&t.hasOwnProperty("forceSourceItemId")&&(s.forceSourceItemId=t.forceSourceItemId),null!=t.parseDomain&&t.hasOwnProperty("parseDomain")&&(s.parseDomain=t.parseDomain),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&(s.implementationType=i.enums===String?c.ProtoImplementationType[t.implementationType]:t.implementationType),t.queryJsTargeting&&(e=Object.keys(t.queryJsTargeting)).length){s.queryJsTargeting={};for(r=0;r<e.length;++r)s.queryJsTargeting[e[r]]=t.queryJsTargeting[e[r]]}if(null!=t.isConsentConnatix&&t.hasOwnProperty("isConsentConnatix")&&(s.isConsentConnatix=t.isConsentConnatix),t.reloadedPlayers&&(e=Object.keys(t.reloadedPlayers)).length){s.reloadedPlayers={};for(r=0;r<e.length;++r)s.reloadedPlayers[e[r]]=t.reloadedPlayers[e[r]]}return null!=t.disableTracking&&t.hasOwnProperty("disableTracking")&&(s.disableTracking=t.disableTracking),null!=t.referrer&&t.hasOwnProperty("referrer")&&(s.referrer=t.referrer),null!=t.localTimestamp&&t.hasOwnProperty("localTimestamp")&&("number"==typeof t.localTimestamp?s.localTimestamp=i.longs===String?String(t.localTimestamp):t.localTimestamp:s.localTimestamp=i.longs===String?o.Long.prototype.toString.call(t.localTimestamp):i.longs===Number?new o.LongBits(t.localTimestamp.low>>>0,t.localTimestamp.high>>>0).toNumber():t.localTimestamp),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoOutstreamInitialRenderingEnum=(s={},(n=Object.create(s))[s[0]="ExpandWithAd"]=0,n[s[1]="FullyRendered"]=1,n),c.ProtoOutstreamEndAdBreakPolicyEnum=function(){var t={},i=Object.create(t);return i[t[0]="Hide"]=0,i[t[1]="HouseScreen"]=1,i}(),c.ProtoGalleryStyleMode=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="Detailed"]=1,i[t[2]="Visual"]=2,i}(),c.ProtoLogoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="ControlBar"]=1,i[t[2]="BottomRight"]=2,i[t[3]="BottomLeft"]=3,i[t[4]="TopRight"]=4,i[t[5]="TopLeft"]=5,i[t[6]="Center"]=6,i}(),c.ProtoGalleryOrientationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Landscape"]=0,i[t[1]="Portrait"]=1,i}(),c.ProtoElementsTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="InStream"]=0,i[t[1]="OutStream"]=1,i[t[2]="InStreamInApp"]=2,i[t[3]="Live"]=3,i}(),c.ProtoPlayerUpNextMode=function(){var t={},i=Object.create(t);return i[t[0]="Loop"]=0,i[t[1]="Next"]=1,i[t[2]="Stop"]=2,i}(),c.ProtoPlaylistItem=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.mediaId="",t.prototype.revisionNumber=0,t.prototype.mediaContentVersionId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.mediaId&&t.hasOwnProperty("mediaId")&&i.uint32(10).string(t.mediaId),null!=t.revisionNumber&&t.hasOwnProperty("revisionNumber")&&i.uint32(16).int32(t.revisionNumber),null!=t.mediaContentVersionId&&t.hasOwnProperty("mediaContentVersionId")&&i.uint32(26).string(t.mediaContentVersionId),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlaylistItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.mediaId=t.string();break;case 2:s.revisionNumber=t.int32();break;case 3:s.mediaContentVersionId=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoPlaylistItem)return t;var i=new c.ProtoPlaylistItem;return null!=t.mediaId&&(i.mediaId=String(t.mediaId)),null!=t.revisionNumber&&(i.revisionNumber=0|t.revisionNumber),null!=t.mediaContentVersionId&&(i.mediaContentVersionId=String(t.mediaContentVersionId)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.mediaId="",e.revisionNumber=0,e.mediaContentVersionId=""),null!=t.mediaId&&t.hasOwnProperty("mediaId")&&(e.mediaId=t.mediaId),null!=t.revisionNumber&&t.hasOwnProperty("revisionNumber")&&(e.revisionNumber=t.revisionNumber),null!=t.mediaContentVersionId&&t.hasOwnProperty("mediaContentVersionId")&&(e.mediaContentVersionId=t.mediaContentVersionId),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoElements=function(){function t(t){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.playlist=[],this.adBreaks=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.playerId="",t.prototype.playbackMode=0,t.prototype.soundMode=0,t.prototype.upNextMode=1,t.prototype.containerSelector="",t.prototype.position=0,t.prototype.insertPosition=0,t.prototype.forceInsertPath=!1,t.prototype.renderInFrame=!1,t.prototype.scrollHijackingProtection=!1,t.prototype.preRollBreak=0,t.prototype.postRollBreak=0,t.prototype.midRollNumber=-1,t.prototype.timeBetweenAds=0,t.prototype.minTimeBeforeFirstAd=0,t.prototype.adViewabilityPolicy=0,t.prototype.responsive=!1,t.prototype.ratioWidth=0,t.prototype.ratioHeight=0,t.prototype.fixedWidth=0,t.prototype.fixedHeight=0,t.prototype.casting=!1,t.prototype.sharingDestinations=o.emptyArray,t.prototype.closedCaption=!1,t.prototype.muteWatermark=!1,t.prototype.expandButton=!1,t.prototype.closeButtonMode=0,t.prototype.floatingMode=0,t.prototype.floatingDeviceMode=o.emptyArray,t.prototype.floatingCloseButtonMode=0,t.prototype.floatingFixedPosition=0,t.prototype.floatingPageElement="",t.prototype.floatingUseElementWidth=!1,t.prototype.floatingScrollPosition=0,t.prototype.floatingGutterX=0,t.prototype.floatingGutterY=0,t.prototype.floatingWidth=0,t.prototype.iconsColor="",t.prototype.accentColor="",t.prototype.tooltipTextColor="",t.prototype.tooltipBackgroundColor="",t.prototype.html="",t.prototype.galleryStyle=0,t.prototype.logoPosition=0,t.prototype.logoUrl="",t.prototype.lineItems=o.emptyArray,t.prototype.adPlaybackMode=0,t.prototype.css="",t.prototype.sessionId="",t.prototype.playlistId="",t.prototype.playerType=0,t.prototype.outstreamInitialRendering=0,t.prototype.outstreamHouseBackgroundColor="",t.prototype.outstreamTotalAdBreakLength=0,t.prototype.outstreamEndAdBreakPolicy=0,t.prototype.galleryOrientation=0,t.prototype.playlist=o.emptyArray,t.prototype.floatingAppendLocation=0,t.prototype.floatingYAxisPadding=0,t.prototype.customJsCode="",t.prototype.videoQuality=0,t.prototype.initializationSettingsJson="",t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.adBreaks=o.emptyArray,t.prototype.amazonTamSlotId="",t.prototype.midRollOnlyOnLongContent=!0,t.prototype.limitClientSideApiUse=!1,t.prototype.abTestId="",t.encode=function(t,i){if(i||(i=a.create()),null!=t.playerId&&t.hasOwnProperty("playerId")&&i.uint32(10).string(t.playerId),null!=t.playbackMode&&t.hasOwnProperty("playbackMode")&&i.uint32(16).int32(t.playbackMode),null!=t.soundMode&&t.hasOwnProperty("soundMode")&&i.uint32(24).int32(t.soundMode),null!=t.upNextMode&&t.hasOwnProperty("upNextMode")&&i.uint32(32).int32(t.upNextMode),null!=t.containerSelector&&t.hasOwnProperty("containerSelector")&&i.uint32(42).string(t.containerSelector),null!=t.position&&t.hasOwnProperty("position")&&i.uint32(48).int32(t.position),null!=t.insertPosition&&t.hasOwnProperty("insertPosition")&&i.uint32(56).int32(t.insertPosition),null!=t.forceInsertPath&&t.hasOwnProperty("forceInsertPath")&&i.uint32(64).bool(t.forceInsertPath),null!=t.renderInFrame&&t.hasOwnProperty("renderInFrame")&&i.uint32(72).bool(t.renderInFrame),null!=t.scrollHijackingProtection&&t.hasOwnProperty("scrollHijackingProtection")&&i.uint32(80).bool(t.scrollHijackingProtection),null!=t.preRollBreak&&t.hasOwnProperty("preRollBreak")&&i.uint32(88).int32(t.preRollBreak),null!=t.postRollBreak&&t.hasOwnProperty("postRollBreak")&&i.uint32(96).int32(t.postRollBreak),null!=t.midRollNumber&&t.hasOwnProperty("midRollNumber")&&i.uint32(104).int32(t.midRollNumber),null!=t.timeBetweenAds&&t.hasOwnProperty("timeBetweenAds")&&i.uint32(112).int32(t.timeBetweenAds),null!=t.minTimeBeforeFirstAd&&t.hasOwnProperty("minTimeBeforeFirstAd")&&i.uint32(120).int32(t.minTimeBeforeFirstAd),null!=t.adViewabilityPolicy&&t.hasOwnProperty("adViewabilityPolicy")&&i.uint32(128).int32(t.adViewabilityPolicy),null!=t.responsive&&t.hasOwnProperty("responsive")&&i.uint32(144).bool(t.responsive),null!=t.ratioWidth&&t.hasOwnProperty("ratioWidth")&&i.uint32(152).int32(t.ratioWidth),null!=t.ratioHeight&&t.hasOwnProperty("ratioHeight")&&i.uint32(160).int32(t.ratioHeight),null!=t.fixedWidth&&t.hasOwnProperty("fixedWidth")&&i.uint32(168).int32(t.fixedWidth),null!=t.fixedHeight&&t.hasOwnProperty("fixedHeight")&&i.uint32(176).int32(t.fixedHeight),null!=t.casting&&t.hasOwnProperty("casting")&&i.uint32(184).bool(t.casting),null!=t.sharingDestinations&&t.sharingDestinations.length){i.uint32(194).fork();for(var e=0;e<t.sharingDestinations.length;++e)i.int32(t.sharingDestinations[e]);i.ldelim()}if(null!=t.closedCaption&&t.hasOwnProperty("closedCaption")&&i.uint32(200).bool(t.closedCaption),null!=t.muteWatermark&&t.hasOwnProperty("muteWatermark")&&i.uint32(208).bool(t.muteWatermark),null!=t.expandButton&&t.hasOwnProperty("expandButton")&&i.uint32(216).bool(t.expandButton),null!=t.closeButtonMode&&t.hasOwnProperty("closeButtonMode")&&i.uint32(224).int32(t.closeButtonMode),null!=t.floatingMode&&t.hasOwnProperty("floatingMode")&&i.uint32(232).int32(t.floatingMode),null!=t.floatingDeviceMode&&t.floatingDeviceMode.length){i.uint32(242).fork();for(e=0;e<t.floatingDeviceMode.length;++e)i.int32(t.floatingDeviceMode[e]);i.ldelim()}if(null!=t.floatingCloseButtonMode&&t.hasOwnProperty("floatingCloseButtonMode")&&i.uint32(248).int32(t.floatingCloseButtonMode),null!=t.floatingFixedPosition&&t.hasOwnProperty("floatingFixedPosition")&&i.uint32(256).int32(t.floatingFixedPosition),null!=t.floatingPageElement&&t.hasOwnProperty("floatingPageElement")&&i.uint32(266).string(t.floatingPageElement),null!=t.floatingUseElementWidth&&t.hasOwnProperty("floatingUseElementWidth")&&i.uint32(272).bool(t.floatingUseElementWidth),null!=t.floatingScrollPosition&&t.hasOwnProperty("floatingScrollPosition")&&i.uint32(280).int32(t.floatingScrollPosition),null!=t.floatingGutterX&&t.hasOwnProperty("floatingGutterX")&&i.uint32(288).int32(t.floatingGutterX),null!=t.floatingGutterY&&t.hasOwnProperty("floatingGutterY")&&i.uint32(296).int32(t.floatingGutterY),null!=t.floatingWidth&&t.hasOwnProperty("floatingWidth")&&i.uint32(304).int32(t.floatingWidth),null!=t.iconsColor&&t.hasOwnProperty("iconsColor")&&i.uint32(314).string(t.iconsColor),null!=t.accentColor&&t.hasOwnProperty("accentColor")&&i.uint32(322).string(t.accentColor),null!=t.tooltipTextColor&&t.hasOwnProperty("tooltipTextColor")&&i.uint32(330).string(t.tooltipTextColor),null!=t.tooltipBackgroundColor&&t.hasOwnProperty("tooltipBackgroundColor")&&i.uint32(338).string(t.tooltipBackgroundColor),null!=t.html&&t.hasOwnProperty("html")&&i.uint32(346).string(t.html),null!=t.galleryStyle&&t.hasOwnProperty("galleryStyle")&&i.uint32(360).int32(t.galleryStyle),null!=t.logoPosition&&t.hasOwnProperty("logoPosition")&&i.uint32(368).int32(t.logoPosition),null!=t.logoUrl&&t.hasOwnProperty("logoUrl")&&i.uint32(378).string(t.logoUrl),null!=t.lineItems&&t.lineItems.length)for(e=0;e<t.lineItems.length;++e)c.ProtoLineItem.encode(t.lineItems[e],i.uint32(394).fork()).ldelim();if(null!=t.adPlaybackMode&&t.hasOwnProperty("adPlaybackMode")&&i.uint32(400).int32(t.adPlaybackMode),null!=t.css&&t.hasOwnProperty("css")&&i.uint32(410).string(t.css),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(418).string(t.sessionId),null!=t.playlistId&&t.hasOwnProperty("playlistId")&&i.uint32(426).string(t.playlistId),null!=t.playerType&&t.hasOwnProperty("playerType")&&i.uint32(432).int32(t.playerType),null!=t.outstreamInitialRendering&&t.hasOwnProperty("outstreamInitialRendering")&&i.uint32(440).int32(t.outstreamInitialRendering),null!=t.outstreamHouseBackgroundColor&&t.hasOwnProperty("outstreamHouseBackgroundColor")&&i.uint32(450).string(t.outstreamHouseBackgroundColor),null!=t.outstreamTotalAdBreakLength&&t.hasOwnProperty("outstreamTotalAdBreakLength")&&i.uint32(456).int32(t.outstreamTotalAdBreakLength),null!=t.outstreamEndAdBreakPolicy&&t.hasOwnProperty("outstreamEndAdBreakPolicy")&&i.uint32(464).int32(t.outstreamEndAdBreakPolicy),null!=t.galleryOrientation&&t.hasOwnProperty("galleryOrientation")&&i.uint32(472).int32(t.galleryOrientation),null!=t.playlist&&t.playlist.length)for(e=0;e<t.playlist.length;++e)c.ProtoPlaylistItem.encode(t.playlist[e],i.uint32(482).fork()).ldelim();if(null!=t.floatingAppendLocation&&t.hasOwnProperty("floatingAppendLocation")&&i.uint32(488).int32(t.floatingAppendLocation),null!=t.floatingYAxisPadding&&t.hasOwnProperty("floatingYAxisPadding")&&i.uint32(496).int32(t.floatingYAxisPadding),null!=t.customJsCode&&t.hasOwnProperty("customJsCode")&&i.uint32(506).string(t.customJsCode),null!=t.videoQuality&&t.hasOwnProperty("videoQuality")&&i.uint32(512).int32(t.videoQuality),null!=t.initializationSettingsJson&&t.hasOwnProperty("initializationSettingsJson")&&i.uint32(522).string(t.initializationSettingsJson),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&i.uint32(528).int32(t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&i.uint32(536).int32(t.skipAdAfter),null!=t.adBreaks&&t.adBreaks.length)for(e=0;e<t.adBreaks.length;++e)c.ProtoAdBreak.encode(t.adBreaks[e],i.uint32(546).fork()).ldelim();return null!=t.amazonTamSlotId&&t.hasOwnProperty("amazonTamSlotId")&&i.uint32(554).string(t.amazonTamSlotId),null!=t.midRollOnlyOnLongContent&&t.hasOwnProperty("midRollOnlyOnLongContent")&&i.uint32(560).bool(t.midRollOnlyOnLongContent),null!=t.limitClientSideApiUse&&t.hasOwnProperty("limitClientSideApiUse")&&i.uint32(568).bool(t.limitClientSideApiUse),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&i.uint32(578).string(t.abTestId),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoElements;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.playerId=t.string();break;case 2:s.playbackMode=t.int32();break;case 3:s.soundMode=t.int32();break;case 4:s.upNextMode=t.int32();break;case 5:s.containerSelector=t.string();break;case 6:s.position=t.int32();break;case 7:s.insertPosition=t.int32();break;case 8:s.forceInsertPath=t.bool();break;case 9:s.renderInFrame=t.bool();break;case 10:s.scrollHijackingProtection=t.bool();break;case 11:s.preRollBreak=t.int32();break;case 12:s.postRollBreak=t.int32();break;case 13:s.midRollNumber=t.int32();break;case 14:s.timeBetweenAds=t.int32();break;case 15:s.minTimeBeforeFirstAd=t.int32();break;case 16:s.adViewabilityPolicy=t.int32();break;case 18:s.responsive=t.bool();break;case 19:s.ratioWidth=t.int32();break;case 20:s.ratioHeight=t.int32();break;case 21:s.fixedWidth=t.int32();break;case 22:s.fixedHeight=t.int32();break;case 23:s.casting=t.bool();break;case 24:if(s.sharingDestinations&&s.sharingDestinations.length||(s.sharingDestinations=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.sharingDestinations.push(t.int32());else s.sharingDestinations.push(t.int32());break;case 25:s.closedCaption=t.bool();break;case 26:s.muteWatermark=t.bool();break;case 27:s.expandButton=t.bool();break;case 28:s.closeButtonMode=t.int32();break;case 29:s.floatingMode=t.int32();break;case 30:if(s.floatingDeviceMode&&s.floatingDeviceMode.length||(s.floatingDeviceMode=[]),2==(7&n))for(r=t.uint32()+t.pos;t.pos<r;)s.floatingDeviceMode.push(t.int32());else s.floatingDeviceMode.push(t.int32());break;case 31:s.floatingCloseButtonMode=t.int32();break;case 32:s.floatingFixedPosition=t.int32();break;case 33:s.floatingPageElement=t.string();break;case 34:s.floatingUseElementWidth=t.bool();break;case 35:s.floatingScrollPosition=t.int32();break;case 36:s.floatingGutterX=t.int32();break;case 37:s.floatingGutterY=t.int32();break;case 38:s.floatingWidth=t.int32();break;case 39:s.iconsColor=t.string();break;case 40:s.accentColor=t.string();break;case 41:s.tooltipTextColor=t.string();break;case 42:s.tooltipBackgroundColor=t.string();break;case 43:s.html=t.string();break;case 45:s.galleryStyle=t.int32();break;case 46:s.logoPosition=t.int32();break;case 47:s.logoUrl=t.string();break;case 49:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 50:s.adPlaybackMode=t.int32();break;case 51:s.css=t.string();break;case 52:s.sessionId=t.string();break;case 53:s.playlistId=t.string();break;case 54:s.playerType=t.int32();break;case 55:s.outstreamInitialRendering=t.int32();break;case 56:s.outstreamHouseBackgroundColor=t.string();break;case 57:s.outstreamTotalAdBreakLength=t.int32();break;case 58:s.outstreamEndAdBreakPolicy=t.int32();break;case 59:s.galleryOrientation=t.int32();break;case 60:s.playlist&&s.playlist.length||(s.playlist=[]),s.playlist.push(c.ProtoPlaylistItem.decode(t,t.uint32()));break;case 61:s.floatingAppendLocation=t.int32();break;case 62:s.floatingYAxisPadding=t.int32();break;case 63:s.customJsCode=t.string();break;case 64:s.videoQuality=t.int32();break;case 65:s.initializationSettingsJson=t.string();break;case 66:s.adSkippability=t.int32();break;case 67:s.skipAdAfter=t.int32();break;case 68:s.adBreaks&&s.adBreaks.length||(s.adBreaks=[]),s.adBreaks.push(c.ProtoAdBreak.decode(t,t.uint32()));break;case 69:s.amazonTamSlotId=t.string();break;case 70:s.midRollOnlyOnLongContent=t.bool();break;case 71:s.limitClientSideApiUse=t.bool();break;case 72:s.abTestId=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoElements)return t;var i=new c.ProtoElements;switch(null!=t.playerId&&(i.playerId=String(t.playerId)),t.playbackMode){case"Autoplay":case 0:i.playbackMode=0;break;case"ScrollToPlay":case 1:i.playbackMode=1;break;case"ClickToPlay":case 2:i.playbackMode=2}switch(t.soundMode){case"Mute":case 0:i.soundMode=0;break;case"On":case 1:i.soundMode=1;break;case"Hover":case 2:i.soundMode=2}switch(t.upNextMode){case"Loop":case 0:i.upNextMode=0;break;case"Next":case 1:i.upNextMode=1;break;case"Stop":case 2:i.upNextMode=2}switch(null!=t.containerSelector&&(i.containerSelector=String(t.containerSelector)),null!=t.position&&(i.position=0|t.position),t.insertPosition){case"WithinContainer":case 0:i.insertPosition=0;break;case"BeforeContainer":case 1:i.insertPosition=1;break;case"AfterContainer":case 2:i.insertPosition=2;break;case"ReplaceContainer":case 3:i.insertPosition=3;break;case"HideContainer":case 4:i.insertPosition=4}switch(null!=t.forceInsertPath&&(i.forceInsertPath=Boolean(t.forceInsertPath)),null!=t.renderInFrame&&(i.renderInFrame=Boolean(t.renderInFrame)),null!=t.scrollHijackingProtection&&(i.scrollHijackingProtection=Boolean(t.scrollHijackingProtection)),null!=t.preRollBreak&&(i.preRollBreak=0|t.preRollBreak),null!=t.postRollBreak&&(i.postRollBreak=0|t.postRollBreak),null!=t.midRollNumber&&(i.midRollNumber=0|t.midRollNumber),null!=t.timeBetweenAds&&(i.timeBetweenAds=0|t.timeBetweenAds),null!=t.minTimeBeforeFirstAd&&(i.minTimeBeforeFirstAd=0|t.minTimeBeforeFirstAd),t.adViewabilityPolicy){case"Default":case 0:i.adViewabilityPolicy=0;break;case"Strict":case 1:i.adViewabilityPolicy=1}if(null!=t.responsive&&(i.responsive=Boolean(t.responsive)),null!=t.ratioWidth&&(i.ratioWidth=0|t.ratioWidth),null!=t.ratioHeight&&(i.ratioHeight=0|t.ratioHeight),null!=t.fixedWidth&&(i.fixedWidth=0|t.fixedWidth),null!=t.fixedHeight&&(i.fixedHeight=0|t.fixedHeight),null!=t.casting&&(i.casting=Boolean(t.casting)),t.sharingDestinations){if(!Array.isArray(t.sharingDestinations))throw TypeError(".ProtoElements.sharingDestinations: array expected");i.sharingDestinations=[];for(var e=0;e<t.sharingDestinations.length;++e)switch(t.sharingDestinations[e]){default:case"Facebook":case 0:i.sharingDestinations[e]=0;break;case"Twitter":case 1:i.sharingDestinations[e]=1;break;case"LinkedIn":case 2:i.sharingDestinations[e]=2}}switch(null!=t.closedCaption&&(i.closedCaption=Boolean(t.closedCaption)),null!=t.muteWatermark&&(i.muteWatermark=Boolean(t.muteWatermark)),null!=t.expandButton&&(i.expandButton=Boolean(t.expandButton)),t.closeButtonMode){case"Off":case 0:i.closeButtonMode=0;break;case"OnHover":case 1:i.closeButtonMode=1;break;case"OnHoverAfterFirstAd":case 2:i.closeButtonMode=2;break;case"AlwaysOn":case 3:i.closeButtonMode=3}switch(t.floatingMode){case"Off":case 0:i.floatingMode=0;break;case"OnPageLoad":case 1:i.floatingMode=1;break;case"AfterInView":case 2:i.floatingMode=2;break;case"Always":case 3:i.floatingMode=3}if(t.floatingDeviceMode){if(!Array.isArray(t.floatingDeviceMode))throw TypeError(".ProtoElements.floatingDeviceMode: array expected");i.floatingDeviceMode=[];for(e=0;e<t.floatingDeviceMode.length;++e)switch(t.floatingDeviceMode[e]){default:case"Desktop":case 0:i.floatingDeviceMode[e]=0;break;case"Smartphone":case 1:i.floatingDeviceMode[e]=1;break;case"Tablet":case 2:i.floatingDeviceMode[e]=2;break;case"GameConsole":case 3:i.floatingDeviceMode[e]=3;break;case"SmartTV":case 4:i.floatingDeviceMode[e]=4;break;case"WearableComputer":case 5:i.floatingDeviceMode[e]=5;break;case"PDA":case 6:i.floatingDeviceMode[e]=6;break;case"Unrecognized":case 7:i.floatingDeviceMode[e]=7}}switch(t.floatingCloseButtonMode){case"Off":case 0:i.floatingCloseButtonMode=0;break;case"OnHover":case 1:i.floatingCloseButtonMode=1;break;case"OnHoverAfterFirstAd":case 2:i.floatingCloseButtonMode=2;break;case"AlwaysOn":case 3:i.floatingCloseButtonMode=3}switch(t.floatingFixedPosition){case"Page":case 0:i.floatingFixedPosition=0;break;case"Element":case 1:i.floatingFixedPosition=1}switch(null!=t.floatingPageElement&&(i.floatingPageElement=String(t.floatingPageElement)),null!=t.floatingUseElementWidth&&(i.floatingUseElementWidth=Boolean(t.floatingUseElementWidth)),t.floatingScrollPosition){case"BottomRight":case 0:i.floatingScrollPosition=0;break;case"BottomLeft":case 1:i.floatingScrollPosition=1;break;case"TopRight":case 2:i.floatingScrollPosition=2;break;case"TopLeft":case 3:i.floatingScrollPosition=3}switch(null!=t.floatingGutterX&&(i.floatingGutterX=0|t.floatingGutterX),null!=t.floatingGutterY&&(i.floatingGutterY=0|t.floatingGutterY),null!=t.floatingWidth&&(i.floatingWidth=0|t.floatingWidth),null!=t.iconsColor&&(i.iconsColor=String(t.iconsColor)),null!=t.accentColor&&(i.accentColor=String(t.accentColor)),null!=t.tooltipTextColor&&(i.tooltipTextColor=String(t.tooltipTextColor)),null!=t.tooltipBackgroundColor&&(i.tooltipBackgroundColor=String(t.tooltipBackgroundColor)),null!=t.html&&(i.html=String(t.html)),t.galleryStyle){case"None":case 0:i.galleryStyle=0;break;case"Detailed":case 1:i.galleryStyle=1;break;case"Visual":case 2:i.galleryStyle=2}switch(t.logoPosition){case"None":case 0:i.logoPosition=0;break;case"ControlBar":case 1:i.logoPosition=1;break;case"BottomRight":case 2:i.logoPosition=2;break;case"BottomLeft":case 3:i.logoPosition=3;break;case"TopRight":case 4:i.logoPosition=4;break;case"TopLeft":case 5:i.logoPosition=5;break;case"Center":case 6:i.logoPosition=6}if(null!=t.logoUrl&&(i.logoUrl=String(t.logoUrl)),t.lineItems){if(!Array.isArray(t.lineItems))throw TypeError(".ProtoElements.lineItems: array expected");i.lineItems=[];for(e=0;e<t.lineItems.length;++e){if("object"!=typeof t.lineItems[e])throw TypeError(".ProtoElements.lineItems: object expected");i.lineItems[e]=c.ProtoLineItem.fromObject(t.lineItems[e])}}switch(t.adPlaybackMode){case"Autoplay":case 0:i.adPlaybackMode=0;break;case"ScrollToPlay":case 1:i.adPlaybackMode=1}switch(null!=t.css&&(i.css=String(t.css)),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.playlistId&&(i.playlistId=String(t.playlistId)),t.playerType){case"InStream":case 0:i.playerType=0;break;case"OutStream":case 1:i.playerType=1;break;case"InStreamInApp":case 2:i.playerType=2;break;case"Live":case 3:i.playerType=3}switch(t.outstreamInitialRendering){case"ExpandWithAd":case 0:i.outstreamInitialRendering=0;break;case"FullyRendered":case 1:i.outstreamInitialRendering=1}switch(null!=t.outstreamHouseBackgroundColor&&(i.outstreamHouseBackgroundColor=String(t.outstreamHouseBackgroundColor)),null!=t.outstreamTotalAdBreakLength&&(i.outstreamTotalAdBreakLength=0|t.outstreamTotalAdBreakLength),t.outstreamEndAdBreakPolicy){case"Hide":case 0:i.outstreamEndAdBreakPolicy=0;break;case"HouseScreen":case 1:i.outstreamEndAdBreakPolicy=1}switch(t.galleryOrientation){case"Landscape":case 0:i.galleryOrientation=0;break;case"Portrait":case 1:i.galleryOrientation=1}if(t.playlist){if(!Array.isArray(t.playlist))throw TypeError(".ProtoElements.playlist: array expected");i.playlist=[];for(e=0;e<t.playlist.length;++e){if("object"!=typeof t.playlist[e])throw TypeError(".ProtoElements.playlist: object expected");i.playlist[e]=c.ProtoPlaylistItem.fromObject(t.playlist[e])}}switch(t.floatingAppendLocation){case"Above":case 0:i.floatingAppendLocation=0;break;case"Below":case 1:i.floatingAppendLocation=1;break;case"Within":case 2:i.floatingAppendLocation=2}switch(null!=t.floatingYAxisPadding&&(i.floatingYAxisPadding=0|t.floatingYAxisPadding),null!=t.customJsCode&&(i.customJsCode=String(t.customJsCode)),t.videoQuality){case"Auto":case 0:i.videoQuality=0;break;case"High1080p":case 1:i.videoQuality=1;break;case"High720p":case 2:i.videoQuality=2;break;case"Medium360p":case 3:i.videoQuality=3}switch(null!=t.initializationSettingsJson&&(i.initializationSettingsJson=String(t.initializationSettingsJson)),t.adSkippability){case"IfLongerThan31Sec":case 0:i.adSkippability=0;break;case"Always":case 1:i.adSkippability=1;break;case"NoRestrictions":case 2:i.adSkippability=2}if(null!=t.skipAdAfter&&(i.skipAdAfter=0|t.skipAdAfter),t.adBreaks){if(!Array.isArray(t.adBreaks))throw TypeError(".ProtoElements.adBreaks: array expected");i.adBreaks=[];for(e=0;e<t.adBreaks.length;++e){if("object"!=typeof t.adBreaks[e])throw TypeError(".ProtoElements.adBreaks: object expected");i.adBreaks[e]=c.ProtoAdBreak.fromObject(t.adBreaks[e])}}return null!=t.amazonTamSlotId&&(i.amazonTamSlotId=String(t.amazonTamSlotId)),null!=t.midRollOnlyOnLongContent&&(i.midRollOnlyOnLongContent=Boolean(t.midRollOnlyOnLongContent)),null!=t.limitClientSideApiUse&&(i.limitClientSideApiUse=Boolean(t.limitClientSideApiUse)),null!=t.abTestId&&(i.abTestId=String(t.abTestId)),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.sharingDestinations=[],e.floatingDeviceMode=[],e.lineItems=[],e.playlist=[],e.adBreaks=[]),i.defaults&&(e.playerId="",e.playbackMode=i.enums===String?"Autoplay":0,e.soundMode=i.enums===String?"Mute":0,e.upNextMode=i.enums===String?"Next":1,e.containerSelector="",e.position=0,e.insertPosition=i.enums===String?"WithinContainer":0,e.forceInsertPath=!1,e.renderInFrame=!1,e.scrollHijackingProtection=!1,e.preRollBreak=0,e.postRollBreak=0,e.midRollNumber=-1,e.timeBetweenAds=0,e.minTimeBeforeFirstAd=0,e.adViewabilityPolicy=i.enums===String?"Default":0,e.responsive=!1,e.ratioWidth=0,e.ratioHeight=0,e.fixedWidth=0,e.fixedHeight=0,e.casting=!1,e.closedCaption=!1,e.muteWatermark=!1,e.expandButton=!1,e.closeButtonMode=i.enums===String?"Off":0,e.floatingMode=i.enums===String?"Off":0,e.floatingCloseButtonMode=i.enums===String?"Off":0,e.floatingFixedPosition=i.enums===String?"Page":0,e.floatingPageElement="",e.floatingUseElementWidth=!1,e.floatingScrollPosition=i.enums===String?"BottomRight":0,e.floatingGutterX=0,e.floatingGutterY=0,e.floatingWidth=0,e.iconsColor="",e.accentColor="",e.tooltipTextColor="",e.tooltipBackgroundColor="",e.html="",e.galleryStyle=i.enums===String?"None":0,e.logoPosition=i.enums===String?"None":0,e.logoUrl="",e.adPlaybackMode=i.enums===String?"Autoplay":0,e.css="",e.sessionId="",e.playlistId="",e.playerType=i.enums===String?"InStream":0,e.outstreamInitialRendering=i.enums===String?"ExpandWithAd":0,e.outstreamHouseBackgroundColor="",e.outstreamTotalAdBreakLength=0,e.outstreamEndAdBreakPolicy=i.enums===String?"Hide":0,e.galleryOrientation=i.enums===String?"Landscape":0,e.floatingAppendLocation=i.enums===String?"Above":0,e.floatingYAxisPadding=0,e.customJsCode="",e.videoQuality=i.enums===String?"Auto":0,e.initializationSettingsJson="",e.adSkippability=i.enums===String?"IfLongerThan31Sec":0,e.skipAdAfter=5,e.amazonTamSlotId="",e.midRollOnlyOnLongContent=!0,e.limitClientSideApiUse=!1,e.abTestId=""),null!=t.playerId&&t.hasOwnProperty("playerId")&&(e.playerId=t.playerId),null!=t.playbackMode&&t.hasOwnProperty("playbackMode")&&(e.playbackMode=i.enums===String?c.ProtoPlayerPlaybackModeEnum[t.playbackMode]:t.playbackMode),null!=t.soundMode&&t.hasOwnProperty("soundMode")&&(e.soundMode=i.enums===String?c.ProtoPlayerSoundMode[t.soundMode]:t.soundMode),null!=t.upNextMode&&t.hasOwnProperty("upNextMode")&&(e.upNextMode=i.enums===String?c.ProtoPlayerUpNextMode[t.upNextMode]:t.upNextMode),null!=t.containerSelector&&t.hasOwnProperty("containerSelector")&&(e.containerSelector=t.containerSelector),null!=t.position&&t.hasOwnProperty("position")&&(e.position=t.position),null!=t.insertPosition&&t.hasOwnProperty("insertPosition")&&(e.insertPosition=i.enums===String?c.ProtoPlayerInsertMode[t.insertPosition]:t.insertPosition),null!=t.forceInsertPath&&t.hasOwnProperty("forceInsertPath")&&(e.forceInsertPath=t.forceInsertPath),null!=t.renderInFrame&&t.hasOwnProperty("renderInFrame")&&(e.renderInFrame=t.renderInFrame),null!=t.scrollHijackingProtection&&t.hasOwnProperty("scrollHijackingProtection")&&(e.scrollHijackingProtection=t.scrollHijackingProtection),null!=t.preRollBreak&&t.hasOwnProperty("preRollBreak")&&(e.preRollBreak=t.preRollBreak),null!=t.postRollBreak&&t.hasOwnProperty("postRollBreak")&&(e.postRollBreak=t.postRollBreak),null!=t.midRollNumber&&t.hasOwnProperty("midRollNumber")&&(e.midRollNumber=t.midRollNumber),null!=t.timeBetweenAds&&t.hasOwnProperty("timeBetweenAds")&&(e.timeBetweenAds=t.timeBetweenAds),null!=t.minTimeBeforeFirstAd&&t.hasOwnProperty("minTimeBeforeFirstAd")&&(e.minTimeBeforeFirstAd=t.minTimeBeforeFirstAd),null!=t.adViewabilityPolicy&&t.hasOwnProperty("adViewabilityPolicy")&&(e.adViewabilityPolicy=i.enums===String?c.ProtoAdViewabilityPolicy[t.adViewabilityPolicy]:t.adViewabilityPolicy),null!=t.responsive&&t.hasOwnProperty("responsive")&&(e.responsive=t.responsive),null!=t.ratioWidth&&t.hasOwnProperty("ratioWidth")&&(e.ratioWidth=t.ratioWidth),null!=t.ratioHeight&&t.hasOwnProperty("ratioHeight")&&(e.ratioHeight=t.ratioHeight),null!=t.fixedWidth&&t.hasOwnProperty("fixedWidth")&&(e.fixedWidth=t.fixedWidth),null!=t.fixedHeight&&t.hasOwnProperty("fixedHeight")&&(e.fixedHeight=t.fixedHeight),null!=t.casting&&t.hasOwnProperty("casting")&&(e.casting=t.casting),t.sharingDestinations&&t.sharingDestinations.length){e.sharingDestinations=[];for(var s=0;s<t.sharingDestinations.length;++s)e.sharingDestinations[s]=i.enums===String?c.ProtoSharingDestination[t.sharingDestinations[s]]:t.sharingDestinations[s]}if(null!=t.closedCaption&&t.hasOwnProperty("closedCaption")&&(e.closedCaption=t.closedCaption),null!=t.muteWatermark&&t.hasOwnProperty("muteWatermark")&&(e.muteWatermark=t.muteWatermark),null!=t.expandButton&&t.hasOwnProperty("expandButton")&&(e.expandButton=t.expandButton),null!=t.closeButtonMode&&t.hasOwnProperty("closeButtonMode")&&(e.closeButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.closeButtonMode]:t.closeButtonMode),null!=t.floatingMode&&t.hasOwnProperty("floatingMode")&&(e.floatingMode=i.enums===String?c.ProtoPlayerFloatingMode[t.floatingMode]:t.floatingMode),t.floatingDeviceMode&&t.floatingDeviceMode.length){e.floatingDeviceMode=[];for(s=0;s<t.floatingDeviceMode.length;++s)e.floatingDeviceMode[s]=i.enums===String?c.ProtoDeviceType[t.floatingDeviceMode[s]]:t.floatingDeviceMode[s]}if(null!=t.floatingCloseButtonMode&&t.hasOwnProperty("floatingCloseButtonMode")&&(e.floatingCloseButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.floatingCloseButtonMode]:t.floatingCloseButtonMode),null!=t.floatingFixedPosition&&t.hasOwnProperty("floatingFixedPosition")&&(e.floatingFixedPosition=i.enums===String?c.ProtoFloatingFixedPositionMode[t.floatingFixedPosition]:t.floatingFixedPosition),null!=t.floatingPageElement&&t.hasOwnProperty("floatingPageElement")&&(e.floatingPageElement=t.floatingPageElement),null!=t.floatingUseElementWidth&&t.hasOwnProperty("floatingUseElementWidth")&&(e.floatingUseElementWidth=t.floatingUseElementWidth),null!=t.floatingScrollPosition&&t.hasOwnProperty("floatingScrollPosition")&&(e.floatingScrollPosition=i.enums===String?c.ProtoPositionMode[t.floatingScrollPosition]:t.floatingScrollPosition),null!=t.floatingGutterX&&t.hasOwnProperty("floatingGutterX")&&(e.floatingGutterX=t.floatingGutterX),null!=t.floatingGutterY&&t.hasOwnProperty("floatingGutterY")&&(e.floatingGutterY=t.floatingGutterY),null!=t.floatingWidth&&t.hasOwnProperty("floatingWidth")&&(e.floatingWidth=t.floatingWidth),null!=t.iconsColor&&t.hasOwnProperty("iconsColor")&&(e.iconsColor=t.iconsColor),null!=t.accentColor&&t.hasOwnProperty("accentColor")&&(e.accentColor=t.accentColor),null!=t.tooltipTextColor&&t.hasOwnProperty("tooltipTextColor")&&(e.tooltipTextColor=t.tooltipTextColor),null!=t.tooltipBackgroundColor&&t.hasOwnProperty("tooltipBackgroundColor")&&(e.tooltipBackgroundColor=t.tooltipBackgroundColor),null!=t.html&&t.hasOwnProperty("html")&&(e.html=t.html),null!=t.galleryStyle&&t.hasOwnProperty("galleryStyle")&&(e.galleryStyle=i.enums===String?c.ProtoGalleryStyleMode[t.galleryStyle]:t.galleryStyle),null!=t.logoPosition&&t.hasOwnProperty("logoPosition")&&(e.logoPosition=i.enums===String?c.ProtoLogoPositionMode[t.logoPosition]:t.logoPosition),null!=t.logoUrl&&t.hasOwnProperty("logoUrl")&&(e.logoUrl=t.logoUrl),t.lineItems&&t.lineItems.length){e.lineItems=[];for(s=0;s<t.lineItems.length;++s)e.lineItems[s]=c.ProtoLineItem.toObject(t.lineItems[s],i)}if(null!=t.adPlaybackMode&&t.hasOwnProperty("adPlaybackMode")&&(e.adPlaybackMode=i.enums===String?c.ProtoAdPlaybackMode[t.adPlaybackMode]:t.adPlaybackMode),null!=t.css&&t.hasOwnProperty("css")&&(e.css=t.css),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&(e.sessionId=t.sessionId),null!=t.playlistId&&t.hasOwnProperty("playlistId")&&(e.playlistId=t.playlistId),null!=t.playerType&&t.hasOwnProperty("playerType")&&(e.playerType=i.enums===String?c.ProtoElementsTypeEnum[t.playerType]:t.playerType),null!=t.outstreamInitialRendering&&t.hasOwnProperty("outstreamInitialRendering")&&(e.outstreamInitialRendering=i.enums===String?c.ProtoOutstreamInitialRenderingEnum[t.outstreamInitialRendering]:t.outstreamInitialRendering),null!=t.outstreamHouseBackgroundColor&&t.hasOwnProperty("outstreamHouseBackgroundColor")&&(e.outstreamHouseBackgroundColor=t.outstreamHouseBackgroundColor),null!=t.outstreamTotalAdBreakLength&&t.hasOwnProperty("outstreamTotalAdBreakLength")&&(e.outstreamTotalAdBreakLength=t.outstreamTotalAdBreakLength),null!=t.outstreamEndAdBreakPolicy&&t.hasOwnProperty("outstreamEndAdBreakPolicy")&&(e.outstreamEndAdBreakPolicy=i.enums===String?c.ProtoOutstreamEndAdBreakPolicyEnum[t.outstreamEndAdBreakPolicy]:t.outstreamEndAdBreakPolicy),null!=t.galleryOrientation&&t.hasOwnProperty("galleryOrientation")&&(e.galleryOrientation=i.enums===String?c.ProtoGalleryOrientationEnum[t.galleryOrientation]:t.galleryOrientation),t.playlist&&t.playlist.length){e.playlist=[];for(s=0;s<t.playlist.length;++s)e.playlist[s]=c.ProtoPlaylistItem.toObject(t.playlist[s],i)}if(null!=t.floatingAppendLocation&&t.hasOwnProperty("floatingAppendLocation")&&(e.floatingAppendLocation=i.enums===String?c.ProtoFloatingAppendLocationEnum[t.floatingAppendLocation]:t.floatingAppendLocation),null!=t.floatingYAxisPadding&&t.hasOwnProperty("floatingYAxisPadding")&&(e.floatingYAxisPadding=t.floatingYAxisPadding),null!=t.customJsCode&&t.hasOwnProperty("customJsCode")&&(e.customJsCode=t.customJsCode),null!=t.videoQuality&&t.hasOwnProperty("videoQuality")&&(e.videoQuality=i.enums===String?c.ProtoVideoQuality[t.videoQuality]:t.videoQuality),null!=t.initializationSettingsJson&&t.hasOwnProperty("initializationSettingsJson")&&(e.initializationSettingsJson=t.initializationSettingsJson),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&(e.adSkippability=i.enums===String?c.ProtoPlayerAdSkippability[t.adSkippability]:t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&(e.skipAdAfter=t.skipAdAfter),t.adBreaks&&t.adBreaks.length){e.adBreaks=[];for(s=0;s<t.adBreaks.length;++s)e.adBreaks[s]=c.ProtoAdBreak.toObject(t.adBreaks[s],i)}return null!=t.amazonTamSlotId&&t.hasOwnProperty("amazonTamSlotId")&&(e.amazonTamSlotId=t.amazonTamSlotId),null!=t.midRollOnlyOnLongContent&&t.hasOwnProperty("midRollOnlyOnLongContent")&&(e.midRollOnlyOnLongContent=t.midRollOnlyOnLongContent),null!=t.limitClientSideApiUse&&t.hasOwnProperty("limitClientSideApiUse")&&(e.limitClientSideApiUse=t.limitClientSideApiUse),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&(e.abTestId=t.abTestId),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoElementsResponse=function(){function t(t){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.players=o.emptyArray,t.prototype.browser=null,t.prototype.geoLocation=null,t.prototype.lineItems=o.emptyArray,t.prototype.cookieSyncUrls=o.emptyObject,t.prototype.explorationMode=!1,t.prototype.supplyChain=null,t.prototype.secondLevelDomain="",t.prototype.userInformation=null,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.isSeoTraffic=!1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&i.uint32(10).string(t.errorMessage),null!=t.players&&t.players.length)for(var e=0;e<t.players.length;++e)c.ProtoElements.encode(t.players[e],i.uint32(82).fork()).ldelim();if(null!=t.browser&&t.hasOwnProperty("browser")&&c.Browser.encode(t.browser,i.uint32(90).fork()).ldelim(),null!=t.geoLocation&&t.hasOwnProperty("geoLocation")&&c.GeoLocation.encode(t.geoLocation,i.uint32(98).fork()).ldelim(),null!=t.lineItems&&t.lineItems.length)for(e=0;e<t.lineItems.length;++e)c.ProtoLineItem.encode(t.lineItems[e],i.uint32(106).fork()).ldelim();if(null!=t.cookieSyncUrls&&t.hasOwnProperty("cookieSyncUrls")){var s=Object.keys(t.cookieSyncUrls);for(e=0;e<s.length;++e)i.uint32(114).fork().uint32(8).int32(s[e]).uint32(18).string(t.cookieSyncUrls[s[e]]).ldelim()}return null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&i.uint32(120).bool(t.explorationMode),null!=t.supplyChain&&t.hasOwnProperty("supplyChain")&&c.ProtoSupplyChain.encode(t.supplyChain,i.uint32(138).fork()).ldelim(),null!=t.secondLevelDomain&&t.hasOwnProperty("secondLevelDomain")&&i.uint32(146).string(t.secondLevelDomain),null!=t.userInformation&&t.hasOwnProperty("userInformation")&&c.ProtoUserInformation.encode(t.userInformation,i.uint32(162).fork()).ldelim(),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&i.uint32(168).int32(t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&i.uint32(176).int32(t.serverAb1),null!=t.isSeoTraffic&&t.hasOwnProperty("isSeoTraffic")&&i.uint32(184).bool(t.isSeoTraffic),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e,s=void 0===i?t.len:t.pos+i,n=new c.ProtoElementsResponse;t.pos<s;){var r=t.uint32();switch(r>>>3){case 1:n.errorMessage=t.string();break;case 10:n.players&&n.players.length||(n.players=[]),n.players.push(c.ProtoElements.decode(t,t.uint32()));break;case 11:n.browser=c.Browser.decode(t,t.uint32());break;case 12:n.geoLocation=c.GeoLocation.decode(t,t.uint32());break;case 13:n.lineItems&&n.lineItems.length||(n.lineItems=[]),n.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 14:t.skip().pos++,n.cookieSyncUrls===o.emptyObject&&(n.cookieSyncUrls={}),e=t.int32(),t.pos++,n.cookieSyncUrls[e]=t.string();break;case 15:n.explorationMode=t.bool();break;case 17:n.supplyChain=c.ProtoSupplyChain.decode(t,t.uint32());break;case 18:n.secondLevelDomain=t.string();break;case 20:n.userInformation=c.ProtoUserInformation.decode(t,t.uint32());break;case 21:n.serverAb0=t.int32();break;case 22:n.serverAb1=t.int32();break;case 23:n.isSeoTraffic=t.bool();break;default:t.skipType(7&r)}}return n},t.fromObject=function(t){if(t instanceof c.ProtoElementsResponse)return t;var i=new c.ProtoElementsResponse;if(null!=t.errorMessage&&(i.errorMessage=String(t.errorMessage)),t.players){if(!Array.isArray(t.players))throw TypeError(".ProtoElementsResponse.players: array expected");i.players=[];for(var e=0;e<t.players.length;++e){if("object"!=typeof t.players[e])throw TypeError(".ProtoElementsResponse.players: object expected");i.players[e]=c.ProtoElements.fromObject(t.players[e])}}if(null!=t.browser){if("object"!=typeof t.browser)throw TypeError(".ProtoElementsResponse.browser: object expected");i.browser=c.Browser.fromObject(t.browser)}if(null!=t.geoLocation){if("object"!=typeof t.geoLocation)throw TypeError(".ProtoElementsResponse.geoLocation: object expected");i.geoLocation=c.GeoLocation.fromObject(t.geoLocation)}if(t.lineItems){if(!Array.isArray(t.lineItems))throw TypeError(".ProtoElementsResponse.lineItems: array expected");i.lineItems=[];for(e=0;e<t.lineItems.length;++e){if("object"!=typeof t.lineItems[e])throw TypeError(".ProtoElementsResponse.lineItems: object expected");i.lineItems[e]=c.ProtoLineItem.fromObject(t.lineItems[e])}}if(t.cookieSyncUrls){if("object"!=typeof t.cookieSyncUrls)throw TypeError(".ProtoElementsResponse.cookieSyncUrls: object expected");i.cookieSyncUrls={};var s=Object.keys(t.cookieSyncUrls);for(e=0;e<s.length;++e)i.cookieSyncUrls[s[e]]=String(t.cookieSyncUrls[s[e]])}if(null!=t.explorationMode&&(i.explorationMode=Boolean(t.explorationMode)),null!=t.supplyChain){if("object"!=typeof t.supplyChain)throw TypeError(".ProtoElementsResponse.supplyChain: object expected");i.supplyChain=c.ProtoSupplyChain.fromObject(t.supplyChain)}if(null!=t.secondLevelDomain&&(i.secondLevelDomain=String(t.secondLevelDomain)),null!=t.userInformation){if("object"!=typeof t.userInformation)throw TypeError(".ProtoElementsResponse.userInformation: object expected");i.userInformation=c.ProtoUserInformation.fromObject(t.userInformation)}return null!=t.serverAb0&&(i.serverAb0=0|t.serverAb0),null!=t.serverAb1&&(i.serverAb1=0|t.serverAb1),null!=t.isSeoTraffic&&(i.isSeoTraffic=Boolean(t.isSeoTraffic)),i},t.toObject=function(t,i){i||(i={});var e,s={};if((i.arrays||i.defaults)&&(s.players=[],s.lineItems=[]),(i.objects||i.defaults)&&(s.cookieSyncUrls={}),i.defaults&&(s.errorMessage="",s.browser=null,s.geoLocation=null,s.explorationMode=!1,s.supplyChain=null,s.secondLevelDomain="",s.userInformation=null,s.serverAb0=0,s.serverAb1=0,s.isSeoTraffic=!1),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(s.errorMessage=t.errorMessage),t.players&&t.players.length){s.players=[];for(var n=0;n<t.players.length;++n)s.players[n]=c.ProtoElements.toObject(t.players[n],i)}if(null!=t.browser&&t.hasOwnProperty("browser")&&(s.browser=c.Browser.toObject(t.browser,i)),null!=t.geoLocation&&t.hasOwnProperty("geoLocation")&&(s.geoLocation=c.GeoLocation.toObject(t.geoLocation,i)),t.lineItems&&t.lineItems.length){s.lineItems=[];for(n=0;n<t.lineItems.length;++n)s.lineItems[n]=c.ProtoLineItem.toObject(t.lineItems[n],i)}if(t.cookieSyncUrls&&(e=Object.keys(t.cookieSyncUrls)).length){s.cookieSyncUrls={};for(n=0;n<e.length;++n)s.cookieSyncUrls[e[n]]=t.cookieSyncUrls[e[n]]}return null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&(s.explorationMode=t.explorationMode),null!=t.supplyChain&&t.hasOwnProperty("supplyChain")&&(s.supplyChain=c.ProtoSupplyChain.toObject(t.supplyChain,i)),null!=t.secondLevelDomain&&t.hasOwnProperty("secondLevelDomain")&&(s.secondLevelDomain=t.secondLevelDomain),null!=t.userInformation&&t.hasOwnProperty("userInformation")&&(s.userInformation=c.ProtoUserInformation.toObject(t.userInformation,i)),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&(s.serverAb0=t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&(s.serverAb1=t.serverAb1),null!=t.isSeoTraffic&&t.hasOwnProperty("isSeoTraffic")&&(s.isSeoTraffic=t.isSeoTraffic),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItemPriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemPauseAdOutOfViewEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.encode=function(t,i){return i||(i=a.create()),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&i.uint32(8).int32(t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&i.uint32(16).int32(t.adBreakTypeEnum),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakTargeting)return t;var i=new c.ProtoLineItemAdBreakTargeting;switch(t.adRollType){case"None":case 0:i.adRollType=0;break;case"PreRoll":case 1:i.adRollType=1;break;case"MidRoll":case 2:i.adRollType=2;break;case"PostRoll":case 3:i.adRollType=3}switch(t.adBreakTypeEnum){case"All":case 1:i.adBreakTypeEnum=1;break;case"SingleAd":case 2:i.adBreakTypeEnum=2;break;case"AdPod":case 3:i.adBreakTypeEnum=3}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&i.uint32(8).int32(t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&i.uint32(16).int32(t.adSlotTargetingType),null!=t.adSlotPositions&&t.adSlotPositions.length){i.uint32(26).fork();for(var e=0;e<t.adSlotPositions.length;++e)i.int32(t.adSlotPositions[e]);i.ldelim()}return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdPodTargeting)return t;var i=new c.ProtoLineItemAdPodTargeting;switch(t.targetingType){case"Only":case 0:i.targetingType=0;break;case"Except":case 1:i.targetingType=1}switch(t.adSlotTargetingType){case"SpecificSlots":case 1:i.adSlotTargetingType=1;break;case"Interval":case 2:i.adSlotTargetingType=2}if(t.adSlotPositions){if(!Array.isArray(t.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");i.adSlotPositions=[];for(var e=0;e<t.adSlotPositions.length;++e)i.adSlotPositions[e]=0|t.adSlotPositions[e]}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.encode=function(t,i){if(i||(i=a.create()),null!=t.adBreakTargeting&&t.adBreakTargeting.length)for(var e=0;e<t.adBreakTargeting.length;++e)c.ProtoLineItemAdBreakTargeting.encode(t.adBreakTargeting[e],i.uint32(10).fork()).ldelim();return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&c.ProtoLineItemAdPodTargeting.encode(t.adPodTargeting,i.uint32(18).fork()).ldelim(),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakSettings)return t;var i=new c.ProtoLineItemAdBreakSettings;if(t.adBreakTargeting){if(!Array.isArray(t.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");i.adBreakTargeting=[];for(var e=0;e<t.adBreakTargeting.length;++e){if("object"!=typeof t.adBreakTargeting[e])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");i.adBreakTargeting[e]=c.ProtoLineItemAdBreakTargeting.fromObject(t.adBreakTargeting[e])}}if(null!=t.adPodTargeting){if("object"!=typeof t.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");i.adPodTargeting=c.ProtoLineItemAdPodTargeting.fromObject(t.adPodTargeting)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeSpent=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.bidRate=0,t.prototype.pauseAdOutOfView=0,t.prototype.moatTrackingEnabled=!1,t.prototype.cnxCreativeId="",t.prototype.blockedDomainsRevisionNumber=0,t.prototype.playerSize="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeSpent=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 39:s.bidRate=t.double();break;case 40:s.pauseAdOutOfView=t.int32();break;case 41:s.moatTrackingEnabled=t.bool();break;case 42:s.cnxCreativeId=t.string();break;case 44:s.blockedDomainsRevisionNumber=t.int32();break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.sound=!1,e.viewability=!1,e.impressionTimeSpent=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.bidRate=0,e.pauseAdOutOfView=i.enums===String?"Default":0,e.moatTrackingEnabled=!1,e.cnxCreativeId="",e.blockedDomainsRevisionNumber=0,e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItemPriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}return null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.pauseAdOutOfView&&t.hasOwnProperty("pauseAdOutOfView")&&(e.pauseAdOutOfView=i.enums===String?c.ProtoLineItemPauseAdOutOfViewEnum[t.pauseAdOutOfView]:t.pauseAdOutOfView),null!=t.moatTrackingEnabled&&t.hasOwnProperty("moatTrackingEnabled")&&(e.moatTrackingEnabled=t.moatTrackingEnabled),null!=t.cnxCreativeId&&t.hasOwnProperty("cnxCreativeId")&&(e.cnxCreativeId=t.cnxCreativeId),null!=t.blockedDomainsRevisionNumber&&t.hasOwnProperty("blockedDomainsRevisionNumber")&&(e.blockedDomainsRevisionNumber=t.blockedDomainsRevisionNumber),null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&i.uint32(8).int32(t.choiceCriteria),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoTargetingChoiceModel)return t;var i=new c.ProtoTargetingChoiceModel;switch(t.choiceCriteria){case"Only":case 0:i.choiceCriteria=0;break;case"Except":case 1:i.choiceCriteria=1}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"Image":0,e.trigger=i.enums===String?"Impression":0,e.url=""),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoTrackerType[t.type]:t.type),null!=t.trigger&&t.hasOwnProperty("trigger")&&(e.trigger=i.enums===String?c.ProtoTrackerTriggerType[t.trigger]:t.trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoPlayerPlaybackModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i[t[2]="ClickToPlay"]=2,i}(),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoVideoQuality=function(){var t={},i=Object.create(t);return i[t[0]="Auto"]=0,i[t[1]="High1080p"]=1,i[t[2]="High720p"]=2,i[t[3]="Medium360p"]=3,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.encode=function(t,i){return i||(i=a.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&i.uint32(26).string(t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&i.uint32(32).int32(t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&i.uint32(40).bool(t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&i.uint32(50).string(t.publisherAdsTxt),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoUserInformation)return t;var i=new c.ProtoUserInformation;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.lookupId&&(i.lookupId=String(t.lookupId)),null!=t.lookupResponseCode&&(i.lookupResponseCode=0|t.lookupResponseCode),null!=t.callFraudSensor&&(i.callFraudSensor=Boolean(t.callFraudSensor)),null!=t.publisherAdsTxt&&(i.publisherAdsTxt=String(t.publisherAdsTxt)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.types&&t.types.length){i.uint32(10).fork();for(var e=0;e<t.types.length;++e)i.int32(t.types[e]);i.ldelim()}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&i.uint32(16).int32(t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&i.uint32(24).int32(t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&i.uint32(32).int32(t.numberOfAdSlots),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAdBreak)return t;var i=new c.ProtoAdBreak;if(t.types){if(!Array.isArray(t.types))throw TypeError(".ProtoAdBreak.types: array expected");i.types=[];for(var e=0;e<t.types.length;++e)switch(t.types[e]){default:case"None":case 0:i.types[e]=0;break;case"PreRoll":case 1:i.types[e]=1;break;case"MidRoll":case 2:i.types[e]=2;break;case"PostRoll":case 3:i.types[e]=3}}return null!=t.maxAdPodDuration&&(i.maxAdPodDuration=0|t.maxAdPodDuration),null!=t.maxAdSlotDuration&&(i.maxAdSlotDuration=0|t.maxAdSlotDuration),null!=t.numberOfAdSlots&&(i.numberOfAdSlots=0|t.numberOfAdSlots),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=c},function(t,i,e){"use strict";e.d(i,"c",function(){return a}),e.d(i,"d",function(){return o}),e.d(i,"e",function(){return c}),e.d(i,"g",function(){return u}),e.d(i,"f",function(){return l}),e.d(i,"l",function(){return d}),e.d(i,"k",function(){return f}),e.d(i,"b",function(){return p}),e.d(i,"a",function(){return v}),e.d(i,"i",function(){return b}),e.d(i,"h",function(){return m}),e.d(i,"j",function(){return g});var s=e(22),n=e(1),r=e(30),h=e(6);function a(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===i?e:3&e|8).toString(16)})}function o(t=5,i=""){return t?o(--t,i+=Math.floor(65536*(1+Math.random())).toString(16).substring(1)):i+Date.now().toString()}function c(t,i){let e="";if(!t.err)try{e=t.topFrame.location.href}catch(t){}if(!e||0===e.length)try{e=i.top.location.href}catch(t){}if(!e||0===e.length)try{e=t.topFrame.document.referrer}catch(t){}return e}function u(t){try{const i=t.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:t,protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7]}}catch(t){return null}}function l(t){let i=t,e=null,s=!1;try{for(;i.parent.document!==i.document;){if(!i.parent.document){s=!0;break}e=i,i=i.parent}}catch(t){s=!0}return{topFrame:i,topChildFrame:e,err:s}}function d(t=[],i,e={}){t.forEach(t=>{Object(n.g)(t)&&((new i.Image).src=`${t}${Object(s.c)(t)}${function(t,i){const e=[];return Object.keys(t).forEach(s=>{const a=i?`${i}[${s}]`:s,o=t[s];if(Object(n.f)(o))e.push(`${encodeURIComponent(a)}=${Object(r.c)(o)}`);else if(Array.isArray(o))e.push(`${encodeURIComponent(a)}=${Object(h.l)(o)}`);else if(null!=o){const t=encodeURIComponent(o),i=encodeURIComponent(a);t&&i&&e.push(`${i}=${t}`)}}),e.join("&")}(e)}`)})}function f(t){const i=Math.floor(100*Math.random());let e=0,s=0;for(let n=0;n<t.length;n++)if(i<(s+=t[n])){e=n;break}return e}function p(){let t=!1;try{const i=document.createElement("audio");i.volume=1,i.muted=!1;const e=i.play();void 0!==e&&e.catch(()=>{}),t=!i.paused,i.pause()}catch(t){}return t}function v(t,i=0,...e){return setTimeout(()=>{t.apply(this,e)},i)}function b(t,i){return Object(n.f)(t)?Object(r.b)(t,i):Array.isArray(t)?Object(h.j)(t,i):t===i}function m(t,i,e){let s=0,n=t;for(;s<=e;){if(s++,n.classList.contains(i))return!0;if(!(n=n.parentElement))return!1}return!1}function g(t,i=5){return new Promise((e,s)=>{t().then(e).catch(n=>{1!==i?g(t,i-1).then(e,s):s(n)})})}},function(t,i,e){"use strict";var s;!function(t){t[t.HoldStart=0]="HoldStart",t[t.HoldEnd=1]="HoldEnd",t[t.TapLeft=2]="TapLeft",t[t.TapRight=3]="TapRight",t[t.SwipeEnd=4]="SwipeEnd",t[t.SwipeMove=5]="SwipeMove",t[t.Scroll=6]="Scroll",t[t.Click=7]="Click"}(s||(s={})),i.a=s},function(t,i,e){"use strict";e.d(i,"b",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"e",function(){return r}),e.d(i,"f",function(){return h}),e.d(i,"g",function(){return a}),e.d(i,"a",function(){return o}),e.d(i,"c",function(){return c});const s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,n=36e5,r=6e4,h=1e3,a=60,o=864e5,c=60},function(t,i,e){"use strict";var s,n,r,h;e.d(i,"a",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"c",function(){return r}),e.d(i,"b",function(){return h}),function(t){t[t.Idle=0]="Idle",t[t.Loading=1]="Loading",t[t.Ready=2]="Ready",t[t.Error=3]="Error",t[t.Capped=4]="Capped",t[t.InWin=5]="InWin",t[t.Consumed=6]="Consumed",t[t.InImpression=7]="InImpression"}(s||(s={})),function(t){t[t.Javascript=0]="Javascript",t[t.Video=1]="Video"}(n||(n={})),function(t){t.Timeout="timeout",t.TimeoutLoaded="timeout_loaded",t.VpaidError="vpaidError",t.ImaError="imaError",t.ImaScriptFailure="imaScriptFailure",t.ImaObjectNotFound="imaObjectNotFound",t.SpotxError="spotxError",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.SpotXAdOSInit="spotxAdOSInit",t.SpotXLoadAd="spotxLoadAd",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidEnforcements="vpaidEnforcements",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.AolImpresssionFunction="aolCustom",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.CreateSameAd="createSameAd",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorNoHtml="displayIntegratorNoMime",t.DisplayIntegratorJavascriptSyntax="displayIntegratorJavascriptSyntax",t.DisplayIntegratorIframeLoad="displayIntegratorIframeLoad",t.EnforcementMalware="malwareDetected",t.EnforcementVolume="volumeDetected",t.Cancelled="adManagerRemoved",t.DomainBlocked="domainBlocked",t.AdaptorStartAdError="adaptorStartAdError",t.AdaptorInitAdError="adaptorInitAdError",t.WrapperStartAdError="wrapperStartAdError",t.WrapperInitAdError="wrapperInitAdError"}(r||(r={})),function(t){t.Html="text/html",t.Javascript="application/javascript"}(h||(h={}))},function(t,i,e){"use strict";const s=e(3).b,n=Object.assign(Object.assign({},s),{AdBreakStart:"adBreakStart",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",PlayError:"playError",RenderError:"renderError",AdStateChange:"adStateChange",VolumeChange:"volumeChange",Destroy:"destroy"});i.a=n},function(t,i,e){"use strict";e.d(i,"d",function(){return s}),e.d(i,"c",function(){return n}),e.d(i,"e",function(){return r}),e.d(i,"b",function(){return h}),e.d(i,"a",function(){return a});const s={Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"},n={FullscreenChanged:"fullscreenChanged",PlayerFloatChanged:"playerFloatChanged"},r={OmidViewabilityThreshold:"OmidViewabilityThreshold"},h=Object.assign(Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",BrandingClicked:"brandingClicked",ImpressionPrice:"impressionPrice"},s),n),r),{AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"});var a;!function(t){t.SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError"}(a||(a={}))},function(t,i,e){"use strict";var s;e.d(i,"c",function(){return s}),e.d(i,"b",function(){return n}),e.d(i,"a",function(){return r}),function(t){t.SessionRendered="rendered",t.SessionView="enter_view"}(s||(s={}));const n={UserInteraction:"userInteraction",GeneralUserInteraction:"generalUserInteraction",CanStart:"canStart",Destroy:"destroy"},r={StateChanged:"stateChanged"}},function(t,i,e){"undefined"!=typeof window&&(t.exports=function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"S",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.S)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t.S?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s=13)}([function(t,i,e){"use strict";e.d(i,"a",function(){return o}),e.d(i,"b",function(){return c});var s=e(5);function n(){}var r={trace:n,debug:n,log:n,warn:n,info:n,error:n},h=r,a=Object(s.a)(),o=function(t){if(a.console&&!0===t||"object"==typeof t){!function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];e.forEach(function(i){h[i]=t[i]?t[i].bind(t):function(t){var i=a.console[t];return i?function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];s[0]&&(s[0]=function(t,i){return i="["+t+"] > "+i}(t,s[0])),i.apply(a.console,s)}:n}(i)})}(t,"debug","log","info","warn","error");try{h.log()}catch(t){h=r}}else h=r},c=h},function(t,i,e){"use strict";i.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},function(t,i,e){"use strict";var s,n;e.d(i,"b",function(){return s}),e.d(i,"a",function(){return n}),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(s||(s={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"}(n||(n={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)}},function(t,i,e){"use strict";e.d(i,"b",function(){return a});var s,n=e(5),r=function(){function t(){}return t.isHeader=function(t,i){return i+10<=t.length&&73===t[i]&&68===t[i+1]&&51===t[i+2]&&t[i+3]<255&&t[i+4]<255&&t[i+6]<128&&t[i+7]<128&&t[i+8]<128&&t[i+9]<128},t.isFooter=function(t,i){return i+10<=t.length&&51===t[i]&&68===t[i+1]&&73===t[i+2]&&t[i+3]<255&&t[i+4]<255&&t[i+6]<128&&t[i+7]<128&&t[i+8]<128&&t[i+9]<128},t.getID3Data=function(i,e){for(var s=e,n=0;t.isHeader(i,e);)n+=10,n+=t._(i,e+6),t.isFooter(i,e+10)&&(n+=10),e+=n;if(n>0)return i.subarray(s,s+n)},t._=function(t,i){var e=0;return e=(127&t[i])<<21,e|=(127&t[i+1])<<14,e|=(127&t[i+2])<<7,e|=127&t[i+3]},t.getTimeStamp=function(i){for(var e=t.getID3Frames(i),s=0;s<e.length;s++){var n=e[s];if(t.isTimeStampFrame(n))return t.T(n)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t.R=function(i){var e=String.fromCharCode(i[0],i[1],i[2],i[3]),s=t._(i,4);return{type:e,size:s,data:i.subarray(10,10+s)}},t.getID3Frames=function(i){for(var e=0,s=[];t.isHeader(i,e);){for(var n=t._(i,e+6),r=(e+=10)+n;e+8<r;){var h=t.R(i.subarray(e)),a=t.V(h);a&&s.push(a),e+=h.size+10}t.isFooter(i,e)&&(e+=10)}return s},t.V=function(i){return"PRIV"===i.type?t.U(i):"T"===i.type[0]?t.$(i):"W"===i.type[0]?t.W(i):void 0},t.T=function(t){if(8===t.data.byteLength){var i=new Uint8Array(t.data),e=1&i[3],s=(i[4]<<23)+(i[5]<<15)+(i[6]<<7)+i[7];return s/=45,e&&(s+=47721858.84),Math.round(s)}},t.U=function(i){if(!(i.size<2)){var e=t.Z(i.data,!0),s=new Uint8Array(i.data.subarray(e.length+1));return{key:i.type,info:e,data:s.buffer}}},t.$=function(i){if(!(i.size<2)){if("TXXX"===i.type){var e=1,s=t.Z(i.data.subarray(e),!0);e+=s.length+1;var n=t.Z(i.data.subarray(e));return{key:i.type,info:s,data:n}}var r=t.Z(i.data.subarray(1));return{key:i.type,data:r}}},t.W=function(i){if("WXXX"===i.type){if(i.size<2)return;var e=1,s=t.Z(i.data.subarray(e));e+=s.length+1;var n=t.Z(i.data.subarray(e));return{key:i.type,info:s,data:n}}var r=t.Z(i.data);return{key:i.type,data:r}},t.Z=function(t,i){void 0===i&&(i=!1);var e=h();if(e){var s=e.decode(t);if(i){var n=s.indexOf("\0");return-1!==n?s.substring(0,n):s}return s.replace(/\0/g,"")}for(var r,a,o,c=t.length,u="",l=0;l<c;){if(0===(r=t[l++])&&i)return u;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(r);break;case 12:case 13:a=t[l++],u+=String.fromCharCode((31&r)<<6|63&a);break;case 14:a=t[l++],o=t[l++],u+=String.fromCharCode((15&r)<<12|(63&a)<<6|(63&o)<<0)}}return u},t}();function h(){var t=Object(n.a)();return s||void 0===t.TextDecoder||(s=new t.TextDecoder("utf-8")),s}var a=r.Z;i.a=r},function(t,i,e){"use strict";function s(){return"undefined"==typeof window?self:window.cnxRenderWindow?window.cnxRenderWindow:window}e.d(i,"a",function(){return s})},function(t,i){t.exports=void 0},function(t,i,e){var s,n,r,h,a;s=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,h=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(t,i,e){if(e=e||{},t=t.trim(),!(i=i.trim())){if(!e.alwaysNormalize)return t;var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return s.path=a.normalizePath(s.path),a.buildURLFromParts(s)}var r=a.parseURL(i);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return e.alwaysNormalize?(r.path=a.normalizePath(r.path),a.buildURLFromParts(r)):i;var h=a.parseURL(t);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&"/"!==h.path[0]){var o=n.exec(h.path);h.netLoc=o[1],h.path=o[2]}h.netLoc&&!h.path&&(h.path="/");var c={scheme:h.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(c.netLoc=h.netLoc,"/"!==r.path[0]))if(r.path){var u=h.path,l=u.substring(0,u.lastIndexOf("/")+1)+r.path;c.path=a.normalizePath(l)}else c.path=h.path,r.params||(c.params=h.params,r.query||(c.query=h.query));return null===c.path&&(c.path=e.alwaysNormalize?a.normalizePath(r.path):r.path),a.buildURLFromParts(c)},parseURL:function(t){var i=s.exec(t);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(h,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=a},function(t,i,e){"use strict";var s=Object.prototype.hasOwnProperty,n="~";function r(){}function h(t,i,e){this.fn=t,this.context=i,this.once=e||!1}function a(t,i,e,s,r){if("function"!=typeof e)throw new TypeError("The listener must be a function");var a=new h(e,s||t,r),o=n?n+i:i;return t.tt[o]?t.tt[o].fn?t.tt[o]=[t.tt[o],a]:t.tt[o].push(a):(t.tt[o]=a,t.it++),t}function o(t,i){0==--t.it?t.tt=new r:delete t.tt[i]}function c(){this.tt=new r,this.it=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),c.prototype.eventNames=function(){var t,i,e=[];if(0===this.it)return e;for(i in t=this.tt)s.call(t,i)&&e.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(t){var i=n?n+t:t,e=this.tt[i];if(!e)return[];if(e.fn)return[e.fn];for(var s=0,r=e.length,h=new Array(r);s<r;s++)h[s]=e[s].fn;return h},c.prototype.listenerCount=function(t){var i=n?n+t:t,e=this.tt[i];return e?e.fn?1:e.length:0},c.prototype.emit=function(t,i,e,s,r,h){var a=n?n+t:t;if(!this.tt[a])return!1;var o,c,u=this.tt[a],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,i),!0;case 3:return u.fn.call(u.context,i,e),!0;case 4:return u.fn.call(u.context,i,e,s),!0;case 5:return u.fn.call(u.context,i,e,s,r),!0;case 6:return u.fn.call(u.context,i,e,s,r,h),!0}for(c=1,o=new Array(l-1);c<l;c++)o[c-1]=arguments[c];u.fn.apply(u.context,o)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),l){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,i);break;case 3:u[c].fn.call(u[c].context,i,e);break;case 4:u[c].fn.call(u[c].context,i,e,s);break;default:if(!o)for(d=1,o=new Array(l-1);d<l;d++)o[d-1]=arguments[d];u[c].fn.apply(u[c].context,o)}}return!0},c.prototype.on=function(t,i,e){return a(this,t,i,e,!1)},c.prototype.once=function(t,i,e){return a(this,t,i,e,!0)},c.prototype.removeListener=function(t,i,e,s){var r=n?n+t:t;if(!this.tt[r])return this;if(!i)return o(this,r),this;var h=this.tt[r];if(h.fn)h.fn!==i||s&&!h.once||e&&h.context!==e||o(this,r);else{for(var a=0,c=[],u=h.length;a<u;a++)(h[a].fn!==i||s&&!h[a].once||e&&h[a].context!==e)&&c.push(h[a]);c.length?this.tt[r]=1===c.length?c[0]:c:o(this,r)}return this},c.prototype.removeAllListeners=function(t){var i;return t?(i=n?n+t:t,this.tt[i]&&o(this,i)):(this.tt=new r,this.it=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c},function(t,i,e){"use strict";var s=e(1),n=e(2),r=function(){function t(t,i){this.subtle=t,this.aesIV=i}return t.prototype.decrypt=function(t,i){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},i,t)},t}(),h=function(){function t(t,i){this.subtle=t,this.key=i}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),a=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var i=t.prototype;return i.uint8ArrayToUint32Array_=function(t){for(var i=new DataView(t),e=new Uint32Array(4),s=0;s<4;s++)e[s]=i.getUint32(4*s);return e},i.initTable=function(){var t=this.sBox,i=this.invSBox,e=this.subMix,s=e[0],n=e[1],r=e[2],h=e[3],a=this.invSubMix,o=a[0],c=a[1],u=a[2],l=a[3],d=new Uint32Array(256),f=0,p=0,v=0;for(v=0;v<256;v++)d[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var b=p^p<<1^p<<2^p<<3^p<<4;b=b>>>8^255&b^99,t[f]=b,i[b]=f;var m=d[f],g=d[m],y=d[g],w=257*d[b]^16843008*b;s[f]=w<<24|w>>>8,n[f]=w<<16|w>>>16,r[f]=w<<8|w>>>24,h[f]=w,w=16843009*y^65537*g^257*m^16843008*f,o[b]=w<<24|w>>>8,c[b]=w<<16|w>>>16,u[b]=w<<8|w>>>24,l[b]=w,f?(f=m^d[d[d[y^m]]],p^=d[d[p]]):f=p=1}},i.expandKey=function(t){for(var i=this.uint8ArrayToUint32Array_(t),e=!0,s=0;s<i.length&&e;)e=i[s]===this.key[s],s++;if(!e){this.key=i;var n=this.keySize=i.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var r,h,a,o,c=this.ksRows=4*(n+6+1),u=this.keySchedule=new Uint32Array(c),l=this.invKeySchedule=new Uint32Array(c),d=this.sBox,f=this.rcon,p=this.invSubMix,v=p[0],b=p[1],m=p[2],g=p[3];for(r=0;r<c;r++)r<n?a=u[r]=i[r]:(o=a,r%n==0?(o=d[(o=o<<8|o>>>24)>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o],o^=f[r/n|0]<<24):n>6&&r%n==4&&(o=d[o>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o]),u[r]=a=(u[r-n]^o)>>>0);for(h=0;h<c;h++)r=c-h,o=3&h?u[r]:u[r-4],l[h]=h<4||r<=4?o:v[d[o>>>24]]^b[d[o>>>16&255]]^m[d[o>>>8&255]]^g[d[255&o]],l[h]=l[h]>>>0}},i.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},i.decrypt=function(t,i,e,s){for(var n,r,h,a,o,c,u,l,d,f,p,v,b,m,g,y,w,x=this.keySize+6,k=this.invKeySchedule,S=this.invSBox,O=this.invSubMix,_=O[0],j=O[1],A=O[2],I=O[3],C=this.uint8ArrayToUint32Array_(e),T=C[0],P=C[1],M=C[2],E=C[3],L=new Int32Array(t),R=new Int32Array(L.length),B=this.networkToHostOrderSwap;i<L.length;){for(d=B(L[i]),f=B(L[i+1]),p=B(L[i+2]),v=B(L[i+3]),o=d^k[0],c=v^k[1],u=p^k[2],l=f^k[3],b=4,m=1;m<x;m++)n=_[o>>>24]^j[c>>16&255]^A[u>>8&255]^I[255&l]^k[b],r=_[c>>>24]^j[u>>16&255]^A[l>>8&255]^I[255&o]^k[b+1],h=_[u>>>24]^j[l>>16&255]^A[o>>8&255]^I[255&c]^k[b+2],a=_[l>>>24]^j[o>>16&255]^A[c>>8&255]^I[255&u]^k[b+3],o=n,c=r,u=h,l=a,b+=4;n=S[o>>>24]<<24^S[c>>16&255]<<16^S[u>>8&255]<<8^S[255&l]^k[b],r=S[c>>>24]<<24^S[u>>16&255]<<16^S[l>>8&255]<<8^S[255&o]^k[b+1],h=S[u>>>24]<<24^S[l>>16&255]<<16^S[o>>8&255]<<8^S[255&c]^k[b+2],a=S[l>>>24]<<24^S[o>>16&255]<<16^S[c>>8&255]<<8^S[255&u]^k[b+3],b+=3,R[i]=B(n^T),R[i+1]=B(a^P),R[i+2]=B(h^M),R[i+3]=B(r^E),T=d,P=f,M=p,E=v,i+=4}return s?(g=R.buffer,y=g.byteLength,(w=y&&new DataView(g).getUint8(y-1))?g.slice(0,y-w):g):R.buffer},i.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),o=e(0),c=e(5),u=function(){function t(t,i,e){var s=(void 0===e?{}:e).removePKCS7Padding,n=void 0===s||s;if(this.logEnabled=!0,this.observer=t,this.config=i,this.removePKCS7Padding=n,n)try{var r=Object(c.a)().crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}var i=t.prototype;return i.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},i.decrypt=function(t,i,e,s){var n=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(o.b.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new a),c.expandKey(i),s(c.decrypt(t,0,e,this.removePKCS7Padding))}else{this.logEnabled&&(o.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==i&&(this.key=i,this.fastAesKey=new h(u,i)),this.fastAesKey.expandKey().then(function(h){new r(u,e).decrypt(t,h).catch(function(r){n.onWebCryptoError(r,t,i,e,s)}).then(function(t){s(t)})}).catch(function(r){n.onWebCryptoError(r,t,i,e,s)})}},i.onWebCryptoError=function(t,i,e,r,h){this.config.enableSoftwareAES?(o.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(i,e,r,h)):(o.b.error("decrypting error : "+t.message),this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},i.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}(),l=e(3);function d(t,i){return 255===t[i]&&240==(246&t[i+1])}function f(t,i){return 1&t[i+1]?7:9}function p(t,i){return(3&t[i+3])<<11|t[i+4]<<3|(224&t[i+5])>>>5}function v(t,i){return!!(i+1<t.length&&d(t,i))}function b(t,i){if(v(t,i)){var e=f(t,i);i+5<t.length&&(e=p(t,i));var s=i+e;if(s===t.length||s+1<t.length&&d(t,s))return!0}return!1}function m(t,i,e,r,h){if(!t.samplerate){var a=function(t,i,e,r){var h,a,c,u,l,d=navigator.userAgent.toLowerCase(),f=r,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(h=1+((192&i[e+2])>>>6),!((a=(60&i[e+2])>>>2)>p.length-1))return u=(1&i[e+2])<<2,u|=(192&i[e+3])>>>6,o.b.log("manifest codec:"+r+",ADTS data:type:"+h+",sampleingIndex:"+a+"["+p[a]+"Hz],channelConfig:"+u),/firefox/i.test(d)?a>=6?(h=5,l=new Array(4),c=a-3):(h=2,l=new Array(2),c=a):-1!==d.indexOf("android")?(h=2,l=new Array(2),c=a):(h=5,l=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&a>=6?c=a-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(a>=6&&1===u||/vivaldi/i.test(d))||!r&&1===u)&&(h=2,l=new Array(2)),c=a)),l[0]=h<<3,l[0]|=(14&a)>>1,l[1]|=(1&a)<<7,l[1]|=u<<3,5===h&&(l[1]|=(14&c)>>1,l[2]=(1&c)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:p[a],channelCount:u,codec:"mp4a.40."+h,manifestCodec:f};t.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a})}(i,e,r,h);t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,o.b.log("parsed codec:"+t.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function g(t){return 9216e4/t}function y(t,i,e,s,n){var r=function(t,i,e,s,n){var r,h,a=t.length;if(r=f(t,i),h=p(t,i),(h-=r)>0&&i+r+h<=a)return{headerLength:r,frameLength:h,stamp:e+s*n}}(i,e,s,n,g(t.samplerate));if(r){var h=r.stamp,a=r.headerLength,o=r.frameLength,c={unit:i.subarray(e+a,e+a+o),pts:h,dts:h};return t.samples.push(c),{sample:c,length:o+a}}}var w=e(4),x=function(){function t(t,i,e){this.observer=t,this.config=e,this.remuxer=i}var i=t.prototype;return i.resetInitSegment=function(t,i,e,s){this.et={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:i,duration:s,inputTimeScale:9e4}},i.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var i=(w.a.getID3Data(t,0)||[]).length,e=t.length;i<e;i++)if(b(t,i))return o.b.log("ADTS sync word found !"),!0;return!1},i.append=function(t,i,e,s){for(var n=this.et,r=w.a.getID3Data(t,0)||[],h=w.a.getTimeStamp(r),a=Object(l.a)(h)?90*h:9e4*i,c=0,u=a,d=t.length,f=r.length,p=[{pts:u,dts:u,data:r}];f<d-1;)if(v(t,f)&&f+5<d){m(n,this.observer,t,f,n.manifestCodec);var b=y(n,t,f,a,c);if(!b){o.b.log("Unable to parse AAC frame");break}f+=b.length,u=b.sample.pts,c++}else w.a.isHeader(t,f)?(r=w.a.getID3Data(t,f),p.push({pts:u,dts:u,data:r}),f+=r.length):f++;this.remuxer.remux(n,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},i,e,s)},i.destroy=function(){},t}(),k=e(10),S={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,i,e,s,n){if(!(e+24>i.length)){var r=this.parseHeader(i,e);if(r&&e+r.frameLength<=i.length){var h=s+n*(9e4*r.samplesPerFrame/r.sampleRate),a={unit:i.subarray(e,e+r.frameLength),pts:h,dts:h};return t.config=[],t.channelCount=r.channelCount,t.samplerate=r.sampleRate,t.samples.push(a),{sample:a,length:r.frameLength}}}},parseHeader:function(t,i){var e=t[i+1]>>3&3,s=t[i+1]>>1&3,n=t[i+2]>>4&15,r=t[i+2]>>2&3,h=t[i+2]>>1&1;if(1!==e&&0!==n&&15!==n&&3!==r){var a=3===e?3-s:3===s?3:4,o=1e3*S.BitratesMap[14*a+n-1],c=3===e?0:2===e?1:2,u=S.SamplingRateMap[3*c+r],l=t[i+3]>>6==3?1:2,d=S.SamplesCoefficients[e][s],f=S.BytesInSlot[s],p=8*d*f;return{sampleRate:u,channelCount:l,frameLength:parseInt(d*o/u+h,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,i){return 255===t[i]&&224==(224&t[i+1])&&0!=(6&t[i+1])},isHeader:function(t,i){return!!(i+1<t.length&&this.isHeaderPattern(t,i))},probe:function(t,i){if(i+1<t.length&&this.isHeaderPattern(t,i)){var e=this.parseHeader(t,i),s=4;e&&e.frameLength&&(s=e.frameLength);var n=i+s;if(n===t.length||n+1<t.length&&this.isHeaderPattern(t,n))return!0}return!1}},O=S,_=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var i=t.prototype;return i.loadWord=function(){var t=this.data,i=this.bytesAvailable,e=t.byteLength-i,s=new Uint8Array(4),n=Math.min(4,i);if(0===n)throw new Error("no bytes available");s.set(t.subarray(e,e+n)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},i.skipBits=function(t){var i;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(i=t>>3)>>3,this.bytesAvailable-=i,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},i.readBits=function(t){var i=Math.min(this.bitsAvailable,t),e=this.word>>>32-i;return t>32&&o.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=i,this.bitsAvailable>0?this.word<<=i:this.bytesAvailable>0&&this.loadWord(),(i=t-i)>0&&this.bitsAvailable?e<<i|this.readBits(i):e},i.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},i.skipUEG=function(){this.skipBits(1+this.skipLZ())},i.skipEG=function(){this.skipBits(1+this.skipLZ())},i.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},i.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},i.readBoolean=function(){return 1===this.readBits(1)},i.readUByte=function(){return this.readBits(8)},i.readUShort=function(){return this.readBits(16)},i.readUInt=function(){return this.readBits(32)},i.skipScalingList=function(t){var i,e=8,s=8;for(i=0;i<t;i++)0!==s&&(s=(e+this.readEG()+256)%256),e=0===s?e:s},i.readSPS=function(){var t,i,e,s,n,r,h,a=0,o=0,c=0,u=0,l=this.readUByte.bind(this),d=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),b=this.skipEG.bind(this),m=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);if(l(),t=l(),d(5),v(3),l(),m(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var y=f();if(3===y&&v(1),m(),m(),v(1),p())for(r=3!==y?8:12,h=0;h<r;h++)p()&&g(h<6?16:64)}m();var w=f();if(0===w)f();else if(1===w)for(v(1),b(),b(),i=f(),h=0;h<i;h++)b();m(),v(1),e=f(),s=f(),0===(n=d(1))&&v(1),v(1),p()&&(a=f(),o=f(),c=f(),u=f());var x=[1,1];if(p()&&p())switch(l()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[l()<<8|l(),l()<<8|l()]}return{width:Math.ceil(16*(e+1)-2*a-2*o),height:(2-n)*(s+1)*16-(n?2:4)*(c+u),pixelRatio:x}},i.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),j=function(){function t(t,i,e,s){this.decryptdata=e,this.discardEPB=s,this.decrypter=new u(t,i,{removePKCS7Padding:!1})}var i=t.prototype;return i.decryptBuffer=function(t,i){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,i)},i.decryptAacSample=function(t,i,e,s){var n=t[i].unit,r=n.subarray(16,n.length-n.length%16),h=r.buffer.slice(r.byteOffset,r.byteOffset+r.length),a=this;this.decryptBuffer(h,function(r){r=new Uint8Array(r),n.set(r,16),s||a.decryptAacSamples(t,i+1,e)})},i.decryptAacSamples=function(t,i,e){for(;;i++){if(i>=t.length)return void e();if(!(t[i].unit.length<32)){var s=this.decrypter.isSync();if(this.decryptAacSample(t,i,e,s),!s)return}}},i.getAvcEncryptedData=function(t){for(var i=16*Math.floor((t.length-48)/160)+16,e=new Int8Array(i),s=0,n=32;n<=t.length-16;n+=160,s+=16)e.set(t.subarray(n,n+16),s);return e},i.getAvcDecryptedUnit=function(t,i){i=new Uint8Array(i);for(var e=0,s=32;s<=t.length-16;s+=160,e+=16)t.set(i.subarray(e,e+16),s);return t},i.decryptAvcSample=function(t,i,e,s,n,r){var h=this.discardEPB(n.data),a=this.getAvcEncryptedData(h),o=this;this.decryptBuffer(a.buffer,function(a){n.data=o.getAvcDecryptedUnit(h,a),r||o.decryptAvcSamples(t,i,e+1,s)})},i.decryptAvcSamples=function(t,i,e,s){for(;;i++,e=0){if(i>=t.length)return void s();for(var n=t[i].units;!(e>=n.length);e++){var r=n[e];if(!(r.length<=48||1!==r.type&&5!==r.type)){var h=this.decrypter.isSync();if(this.decryptAvcSample(t,i,e,s,r,h),!h)return}}}},t}(),A={video:1,audio:2,id3:3,text:4},I=function(){function t(t,i,e,s){this.observer=t,this.config=e,this.typeSupported=s,this.remuxer=i,this.sampleAes=null}var i=t.prototype;return i.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new j(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(i){var e=t.st(i);return!(e<0||(e&&o.b.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},t.st=function(t){for(var i=Math.min(1e3,t.length-564),e=0;e<i;){if(71===t[e]&&71===t[e+188]&&71===t[e+376])return e;e++}return-1},t.createTrack=function(t,i){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:A[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?i:void 0}},i.resetInitSegment=function(i,e,s,n){this.pmtParsed=!1,this.nt=-1,this.rt=t.createTrack("video",n),this.et=t.createTrack("audio",n),this.ht=t.createTrack("id3",n),this.at=t.createTrack("text",n),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=s,this.ot=n},i.resetTimeStamp=function(){},i.append=function(i,e,r,h){var a,c,u,l,d,f=i.length,p=!1;this.contiguous=r;var v=this.pmtParsed,b=this.rt,m=this.et,g=this.ht,y=b.pid,w=m.pid,x=g.pid,k=this.nt,S=b.pesData,O=m.pesData,_=g.pesData,j=this.ct,A=this.ut,I=this.lt,C=this.dt.bind(this),T=this.ft.bind(this),P=this.pt.bind(this),M=this.vt.bind(this),E=t.st(i);for(f-=(f+E)%188,a=E;a<f;a+=188)if(71===i[a]){if(c=!!(64&i[a+1]),u=((31&i[a+1])<<8)+i[a+2],(48&i[a+3])>>4>1){if((l=a+5+i[a+4])===a+188)continue}else l=a+4;switch(u){case y:c&&(S&&(d=I(S))&&C(d,!1),S={data:[],size:0}),S&&(S.data.push(i.subarray(l,a+188)),S.size+=a+188-l);break;case w:c&&(O&&(d=I(O))&&(m.isAAC?T(d):P(d)),O={data:[],size:0}),O&&(O.data.push(i.subarray(l,a+188)),O.size+=a+188-l);break;case x:c&&(_&&(d=I(_))&&M(d),_={data:[],size:0}),_&&(_.data.push(i.subarray(l,a+188)),_.size+=a+188-l);break;case 0:c&&(l+=i[l]+1),k=this.nt=j(i,l);break;case k:c&&(l+=i[l]+1);var L=A(i,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=L.avc)>0&&(b.pid=y),(w=L.audio)>0&&(m.pid=w,m.isAAC=L.isAAC),(x=L.id3)>0&&(g.pid=x),p&&!v&&(o.b.log("reparse from beginning"),p=!1,a=E-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(d=I(S))?(C(d,!0),b.pesData=null):b.pesData=S,O&&(d=I(O))?(m.isAAC?T(d):P(d),m.pesData=null):(O&&O.size&&o.b.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=O),_&&(d=I(_))?(M(d),g.pesData=null):g.pesData=_,null==this.sampleAes?this.remuxer.remux(m,b,g,this.at,e,r,h):this.decryptAndRemux(m,b,g,this.at,e,r,h)},i.decryptAndRemux=function(t,i,e,s,n,r,h){if(t.samples&&t.isAAC){var a=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){a.decryptAndRemuxAvc(t,i,e,s,n,r,h)})}else this.decryptAndRemuxAvc(t,i,e,s,n,r,h)},i.decryptAndRemuxAvc=function(t,i,e,s,n,r,h){if(i.samples){var a=this;this.sampleAes.decryptAvcSamples(i.samples,0,0,function(){a.remuxer.remux(t,i,e,s,n,r,h)})}else this.remuxer.remux(t,i,e,s,n,r,h)},i.destroy=function(){this.bt=this.gt=void 0,this.ot=0},i.ct=function(t,i){return(31&t[i+10])<<8|t[i+11]},i.ut=function(t,i,e,s){var n,r,h={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=i+3+((15&t[i+1])<<8|t[i+2])-4,i+=12+((15&t[i+10])<<8|t[i+11]);i<n;){switch(r=(31&t[i+1])<<8|t[i+2],t[i]){case 207:if(!s){o.b.log("unknown stream type:"+t[i]);break}case 15:-1===h.audio&&(h.audio=r);break;case 21:-1===h.id3&&(h.id3=r);break;case 219:if(!s){o.b.log("unknown stream type:"+t[i]);break}case 27:-1===h.avc&&(h.avc=r);break;case 3:case 4:e?-1===h.audio&&(h.audio=r,h.isAAC=!1):o.b.log("MPEG audio found, not supported in this browser for now");break;case 36:o.b.warn("HEVC stream type found, not supported for now");break;default:o.b.log("unknown stream type:"+t[i])}i+=5+((15&t[i+3])<<8|t[i+4])}return h},i.lt=function(t){var i,e,s,n,r,h,a,c,u=0,l=t.data;if(!t||0===t.size)return null;for(;l[0].length<19&&l.length>1;){var d=new Uint8Array(l[0].length+l[1].length);d.set(l[0]),d.set(l[1],l[0].length),l[0]=d,l.splice(1,1)}if(1===((i=l[0])[0]<<16)+(i[1]<<8)+i[2]){if((s=(i[4]<<8)+i[5])&&s>t.size-6)return null;if(192&(e=i[7])&&((h=536870912*(14&i[9])+4194304*(255&i[10])+16384*(254&i[11])+128*(255&i[12])+(254&i[13])/2)>4294967295&&(h-=8589934592),64&e?((a=536870912*(14&i[14])+4194304*(255&i[15])+16384*(254&i[16])+128*(255&i[17])+(254&i[18])/2)>4294967295&&(a-=8589934592),h-a>54e5&&(o.b.warn(Math.round((h-a)/9e4)+"s delta between PTS and DTS, align them"),h=a)):a=h),c=(n=i[8])+9,t.size<=c)return null;t.size-=c,r=new Uint8Array(t.size);for(var f=0,p=l.length;f<p;f++){var v=(i=l[f]).byteLength;if(c){if(c>v){c-=v;continue}i=i.subarray(c),v-=c,c=0}r.set(i,u),u+=v}return s&&(s-=n+3),{data:r,pts:h,dts:a,len:s}}return null},i.pushAccesUnit=function(t,i){if(t.units.length&&t.frame){var e=i.samples,s=e.length;if(isNaN(t.pts)){if(!s)return void i.dropped++;var n=e[s-1];t.pts=n.pts,t.dts=n.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||i.sps&&(s||this.contiguous)?(t.id=s,e.push(t)):i.dropped++}t.debug.length&&o.b.log(t.pts+"/"+t.dts+":"+t.debug)},i.dt=function(t,i){var e,s,n,r=this,h=this.rt,a=this.yt(t.data),o=this.avcSample,c=!1,u=this.pushAccesUnit.bind(this),l=function(t,i,e,s){return{key:t,pts:i,dts:e,units:[],debug:s}};t.data=null,o&&a.length&&!h.audFound&&(u(o,h),o=this.avcSample=l(!1,t.pts,t.dts,"")),a.forEach(function(i){switch(i.type){case 1:s=!0,o||(o=r.avcSample=l(!0,t.pts,t.dts,"")),o.frame=!0;var a=i.data;if(c&&a.length>4){var d=new _(a).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(o.key=!0)}break;case 5:s=!0,o||(o=r.avcSample=l(!0,t.pts,t.dts,"")),o.key=!0,o.frame=!0;break;case 6:s=!0,(e=new _(r.discardEPB(i.data))).readUByte();for(var f=0,p=0,v=!1,b=0;!v&&e.bytesAvailable>1;){f=0;do{f+=b=e.readUByte()}while(255===b);p=0;do{p+=b=e.readUByte()}while(255===b);if(4===f&&0!==e.bytesAvailable){if(v=!0,181===e.readUByte()&&49===e.readUShort()&&1195456820===e.readUInt()&&3===e.readUByte()){var m=e.readUByte(),g=31&m,y=[m,e.readUByte()];for(n=0;n<g;n++)y.push(e.readUByte()),y.push(e.readUByte()),y.push(e.readUByte());r.wt(r.at.samples,{type:3,pts:t.pts,bytes:y})}}else if(5===f&&0!==e.bytesAvailable){if(v=!0,p>16){var x=[];for(n=0;n<16;n++)x.push(e.readUByte().toString(16)),3!==n&&5!==n&&7!==n&&9!==n||x.push("-");var k=p-16,S=new Uint8Array(k);for(n=0;n<k;n++)S[n]=e.readUByte();r.wt(r.at.samples,{pts:t.pts,payloadType:f,uuid:x.join(""),userDataBytes:S,userData:Object(w.b)(S.buffer)})}}else if(p<e.bytesAvailable)for(n=0;n<p;n++)e.readUByte()}break;case 7:if(s=!0,c=!0,!h.sps){var O=(e=new _(i.data)).readSPS();h.width=O.width,h.height=O.height,h.pixelRatio=O.pixelRatio,h.sps=[i.data],h.duration=r.ot;var j=i.data.subarray(1,4),A="avc1.";for(n=0;n<3;n++){var I=j[n].toString(16);I.length<2&&(I="0"+I),A+=I}h.codec=A}break;case 8:s=!0,h.pps||(h.pps=[i.data]);break;case 9:s=!1,h.audFound=!0,o&&u(o,h),o=r.avcSample=l(!1,t.pts,t.dts,"");break;case 12:s=!1;break;default:s=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}o&&s&&o.units.push(i)}),i&&o&&(u(o,h),this.avcSample=null)},i.wt=function(t,i){var e=t.length;if(e>0){if(i.pts>=t[e-1].pts)t.push(i);else for(var s=e-1;s>=0;s--)if(i.pts<t[s].pts){t.splice(s,0,i);break}}else t.push(i)},i.xt=function(){var t,i=this.avcSample;if(!i||0===i.units.length){var e=this.rt.samples;i=e[e.length-1]}if(i){var s=i.units;t=s[s.length-1]}return t},i.yt=function(t){var i,e,s,n,r=0,h=t.byteLength,a=this.rt,o=a.naluState||0,c=o,u=[],l=-1;for(-1===o&&(l=0,n=31&t[0],o=0,r=1);r<h;)if(i=t[r++],o)if(1!==o)if(i)if(1===i){if(l>=0)s={data:t.subarray(l,r-o-1),type:n},u.push(s);else{var d=this.xt();if(d&&(c&&r<=4-c&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-c)),(e=r-o-1)>0)){var f=new Uint8Array(d.data.byteLength+e);f.set(d.data,0),f.set(t.subarray(0,e),d.data.byteLength),d.data=f}}r<h?(l=r,n=31&t[r],o=0):o=-1}else o=0;else o=3;else o=i?0:2;else o=i?0:1;if(l>=0&&o>=0&&(s={data:t.subarray(l,h),type:n,state:o},u.push(s)),0===u.length){var p=this.xt();if(p){var v=new Uint8Array(p.data.byteLength+t.byteLength);v.set(p.data,0),v.set(t,p.data.byteLength),p.data=v}}return a.naluState=o,u},i.discardEPB=function(t){for(var i,e,s=t.byteLength,n=[],r=1;r<s-2;)0===t[r]&&0===t[r+1]&&3===t[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return t;i=s-n.length,e=new Uint8Array(i);var h=0;for(r=0;r<i;h++,r++)h===n[0]&&(h++,n.shift()),e[r]=t[h];return e},i.ft=function(t){var i,e,r,h,a,c,u,l=this.et,d=t.data,f=t.pts,p=this.aacOverFlow,b=this.aacLastPTS;if(p){var w=new Uint8Array(p.byteLength+d.byteLength);w.set(p,0),w.set(d,p.byteLength),d=w}for(r=0,a=d.length;r<a-1&&!v(d,r);r++);if(!r||(r<a-1?(c="AAC PES did not start with ADTS header,offset:"+r,u=!1):(c="no ADTS header found in AAC PES",u=!0),o.b.warn("parsing error:"+c),this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:u,reason:c}),!u)){if(m(l,this.observer,d,r,this.audioCodec),e=0,i=g(l.samplerate),p&&b){var x=b+i;Math.abs(x-f)>1&&(o.b.log("AAC: align PTS for overlapping frames by "+Math.round((x-f)/90)),f=x)}for(;r<a;){if(v(d,r)){if(r+5<a){var k=y(l,d,r,f,e);if(k){r+=k.length,h=k.sample.pts,e++;continue}}break}r++}p=r<a?d.subarray(r,a):null,this.aacOverFlow=p,this.aacLastPTS=h}},i.pt=function(t){for(var i=t.data,e=i.length,s=0,n=0,r=t.pts;n<e;)if(O.isHeader(i,n)){var h=O.appendFrame(this.et,i,n,r,s);if(!h)break;n+=h.length,s++}else n++},i.vt=function(t){this.ht.samples.push(t)},t}(),C=function(){function t(t,i,e){this.observer=t,this.config=e,this.remuxer=i}var i=t.prototype;return i.resetInitSegment=function(t,i,e,s){this.et={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:i,duration:s,inputTimeScale:9e4}},i.resetTimeStamp=function(){},t.probe=function(t){var i,e,s=w.a.getID3Data(t,0);if(s&&void 0!==w.a.getTimeStamp(s))for(i=s.length,e=Math.min(t.length-1,i+100);i<e;i++)if(O.probe(t,i))return o.b.log("MPEG Audio sync word found !"),!0;return!1},i.append=function(t,i,e,s){for(var n=w.a.getID3Data(t,0),r=w.a.getTimeStamp(n),h=r?90*r:9e4*i,a=n.length,o=t.length,c=0,u=0,l=this.et,d=[{pts:h,dts:h,data:n}];a<o;)if(O.isHeader(t,a)){var f=O.appendFrame(l,t,a,h,c);if(!f)break;a+=f.length,u=f.sample.pts,c++}else w.a.isHeader(t,a)?(n=w.a.getID3Data(t,a),d.push({pts:u,dts:u,data:n}),a+=n.length):a++;this.remuxer.remux(l,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},i,e,s)},i.destroy=function(){},t}(),T=function(){function t(){}return t.getSilentFrame=function(t,i){switch(t){case"mp4a.40.2":if(1===i)return new Uint8Array([0,200,0,128,35,128]);if(2===i)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===i)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),P=Math.pow(2,32)-1,M=function(){function t(){}return t.init=function(){var i;for(i in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(i)&&(t.types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);var e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:e,audio:s};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=r,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var h=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,h,o,h,a),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var i,e=Array.prototype.slice.call(arguments,1),s=8,n=e.length,r=n;n--;)s+=e[n].byteLength;for((i=new Uint8Array(s))[0]=s>>24&255,i[1]=s>>16&255,i[2]=s>>8&255,i[3]=255&s,i.set(t,4),n=0,s=8;n<r;n++)i.set(e[n],s),s+=e[n].byteLength;return i},t.hdlr=function(i){return t.box(t.types.hdlr,t.HDLR_TYPES[i])},t.mdat=function(i){return t.box(t.types.mdat,i)},t.mdhd=function(i,e){e*=i;var s=Math.floor(e/(P+1)),n=Math.floor(e%(P+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(i){return t.box(t.types.mdia,t.mdhd(i.timescale,i.duration),t.hdlr(i.type),t.minf(i))},t.mfhd=function(i){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i]))},t.minf=function(i){return"audio"===i.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(i)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(i))},t.moof=function(i,e,s){return t.box(t.types.moof,t.mfhd(i),t.traf(s,e))},t.moov=function(i){for(var e=i.length,s=[];e--;)s[e]=t.trak(i[e]);return t.box.apply(null,[t.types.moov,t.mvhd(i[0].timescale,i[0].duration)].concat(s).concat(t.mvex(i)))},t.mvex=function(i){for(var e=i.length,s=[];e--;)s[e]=t.trex(i[e]);return t.box.apply(null,[t.types.mvex].concat(s))},t.mvhd=function(i,e){e*=i;var s=Math.floor(e/(P+1)),n=Math.floor(e%(P+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,r)},t.sdtp=function(i){var e,s,n=i.samples||[],r=new Uint8Array(4+n.length);for(s=0;s<n.length;s++)e=n[s].flags,r[s+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return t.box(t.types.sdtp,r)},t.stbl=function(i){return t.box(t.types.stbl,t.stsd(i),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(i){var e,s,n,r=[],h=[];for(e=0;e<i.sps.length;e++)n=(s=i.sps[e]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(s));for(e=0;e<i.pps.length;e++)n=(s=i.pps[e]).byteLength,h.push(n>>>8&255),h.push(255&n),h=h.concat(Array.prototype.slice.call(s));var a=t.box(t.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|i.sps.length].concat(r).concat([i.pps.length]).concat(h))),o=i.width,c=i.height,u=i.pixelRatio[0],l=i.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,l>>24,l>>16&255,l>>8&255,255&l])))},t.esds=function(t){var i=t.config.length;return new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(t.config).concat([6,1,2]))},t.mp4a=function(i){var e=i.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]),t.box(t.types.esds,t.esds(i)))},t.mp3=function(i){var e=i.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]))},t.stsd=function(i){return"audio"===i.type?i.isAAC||"mp3"!==i.codec?t.box(t.types.stsd,t.STSD,t.mp4a(i)):t.box(t.types.stsd,t.STSD,t.mp3(i)):t.box(t.types.stsd,t.STSD,t.avc1(i))},t.tkhd=function(i){var e=i.id,s=i.duration*i.timescale,n=i.width,r=i.height,h=Math.floor(s/(P+1)),a=Math.floor(s%(P+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,h>>24,h>>16&255,h>>8&255,255&h,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,r>>8&255,255&r,0,0]))},t.traf=function(i,e){var s=t.sdtp(i),n=i.id,r=Math.floor(e/(P+1)),h=Math.floor(e%(P+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,h>>24,h>>16&255,h>>8&255,255&h])),t.trun(i,s.length+16+20+8+16+8+8),s)},t.trak=function(i){return i.duration=i.duration||4294967295,t.box(t.types.trak,t.tkhd(i),t.mdia(i))},t.trex=function(i){var e=i.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(i,e){var s,n,r,h,a,o,c=i.samples||[],u=c.length,l=12+16*u,d=new Uint8Array(l);for(e+=8+l,d.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),s=0;s<u;s++)r=(n=c[s]).duration,h=n.size,a=n.flags,o=n.cts,d.set([r>>>24&255,r>>>16&255,r>>>8&255,255&r,h>>>24&255,h>>>16&255,h>>>8&255,255&h,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*s);return t.box(t.types.trun,d)},t.initSegment=function(i){t.types||t.init();var e,s=t.moov(i);return(e=new Uint8Array(t.FTYP.byteLength+s.byteLength)).set(t.FTYP),e.set(s,t.FTYP.byteLength),e},t}();function E(t,i,e,s){void 0===e&&(e=1),void 0===s&&(s=!1);var n=t*i*e;return s?Math.round(n):n}function L(t,i){return void 0===i&&(i=!1),E(t,1e3,1/9e4,i)}function R(t,i){return void 0===i&&(i=1),E(t,9e4,1/i)}var B,D=R(10),F=R(.2),V=function(){function t(t,i,e,s){this.observer=t,this.config=i,this.typeSupported=e;var n=navigator.userAgent;this.isSafari=s&&s.indexOf("Apple")>-1&&n&&!n.match("CriOS"),this.ISGenerated=!1}var i=t.prototype;return i.destroy=function(){},i.resetTimeStamp=function(t){this.bt=this.gt=t},i.resetInitSegment=function(){this.ISGenerated=!1},i.remux=function(t,i,e,n,r,h,a){if(this.ISGenerated||this.generateIS(t,i,r),this.ISGenerated){var c=t.samples.length,u=i.samples.length,l=r,d=r;if(c&&u){var f=(t.samples[0].pts-i.samples[0].pts)/i.inputTimeScale;l+=Math.max(0,f),d+=Math.max(0,-f)}if(c){t.timescale||(o.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,i,r));var p,v=this.remuxAudio(t,l,h,a);u&&(v&&(p=v.endPTS-v.startPTS),i.timescale||(o.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,i,r)),this.remuxVideo(i,d,h,p,a))}else if(u){var b=this.remuxVideo(i,d,h,0,a);b&&t.codec&&this.remuxEmptyAudio(t,l,h,b)}}e.samples.length&&this.remuxID3(e,r),n.samples.length&&this.remuxText(n,r),this.observer.trigger(s.a.FRAG_PARSED)},i.generateIS=function(t,i,e){var r,h,a=this.observer,c=t.samples,u=i.samples,l=this.typeSupported,d="audio/mp4",f={},p={tracks:f},v=void 0===this.bt;if(v&&(r=h=1/0),t.config&&c.length&&(t.timescale=t.samplerate,o.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(d="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),f.audio={container:d,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:M.initSegment([t]),metadata:{channelCount:t.channelCount}},v&&(r=h=c[0].pts-t.inputTimeScale*e)),i.sps&&i.pps&&u.length){var b=i.inputTimeScale;i.timescale=b,f.video={container:"video/mp4",codec:i.codec,initSegment:M.initSegment([i]),metadata:{width:i.width,height:i.height}},v&&(r=Math.min(r,u[0].pts-b*e),h=Math.min(h,u[0].dts-b*e),this.observer.trigger(s.a.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(f).length?(a.trigger(s.a.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,v&&(this.bt=r,this.gt=h)):a.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},i.remuxVideo=function(t,i,e,r,h){var a,c,u,l,d,f,p,v=8,b=t.timescale,m=t.samples,g=[],y=m.length,w=this.kt,x=this.bt,k=this.nextAvcDts,S=this.isSafari;if(0!==y){S&&(e|=m.length&&k&&(h&&Math.abs(i-k/b)<.1||Math.abs(m[0].pts-k-x)<b/5)),e||(k=i*b),m.forEach(function(t){t.pts=w(t.pts-x,k),t.dts=w(t.dts-x,k)}),m.sort(function(t,i){var e=t.dts-i.dts,s=t.pts-i.pts;return e||s||t.id-i.id});var O=m.reduce(function(t,i){return Math.max(Math.min(t,i.pts-i.dts),-1*F)},0);if(O<0){o.b.warn("PTS < DTS detected in video samples, shifting DTS by "+L(O,!0)+" ms to overcome this issue");for(var _=0;_<m.length;_++)m[_].dts+=O}var j=m[0];d=Math.max(j.dts,0),l=Math.max(j.pts,0);var A=d-k;e&&A&&(A>1?o.b.log("AVC: "+L(A,!0)+" ms hole between fragments detected,filling it"):A<-1&&o.b.log("AVC: "+L(-A,!0)+" ms overlapping between fragments detected"),d=k,m[0].dts=d,l=Math.max(l-A,k),m[0].pts=l,o.b.log("Video: PTS/DTS adjusted: "+L(l,!0)+"/"+L(d,!0)+", delta: "+L(A,!0)+" ms")),j=m[m.length-1],p=Math.max(j.dts,0),f=Math.max(j.pts,0,p),S&&(a=Math.round((p-d)/(m.length-1)));for(var I=0,C=0,T=0;T<y;T++){for(var P=m[T],E=P.units,R=E.length,B=0,D=0;D<R;D++)B+=E[D].data.length;C+=B,I+=R,P.length=B,P.dts=S?d+T*a:Math.max(P.dts,d),P.pts=Math.max(P.pts,P.dts)}var V=C+4*I+8;try{c=new Uint8Array(V)}catch(t){return void this.observer.trigger(s.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:V,reason:"fail allocating video mdat "+V})}var U=new DataView(c.buffer);U.setUint32(0,V),c.set(M.types.mdat,4);for(var N=0;N<y;N++){for(var $=m[N],H=$.units,q=0,z=void 0,G=0,W=H.length;G<W;G++){var J=H[G],Q=J.data,X=J.data.byteLength;U.setUint32(v,X),v+=4,c.set(Q,v),v+=X,q+=4+X}if(S)z=Math.max(0,a*Math.round(($.pts-$.dts)/a));else{if(N<y-1)a=m[N+1].dts-$.dts;else{var Y=this.config,K=$.dts-m[N>0?N-1:N].dts;if(Y.stretchShortVideoTrack){var Z=Y.maxBufferHole,tt=Math.floor(Z*b),it=(r?l+r*b:this.nextAudioPts)-$.pts;it>tt?((a=it-K)<0&&(a=K),o.b.log("It is approximately "+L(it,!1)+" ms to the next segment; using duration "+L(a,!1)+" ms for the last video frame.")):a=K}else a=K}z=Math.round($.pts-$.dts)}g.push({size:q,duration:a,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:$.key?2:1,isNonSync:$.key?0:1}})}this.nextAvcDts=p+a;var et=t.dropped;if(t.nbNalu=0,t.dropped=0,g.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var st=g[0].flags;st.dependsOn=2,st.isNonSync=0}t.samples=g,u=M.moof(t.sequenceNumber++,d,t),t.samples=[];var nt={data1:u,data2:c,startPTS:l/b,endPTS:(f+a)/b,startDTS:d/b,endDTS:this.nextAvcDts/b,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:et};return this.observer.trigger(s.a.FRAG_PARSING_DATA,nt),nt}},i.remuxAudio=function(t,i,e,r){var h,a,c,u,l,d,f=t.inputTimeScale,p=t.timescale,v=f/p,b=(t.isAAC?1024:1152)*v,m=this.kt,g=this.bt,y=!t.isAAC&&this.typeSupported.mpeg,w=y?0:8,x=t.samples,k=[],S=this.nextAudioPts;if(e|=x.length&&S&&(r&&Math.abs(i-S/f)<.1||Math.abs(x[0].pts-S-g)<20*b),x.forEach(function(t){t.pts=t.dts=m(t.pts-g,i*f)}),0!==(x=x.filter(function(t){return t.pts>=0})).length){if(e||(S=r?i*f:x[0].pts),t.isAAC)for(var O=this.config.maxAudioFramesDrift,_=0,j=S;_<x.length;){var A,I=x[_];if((A=I.pts-j)<=-O*b)o.b.warn("Dropping 1 audio frame @ "+L(j,!0)+" ms due to "+L(A,!0)+" ms overlap."),x.splice(_,1);else if(A>=O*b&&A<D&&j){var C=Math.round(A/b);o.b.warn("Injecting "+C+" audio frames @ "+L(j,!0)+" ms due to "+L(j,!0)+" ms gap.");for(var P=0;P<C;P++){var E=Math.max(j,0);(a=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=I.unit.subarray()),x.splice(_,0,{unit:a,pts:E,dts:E}),j+=b,_++}I.pts=I.dts=j,j+=b,_++}else Math.abs(A),I.pts=I.dts=j,j+=b,_++}for(var R=x.length,B=0;R--;)B+=x[R].unit.byteLength;for(var F=0,V=x.length;F<V;F++){var U=x[F],N=U.unit,$=U.pts;if(void 0!==d)h.duration=Math.round(($-d)/v);else{var H=$-S,q=0;if(e&&t.isAAC&&H){if(H>0&&H<D)q=Math.round(($-S)/b),o.b.log(L(H,!0)+" ms hole between AAC samples detected,filling it"),q>0&&((a=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(a=N.subarray()),B+=q*a.length);else if(H<-12){o.b.log("drop overlapping AAC sample, expected/parsed/delta: "+L(S,!0)+" ms / "+L($,!0)+" ms / "+L(-H,!0)+" ms"),B-=N.byteLength;continue}$=S}if(l=$,!(B>0))return;B+=w;try{c=new Uint8Array(B)}catch(t){return void this.observer.trigger(s.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:B,reason:"fail allocating audio mdat "+B})}y||(new DataView(c.buffer).setUint32(0,B),c.set(M.types.mdat,4));for(var z=0;z<q;z++)(a=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=N.subarray()),c.set(a,w),w+=a.byteLength,h={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(h)}c.set(N,w);var G=N.byteLength;w+=G,h={size:G,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(h),d=$}var W=0;if((R=k.length)>=2&&(W=k[R-2].duration,h.duration=W),R){this.nextAudioPts=S=d+v*W,t.samples=k,u=y?new Uint8Array:M.moof(t.sequenceNumber++,l/v,t),t.samples=[];var J=l/f,Q=S/f,X={data1:u,data2:c,startPTS:J,endPTS:Q,startDTS:J,endDTS:Q,type:"audio",hasAudio:!0,hasVideo:!1,nb:R};return this.observer.trigger(s.a.FRAG_PARSING_DATA,X),X}return null}},i.remuxEmptyAudio=function(t,i,e,s){var n=t.inputTimeScale,r=n/(t.samplerate?t.samplerate:n),h=this.nextAudioPts,a=(void 0!==h?h:s.startDTS*n)+this.gt,c=s.endDTS*n+this.gt,u=1024*r,l=Math.ceil((c-a)/u),d=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(o.b.warn("remux empty Audio"),d){for(var f=[],p=0;p<l;p++){var v=a+p*u;f.push({unit:d,pts:v,dts:v})}t.samples=f,this.remuxAudio(t,i,e)}else o.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},i.remuxID3=function(t){var i,e=t.samples.length,n=t.inputTimeScale,r=this.bt,h=this.gt;if(e){for(var a=0;a<e;a++)(i=t.samples[a]).pts=(i.pts-r)/n,i.dts=(i.dts-h)/n;this.observer.trigger(s.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[]},i.remuxText=function(t){t.samples.sort(function(t,i){return t.pts-i.pts});var i,e=t.samples.length,n=t.inputTimeScale,r=this.bt;if(e){for(var h=0;h<e;h++)(i=t.samples[h]).pts=(i.pts-r)/n;this.observer.trigger(s.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},i.kt=function(t,i){var e;if(void 0===i)return t;for(e=i<t?-8589934592:8589934592;Math.abs(t-i)>4294967296;)t+=e;return t},t}(),U=function(){function t(t){this.observer=t}var i=t.prototype;return i.destroy=function(){},i.resetTimeStamp=function(){},i.resetInitSegment=function(){},i.remux=function(t,i,e,n,r,h,a,o){var c=this.observer,u="";t&&(u+="audio"),i&&(u+="video"),c.trigger(s.a.FRAG_PARSING_DATA,{data1:o,startPTS:r,startDTS:r,type:u,hasAudio:!!t,hasVideo:!!i,nb:1,dropped:0}),c.trigger(s.a.FRAG_PARSED)},t}(),N=Object(c.a)();try{B=N.performance.now.bind(N.performance)}catch(t){o.b.debug("Unable to use Performance API on this environment"),B=N.Date.now}var $=function(){function t(t,i,e,s){this.observer=t,this.typeSupported=i,this.config=e,this.vendor=s}var i=t.prototype;return i.destroy=function(){var t=this.demuxer;t&&t.destroy()},i.push=function(t,i,e,n,r,h,a,o,c,l,d,f){var p=this;if(t.byteLength>0&&null!=i&&null!=i.key&&"AES-128"===i.method){var v=this.decrypter;null==v&&(v=this.decrypter=new u(this.observer,this.config));var b=B();v.decrypt(t,i.key.buffer,i.iv.buffer,function(t){var u=B();p.observer.trigger(s.a.FRAG_DECRYPTED,{stats:{tstart:b,tdecrypt:u}}),p.pushDecrypted(new Uint8Array(t),i,new Uint8Array(e),n,r,h,a,o,c,l,d,f)})}else this.pushDecrypted(new Uint8Array(t),i,new Uint8Array(e),n,r,h,a,o,c,l,d,f)},i.pushDecrypted=function(t,i,e,r,h,a,o,c,u,l,d,f){var p=this.demuxer;if(!p||(o||c)&&!this.probe(t)){for(var v=this.observer,b=this.typeSupported,m=this.config,g=[{demux:I,remux:V},{demux:k.a,remux:U},{demux:x,remux:V},{demux:C,remux:V}],y=0,w=g.length;y<w;y++){var S=g[y],O=S.demux.probe;if(O(t)){var _=this.remuxer=new S.remux(v,m,b,this.vendor);p=new S.demux(v,_,m,b),this.probe=O;break}}if(!p)return void v.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var j=this.remuxer;(o||c)&&(p.resetInitSegment(e,r,h,l),j.resetInitSegment()),o&&(p.resetTimeStamp(f),j.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(i),p.append(t,a,u,d)},t}();i.a=$},function(t,i,e){"use strict";var s=e(0),n=e(1),r=Math.pow(2,32)-1,h=function(){function t(t,i){this.observer=t,this.remuxer=i}var i=t.prototype;return i.resetTimeStamp=function(t){this.initPTS=t},i.resetInitSegment=function(i,e,s,r){if(i&&i.byteLength){var h=this.initData=t.parseInitSegment(i);null==e&&(e="mp4a.40.5"),null==s&&(s="avc1.42e01e");var a={};h.audio&&h.video?a.audiovideo={container:"video/mp4",codec:e+","+s,initSegment:r?i:null}:(h.audio&&(a.audio={container:"audio/mp4",codec:e,initSegment:r?i:null}),h.video&&(a.video={container:"video/mp4",codec:s,initSegment:r?i:null})),this.observer.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else e&&(this.audioCodec=e),s&&(this.videoCodec=s)},t.probe=function(i){return t.findBox({data:i,start:0,end:Math.min(i.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,i){t.data&&(i+=t.start,t=t.data);var e=t[i]<<8|t[i+1];return e<0?65536+e:e},t.readUint32=function(t,i){t.data&&(i+=t.start,t=t.data);var e=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3];return e<0?4294967296+e:e},t.writeUint32=function(t,i,e){t.data&&(i+=t.start,t=t.data),t[i]=e>>24,t[i+1]=e>>16&255,t[i+2]=e>>8&255,t[i+3]=255&e},t.findBox=function(i,e){var s,n,r,h,a,o,c=[];if(i.data?(a=i.start,r=i.end,i=i.data):(a=0,r=i.byteLength),!e.length)return null;for(s=a;s<r;)o=(n=t.readUint32(i,s))>1?s+n:r,t.bin2str(i.subarray(s+4,s+8))===e[0]&&(1===e.length?c.push({data:i,start:s+8,end:o}):(h=t.findBox({data:i,start:s+8,end:o},e.slice(1))).length&&(c=c.concat(h))),s=o;return c},t.parseSegmentIndex=function(i){var e,s=t.findBox(i,["moov"])[0],n=s?s.end:null,r=0,h=t.findBox(i,["sidx"]);if(!h||!h[0])return null;e=[];var a=(h=h[0]).data[0];r=0===a?8:16;var o=t.readUint32(h,r);r+=4,r+=0===a?8:16,r+=2;var c=h.end+0,u=t.readUint16(h,r);r+=2;for(var l=0;l<u;l++){var d=r,f=t.readUint32(h,d);d+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var v=t.readUint32(h,d);d+=4,e.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/o,start:c,end:c+p-1}}),c+=p,r=d+=4}return{earliestPresentationTime:0,timescale:o,version:a,referencesCount:u,references:e,moovEndOffset:n}},t.parseInitSegment=function(i){var e=[];return t.findBox(i,["moov","trak"]).forEach(function(i){var n=t.findBox(i,["tkhd"])[0];if(n){var r=n.data[n.start],h=0===r?12:20,a=t.readUint32(n,h),o=t.findBox(i,["mdia","mdhd"])[0];if(o){h=0===(r=o.data[o.start])?12:20;var c=t.readUint32(o,h),u=t.findBox(i,["mdia","hdlr"])[0];if(u){var l={soun:"audio",vide:"video"}[t.bin2str(u.data.subarray(u.start+8,u.start+12))];if(l){var d=t.findBox(i,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var f=t.bin2str(d.data.subarray(d.start+12,d.start+16));s.b.log("MP4Demuxer:"+l+":"+f+" found")}e[a]={timescale:c,type:l},e[l]={timescale:c,id:a}}}}}}),e},t.getStartDTS=function(i,e){var s,n,r;return s=t.findBox(e,["moof","traf"]),n=[].concat.apply([],s.map(function(e){return t.findBox(e,["tfhd"]).map(function(s){var n,r;return n=t.readUint32(s,4),r=i[n].timescale||9e4,t.findBox(e,["tfdt"]).map(function(i){var e,s;return e=i.data[i.start],s=t.readUint32(i,4),1===e&&(s*=Math.pow(2,32),s+=t.readUint32(i,8)),s})[0]/r})})),r=Math.min.apply(null,n),isFinite(r)?r:0},t.offsetStartDTS=function(i,e,s){t.findBox(e,["moof","traf"]).map(function(e){return t.findBox(e,["tfhd"]).map(function(n){var h=t.readUint32(n,4),a=i[h].timescale||9e4;t.findBox(e,["tfdt"]).map(function(i){var e=i.data[i.start],n=t.readUint32(i,4);if(0===e)t.writeUint32(i,4,n-s*a);else{n*=Math.pow(2,32),n+=t.readUint32(i,8),n-=s*a,n=Math.max(n,0);var h=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));t.writeUint32(i,4,h),t.writeUint32(i,8,o)}})})})},i.append=function(i,e,s,r){var h=this.initData;h||(this.resetInitSegment(i,this.audioCodec,this.videoCodec,!1),h=this.initData);var a,o=this.initPTS;if(void 0===o){var c=t.getStartDTS(h,i);this.initPTS=o=c-e,this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:o})}t.offsetStartDTS(h,i,o),a=t.getStartDTS(h,i),this.remuxer.remux(h.audio,h.video,null,null,a,s,r,i)},i.destroy=function(){},t}();i.a=h},function(t,i,e){function s(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"S",{value:!0})},e.n=function(t){var i=t&&t.S?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/",e.oe=function(t){throw console.error(t),t};var s=e(e.s=ENTRY_MODULE);return s.default||s}var n="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function r(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function h(t,i,s){var h={};h[s]=[];var a=i.toString(),o=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return h;for(var c,u=o[1],l=new RegExp("(\\\\n|\\W)"+r(u)+n,"g");c=l.exec(a);)"dll-reference"!==c[3]&&h[s].push(c[3]);for(l=new RegExp("\\("+r(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+n,"g");c=l.exec(a);)t[c[2]]||(h[s].push(c[1]),t[c[2]]=e(c[1]).m),h[c[2]]=h[c[2]]||[],h[c[2]].push(c[4]);for(var d,f=Object.keys(h),p=0;p<f.length;p++)for(var v=0;v<h[f[p]].length;v++)d=h[f[p]][v],isNaN(1*d)||(h[f[p]][v]=1*h[f[p]][v]);return h}function a(t){return Object.keys(t).reduce(function(i,e){return i||t[e].length>0},!1)}t.exports=function(t,i){i=i||{};var n={main:e.m},r=i.all?{main:Object.keys(n.main)}:function(t,i){for(var e={main:[i]},s={main:[]},n={main:{}};a(e);)for(var r=Object.keys(e),o=0;o<r.length;o++){var c=r[o],u=e[c].pop();if(n[c]=n[c]||{},!n[c][u]&&t[c][u]){n[c][u]=!0,s[c]=s[c]||[],s[c].push(u);for(var l=h(t,t[c][u],c),d=Object.keys(l),f=0;f<d.length;f++)e[d[f]]=e[d[f]]||[],e[d[f]]=e[d[f]].concat(l[d[f]])}}return s}(n,t),o="";Object.keys(r).filter(function(t){return"main"!==t}).forEach(function(t){for(var i=0;r[t][i];)i++;r[t].push(i),n[t][i]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+s.toString().replace("ENTRY_MODULE",JSON.stringify(i))+")({"+r[t].map(function(i){return JSON.stringify(i)+": "+n[t][i].toString()}).join(",")+"});\n"}),o=o+"new (("+s.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+r.main.map(function(t){return JSON.stringify(t)+": "+n.main[t].toString()}).join(",")+"}))(self);";var c=new window.Blob([o],{type:"text/javascript"});if(i.bare)return c;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),l=new window.Worker(u);return l.objectURL=u,l}},function(t,i,e){"use strict";e.r(i);var s=e(9),n=e(1),r=e(0),h=e(8);i.default=function(t){var i=new h.EventEmitter;i.trigger=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];i.emit.apply(i,[t,t].concat(s))},i.off=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];i.removeListener.apply(i,[t].concat(s))};var e=function(i,e){t.postMessage({event:i,data:e})};t.addEventListener("message",function(n){var h=n.data;switch(h.cmd){case"init":var a=JSON.parse(h.config);t.demuxer=new s.a(i,h.typeSupported,a,h.vendor),Object(r.a)(a.debug),e("init",null);break;case"demux":t.demuxer.push(h.data,h.decryptdata,h.initSegment,h.audioCodec,h.videoCodec,h.timeOffset,h.discontinuity,h.trackSwitch,h.contiguous,h.duration,h.accurateTimeOffset,h.defaultInitPTS)}}),i.on(n.a.FRAG_DECRYPTED,e),i.on(n.a.FRAG_PARSING_INIT_SEGMENT,e),i.on(n.a.FRAG_PARSED,e),i.on(n.a.ERROR,e),i.on(n.a.FRAG_PARSING_METADATA,e),i.on(n.a.FRAG_PARSING_USERDATA,e),i.on(n.a.INIT_PTS_FOUND,e),i.on(n.a.FRAG_PARSING_DATA,function(i,e){var s=[],n={event:i,data:e};e.data1&&(n.data1=e.data1.buffer,s.push(e.data1.buffer),delete e.data1),e.data2&&(n.data2=e.data2.buffer,s.push(e.data2.buffer),delete e.data2),t.postMessage(n,s)})}},function(t,i,e){"use strict";e.r(i);var s,n,r=e(7),h=e(2),a=e(3),o=e(1),c=e(0),u={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},l=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.handledEvents=e,this.useGenericHandler=!0,this.registerListeners()}var i=t.prototype;return i.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},i.onHandlerDestroying=function(){},i.onHandlerDestroyed=function(){},i.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},i.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(u[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},i.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},i.onEvent=function(t,i){this.onEventGeneric(t,i)},i.onEventGeneric=function(t,i){try{(function(t,i){var e="on"+t.replace("hls","");if("function"!=typeof this[e])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+e+")");return this[e].bind(this,i)}).call(this,t,i).call()}catch(i){c.b.error("An internal error happened while handling event "+t+'. Error message: "'+i.message+'". Here is a stacktrace:',i),this.hls.trigger(o.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:i})}},t}();!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(s||(s={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(n||(n={}));var d=e(10);function f(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var p,v=function(){function t(t,i){this.St=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=i}var i,e;return i=t,(e=[{key:"uri",get:function(){return!this.St&&this.reluri&&(this.St=Object(r.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this.St}}])&&f(i.prototype,e),t}();function b(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}!function(t){t.AUDIO="audio",t.VIDEO="video"}(p||(p={}));var m=function(){function t(){var t;this.Ot=null,this._t=null,this.jt=null,this.At=((t={})[p.AUDIO]=!1,t[p.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var i,e,s=t.prototype;return s.setByteRange=function(t,i){var e=t.split("@",2),s=[];1===e.length?s[0]=i?i.byteRangeEndOffset:0:s[0]=parseInt(e[1]),s[1]=parseInt(e[0])+s[0],this._t=s},s.addElementaryStream=function(t){this.At[t]=!0},s.hasElementaryStream=function(t){return!0===this.At[t]},s.createInitializationVector=function(t){for(var i=new Uint8Array(16),e=12;e<16;e++)i[e]=t>>8*(15-e)&255;return i},s.setDecryptDataFromLevelKey=function(t,i){var e=t;return t&&t.method&&t.uri&&!t.iv&&((e=new v(t.baseuri,t.reluri)).method=t.method,e.iv=this.createInitializationVector(i)),e},i=t,(e=[{key:"url",get:function(){return!this.Ot&&this.relurl&&(this.Ot=Object(r.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this.Ot},set:function(t){this.Ot=t}},{key:"byteRange",get:function(){return this._t?this._t:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this.jt)return null;if(!this.jt&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this.jt=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this.jt}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(a.a)(this.programDateTime))return null;var t=Object(a.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&b(i.prototype,e),t}();function g(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var y=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}var i,e;return i=t,(e=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(a.a)(this.fragments[0].programDateTime))}}])&&g(i.prototype,e),t}(),w=/^(\d+)x(\d+)$/,x=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,k=function(){function t(i){for(var e in"string"==typeof i&&(i=t.parseAttrList(i)),i)i.hasOwnProperty(e)&&(this[e]=i[e])}var i=t.prototype;return i.decimalInteger=function(t){var i=parseInt(this[t],10);return i>Number.MAX_SAFE_INTEGER?1/0:i},i.hexadecimalInteger=function(t){if(this[t]){var i=(this[t]||"0x").slice(2);i=(1&i.length?"0":"")+i;for(var e=new Uint8Array(i.length/2),s=0;s<i.length/2;s++)e[s]=parseInt(i.slice(2*s,2*s+2),16);return e}return null},i.hexadecimalIntegerAsNumber=function(t){var i=parseInt(this[t],16);return i>Number.MAX_SAFE_INTEGER?1/0:i},i.decimalFloatingPoint=function(t){return parseFloat(this[t])},i.enumeratedString=function(t){return this[t]},i.decimalResolution=function(t){var i=w.exec(this[t]);if(null!==i)return{width:parseInt(i[1],10),height:parseInt(i[2],10)}},t.parseAttrList=function(t){var i,e={};for(x.lastIndex=0;null!==(i=x.exec(t));){var s=i[2];0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1&&(s=s.slice(1,-1)),e[i[1]]=s}return e},t}(),S={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function O(t,i){return MediaSource.isTypeSupported((i||"video")+'/mp4;codecs="'+t+'"')}var _=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,j=/#EXT-X-MEDIA:(.*)/g,A=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),I=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,C=/\.(mp4|m4s|m4v|m4a)$/i,T=function(){function t(){}return t.findGroup=function(t,i){for(var e=0;e<t.length;e++){var s=t[e];if(s.id===i)return s}},t.convertAVC1ToAVCOTI=function(t){var i,e=t.split(".");return e.length>2?(i=e.shift()+".",i+=parseInt(e.shift()).toString(16),i+=("000"+parseInt(e.shift()).toString(16)).substr(-4)):i=t,i},t.resolve=function(t,i){return r.buildAbsoluteURL(i,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(i,e){var s,n=[];function r(t,i){["video","audio"].forEach(function(e){var s=t.filter(function(t){return function(t,i){var e=S[i];return!!e&&!0===e[t.slice(0,4)]}(t,e)});if(s.length){var n=s.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});i[e+"Codec"]=n.length>0?n[0]:s[0],t=t.filter(function(t){return-1===s.indexOf(t)})}}),i.unknownCodecs=t}for(_.lastIndex=0;null!=(s=_.exec(i));){var h={},a=h.attrs=new k(s[1]);h.url=t.resolve(s[2],e);var o=a.decimalResolution("RESOLUTION");o&&(h.width=o.width,h.height=o.height),h.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),h.name=a.NAME,r([].concat((a.CODECS||"").split(/[ ,]+/)),h),h.videoCodec&&-1!==h.videoCodec.indexOf("avc1")&&(h.videoCodec=t.convertAVC1ToAVCOTI(h.videoCodec)),n.push(h)}return n},t.parseMasterPlaylistMedia=function(i,e,s,n){var r;void 0===n&&(n=[]);var h=[],a=0;for(j.lastIndex=0;null!==(r=j.exec(i));){var o=new k(r[1]);if(o.TYPE===s){var c={id:a++,groupId:o["GROUP-ID"],name:o.NAME||o.LANGUAGE,type:s,default:"YES"===o.DEFAULT,autoselect:"YES"===o.AUTOSELECT,forced:"YES"===o.FORCED,lang:o.LANGUAGE};if(o.URI&&(c.url=t.resolve(o.URI,e)),n.length){var u=t.findGroup(n,c.groupId);c.audioCodec=u?u.codec:n[0].codec}h.push(c)}}return h},t.parseLevelPlaylist=function(t,i,e,s,n){var r,h,o,u=0,l=0,d=new y(i),f=0,p=null,b=new m,g=null;for(A.lastIndex=0;null!==(r=A.exec(t));){var w=r[1];if(w){b.duration=parseFloat(w);var x=(" "+r[2]).slice(1);b.title=x||null,b.tagList.push(x?["INF",w,x]:["INF",w])}else if(r[3]){if(Object(a.a)(b.duration)){var S=u++;b.type=s,b.start=l,o&&(b.levelkey=o),b.sn=S,b.level=e,b.cc=f,b.urlId=n,b.baseurl=i,b.relurl=(" "+r[3]).slice(1),P(b,p),d.fragments.push(b),p=b,l+=b.duration,b=new m}}else if(r[4]){var O=(" "+r[4]).slice(1);p?b.setByteRange(O,p):b.setByteRange(O)}else if(r[5])b.rawProgramDateTime=(" "+r[5]).slice(1),b.tagList.push(["PROGRAM-DATE-TIME",b.rawProgramDateTime]),null===g&&(g=d.fragments.length);else{if(!(r=r[0].match(I))){c.b.warn("No matches on slow regex match for level playlist!");continue}for(h=1;h<r.length&&void 0===r[h];h++);var _=(" "+r[h+1]).slice(1),j=(" "+r[h+2]).slice(1);switch(r[h]){case"#":b.tagList.push(j?[_,j]:[_]);break;case"PLAYLIST-TYPE":d.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":u=d.startSN=parseInt(_);break;case"TARGETDURATION":d.targetduration=parseFloat(_);break;case"VERSION":d.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":f++,b.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(_);break;case"KEY":var T=new k(_),M=T.enumeratedString("METHOD"),E=T.URI,L=T.hexadecimalInteger("IV");M&&(o=new v(i,E),E&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(M)>=0&&(o.method=M,o.key=null,o.iv=L));break;case"START":var R=new k(_).decimalFloatingPoint("TIME-OFFSET");Object(a.a)(R)&&(d.startTimeOffset=R);break;case"MAP":var B=new k(_);b.relurl=B.URI,B.BYTERANGE&&b.setByteRange(B.BYTERANGE),b.baseurl=i,b.level=e,b.type=s,b.sn="initSegment",d.initSegment=b,(b=new m).rawProgramDateTime=d.initSegment.rawProgramDateTime;break;default:c.b.warn("line parsed but not handled: "+r)}}}return(b=p)&&!b.relurl&&(d.fragments.pop(),l-=b.duration),d.totalduration=l,d.averagetargetduration=l/d.fragments.length,d.endSN=u-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=f,!d.initSegment&&d.fragments.length&&d.fragments.every(function(t){return C.test(t.relurl)})&&(c.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(b=new m).relurl=d.fragments[0].relurl,b.baseurl=i,b.level=e,b.type=s,b.sn="initSegment",d.initSegment=b,d.needSidxRanges=!0),g&&function(t,i){for(var e=t[i],s=i-1;s>=0;s--){var n=t[s];n.programDateTime=e.programDateTime-1e3*n.duration,e=n}}(d.fragments,g),d},t}();function P(t,i){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):i&&i.programDateTime&&(t.programDateTime=i.endProgramDateTime),Object(a.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var M=window.performance,E=function(t){var i,e;function r(i){var e;return(e=t.call(this,i,o.a.MANIFEST_LOADING,o.a.LEVEL_LOADING,o.a.AUDIO_TRACK_LOADING,o.a.SUBTITLE_TRACK_LOADING)||this).loaders={},e}e=t,(i=r).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,r.canHaveQualityLevels=function(t){return t!==s.AUDIO_TRACK&&t!==s.SUBTITLE_TRACK},r.mapContextToLevelType=function(t){switch(t.type){case s.AUDIO_TRACK:return n.AUDIO;case s.SUBTITLE_TRACK:return n.SUBTITLE;default:return n.MAIN}},r.getResponseUrl=function(t,i){var e=t.url;return void 0!==e&&0!==e.indexOf("data:")||(e=i.url),e};var u=r.prototype;return u.createInternalLoader=function(t){var i=this.hls.config,e=i.pLoader,s=i.loader,n=new(e||s)(i);return t.loader=n,this.loaders[t.type]=n,n},u.getInternalLoader=function(t){return this.loaders[t.type]},u.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},u.destroyInternalLoaders=function(){for(var t in this.loaders){var i=this.loaders[t];i&&i.destroy(),this.resetInternalLoader(t)}},u.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},u.onManifestLoading=function(t){this.load({url:t.url,type:s.MANIFEST,level:0,id:null,responseType:"text"})},u.onLevelLoading=function(t){this.load({url:t.url,type:s.LEVEL,level:t.level,id:t.id,responseType:"text"})},u.onAudioTrackLoading=function(t){this.load({url:t.url,type:s.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},u.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:s.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},u.load=function(t){var i=this.hls.config;c.b.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var e,n,r,h,a=this.getInternalLoader(t);if(a){var o=a.context;if(o&&o.url===t.url)return c.b.trace("playlist request ongoing"),!1;c.b.warn("aborting previous loader for type: "+t.type),a.abort()}switch(t.type){case s.MANIFEST:e=i.manifestLoadingMaxRetry,n=i.manifestLoadingTimeOut,r=i.manifestLoadingRetryDelay,h=i.manifestLoadingMaxRetryTimeout;break;case s.LEVEL:e=0,h=0,r=0,n=i.levelLoadingTimeOut;break;default:e=i.levelLoadingMaxRetry,n=i.levelLoadingTimeOut,r=i.levelLoadingRetryDelay,h=i.levelLoadingMaxRetryTimeout}a=this.createInternalLoader(t);var u={timeout:n,maxRetry:e,retryDelay:r,maxRetryDelay:h},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.b.debug("Calling internal loader delegate for URL: "+t.url),a.load(t,u,l),!0},u.loadsuccess=function(t,i,e,s){if(void 0===s&&(s=null),e.isSidxRequest)return this.It(t,e),void this.Ct(t,i,e,s);if(this.resetInternalLoader(e.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var n=t.data;i.tload=M.now(),0===n.indexOf("#EXTM3U")?n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this.Tt(t,i,e,s):this.Pt(t,i,e,s):this.Mt(t,e,"no EXTM3U delimiter",s)},u.loaderror=function(t,i,e){void 0===e&&(e=null),this.Et(i,e,!1,t)},u.loadtimeout=function(t,i,e){void 0===e&&(e=null),this.Et(i,e,!0)},u.Pt=function(t,i,e,s){var n=this.hls,h=t.data,a=r.getResponseUrl(t,e),u=T.parseMasterPlaylist(h,a);if(u.length){var l=u.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),d=T.parseMasterPlaylistMedia(h,a,"AUDIO",l),f=T.parseMasterPlaylistMedia(h,a,"SUBTITLES");if(d.length){var p=!1;d.forEach(function(t){t.url||(p=!0)}),!1===p&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(c.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),d.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}n.trigger(o.a.MANIFEST_LOADED,{levels:u,audioTracks:d,subtitles:f,url:a,stats:i,networkDetails:s})}else this.Mt(t,e,"no level found in manifest",s)},u.Tt=function(t,i,e,n){var h=this.hls,c=e.id,u=e.level,l=e.type,d=r.getResponseUrl(t,e),f=Object(a.a)(c)?c:0,p=Object(a.a)(u)?u:f,v=r.mapContextToLevelType(e),b=T.parseLevelPlaylist(t.data,d,p,v,f);if(b.tload=i.tload,l===s.MANIFEST){var m={url:d,details:b};h.trigger(o.a.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:d,stats:i,networkDetails:n})}if(i.tparsed=M.now(),b.needSidxRanges){var g=b.initSegment.url;this.load({url:g,isSidxRequest:!0,type:l,level:u,levelDetails:b,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else e.levelDetails=b,this.Ct(t,i,e,n)},u.It=function(t,i){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var e=d.a.parseSegmentIndex(new Uint8Array(t.data));if(e){var s=e.references,n=i.levelDetails;s.forEach(function(t,i){var e=t.info;if(n){var s=n.fragments[i];0===s.byteRange.length&&s.setByteRange(String(1+e.end-e.start)+"@"+String(e.start))}}),n&&n.initSegment.setByteRange(String(e.moovEndOffset)+"@0")}},u.Mt=function(t,i,e,s){this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:e,networkDetails:s})},u.Et=function(t,i,e,n){var r,a;void 0===e&&(e=!1),void 0===n&&(n=null),c.b.info("A network error occured while loading a "+t.type+"-type playlist");var u=this.getInternalLoader(t);switch(t.type){case s.MANIFEST:r=e?h.a.MANIFEST_LOAD_TIMEOUT:h.a.MANIFEST_LOAD_ERROR,a=!0;break;case s.LEVEL:r=e?h.a.LEVEL_LOAD_TIMEOUT:h.a.LEVEL_LOAD_ERROR,a=!1;break;case s.AUDIO_TRACK:r=e?h.a.AUDIO_TRACK_LOAD_TIMEOUT:h.a.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}u&&(u.abort(),this.resetInternalLoader(t.type));var l={type:h.b.NETWORK_ERROR,details:r,fatal:a,url:t.url,loader:u,context:t,networkDetails:i};n&&(l.response=n),this.hls.trigger(o.a.ERROR,l)},u.Ct=function(t,i,e,n){var h=e.type,a=e.level,c=e.id,u=e.levelDetails;if(u&&u.targetduration)if(r.canHaveQualityLevels(e.type))this.hls.trigger(o.a.LEVEL_LOADED,{details:u,level:a||0,id:c||0,stats:i,networkDetails:n});else switch(h){case s.AUDIO_TRACK:this.hls.trigger(o.a.AUDIO_TRACK_LOADED,{details:u,id:c,stats:i,networkDetails:n});break;case s.SUBTITLE_TRACK:this.hls.trigger(o.a.SUBTITLE_TRACK_LOADED,{details:u,id:c,stats:i,networkDetails:n})}else this.Mt(t,e,"invalid target duration",n)},r}(l),L=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FRAG_LOADING)||this).loaders={},e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){var i=this.loaders;for(var e in i){var s=i[e];s&&s.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onFragLoading=function(t){var i=t.frag,e=i.type,s=this.loaders,n=this.hls.config,r=n.fLoader,h=n.loader;i.loaded=0;var o,u,l,d=s[e];d&&(c.b.warn("abort previous fragment loader for type: "+e),d.abort()),d=s[e]=i.loader=n.fLoader?new r(n):new h(n),o={url:i.url,frag:i,responseType:"arraybuffer",progressData:!1};var f=i.byteRangeStartOffset,p=i.byteRangeEndOffset;Object(a.a)(f)&&Object(a.a)(p)&&(o.rangeStart=f,o.rangeEnd=p),u={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},d.load(o,u,l)},n.loadsuccess=function(t,i,e,s){void 0===s&&(s=null);var n=t.data,r=e.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.a.FRAG_LOADED,{payload:n,frag:r,stats:i,networkDetails:s})},n.loaderror=function(t,i,e){void 0===e&&(e=null);var s=i.frag,n=s.loader;n&&n.abort(),this.loaders[s.type]=void 0,this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.FRAG_LOAD_ERROR,fatal:!1,frag:i.frag,response:t,networkDetails:e})},n.loadtimeout=function(t,i,e){void 0===e&&(e=null);var s=i.frag,n=s.loader;n&&n.abort(),this.loaders[s.type]=void 0,this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:i.frag,networkDetails:e})},n.loadprogress=function(t,i,e,s){void 0===s&&(s=null);var n=i.frag;n.loaded=t.loaded,this.hls.trigger(o.a.FRAG_LOAD_PROGRESS,{frag:n,stats:t,networkDetails:s})},s}(l),R=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.KEY_LOADING)||this).loaders={},e.decryptkey=null,e.decrypturl=null,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){for(var i in this.loaders){var e=this.loaders[i];e&&e.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onKeyLoading=function(t){var i=t.frag,e=i.type,s=this.loaders[e];if(i.decryptdata){var n=i.decryptdata.uri;if(n!==this.decrypturl||null===this.decryptkey){var r=this.hls.config;if(s&&(c.b.warn("abort previous key loader for type:"+e),s.abort()),!n)return void c.b.warn("key uri is falsy");i.loader=this.loaders[e]=new r.loader(r),this.decrypturl=n,this.decryptkey=null;var h={url:n,frag:i,responseType:"arraybuffer"},a={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:r.fragLoadingRetryDelay,maxRetryDelay:r.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};i.loader.load(h,a,u)}else this.decryptkey&&(i.decryptdata.key=this.decryptkey,this.hls.trigger(o.a.KEY_LOADED,{frag:i}))}else c.b.warn("Missing decryption data on fragment in onKeyLoading")},n.loadsuccess=function(t,i,e){var s=e.frag;s.decryptdata?(this.decryptkey=s.decryptdata.key=new Uint8Array(t.data),s.loader=void 0,delete this.loaders[s.type],this.hls.trigger(o.a.KEY_LOADED,{frag:s})):c.b.error("after key load, decryptdata unset")},n.loaderror=function(t,i){var e=i.frag,s=e.loader;s&&s.abort(),delete this.loaders[e.type],this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.KEY_LOAD_ERROR,fatal:!1,frag:e,response:t})},n.loadtimeout=function(t,i){var e=i.frag,s=e.loader;s&&s.abort(),delete this.loaders[e.type],this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:e})},s}(l),B="NOT_LOADED",D="APPENDING",F="PARTIAL",V=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.BUFFER_APPENDED,o.a.FRAG_BUFFERED,o.a.FRAG_LOADED)||this).bufferPadding=.2,e.fragments=Object.create(null),e.timeRanges=Object.create(null),e.config=i.config,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,l.prototype.destroy.call(this),t.prototype.destroy.call(this)},n.getBufferedFrag=function(t,i){var e=this.fragments,s=Object.keys(e).filter(function(s){var n=e[s];if(n.body.type!==i)return!1;if(!n.buffered)return!1;var r=n.body;return r.startPTS<=t&&t<=r.endPTS});if(0===s.length)return null;var n=s.pop();return e[n].body},n.detectEvictedFragments=function(t,i){var e,s,n=this;Object.keys(this.fragments).forEach(function(r){var h=n.fragments[r];if(!0===h.buffered){var a=h.range[t];if(a){e=a.time;for(var o=0;o<e.length;o++)if(s=e[o],!1===n.isTimeBuffered(s.startPTS,s.endPTS,i)){n.removeFragment(h.body);break}}}})},n.detectPartialFragments=function(t){var i=this,e=this.getFragmentKey(t),s=this.fragments[e];s&&(s.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){if(t.hasElementaryStream(e)){var n=i.timeRanges[e];s.range[e]=i.getBufferedTimes(t.startPTS,t.endPTS,n)}}))},n.getBufferedTimes=function(t,i,e){for(var s,n,r=[],h=!1,a=0;a<e.length;a++){if(s=e.start(a)-this.bufferPadding,n=e.end(a)+this.bufferPadding,t>=s&&i<=n){r.push({startPTS:Math.max(t,e.start(a)),endPTS:Math.min(i,e.end(a))});break}if(t<n&&i>s)r.push({startPTS:Math.max(t,e.start(a)),endPTS:Math.min(i,e.end(a))}),h=!0;else if(i<=s)break}return{time:r,partial:h}},n.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},n.getPartialFragment=function(t){var i,e,s,n=this,r=null,h=0;return Object.keys(this.fragments).forEach(function(a){var o=n.fragments[a];n.isPartial(o)&&(e=o.body.startPTS-n.bufferPadding,s=o.body.endPTS+n.bufferPadding,t>=e&&t<=s&&(i=Math.min(t-e,s-t),h<=i&&(r=o.body,h=i)))}),r},n.getState=function(t){var i=this.getFragmentKey(t),e=this.fragments[i],s=B;return void 0!==e&&(s=e.buffered?!0===this.isPartial(e)?F:"OK":D),s},n.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},n.isTimeBuffered=function(t,i,e){for(var s,n,r=0;r<e.length;r++){if(s=e.start(r)-this.bufferPadding,n=e.end(r)+this.bufferPadding,t>=s&&i<=n)return!0;if(i<=s)return!1}return!1},n.onFragLoaded=function(t){var i=t.frag;Object(a.a)(i.sn)&&!i.bitrateTest&&(this.fragments[this.getFragmentKey(i)]={body:i,range:Object.create(null),buffered:!1})},n.onBufferAppended=function(t){var i=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var e=i.timeRanges[t];i.detectEvictedFragments(t,e)})},n.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},n.hasFragment=function(t){var i=this.getFragmentKey(t);return void 0!==this.fragments[i]},n.removeFragment=function(t){var i=this.getFragmentKey(t);delete this.fragments[i]},n.removeAllFragments=function(){this.fragments=Object.create(null)},s}(l),U={search:function(t,i){for(var e=0,s=t.length-1,n=null,r=null;e<=s;){var h=i(r=t[n=(e+s)/2|0]);if(h>0)e=n+1;else{if(!(h<0))return r;s=n-1}}return null}},N=function(){function t(){}return t.isBuffered=function(t,i){try{if(t)for(var e=t.buffered,s=0;s<e.length;s++)if(i>=e.start(s)&&i<=e.end(s))return!0}catch(t){}return!1},t.bufferInfo=function(t,i,e){try{if(t){var s,n=t.buffered,r=[];for(s=0;s<n.length;s++)r.push({start:n.start(s),end:n.end(s)});return this.bufferedInfo(r,i,e)}}catch(t){}return{len:0,start:i,end:i,nextStart:void 0}},t.bufferedInfo=function(t,i,e){t.sort(function(t,i){var e=t.start-i.start;return e||i.end-t.end});var s=[];if(e)for(var n=0;n<t.length;n++){var r=s.length;if(r){var h=s[r-1].end;t[n].start-h<e?t[n].end>h&&(s[r-1].end=t[n].end):s.push(t[n])}else s.push(t[n])}else s=t;for(var a,o=0,c=i,u=i,l=0;l<s.length;l++){var d=s[l].start,f=s[l].end;if(i+e>=d&&i<f)c=d,o=(u=f)-i;else if(i+e<d){a=d;break}}return{len:o,start:c,end:u,nextStart:a}},t}(),$=e(8),H=e(11),q=e(9);function z(){return window.MediaSource||window.WebKitMediaSource}var G=e(5),W=function(t){var i,e;function s(){return t.apply(this,arguments)||this}return e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,s.prototype.trigger=function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.emit.apply(this,[t,t].concat(e))},s}($.EventEmitter),J=z()||{isTypeSupported:function(){return!1}},Q=function(){function t(t,i){var e=this;this.hls=t,this.id=i;var s=this.observer=new W,n=t.config,r=function(i,s){(s=s||{}).frag=e.frag,s.id=e.id,t.trigger(i,s)};s.on(o.a.FRAG_DECRYPTED,r),s.on(o.a.FRAG_PARSING_INIT_SEGMENT,r),s.on(o.a.FRAG_PARSING_DATA,r),s.on(o.a.FRAG_PARSED,r),s.on(o.a.ERROR,r),s.on(o.a.FRAG_PARSING_METADATA,r),s.on(o.a.FRAG_PARSING_USERDATA,r),s.on(o.a.INIT_PTS_FOUND,r);var a={mp4:J.isTypeSupported("video/mp4"),mpeg:J.isTypeSupported("audio/mpeg"),mp3:J.isTypeSupported('audio/mp4; codecs="mp3"')},u=navigator.vendor;if(n.enableWorker&&"undefined"!=typeof Worker){var l;c.b.log("demuxing in webworker");try{l=this.w=H(12),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(i){t.trigger(o.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:i.message+" ("+i.filename+":"+i.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:a,vendor:u,id:i,config:JSON.stringify(n)})}catch(t){c.b.warn("Error in worker:",t),c.b.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&Object(G.a)().URL.revokeObjectURL(l.objectURL),this.demuxer=new q.a(s,a,n,u),this.w=void 0}}else this.demuxer=new q.a(s,a,n,u)}var i=t.prototype;return i.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var i=this.demuxer;i&&(i.destroy(),this.demuxer=null)}var e=this.observer;e&&(e.removeAllListeners(),this.observer=null)},i.push=function(t,i,e,s,n,r,h,o){var u=this.w,l=Object(a.a)(n.startPTS)?n.startPTS:n.start,d=n.decryptdata,f=this.frag,p=!(f&&n.cc===f.cc),v=!(f&&n.level===f.level),b=f&&n.sn===f.sn+1,m=!v&&b;if(p&&c.b.log(this.id+":discontinuity detected"),v&&c.b.log(this.id+":switch detected"),this.frag=n,u)u.postMessage({cmd:"demux",data:t,decryptdata:d,initSegment:i,audioCodec:e,videoCodec:s,timeOffset:l,discontinuity:p,trackSwitch:v,contiguous:m,duration:r,accurateTimeOffset:h,defaultInitPTS:o},t instanceof ArrayBuffer?[t]:[]);else{var g=this.demuxer;g&&g.push(t,d,i,e,s,l,p,v,m,r,h,o)}},i.onWorkerMessage=function(t){var i=t.data,e=this.hls;switch(i.event){case"init":Object(G.a)().URL.revokeObjectURL(this.w.objectURL);break;case o.a.FRAG_PARSING_DATA:i.data.data1=new Uint8Array(i.data1),i.data2&&(i.data.data2=new Uint8Array(i.data2));default:i.data=i.data||{},i.data.frag=this.frag,i.data.id=this.id,e.trigger(i.event,i.data)}},t}();function X(t,i,e){switch(i){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(e);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(e)}}function Y(t,i,e){var s=t[i],n=t[e],r=n.startPTS;Object(a.a)(r)?e>i?(s.duration=r-s.start,s.duration<0&&c.b.warn("negative duration computed for frag "+s.sn+",level "+s.level+", there should be some duration drift between playlist and fragment!")):(n.duration=s.start-r,n.duration<0&&c.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):n.start=e>i?s.start+s.duration:Math.max(s.start-n.duration,0)}function K(t,i,e,s,n,r){var h=e;if(Object(a.a)(i.startPTS)){var o=Math.abs(i.startPTS-e);Object(a.a)(i.deltaPTS)?i.deltaPTS=Math.max(o,i.deltaPTS):i.deltaPTS=o,h=Math.max(e,i.startPTS),e=Math.min(e,i.startPTS),s=Math.max(s,i.endPTS),n=Math.min(n,i.startDTS),r=Math.max(r,i.endDTS)}var c=e-i.start;i.start=i.startPTS=e,i.maxStartPTS=h,i.endPTS=s,i.startDTS=n,i.endDTS=r,i.duration=s-e;var u,l,d,f=i.sn;if(!t||f<t.startSN||f>t.endSN)return 0;for(u=f-t.startSN,(l=t.fragments)[u]=i,d=u;d>0;d--)Y(l,d,d-1);for(d=u;d<l.length-1;d++)Y(l,d,d+1);return t.PTSKnown=!0,c}var Z={toString:function(t){for(var i="",e=t.length,s=0;s<e;s++)i+="["+t.start(s).toFixed(3)+","+t.end(s).toFixed(3)+"]";return i}};function tt(t,i){i.fragments.forEach(function(i){if(i){var e=i.start+t;i.start=i.startPTS=e,i.endPTS=e+i.duration}}),i.PTSKnown=!0}function it(t,i,e){!function(t,i,e){if(function(t,i,e){var s=!1;return i&&i.details&&e&&(e.endCC>e.startCC||t&&t.cc<e.startCC)&&(s=!0),s}(t,e,i)){var s=function(t,i){var e=t.fragments,s=i.fragments;if(s.length&&e.length){var n=function(t,i){for(var e=null,s=0;s<t.length;s+=1){var n=t[s];if(n&&n.cc===i){e=n;break}}return e}(e,s[0].cc);if(n&&(!n||n.startPTS))return n;c.b.log("No frag in previous level to align on")}else c.b.log("No fragments to align")}(e.details,i);s&&(c.b.log("Adjusting PTS using last level due to CC increase within current level"),tt(s.start,i))}}(t,e,i),!e.PTSKnown&&i&&function(t,i){if(i&&i.fragments.length){if(!t.hasProgramDateTime||!i.hasProgramDateTime)return;var e=i.fragments[0].programDateTime,s=(t.fragments[0].programDateTime-e)/1e3+i.fragments[0].start;Object(a.a)(s)&&(c.b.log("adjusting PTS using programDateTime delta, sliding:"+s.toFixed(3)),tt(s,t))}}(e,i.details)}function et(t,i,e){void 0===t&&(t=0),void 0===i&&(i=0);var s=Math.min(i,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-s<=t?1:e.start-s>t&&e.start?-1:0}function st(t,i,e){var s=1e3*Math.min(i,e.duration+(e.deltaPTS?e.deltaPTS:0));return(e.endProgramDateTime||0)-s>t}var nt=function(){function t(t,i,e,s){this.config=t,this.media=i,this.fragmentTracker=e,this.hls=s,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var i=t.prototype;return i.poll=function(t){var i=this.config,e=this.media,s=this.stalled,n=e.currentTime,r=e.seeking,h=this.seeking&&!r,a=!this.seeking&&r;if(this.seeking=r,n===t){if((a||h)&&(this.stalled=null),!e.paused&&!e.ended&&0!==e.playbackRate&&e.buffered.length){var o=N.bufferInfo(e,n,0),u=o.len>0,l=o.nextStart||0;if(u||l){if(r){if(o.len>2||!l||l-n>2)return;this.moved=!1}if(!this.moved&&this.stalled){var d=Math.max(l,o.start||0)-n;if(d>0&&d<=2)return void this.Lt(null)}var f=self.performance.now();if(null!==s){var p=f-s;!r&&p>=250&&this.Rt(o.len);var v=N.bufferInfo(e,n,i.maxBufferHole);this.Bt(v,p)}else this.stalled=f}}}else if(this.moved=!0,null!==s){if(this.stallReported){var b=self.performance.now()-s;c.b.warn("playback not stuck anymore @"+n+", after "+Math.round(b)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},i.Bt=function(t,i){var e=this.config,s=this.fragmentTracker,n=this.media.currentTime,r=s.getPartialFragment(n);r&&this.Lt(r)||t.len>e.maxBufferHole&&i>1e3*e.highBufferWatchdogPeriod&&(c.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this.Dt())},i.Rt=function(t){var i=this.hls,e=this.media;this.stallReported||(this.stallReported=!0,c.b.warn("Playback stalling at @"+e.currentTime+" due to low buffer"),i.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},i.Lt=function(t){for(var i=this.config,e=this.hls,s=this.media,n=s.currentTime,r=0,a=0;a<s.buffered.length;a++){var u=s.buffered.start(a);if(n+i.maxBufferHole>=r&&n<u){var l=Math.max(u+.05,s.currentTime+.1);return c.b.warn("skipping hole, adjusting currentTime from "+n+" to "+l),this.moved=!0,this.stalled=null,s.currentTime=l,t&&e.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+l,frag:t}),l}r=s.buffered.end(a)}return 0},i.Dt=function(){var t=this.config,i=this.hls,e=this.media,s=e.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<t.nudgeMaxRetry){var r=s+n*t.nudgeOffset;c.b.warn("Nudging 'currentTime' from "+s+" to "+r),e.currentTime=r,i.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.b.error("Playhead still not moving while enough data buffered @"+s+" after "+t.nudgeMaxRetry+" nudges"),i.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_STALLED_ERROR,fatal:!0})},t}(),rt="STOPPED",ht="IDLE",at="KEY_LOADING",ot="FRAG_LOADING",ct="FRAG_LOADING_WAITING_RETRY",ut="PARSING",lt="PARSED",dt="BUFFER_FLUSHING",ft="ERROR",pt="WAITING_LEVEL";function vt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var bt=function(t){var i,e;function s(i,e){var s;return(s=t.call(this,i,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.MANIFEST_LOADING,o.a.MANIFEST_PARSED,o.a.LEVEL_LOADED,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.FRAG_LOAD_EMERGENCY_ABORTED,o.a.FRAG_PARSING_INIT_SEGMENT,o.a.FRAG_PARSING_DATA,o.a.FRAG_PARSED,o.a.ERROR,o.a.AUDIO_TRACK_SWITCHING,o.a.AUDIO_TRACK_SWITCHED,o.a.BUFFER_CREATED,o.a.BUFFER_APPENDED,o.a.BUFFER_FLUSHED)||this).fragmentTracker=e,s.config=i.config,s.audioCodecSwap=!1,s.Ft=rt,s.stallReported=!1,s.gapController=null,s.altAudio=!1,s}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var r,u,l=s.prototype;return l.startLoad=function(t){if(this.levels){var i=this.lastCurrentTime,e=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var s=e.startLevel;-1===s&&(s=0,this.bitrateTest=!0),this.level=e.nextLoadLevel=s,this.loadedmetadata=!1}i>0&&-1===t&&(c.b.log("override startPosition with lastCurrentTime @"+i.toFixed(3)),t=i),this.state=ht,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=rt},l.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},l.doTick=function(){switch(this.state){case dt:this.fragLoadError=0;break;case ht:this.Vt();break;case pt:var t=this.levels[this.level];t&&t.details&&(this.state=ht);break;case ct:var i=window.performance.now(),e=this.retryDate;(!e||i>=e||this.media&&this.media.seeking)&&(c.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ht)}this.Ut(),this.Nt()},l.Vt=function(){var t=this.hls,i=t.config,e=this.media;if(void 0!==this.levelLastLoaded&&(e||!this.startFragRequested&&i.startFragPrefetch)){var s;s=this.loadedmetadata?e.currentTime:this.nextLoadPosition;var n=t.nextLoadLevel,r=this.levels[n];if(r){var h,a=r.bitrate;h=a?Math.max(8*i.maxBufferSize/a,i.maxBufferLength):i.maxBufferLength,h=Math.min(h,i.maxMaxBufferLength);var u=N.bufferInfo(this.mediaBuffer?this.mediaBuffer:e,s,i.maxBufferHole),l=u.len;if(!(l>=h)){c.b.trace("buffer length of "+l.toFixed(3)+" is below max of "+h.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=n;var d=r.details;if(!d||d.live&&this.levelLastLoaded!==n)this.state=pt;else{if(this.$t(u,d)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(o.a.BUFFER_EOS,f),void(this.state="ENDED")}this.Ht(s,u,d)}}}}},l.Ht=function(t,i,e){var s=this.fragPrevious,n=this.level,r=e.fragments,h=r.length;if(0!==h){var a,o=r[0].start,u=r[h-1].start+r[h-1].duration,l=i.end;if(e.initSegment&&!e.initSegment.data)a=e.initSegment;else if(e.live){var d=this.config.initialLiveManifestSize;if(h<d)return void c.b.warn("Can not start playback of a level, reason: not enough fragments "+h+" < "+d);if(null===(a=this.qt(e,l,o,u,s,r,h)))return}else l<o&&(a=r[0]);a||(a=this.zt(o,s,h,r,l,u,e)),a&&(a.encrypted?(c.b.log("Loading key for "+a.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+n),this.Gt(a)):(c.b.log("Loading "+a.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+n+", currentTime:"+t.toFixed(3)+",bufferEnd:"+l.toFixed(3)),this.Wt(a)))}},l.qt=function(t,i,e,s,n,r,h){var o,u=this.hls.config,l=this.media,d=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*t.targetduration;if(i<Math.max(e-u.maxFragLookUpTolerance,s-d)){var f=this.liveSyncPosition=this.computeLivePosition(e,t);i=f,l&&!l.paused&&l.readyState&&l.duration>f&&f>l.currentTime&&(c.b.log("buffer end: "+i.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),l.currentTime=f),this.nextLoadPosition=f}if(t.PTSKnown&&i>s&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(n)if(t.hasProgramDateTime)c.b.log("live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),o=function(t,i,e){if(null===i||!Array.isArray(t)||!t.length||!Object(a.a)(i))return null;if(i<(t[0].programDateTime||0))return null;if(i>=(t[t.length-1].endProgramDateTime||0))return null;e=e||0;for(var s=0;s<t.length;++s){var n=t[s];if(st(i,e,n))return n}return null}(r,n.endProgramDateTime,u.maxFragLookUpTolerance);else{var p=n.sn+1;if(p>=t.startSN&&p<=t.endSN){var v=r[p-t.startSN];n.cc===v.cc&&(o=v,c.b.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=U.search(r,function(t){return n.cc-t.cc}))&&c.b.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}o||(o=r[Math.min(h-1,Math.round(h/2))],c.b.log("live playlist, switching playlist, unknown, load middle frag : "+o.sn))}return o},l.zt=function(t,i,e,s,n,r,h){var a,o=this.hls.config;if(a=n<r?function(t,i,e,s){void 0===e&&(e=0),void 0===s&&(s=0);var n=t?i[t.sn-i[0].sn+1]:null;return n&&!et(e,s,n)?n:U.search(i,et.bind(null,e,s))}(i,s,n,n>r-o.maxFragLookUpTolerance?0:o.maxFragLookUpTolerance):s[e-1]){var u=a.sn-h.startSN,l=i&&a.level===i.level,d=s[u-1],f=s[u+1];if(i&&a.sn===i.sn)if(l&&!a.backtracked)if(a.sn<h.endSN){var p=i.deltaPTS;p&&p>o.maxBufferHole&&i.dropped&&u?(a=d,c.b.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(a=f,c.b.log("Re-loading fragment with SN: "+a.sn))}else a=null;else a.backtracked&&(f&&f.backtracked?(c.b.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+a.sn+". Loading fragment "+f.sn),a=f):(c.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),a.dropped=0,d?(a=d).backtracked=!0:u&&(a=null)))}return a},l.Gt=function(t){this.state=at,this.hls.trigger(o.a.KEY_LOADING,{frag:t})},l.Wt=function(t){var i=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(a.a)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||i===B||i===F?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(o.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new Q(this.hls,"main")),this.state=ot):i===D&&this.Jt(t.duration)&&this.fragmentTracker.removeFragment(t)},l.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,n.MAIN)},l.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},l.Nt=function(){var t,i,e=this.media;if(e&&e.readyState&&!1===e.seeking&&((i=e.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=i),N.isBuffered(e,i)?t=this.getBufferedFrag(i):N.isBuffered(e,i+.1)&&(t=this.getBufferedFrag(i+.1)),t)){var s=t;if(s!==this.fragPlaying){this.hls.trigger(o.a.FRAG_CHANGED,{frag:s});var n=s.level;this.fragPlaying&&this.fragPlaying.level===n||this.hls.trigger(o.a.LEVEL_SWITCHED,{level:n}),this.fragPlaying=s}}},l.immediateLevelSwitch=function(){if(c.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,i=this.media;i?(t=i.paused,i.pause()):t=!0,this.previouslyPaused=t}var e=this.fragCurrent;e&&e.loader&&e.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},l.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,N.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},l.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var i,e,s;if((e=this.getBufferedFrag(t.currentTime))&&e.startPTS>1&&this.flushMainBuffer(0,e.startPTS-1),t.paused)i=0;else{var n=this.hls.nextLoadLevel,r=this.levels[n],h=this.fragLastKbps;i=h&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*h)+1:0}if((s=this.getBufferedFrag(t.currentTime+i))&&(s=this.followingBufferedFrag(s))){var a=this.fragCurrent;a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(s.maxStartPTS,Number.POSITIVE_INFINITY)}}},l.flushMainBuffer=function(t,i){this.state=dt;var e={startOffset:t,endOffset:i};this.altAudio&&(e.type="video"),this.hls.trigger(o.a.BUFFER_FLUSHING,e)},l.onMediaAttached=function(t){var i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("seeked",this.onvseeked),i.addEventListener("ended",this.onvended);var e=this.config;this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition),this.gapController=new nt(e,i,this.fragmentTracker,this.hls)},l.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(c.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var i=this.levels;i&&i.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},l.onMediaSeeked=function(){var t=this.media,i=t?t.currentTime:void 0;Object(a.a)(i)&&c.b.log("media seeked to "+i.toFixed(3)),this.tick()},l.onManifestLoading=function(){c.b.log("trigger BUFFER_RESET"),this.hls.trigger(o.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},l.onManifestParsed=function(t){var i,e=!1,s=!1;t.levels.forEach(function(t){(i=t.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(e=!0),-1!==i.indexOf("mp4a.40.5")&&(s=!0))}),this.audioCodecSwitch=e&&s,this.audioCodecSwitch&&c.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var n=this.config;(n.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(n.startPosition)},l.onLevelLoaded=function(t){var i=t.details,e=t.level,s=this.levels[this.levelLastLoaded],n=this.levels[e],r=i.totalduration,h=0;if(c.b.log("level "+e+" loaded ["+i.startSN+","+i.endSN+"],duration:"+r),i.live){var u=n.details;u&&i.fragments.length>0?(function(t,i){i.initSegment&&t.initSegment&&(i.initSegment=t.initSegment);var e,s=0;if(function(t,i,e){if(t&&i)for(var s=Math.max(t.startSN,i.startSN)-i.startSN,n=Math.min(t.endSN,i.endSN)-i.startSN,r=i.startSN-t.startSN,h=s;h<=n;h++){var a=t.fragments[r+h],o=i.fragments[h];if(!a||!o)break;e(a,o,h)}}(t,i,function(t,n){s=t.cc-n.cc,Object(a.a)(t.startPTS)&&(n.start=n.startPTS=t.startPTS,n.endPTS=t.endPTS,n.duration=t.duration,n.backtracked=t.backtracked,n.dropped=t.dropped,e=n),i.PTSKnown=!0}),i.PTSKnown){if(s){c.b.log("discontinuity sliding from playlist, take drift into account");for(var n=i.fragments,r=0;r<n.length;r++)n[r].cc+=s}e?K(i,e,e.startPTS,e.endPTS,e.startDTS,e.endDTS):function(t,i){var e=i.startSN-t.startSN,s=t.fragments,n=i.fragments;if(!(e<0||e>s.length))for(var r=0;r<n.length;r++)n[r].start+=s[e].start}(t,i),i.PTSKnown=t.PTSKnown}}(u,i),h=i.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(h,u),i.PTSKnown&&Object(a.a)(h)?c.b.log("live playlist sliding:"+h.toFixed(3)):(c.b.log("live playlist - outdated PTS, unknown sliding"),it(this.fragPrevious,s,i))):(c.b.log("live playlist - first load, unknown sliding"),i.PTSKnown=!1,it(this.fragPrevious,s,i))}else i.PTSKnown=!1;if(n.details=i,this.levelLastLoaded=e,this.hls.trigger(o.a.LEVEL_UPDATED,{details:i,level:e}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=i.startTimeOffset;Object(a.a)(l)?(l<0&&(c.b.log("negative start time offset "+l+", count from end of last fragment"),l=h+r+l),c.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):i.live?(this.startPosition=this.computeLivePosition(h,i),c.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===pt&&(this.state=ht),this.tick()},l.onKeyLoaded=function(){this.state===at&&(this.state=ht,this.tick())},l.onFragLoaded=function(t){var i=this.fragCurrent,e=this.hls,s=this.levels,n=this.media,r=t.frag;if(this.state===ot&&i&&"main"===r.type&&r.level===i.level&&r.sn===i.sn){var h=t.stats,a=s[i.level],u=a.details;if(this.bitrateTest=!1,this.stats=h,c.b.log("Loaded "+i.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+i.level),r.bitrateTest&&e.nextLoadLevel)this.state=ht,this.startFragRequested=!1,h.tparsed=h.tbuffered=window.performance.now(),e.trigger(o.a.FRAG_BUFFERED,{stats:h,frag:i,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=ht,h.tparsed=h.tbuffered=window.performance.now(),u.initSegment.data=t.payload,e.trigger(o.a.FRAG_BUFFERED,{stats:h,frag:i,id:"main"}),this.tick();else{c.b.log("Parsing "+i.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+i.level+", cc "+i.cc),this.state=ut,this.pendingBuffering=!0,this.appended=!1,r.bitrateTest&&(r.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:r}));var l=!(n&&n.seeking)&&(u.PTSKnown||!u.live),d=u.initSegment?u.initSegment.data:[],f=this.Qt(a);(this.demuxer=this.demuxer||new Q(this.hls,"main")).push(t.payload,d,f,a.videoCodec,i,u.totalduration,l)}}this.fragLoadError=0},l.onFragParsingInitSegment=function(t){var i=this.fragCurrent,e=t.frag;if(i&&"main"===t.id&&e.sn===i.sn&&e.level===i.level&&this.state===ut){var s,n,r=t.tracks;if(r.audio&&this.altAudio&&delete r.audio,n=r.audio){var h=this.levels[this.level].audioCodec,a=navigator.userAgent.toLowerCase();h&&this.audioCodecSwap&&(c.b.log("swapping playlist audio codec"),h=-1!==h.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===a.indexOf("firefox")&&(h="mp4a.40.5"),-1!==a.indexOf("android")&&"audio/mpeg"!==n.container&&(h="mp4a.40.2",c.b.log("Android: force audio codec to "+h)),n.levelCodec=h,n.id=t.id}for(s in(n=r.video)&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=t.id),this.hls.trigger(o.a.BUFFER_CODECS,r),r){n=r[s],c.b.log("main track:"+s+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var u=n.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.a.BUFFER_APPENDING,{type:s,data:u,parent:"main",content:"initSegment"}))}this.tick()}},l.onFragParsingData=function(t){var i=this,e=this.fragCurrent,s=t.frag;if(e&&"main"===t.id&&s.sn===e.sn&&s.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===ut){var n=this.levels[this.level],r=e;if(Object(a.a)(t.endPTS)||(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),!0===t.hasAudio&&r.addElementaryStream(p.AUDIO),!0===t.hasVideo&&r.addElementaryStream(p.VIDEO),c.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(r.dropped=t.dropped,r.dropped)if(r.backtracked)c.b.warn("Already backtracked on this fragment, appending with the gap",r.sn);else{var h=n.details;if(!h||r.sn!==h.startSN)return c.b.warn("missing video frame(s), backtracking fragment",r.sn),this.fragmentTracker.removeFragment(r),r.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=ht,this.fragPrevious=r,void this.tick();c.b.warn("missing video frame(s) on first frag, appending with gap",r.sn)}else r.backtracked=!1;var u=K(n.details,r,t.startPTS,t.endPTS,t.startDTS,t.endDTS),l=this.hls;l.trigger(o.a.LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:u,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&i.state===ut&&(i.appended=!0,i.pendingBuffering=!0,l.trigger(o.a.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},l.onFragParsed=function(t){var i=this.fragCurrent,e=t.frag;i&&"main"===t.id&&e.sn===i.sn&&e.level===i.level&&this.state===ut&&(this.stats.tparsed=window.performance.now(),this.state=lt,this.Xt())},l.onAudioTrackSwitching=function(t){var i=!!t.url,e=t.id;if(!i){if(this.mediaBuffer!==this.media){c.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var s=this.fragCurrent;s.loader&&(c.b.log("switching to main audio track, cancel main fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ht}var n=this.hls;n.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1}},l.onAudioTrackSwitched=function(t){var i=t.id,e=!!this.hls.audioTracks[i].url;if(e){var s=this.videoBuffer;s&&this.mediaBuffer!==s&&(c.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=e,this.tick()},l.onBufferCreated=function(t){var i,e,s=t.tracks,n=!1;for(var r in s){var h=s[r];"main"===h.id?(e=r,i=h,"video"===r&&(this.videoBuffer=s[r].buffer)):n=!0}n&&i?(c.b.log("alternate track found, use "+e+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},l.onBufferAppended=function(t){if("main"===t.parent){var i=this.state;i!==ut&&i!==lt||(this.pendingBuffering=t.pending>0,this.Xt())}},l.Xt=function(){if(!(this.state!==lt||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var i=this.mediaBuffer?this.mediaBuffer:this.media;c.b.log("main buffered : "+Z.toString(i.buffered)),this.fragPrevious=t;var e=this.stats;e.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*e.total/(e.tbuffered-e.tfirst)),this.hls.trigger(o.a.FRAG_BUFFERED,{stats:e,frag:t,id:"main"}),this.state=ht}this.tick()}},l.onError=function(t){var i=t.frag||this.fragCurrent;if(!i||"main"===i.type){var e=!!this.media&&N.isBuffered(this.media,this.media.currentTime)&&N.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:case h.a.KEY_LOAD_ERROR:case h.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var s=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.b.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=window.performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ct}else c.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ft;break;case h.a.LEVEL_LOAD_ERROR:case h.a.LEVEL_LOAD_TIMEOUT:this.state!==ft&&(t.fatal?(this.state=ft,c.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==pt||(this.state=ht));break;case h.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==ut&&this.state!==lt||(e?(this.Jt(this.config.maxBufferLength),this.state=ht):(c.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},l.Jt=function(t){var i=this.config;return i.maxMaxBufferLength>=t&&(i.maxMaxBufferLength/=2,c.b.warn("main:reduce max buffer length to "+i.maxMaxBufferLength+"s"),!0)},l.Ut=function(){var t=this.media;if(t&&0!==t.readyState){var i=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&i.length?(this.loadedmetadata=!0,this.Yt()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,i)}},l.onFragLoadEmergencyAborted=function(){this.state=ht,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},l.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(p.VIDEO,t.buffered),this.state=ht,this.fragPrevious=null},l.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},l.Yt=function(){var t=this.media,i=t.currentTime,e=t.seeking?i:this.startPosition;i!==e&&e>=0&&(c.b.log("target start position not buffered, seek to buffered.start(0) "+e+" from current time "+i+" "),t.currentTime=e)},l.Qt=function(t){var i=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(c.b.log("swapping playlist audio codec"),i&&(i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),i},r=s,(u=[{key:"state",set:function(t){if(this.state!==t){var i=this.state;this.Ft=t,c.b.log("main stream-controller: "+i+"->"+t),this.hls.trigger(o.a.STREAM_STATE_TRANSITION,{previousState:i,nextState:t})}},get:function(){return this.Ft}},{key:"currentLevel",get:function(){var t=this.media;if(t){var i=this.getBufferedFrag(t.currentTime);if(i)return i.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this.Kt},set:function(t){this.Kt=t}}])&&vt(r.prototype,u),s}(function(t){var i,e;function s(){return t.apply(this,arguments)||this}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.doTick=function(){},n.startLoad=function(){},n.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=rt},n.$t=function(t,i){var e=this.fragCurrent,s=this.fragmentTracker;if(!i.live&&e&&!e.backtracked&&e.sn===i.endSN&&!t.nextStart){var n=s.getState(e);return n===F||"OK"===n}return!1},n.onMediaSeeking=function(){var t=this.config,i=this.media,e=this.mediaBuffer,s=this.state,n=i?i.currentTime:null,r=N.bufferInfo(e||i,n,this.config.maxBufferHole);if(Object(a.a)(n)&&c.b.log("media seeking to "+n.toFixed(3)),s===ot){var h=this.fragCurrent;if(0===r.len&&h){var o=t.maxFragLookUpTolerance,u=h.start-o,l=h.start+h.duration+o;n<u||n>l?(h.loader&&(c.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),h.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ht):c.b.log("seeking outside of buffer but within currently loaded fragment range")}}else"ENDED"===s&&(0===r.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ht);i&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=rt,this.fragmentTracker=null},n.computeLivePosition=function(t,i){var e=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*i.targetduration;return t+Math.max(0,i.totalduration-e)},s}(function(t){var i,e;function s(i){for(var e,s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return(e=t.call.apply(t,[this,i].concat(n))||this).Zt=void 0,e.ti=null,e.ii=null,e.ei=0,e.Zt=e.tick.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this.ii},n.hasNextTick=function(){return!!this.ti},n.setInterval=function(t){return!this.ii&&(this.ii=self.setInterval(this.Zt,t),!0)},n.clearInterval=function(){return!!this.ii&&(self.clearInterval(this.ii),this.ii=null,!0)},n.clearNextTick=function(){return!!this.ti&&(self.clearTimeout(this.ti),this.ti=null,!0)},n.tick=function(){this.ei++,1===this.ei&&(this.doTick(),this.ei>1&&(this.clearNextTick(),this.ti=self.setTimeout(this.Zt,0)),this.ei=0)},n.doTick=function(){},s}(l)));function mt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}window.performance;var gt,yt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MANIFEST_LOADED,o.a.LEVEL_LOADED,o.a.AUDIO_TRACK_SWITCHED,o.a.FRAG_LOADED,o.a.ERROR)||this).canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,gt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,a=s.prototype;return a.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},a.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},a.startLoad=function(){var t=this.si;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var i=t.details;i&&i.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},a.stopLoad=function(){this.canload=!1},a.onManifestLoaded=function(t){var i,e=[],s=[],n={},r=null,a=!1,u=!1;if(t.levels.forEach(function(t){var i=t.attrs;t.loadError=0,t.fragmentError=!1,a=a||!!t.videoCodec,u=u||!!t.audioCodec,gt&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(r=n[t.bitrate])?r.url.push(t.url):(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,e.push(t)),i&&(i.AUDIO&&(u=!0,X(r||t,"audio",i.AUDIO)),i.SUBTITLES&&X(r||t,"text",i.SUBTITLES))}),a&&u&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var i=t.audioCodec,e=t.videoCodec;return(!i||O(i,"audio"))&&(!e||O(e,"video"))}),t.audioTracks&&(s=t.audioTracks.filter(function(t){return!t.audioCodec||O(t.audioCodec,"audio")})).forEach(function(t,i){t.id=i}),e.length>0){i=e[0].bitrate,e.sort(function(t,i){return t.bitrate-i.bitrate}),this.si=e;for(var l=0;l<e.length;l++)if(e[l].bitrate===i){this.ni=l,c.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+i);break}this.hls.trigger(o.a.MANIFEST_PARSED,{levels:e,audioTracks:s,firstLevel:this.ni,stats:t.stats,audio:u,video:a,altAudio:s.some(function(t){return!!t.url})})}else this.hls.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},a.setLevelInternal=function(t){var i=this.si,e=this.hls;if(t>=0&&t<i.length){if(this.clearTimer(),this.currentLevelIndex!==t){c.b.log("switching to level "+t),this.currentLevelIndex=t;var s=i[t];s.level=t,e.trigger(o.a.LEVEL_SWITCHING,s)}var n=i[t],r=n.details;if(!r||r.live){var a=n.urlId;e.trigger(o.a.LEVEL_LOADING,{url:n.url[a],level:t,id:a})}}else e.trigger(o.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},a.onError=function(t){if(t.fatal)t.type===h.b.NETWORK_ERROR&&this.clearTimer();else{var i,e=!1,s=!1;switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:case h.a.KEY_LOAD_ERROR:case h.a.KEY_LOAD_TIMEOUT:i=t.frag.level,s=!0;break;case h.a.LEVEL_LOAD_ERROR:case h.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,e=!0;break;case h.a.REMUX_ALLOC_ERROR:i=t.level,e=!0}void 0!==i&&this.recoverLevel(t,i,e,s)}},a.recoverLevel=function(t,i,e,s){var n,r,h,a=this,o=this.hls.config,u=t.details,l=this.si[i];if(l.loadError++,l.fragmentError=s,e){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return c.b.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);r=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return a.loadLevel()},r),t.levelRetry=!0,this.levelRetryCount++,c.b.warn("level controller, "+u+", retry in "+r+" ms, current retry count is "+this.levelRetryCount)}(e||s)&&((n=l.url.length)>1&&l.loadError<n?(l.urlId=(l.urlId+1)%n,l.details=void 0,c.b.warn("level controller, "+u+" for level "+i+": switching to redundant URL-id "+l.urlId)):-1===this.manualLevelIndex?(h=0===i?this.si.length-1:i-1,c.b.warn("level controller, "+u+": switch to "+h),this.hls.nextAutoLevel=this.currentLevelIndex=h):s&&(c.b.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},a.onFragLoaded=function(t){var i=t.frag;if(void 0!==i&&"main"===i.type){var e=this.si[i.level];void 0!==e&&(e.fragmentError=!1,e.loadError=0,this.levelRetryCount=0)}},a.onLevelLoaded=function(t){var i=this,e=t.level,s=t.details;if(e===this.currentLevelIndex){var n=this.si[e];if(n.fragmentError||(n.loadError=0,this.levelRetryCount=0),s.live){var r=function(t,i,e){var s=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),n=s/2;return t&&i.endSN===t.endSN&&(s=n),e&&(s=Math.max(n,s-(window.performance.now()-e))),Math.round(s)}(n.details,s,t.stats.trequest);c.b.log("live playlist, reload in "+Math.round(r)+" ms"),this.timer=setTimeout(function(){return i.loadLevel()},r)}else this.clearTimer()}},a.onAudioTrackSwitched=function(t){var i=this.hls.audioTracks[t.id].groupId,e=this.hls.levels[this.currentLevelIndex];if(e&&e.audioGroupIds){for(var s=-1,n=0;n<e.audioGroupIds.length;n++)if(e.audioGroupIds[n]===i){s=n;break}s!==e.urlId&&(e.urlId=s,this.startLoad())}},a.loadLevel=function(){if(c.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this.si[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var i=this.currentLevelIndex,e=t.urlId,s=t.url[e];c.b.log("Attempt loading level index "+i+" with URL-id "+e),this.hls.trigger(o.a.LEVEL_LOADING,{url:s,level:i,id:e})}}},n=s,(r=[{key:"levels",get:function(){return this.si}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var i=this.si;i&&(t=Math.min(t,i.length-1),this.currentLevelIndex===t&&i[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this.ri&&(this.ri=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this.ni},set:function(t){this.ni=t}},{key:"startLevel",get:function(){if(void 0===this.ri){var t=this.hls.config.startLevel;return void 0!==t?t:this.ni}return this.ri},set:function(t){this.ri=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&mt(n.prototype,r),s}(l),wt=e(4);function xt(t,i){var e;try{e=new Event("addtrack")}catch(t){(e=document.createEvent("Event")).initEvent("addtrack",!1,!1)}e.track=t,i.dispatchEvent(e)}var kt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_METADATA,o.a.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,e.media=void 0,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){l.prototype.destroy.call(this)},n.onMediaAttached=function(t){this.media=t.media,this.media},n.onMediaDetaching=function(){!function(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}(this.id3Track),this.id3Track=void 0,this.media=void 0},n.getID3Track=function(t){for(var i=0;i<t.length;i++){var e=t[i];if("metadata"===e.kind&&"id3"===e.label)return xt(e,this.media),e}return this.media.addTextTrack("metadata","id3")},n.onFragParsingMetadata=function(t){var i=t.frag,e=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var s=this.hls.config.cnxRenderWindow.WebKitDataCue||his.hls.config.cnxRenderWindow.VTTCue||his.hls.config.cnxRenderWindow.TextTrackCue,n=0;n<e.length;n++){var r=wt.a.getID3Frames(e[n].data);if(r){var h=e[n].pts,a=n<e.length-1?e[n+1].pts:i.endPTS;h===a?a+=1e-4:h>a&&(c.b.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),a=h+.25);for(var o=0;o<r.length;o++){var u=r[o];if(!wt.a.isTimeStampFrame(u)){var l=new s(h,a,"");l.value=u,this.id3Track.addCue(l)}}}}},n.onLiveBackBufferReached=function(t){var i=t.bufferEnd,e=this.id3Track;if(e&&e.cues&&e.cues.length){var s=function(t,i){if(i<t[0].endTime)return t[0];if(i>t[t.length-1].endTime)return t[t.length-1];for(var e=0,s=t.length-1;e<=s;){var n=Math.floor((s+e)/2);if(i<t[n].endTime)s=n-1;else{if(!(i>t[n].endTime))return t[n];e=n+1}}return t[e].endTime-i<i-t[s].endTime?t[e]:t[s]}(e.cues,i);if(s)for(;e.cues[0]!==s;)e.removeCue(e.cues[0])}},s}(l),St=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var i=t.prototype;return i.sample=function(t,i){var e=Math.pow(this.alpha_,t);this.estimate_=i*(1-e)+e*this.estimate_,this.totalWeight_+=t},i.getTotalWeight=function(){return this.totalWeight_},i.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),Ot=function(){function t(t,i,e,s){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new St(i),this.fast_=new St(e)}var i=t.prototype;return i.sample=function(t,i){var e=(t=Math.max(t,this.minDelayMs_))/1e3,s=8*i/e;this.fast_.sample(e,s),this.slow_.sample(e,s)},i.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},i.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},i.destroy=function(){},t}();function _t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var jt=window.performance,At=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FRAG_LOADING,o.a.FRAG_LOADED,o.a.FRAG_BUFFERED,o.a.ERROR)||this).lastLoadedFragLevel=0,e.ai=-1,e.hls=i,e.timer=null,e.bwEstimator=null,e.onCheck=e.oi.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,u=s.prototype;return u.destroy=function(){this.clearTimer(),l.prototype.destroy.call(this)},u.onFragLoading=function(t){var i=t.frag;if("main"===i.type&&(this.timer||(this.fragCurrent=i,this.timer=setInterval(this.onCheck,100)),!this.bwEstimator)){var e,s,n=this.hls,r=n.config,h=i.level;n.levels[h].details.live?(e=r.abrEwmaFastLive,s=r.abrEwmaSlowLive):(e=r.abrEwmaFastVoD,s=r.abrEwmaSlowVoD),this.bwEstimator=new Ot(n,s,e,r.abrEwmaDefaultEstimate)}},u.oi=function(){var t=this.hls,i=t.media,e=this.fragCurrent;if(e){var s=e.loader,n=t.minAutoLevel;if(!s||s.stats&&s.stats.aborted)return c.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this.ai=-1);var r=s.stats;if(i&&r&&(!i.paused&&0!==i.playbackRate||!i.readyState)&&e.autoLevel&&e.level){var h=jt.now()-r.trequest,a=Math.abs(i.playbackRate);if(h>500*e.duration/a){var u=t.levels,l=Math.max(1,r.bw?r.bw/8:1e3*r.loaded/h),d=u[e.level],f=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=r.total?r.total:Math.max(r.loaded,Math.round(e.duration*f/8)),v=i.currentTime,b=(p-r.loaded)/l,m=(N.bufferInfo(i,v,t.config.maxBufferHole).end-v)/a;if(m<2*e.duration/a&&b>m){var g;for(g=e.level-1;g>n;g--){var y=u[g].realBitrate?Math.max(u[g].realBitrate,u[g].bitrate):u[g].bitrate;if(e.duration*y/(6.4*l)<m)break}void 0<b&&(c.b.warn("loading too slow, abort fragment loading and switch to level "+g+":fragLoadedDelay["+g+"]<fragLoadedDelay["+(e.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+b.toFixed(1)+":"+m.toFixed(1)),t.nextLoadLevel=g,this.bwEstimator.sample(h,r.loaded),s.abort(),this.clearTimer(),t.trigger(o.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,stats:r}))}}}}},u.onFragLoaded=function(t){var i=t.frag;if("main"===i.type&&Object(a.a)(i.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=i.level,this.ai=-1,this.hls.config.abrMaxWithRealBitrate){var e=this.hls.levels[i.level],s=(e.loaded?e.loaded.bytes:0)+t.stats.loaded,n=(e.loaded?e.loaded.duration:0)+t.frag.duration;e.loaded={bytes:s,duration:n},e.realBitrate=Math.round(8*s/n)}if(t.frag.bitrateTest){var r=t.stats;r.tparsed=r.tbuffered=r.tload,this.onFragBuffered(t)}}},u.onFragBuffered=function(t){var i=t.stats,e=t.frag;if(!0!==i.aborted&&"main"===e.type&&Object(a.a)(e.sn)&&(!e.bitrateTest||i.tload===i.tbuffered)){var s=i.tparsed-i.trequest;c.b.log("latency/loading/parsing/append/kbps:"+Math.round(i.tfirst-i.trequest)+"/"+Math.round(i.tload-i.tfirst)+"/"+Math.round(i.tparsed-i.tload)+"/"+Math.round(i.tbuffered-i.tparsed)+"/"+Math.round(8*i.loaded/(i.tbuffered-i.trequest))),this.bwEstimator.sample(s,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),e.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}},u.onError=function(t){switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},u.clearTimer=function(){clearInterval(this.timer),this.timer=null},u.ci=function(t,i,e,s,n,r,h,a,o){for(var u=n;u>=s;u--){var l=o[u];if(l){var d=l.details,f=d?d.totalduration/d.fragments.length:i,p=!!d&&d.live,v=void 0;v=u<=t?h*e:a*e;var b=o[u].realBitrate?Math.max(o[u].realBitrate,o[u].bitrate):o[u].bitrate,m=b*f/v;if(c.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(v)+"/"+b+"/"+f+"/"+r+"/"+m),v>b&&(!m||p&&!this.bitrateTestDelay||m<r))return u}}return-1},n=s,(r=[{key:"nextAutoLevel",get:function(){var t=this.ai,i=this.bwEstimator;if(!(-1===t||i&&i.canEstimate()))return t;var e=this.nextABRAutoLevel;return-1!==t&&(e=Math.min(t,e)),e},set:function(t){this.ai=t}},{key:"nextABRAutoLevel",get:function(){var t=this.hls,i=t.maxAutoLevel,e=t.levels,s=t.config,n=t.minAutoLevel,r=t.media,h=this.lastLoadedFragLevel,a=this.fragCurrent?this.fragCurrent.duration:0,o=r?r.currentTime:0,u=r&&0!==r.playbackRate?Math.abs(r.playbackRate):1,l=this.bwEstimator?this.bwEstimator.getEstimate():s.abrEwmaDefaultEstimate,d=(N.bufferInfo(r,o,s.maxBufferHole).end-o)/u,f=this.ci(h,a,l,n,i,d,s.abrBandWidthFactor,s.abrBandWidthUpFactor,e);if(f>=0)return f;c.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay,v=s.abrBandWidthFactor,b=s.abrBandWidthUpFactor;if(0===d){var m=this.bitrateTestDelay;m&&(p=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-m,c.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),v=b=1)}return f=this.ci(h,a,l,n,i,d+p,v,b,e),Math.max(f,0)}}])&&_t(n.prototype,r),s}(l),It=z(),Ct=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_RESET,o.a.BUFFER_APPENDING,o.a.BUFFER_CODECS,o.a.BUFFER_EOS,o.a.BUFFER_FLUSHING,o.a.LEVEL_PTS_UPDATED,o.a.LEVEL_UPDATED)||this).ui=null,e.li=null,e.di=10,e.fi=null,e.pi=null,e.vi=!1,e.bi=!1,e.config=void 0,e.audioTimestampOffset=void 0,e.bufferCodecEventsExpected=0,e.mi=0,e.media=null,e.mediaSource=null,e.segments=[],e.parent=void 0,e.appending=!1,e.appended=0,e.appendError=0,e.flushBufferCounter=0,e.tracks={},e.pendingTracks={},e.sourceBuffer={},e.flushRange=[],e.gi=function(){c.b.log("media source opened"),e.hls.trigger(o.a.MEDIA_ATTACHED,{media:e.media});var t=e.mediaSource;t&&t.removeEventListener("sourceopen",e.gi),e.checkPendingTracks()},e.yi=function(){c.b.log("media source closed")},e.wi=function(){c.b.log("media source ended")},e.xi=function(){if(e.audioTimestampOffset&&e.sourceBuffer.audio){var t=e.sourceBuffer.audio;c.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+e.audioTimestampOffset),t.timestampOffset=e.audioTimestampOffset,delete e.audioTimestampOffset}e.vi&&e.doFlush(),e.bi&&e.checkEos(),e.appending=!1;var i=e.parent,s=e.segments.reduce(function(t,e){return e.parent===i?t+1:t},0),n={},r=e.sourceBuffer;for(var h in r){var a=r[h];if(!a)throw Error("handling source buffer update end error: source buffer for "+h+" uninitilized and unable to update buffered TimeRanges.");n[h]=a.buffered}e.hls.trigger(o.a.BUFFER_APPENDED,{parent:i,pending:s,timeRanges:n}),e.vi||e.doAppending(),e.updateMediaElementDuration(),0===s&&e.flushLiveBackBuffer()},e.ki=function(t){c.b.error("sourceBuffer error:",t),e.hls.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.config=i.config,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){l.prototype.destroy.call(this)},n.onLevelPtsUpdated=function(t){var i=t.type,e=this.tracks.audio;if("audio"===i&&e&&"audio/mpeg"===e.container){var s=this.sourceBuffer.audio;if(!s)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(s.timestampOffset-t.start)>.1){var n=s.updating;try{s.abort()}catch(t){c.b.warn("can not abort audio buffer: "+t)}n?this.audioTimestampOffset=t.start:(c.b.warn("change mpeg audio timestamp offset from "+s.timestampOffset+" to "+t.start),s.timestampOffset=t.start)}}},n.onManifestParsed=function(t){this.bufferCodecEventsExpected=this.mi=t.altAudio?2:1,c.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.onMediaAttaching=function(t){var i=this.media=t.media;if(i&&It){var e=this.mediaSource=new It;e.addEventListener("sourceopen",this.gi),e.addEventListener("sourceended",this.wi),e.addEventListener("sourceclose",this.yi),i.src=window.URL.createObjectURL(e),this.pi=i.src}},n.onMediaDetaching=function(){c.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){c.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.gi),t.removeEventListener("sourceended",this.wi),t.removeEventListener("sourceclose",this.yi),this.media&&(this.pi&&this.hls.config.cnxRenderWindow.URL.revokeObjectURL(this.pi),this.media.src===this.pi?(this.media.removeAttribute("src"),this.media.load()):c.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this.pi=null,this.bufferCodecEventsExpected=this.mi,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(o.a.MEDIA_DETACHED)},n.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,i=this.pendingTracks,e=Object.keys(i).length;(e&&!t||2===e)&&(this.createSourceBuffers(i),this.pendingTracks={},this.doAppending())},n.onBufferReset=function(){var t=this.sourceBuffer;for(var i in t){var e=t[i];try{e&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(e),e.removeEventListener("updateend",this.xi),e.removeEventListener("error",this.ki))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.onBufferCodecs=function(t){var i=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(e){i.pendingTracks[e]=t[e]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},n.createSourceBuffers=function(t){var i=this.sourceBuffer,e=this.mediaSource;if(!e)throw Error("createSourceBuffers called when mediaSource was null");for(var s in t)if(!i[s]){var n=t[s];if(!n)throw Error("source buffer exists for track "+s+", however track does not");var r=n.levelCodec||n.codec,a=n.container+";codecs="+r;c.b.log("creating sourceBuffer("+a+")");try{var u=i[s]=e.addSourceBuffer(a);u.addEventListener("updateend",this.xi),u.addEventListener("error",this.ki),this.tracks[s]={buffer:u,codec:r,id:n.id,container:n.container,levelCodec:n.levelCodec}}catch(t){c.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:a})}}this.hls.trigger(o.a.BUFFER_CREATED,{tracks:this.tracks})},n.onBufferAppending=function(t){this.vi||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},n.onBufferEos=function(t){for(var i in this.sourceBuffer)if(!t.type||t.type===i){var e=this.sourceBuffer[i];e&&!e.ended&&(e.ended=!0,c.b.log(i+" sourceBuffer now EOS"))}this.checkEos()},n.checkEos=function(){var t=this.sourceBuffer,i=this.mediaSource;if(i&&"open"===i.readyState){for(var e in t){var s=t[e];if(s){if(!s.ended)return;if(s.updating)return void(this.bi=!0)}}c.b.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{i.endOfStream()}catch(t){c.b.warn("exception while calling mediaSource.endOfStream()")}this.bi=!1}else this.bi=!1},n.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},n.flushLiveBackBuffer=function(){if(this.fi){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))if(this.media)for(var i=this.media.currentTime,e=this.sourceBuffer,s=Object.keys(e),n=i-Math.max(t,this.di),r=s.length-1;r>=0;r--){var h=s[r],a=e[h];if(a){var u=a.buffered;u.length>0&&n>u.start(0)&&this.removeBufferRange(h,a,0,n)&&this.hls.trigger(o.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n})}}else c.b.error("flushLiveBackBuffer called without attaching media")}},n.onLevelUpdated=function(t){var i=t.details;i.fragments.length>0&&(this.li=i.totalduration+i.fragments[0].start,this.di=i.averagetargetduration||i.targetduration||10,this.fi=i.live,this.updateMediaElementDuration())},n.updateMediaElementDuration=function(){var t,i=this.config;if(null!==this.li&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var e in this.sourceBuffer){var s=this.sourceBuffer[e];if(s&&!0===s.updating)return}t=this.media.duration,null===this.ui&&(this.ui=this.mediaSource.duration),!0===this.fi&&!0===i.liveDurationInfinity?(c.b.log("Media Source duration is set to Infinity"),this.ui=this.mediaSource.duration=1/0):(this.li>this.ui&&this.li>t||!Object(a.a)(t))&&(c.b.log("Updating Media Source duration to "+this.li.toFixed(3)),this.ui=this.mediaSource.duration=this.li)}},n.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this.vi=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this.vi=!1;var i=0,e=this.sourceBuffer;try{for(var s in e){var n=e[s];n&&(i+=n.buffered.length)}}catch(t){c.b.error("error while accessing sourceBuffer.buffered")}this.appended=i,this.hls.trigger(o.a.BUFFER_FLUSHED)}},n.doAppending=function(){var t=this.config,i=this.hls,e=this.segments,s=this.sourceBuffer;if(Object.keys(s).length){if(!this.media||this.media.error)return this.segments=[],void c.b.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var n=e.shift();if(n)try{var r=s[n.type];if(!r)return void this.xi();if(r.updating)return void e.unshift(n);r.ended=!1,this.parent=n.parent,r.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0}catch(s){c.b.error("error while trying to append buffer:"+s.message),e.unshift(n);var a={type:h.b.MEDIA_ERROR,parent:n.parent,details:"",fatal:!1};22===s.code?(this.segments=[],a.details=h.a.BUFFER_FULL_ERROR):(this.appendError++,a.details=h.a.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(c.b.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0)),i.trigger(o.a.ERROR,a)}}}},n.flushBuffer=function(t,i,e){var s=this.sourceBuffer;if(!Object.keys(s).length)return!0;var n="null";if(this.media&&(n=this.media.currentTime.toFixed(3)),c.b.log("flushBuffer,pos/start/end: "+n+"/"+t+"/"+i),this.flushBufferCounter>=this.appended)return c.b.warn("abort flushing too many retries"),!0;var r=s[e];if(r){if(r.ended=!1,r.updating)return c.b.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(e,r,t,i))return this.flushBufferCounter++,!1}return c.b.log("buffer flushed"),!0},n.removeBufferRange=function(t,i,e,s){try{for(var n=0;n<i.buffered.length;n++){var r=i.buffered.start(n),h=i.buffered.end(n),a=Math.max(r,e),o=Math.min(h,s);if(Math.min(o,h)-a>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c.b.log("sb remove "+t+" ["+a+","+o+"], of ["+r+","+h+"], pos:"+u),i.remove(a,o),!0}}}catch(t){c.b.warn("removeBufferRange failed",t)}return!1},s}(l);function Tt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var Pt,Mt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FPS_DROP_LEVEL_CAPPING,o.a.MEDIA_ATTACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_CODECS,o.a.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,e.firstLevel=null,e.levels=[],e.media=null,e.restrictedLevels=[],e.timer=null,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,h,a=s.prototype;return a.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},a.onFpsDropLevelCapping=function(t){s.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},a.onMediaAttaching=function(t){this.media=t.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?t.media:null},a.onManifestParsed=function(t){var i=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()},a.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},a.onLevelsUpdated=function(t){this.levels=t.levels},a.onMediaDetaching=function(){this.stopCapping()},a.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var i=this.hls;i.autoLevelCapping=this.getMaxLevel(t-1),i.autoLevelCapping>this.autoLevelCapping&&i.streamController.nextLevelSwitch(),this.autoLevelCapping=i.autoLevelCapping}}},a.getMaxLevel=function(t){var i=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,n){return s.isLevelAllowed(n,i.restrictedLevels)&&n<=t});return s.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},a.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},a.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.isLevelAllowed=function(t,i){return void 0===i&&(i=[]),-1===i.indexOf(t)},s.getMaxLevelByMediaSize=function(t,i,e){if(!t||t&&!t.length)return-1;for(var s,n,r=t.length-1,h=0;h<t.length;h+=1){var a=t[h];if((a.width>=i||a.height>=e)&&(s=a,!(n=t[h+1])||s.width!==n.width||s.height!==n.height)){r=h;break}}return r},n=s,h=[{key:"contentScaleFactor",get:function(){return 1}}],(r=[{key:"mediaWidth",get:function(){var t,i=this.media;return i&&(t=i.width||i.clientWidth||i.offsetWidth,t*=s.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t,i=this.media;return i&&(t=i.height||i.clientHeight||i.offsetHeight,t*=s.contentScaleFactor),t}}])&&Tt(n.prototype,r),h&&Tt(n,h),s}(l),Et=window.performance,Lt=function(t){var i,e;function s(i){return t.call(this,i,o.a.MEDIA_ATTACHING)||this}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.onMediaAttaching=function(t){var i=this.hls.config;i.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod))},n.checkFPS=function(t,i,e){var s=Et.now();if(i){if(this.lastTime){var n=s-this.lastTime,r=e-this.lastDroppedFrames,h=i-this.lastDecodedFrames,a=1e3*r/n,u=this.hls;if(u.trigger(o.a.FPS_DROP,{currentDropped:r,currentDecoded:h,totalDroppedFrames:e}),a>0&&r>u.config.fpsDroppedMonitoringThreshold*h){var l=u.currentLevel;c.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=l)&&(l-=1,u.trigger(o.a.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:u.currentLevel}),u.autoLevelCapping=l,u.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=e,this.lastDecodedFrames=i}},n.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var i=t.getVideoPlaybackQuality();this.checkFPS(t,i.totalVideoFrames,i.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},s}(l),Rt=window,Bt=Rt.performance,Dt=Rt.XMLHttpRequest,Ft=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var i=t.prototype;return i.destroy=function(){this.abort(),this.loader=null},i.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},i.load=function(t,i,e){this.context=t,this.config=i,this.callbacks=e,this.stats={trequest:Bt.now(),retry:0},this.retryDelay=i.retryDelay,this.loadInternal()},i.loadInternal=function(){var t,i=this.context;t=this.loader=new Dt;var e=this.stats;e.tfirst=0,e.loaded=0;var s=this.xhrSetup;try{if(s)try{s(t,i.url)}catch(e){t.open("GET",i.url,!0),s(t,i.url)}t.readyState||t.open("GET",i.url,!0)}catch(e){return void this.callbacks.onError({code:t.status,text:e.message},i,t)}i.rangeEnd&&t.setRequestHeader("Range","bytes="+i.rangeStart+"-"+(i.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=i.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},i.readystatechange=function(t){var i=t.currentTarget,e=i.readyState,s=this.stats,n=this.context,r=this.config;if(!s.aborted&&e>=2)if(window.clearTimeout(this.requestTimeout),0===s.tfirst&&(s.tfirst=Math.max(Bt.now(),s.trequest)),4===e){var h=i.status;if(h>=200&&h<300){var a,o;s.tload=Math.max(s.tfirst,Bt.now()),o="arraybuffer"===n.responseType?(a=i.response).byteLength:(a=i.responseText).length,s.loaded=s.total=o;var u={url:i.responseURL,data:a};this.callbacks.onSuccess(u,s,n,i)}else s.retry>=r.maxRetry||h>=400&&h<499?(c.b.error(h+" while loading "+n.url),this.callbacks.onError({code:h,text:i.statusText},n,i)):(c.b.warn(h+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,r.maxRetryDelay),s.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),r.timeout)},i.loadtimeout=function(){c.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},i.loadprogress=function(t){var i=t.currentTarget,e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total);var s=this.callbacks.onProgress;s&&s(e,this.context,null,i)},t}();e(6),function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(Pt||(Pt={}));var Vt=function(){var t=window.cnxRenderWindow;return void 0!==t&&t.navigator&&t.navigator.requestMediaKeySystemAccess?t.navigator.requestMediaKeySystemAccess.bind(t.navigator):null}();function Ut(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var Nt=function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},s=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(i){Ut(t,i,e[i])})}return t}({cnxRenderWindow:window,autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ft,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:At,bufferController:Ct,capLevelController:Mt,fpsController:Lt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:Vt},{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0});function $t(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function zt(t,i,e){return i&&qt(t.prototype,i),e&&qt(t,e),t}e.d(i,"default",function(){return Gt});var Gt=function(t){var i,e;function s(i){var e;void 0===i&&(i={}),(e=t.call(this)||this).config=void 0,e.Si=void 0,e.abrController=void 0,e.capLevelController=void 0,e.levelController=void 0,e.streamController=void 0,e.networkControllers=void 0,e.audioTrackController=void 0,e.subtitleTrackController=void 0,e.emeController=void 0,e.coreComponents=void 0,e.media=null,e.url=null;var n=s.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");e.config=function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},s=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(i){$t(t,i,e[i])})}return t}({},n,i),window.cnxRenderWindow=e.config.cnxRenderWindow;var r=Ht(e).config;if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(void 0===r.liveSyncDuration||r.liveMaxLatencyDuration<=r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.a)(r.debug),e.Si=-1;var h=e.abrController=new r.abrController(Ht(e)),a=new r.bufferController(Ht(e)),o=e.capLevelController=new r.capLevelController(Ht(e)),u=new r.fpsController(Ht(e)),l=new E(Ht(e)),d=new L(Ht(e)),f=new R(Ht(e)),p=new kt(Ht(e)),v=e.levelController=new yt(Ht(e)),b=new V(Ht(e)),m=[v,e.streamController=new bt(Ht(e),b)],g=r.audioStreamController;g&&m.push(new g(Ht(e),b)),e.networkControllers=m;var y=[l,d,f,h,a,o,u,p,b];if(g=r.audioTrackController){var w=new g(Ht(e));e.audioTrackController=w,y.push(w)}if(g=r.subtitleTrackController){var x=new g(Ht(e));e.subtitleTrackController=x,m.push(x)}if(g=r.emeController){var k=new g(Ht(e));e.emeController=k,y.push(k)}return(g=r.subtitleStreamController)&&m.push(new g(Ht(e),b)),(g=r.timelineController)&&y.push(new g(Ht(e))),e.coreComponents=y,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,s.isSupported=function(){return function(){var t=z();if(!t)return!1;var i=self.SourceBuffer||self.WebKitSourceBuffer,e=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&"function"==typeof i.prototype.remove;return!!e&&!!s}()},zt(s,null,[{key:"version",get:function(){}},{key:"Events",get:function(){return o.a}},{key:"ErrorTypes",get:function(){return h.b}},{key:"ErrorDetails",get:function(){return h.a}},{key:"DefaultConfig",get:function(){return s.defaultConfig?s.defaultConfig:Nt},set:function(t){s.defaultConfig=t}}]);var n=s.prototype;return n.destroy=function(){c.b.log("destroy"),this.trigger(o.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this.Si=-1},n.attachMedia=function(t){c.b.log("attachMedia"),this.media=t,this.trigger(o.a.MEDIA_ATTACHING,{media:t})},n.detachMedia=function(){c.b.log("detachMedia"),this.trigger(o.a.MEDIA_DETACHING),this.media=null},n.loadSource=function(t){t=r.buildAbsoluteURL(this.config.cnxRenderWindow.location.href,t,{alwaysNormalize:!0}),c.b.log("loadSource:"+t),this.url=t,this.trigger(o.a.MANIFEST_LOADING,{url:t})},n.startLoad=function(t){void 0===t&&(t=-1),c.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(i){i.startLoad(t)})},n.stopLoad=function(){c.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},n.swapAudioCodec=function(){c.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){c.b.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},zt(s,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){c.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){c.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){c.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){c.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){c.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var i=!!t;i!==this.config.capLevelToPlayerSize&&(i?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=i)}},{key:"autoLevelCapping",get:function(){return this.Si},set:function(t){c.b.log("set autoLevelCapping:"+t),this.Si=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,i=this.config.minAutoBitrate,e=t?t.length:0,s=0;s<e;s++)if((t[s].realBitrate?Math.max(t[s].realBitrate,t[s].bitrate):t[s].bitrate)>i)return s;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,i=this.autoLevelCapping;return-1===i&&t&&t.length?t.length-1:i}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var i=this.audioTrackController;i&&(i.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var i=this.subtitleTrackController;i&&(i.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var i=this.subtitleTrackController;i&&(i.subtitleDisplay=t)}}]),s}(W);Gt.defaultConfig=void 0}]).default)},function(t,i,e){"use strict";
/*!
 * Strongly Typed Events for TypeScript
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(i,"S",{value:!0}),i.SignalList=i.SignalHandlingBase=i.SignalDispatcher=i.NonUniformSimpleEventList=i.SimpleEventList=i.SimpleEventHandlingBase=i.SimpleEventDispatcher=i.NonUniformEventList=i.EventList=i.EventHandlingBase=i.EventDispatcher=i.Subscription=i.EventListBase=i.DispatcherWrapper=i.DispatcherBase=void 0;var s=e(49);Object.defineProperty(i,"DispatcherBase",{enumerable:!0,get:function(){return s.DispatcherBase}}),Object.defineProperty(i,"DispatcherWrapper",{enumerable:!0,get:function(){return s.DispatcherWrapper}}),Object.defineProperty(i,"EventListBase",{enumerable:!0,get:function(){return s.EventListBase}}),Object.defineProperty(i,"Subscription",{enumerable:!0,get:function(){return s.Subscription}});var n=e(159);Object.defineProperty(i,"EventDispatcher",{enumerable:!0,get:function(){return n.EventDispatcher}}),Object.defineProperty(i,"EventHandlingBase",{enumerable:!0,get:function(){return n.EventHandlingBase}}),Object.defineProperty(i,"EventList",{enumerable:!0,get:function(){return n.EventList}}),Object.defineProperty(i,"NonUniformEventList",{enumerable:!0,get:function(){return n.NonUniformEventList}});var r=e(161);Object.defineProperty(i,"SimpleEventDispatcher",{enumerable:!0,get:function(){return r.SimpleEventDispatcher}}),Object.defineProperty(i,"SimpleEventHandlingBase",{enumerable:!0,get:function(){return r.SimpleEventHandlingBase}}),Object.defineProperty(i,"SimpleEventList",{enumerable:!0,get:function(){return r.SimpleEventList}}),Object.defineProperty(i,"NonUniformSimpleEventList",{enumerable:!0,get:function(){return r.NonUniformSimpleEventList}});var h=e(163);Object.defineProperty(i,"SignalDispatcher",{enumerable:!0,get:function(){return h.SignalDispatcher}}),Object.defineProperty(i,"SignalHandlingBase",{enumerable:!0,get:function(){return h.SignalHandlingBase}}),Object.defineProperty(i,"SignalList",{enumerable:!0,get:function(){return h.SignalList}})},function(t,i,e){"use strict";var s=e(21);class n{constructor(t){this.base=t,this.api={pls:t.core+"core/pls",story:t.core+"core/story",rtb:t.core+"rtb/g",vpaid:t.core+"vpaid",syncUrls:t.core+"core/us",fallbackstory:t.core+"core/fallbackstory",cookie:t.core+"core/ck",tam:t.core+"core/atam"},this.tracking={session_rendered:t.tracking+"sr",session_view:t.tracking+"sv",session_time:t.tracking+"st",session_client_error:t.tracking+"e",media_quartile:t.tracking+"mq",media_click:t.tracking+"mc",ad_impression:t.tracking+"ai",bids:t.tracking+"abt",ad_impression_viewable:t.tracking+"av",ad_quartile:t.tracking+"aq",ad_click:t.tracking+"ac",contentLoad:t.tracking+"clr",noContent:t.tracking+"nc",eventService:t.tracking+"et",tracking:t.tracking+"tr",vastWin:t.tracking+"vw",rtb:t.tracking+"g",logging:t.tracking+"e",galleryCardClick:t.tracking+"cc",playerStart:t.tracking+"ps",adOpportunity:t.tracking+"ao"},this.assets={css:{elements:`${this.Oi(t.assets)}connatix.player.css`,playspace:`${this.Oi(t.assets)}connatix.playspace.css`}}}Oi(t){return"development"===s.a.env?"//cd.connatix.com/":`${t}p/${s.a.version}/`}}var r=e(22),h=e(8);e.d(i,"a",function(){return a});class a{static _i(){const t=Object(r.b)("cnxEnv",Object(h.f)(window).topFrame.location.href);return t&&(s.a.domainPrefix=`-${t}`),Object.keys(this.ji).forEach(t=>{this.ji[t]=this.ji[t].replace("{{env}}",s.a.domainPrefix)}),new n(a.ji)}static get endPoints(){return null===a.Ai&&(a.Ai=a._i()),a.Ai}}a.ji={a:"//a{{env}}.connatix.com/",video:"//vid.connatix.com/",image:"//img.connatix.com/",core:"https://capi{{env}}.connatix.com/",tracking:"//capi{{env}}.connatix.com/tr/",metadata:"//vid.connatix.com/",assets:"//cds{{env}}.connatix.com/",lineItems:"//lit.connatix.com/"},a.Ai=null},function(t,i,e){"use strict";e.d(i,"d",function(){return n}),e.d(i,"a",function(){return r}),e.d(i,"b",function(){return h}),e.d(i,"e",function(){return a}),e.d(i,"c",function(){return o});var s=e(1);function n(t,i,e,s,n){return e+(s-e)*function(t,i,e){return(e-t)/(i-t)}(t,i,n)}function r(t,i){return i.reduce((i,e)=>Math.abs(e-t)<=Math.abs(i-t)?e:i)}function h(t,i){return i/100*t}function a(t,i){const e=Math.pow(10,i);return Math.round(t*e)/e}function o(t){return!Object(s.e)(t.width)||!Object(s.e)(t.height)}},function(t,i,e){"use strict";e.d(i,"a",function(){return n});var s=e(6);class n{constructor(){this.Ii={}}subscribe(t,i,e){this.Ii[t]||(this.Ii[t]=[]),this.Ii[t].push({context:i,func:e})}unsubscribe(t,i,e){this.Ii[t]&&(this.Ii[t]=this.Ii[t].filter(t=>!(t.context===i&&(t.func===e||!e))))}unsubscribeAll(t){Object.keys(this.Ii).forEach(i=>{this.Ii[i]=this.Ii[i].filter(i=>i.context!==t)})}publish(t,i,e={payload:void 0}){Object.prototype.hasOwnProperty.call(this.Ii,i)&&this.Ii[i].forEach(i=>{i.context===t&&i.func(e)})}relay(t,i,e,n){Object(s.m)(t).forEach(t=>{this.subscribe(t,i,i=>{n.publish(e,t,i)})})}relayBulk(t,i,e){t.forEach(t=>{this.relay(t.channel,t.source,i,e)})}}},function(t,i,e){"use strict";e.d(i,"a",function(){return n}),e.d(i,"b",function(){return r});var s=e(0);const n=[s.ProtoDeviceType.Smartphone,s.ProtoDeviceType.Tablet];var r;!function(t){t.Ios="ios",t.Android="android",t.Mac="macos",t.Windows="windows",t.Linux="linux"}(r||(r={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n});const s=JSON.parse('{"version":109974,"domainPrefix":"","logToConsole":false,"logToServer":true,"env":"production"}'),n=!0},function(t,i,e){"use strict";e.d(i,"b",function(){return r}),e.d(i,"e",function(){return h}),e.d(i,"c",function(){return a}),e.d(i,"a",function(){return o}),e.d(i,"d",function(){return u});var s=e(1);const n=".cdn.ampproject.org";function r(t,i){i||(i=location.search),t=t.replace(/\[/,"\\[").replace(/]/,"\\]");const e=new RegExp(`[\\?&]${t}=([^&#]*)`,"i").exec(i);return null===e?null:decodeURIComponent(e[1])}function h(t,i,e){const s=new RegExp(`([?&])${i}=.*?(&|$)`,"i"),n=-1!==t.indexOf("?")?"&":"?";return t.match(s)?e?t.replace(s,`$1${i}=${e}$2`):t.replace(s,"$1"):`${t}${n}${i}=${e}`}function a(t){return t.indexOf("?")>-1?"&":"?"}function o(t){if(Object(s.h)(t))return t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0]}function c(t,i){return`${"http"+(/(\/s\/)+/.test(t.replace(i,""))?"s":"")}://${i}`}function u(t){return t=function(t){return-1===t.indexOf(n)?t:(t=(t=(t=(t=(t=(t=(t=t.replace(n,"")).replace("www-","www.")).replace("amp-","amp.")).cnx_replaceAll("--","=")).cnx_replaceAll("-",".")).cnx_replaceAll("=","-")).replace("www.","amp.")).indexOf("amp.")>-1?t:t=(t=t.replace("http://","http://amp.")).replace("https://","https://amp.")}(t=function(t){const i=/^https:\/\/www.google\..*?\/amp\/s*\/*/.exec(t);if(null!==i){const e=t.replace(i[0],"");return c(t,e)}return t}(t=function(t){if(t.indexOf(n)>-1){t=t.replace("https://","");const i=/^[^\/]+(\/[a-z]+\/)+s*\/*/,e=i.test(t)?t.replace(i.exec(t)[0],""):t;return c(t,e)}return t}(t)))}},function(t,i,e){"use strict";e.d(i,"h",function(){return s}),e.d(i,"i",function(){return n}),e.d(i,"j",function(){return r}),e.d(i,"g",function(){return h}),e.d(i,"b",function(){return a}),e.d(i,"a",function(){return o}),e.d(i,"f",function(){return c}),e.d(i,"d",function(){return u}),e.d(i,"e",function(){return l}),e.d(i,"c",function(){return d});const s=200,n=.9,r=1.1,h=31,a=2e3,o=1e3,c="connatix.com",u=2,l=41,d=4},function(t,i,e){"use strict";var s;e.d(i,"a",function(){return s}),function(t){t[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"}(s||(s={}))},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"b",function(){return r}),e.d(i,"c",function(){return h}),function(t){t.Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie"}(s||(s={})),function(t){t.Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o"}(n||(n={}));const r=[{name:n.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:n.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];var h;!function(t){t.Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"}(h||(h={}))},function(t,i,e){"use strict";e.d(i,"j",function(){return s}),e.d(i,"k",function(){return n}),e.d(i,"i",function(){return r}),e.d(i,"d",function(){return h}),e.d(i,"g",function(){return a}),e.d(i,"h",function(){return o}),e.d(i,"b",function(){return c}),e.d(i,"f",function(){return u}),e.d(i,"c",function(){return l}),e.d(i,"e",function(){return d}),e.d(i,"a",function(){return f});const s="1.3.13-iab2343",n="1.3.13-iab2343",r="Connatix";var h,a,o,c,u,l,d,f;!function(t){t.Generic="generic",t.Video="video"}(h||(h={})),function(t){t.Click="click",t.InvitationAccept="invitationAccept"}(a||(a={})),function(t){t.PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone"}(o||(o={})),function(t){t.SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish"}(c||(c={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender"}(u||(u={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.Video="video"}(l||(l={})),function(t){t.sessionError="sessionError",t.geometryChange="geometryChange"}(d||(d={})),function(t){t.backgrounded="backgrounded",t.notFound="notFound"}(f||(f={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s,n=e(5),r=e(0),h=e(8),a=e(1),o=e(22);!function(t){const i=3e4;function e(t,e){const s=function({requestUrl:t,requestType:e="POST",contentType:s="",responseType:n="",withCredentials:r=!1}){const h=new XMLHttpRequest;return h.open(e,t,!0),s.length>0&&h.setRequestHeader("Content-Type",s),n.length>0&&(h.responseType=n),h.timeout=i,h.withCredentials=r,h}(t),n=new Date;return new Promise((t,i)=>{s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200===s.status)t(s.response);else{const t=(new Date).getTime()-n.getTime();i(new Error(`Request fail. status:${s.status}, readyState:${s.readyState}, response:${s.response.responseText}, time:${t}`))}},s.ontimeout=()=>{const t=(new Date).getTime()-n.getTime();i(new Error(`Request timeout status:${s.status}. time:${t}`))},s.send(e)})}function s(t,i,e){try{const s=Object(h.k)([95,5]);!s||i&&0!==Object.keys(i).length||Object(n.a)({message:"empty_proto_request",callStack:"empty_function_argument",exception:e,level:r.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1});const a=t.fromObject(i);!s||a&&0!==Object.keys(a).length||Object(n.a)({message:"empty_proto_request",callStack:"empty_fromObject_result",exception:e,level:r.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1});const o=t.encode(a).finish();return!s||o&&0!==Object.keys(o).length||Object(n.a)({message:"empty_proto_request",callStack:"empty_encode_result",exception:e,level:r.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1}),o}catch(t){throw Object(n.a)({throttle:10,sendMaxLog:!0,exception:e,level:r.ProtoLoggingLevelEnum.FATAL,callStack:JSON.stringify(i),message:"Protobuf_encode"}),Error()}}function c(t,i,s="POST",h,a){return function(t,i,e){return new Promise((s,h)=>{i.then(i=>{if(t){let a=null;try{const s=i?new Uint8Array(i):new Uint8Array;a=t.toObject(t.decode(s),{defaults:!0,arrays:!0,objects:!0})}catch(t){Object(n.a)({exception:`${e}__${t.message}`,message:"Protobuf_decode",callStack:t.stack,level:r.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0,throttle:100})}a&&a.errorMessage&&"500"===a.errorMessage&&h(a.errorMessage),s(a)}}).catch(t=>{h(t)})})}(t,e({requestUrl:i,requestType:s,withCredentials:a,contentType:"POST"===s?"multipart/form-data":"",responseType:"arraybuffer"},h),i)}t.fetchXMLRequest=function(t,i=!0){const s=e({requestUrl:t,requestType:"GET",withCredentials:i});return new Promise((t,i)=>{s.then(i=>{t(i)}).catch(t=>{i(t)})})},t.sendProtoRequest=function({ProtoResponse:t,ProtoRequest:i,requestData:e,endpoint:u,requestType:l,withCredentials:d,queryParams:f,logError:p}){const v=e?s(i,e,u):null;return c(t,u=function(t,i){return Object(a.f)(i)?(Object.keys(i).forEach(e=>t=Object(o.e)(t,e,i[e])),t):t}(u,f),l,v,d).catch(t=>{throw p&&Object(h.k)([95,5])&&Object(n.a)({message:"Xhr_error",exception:u,callStack:`${t}`,level:r.ProtoLoggingLevelEnum.INFO}),new Error(t)})},t.sendProtoBeaconRequest=function({ProtoRequest:t,requestData:i,endpoint:e}){const n=i?s(t,i,e):null;return navigator.sendBeacon(e,n)},t.trackPixel=function(t){try{(new Image).src=t}catch(t){Object(n.a)({message:"Xhr_trackPixel",exception:t.message,callStack:t.stack,level:r.ProtoLoggingLevelEnum.FATAL})}}}(s||(s={}))},function(t,i,e){"use strict";var s;e.d(i,"c",function(){return s}),e.d(i,"a",function(){return n}),e.d(i,"b",function(){return r}),function(t){t.Connatix="143",t.AppNexus="32",t.DistrictM="144",t.IndexExchange="10",t.Lkqd="237",t.OneVideo="25",t.Openx="69",t.Pubmatic="76",t.RhythmOne="36",t.Rubicon="52",t.Spotx="165",t.Telaria="202",t.MediaNet="142",t.AdMan="149",t.IronSource="",t.Undertone="677",t.SynacorMedia=""}(s||(s={}));const n="cnx_usr_storage",r=["1YNY"]},function(t,i,e){"use strict";e.d(i,"a",function(){return r}),e.d(i,"e",function(){return h}),e.d(i,"b",function(){return a}),e.d(i,"f",function(){return o}),e.d(i,"d",function(){return c}),e.d(i,"c",function(){return u});var s=e(1),n=e(10);function r(t){let i,e;return Object(s.g)(t)&&(i=t.match(n.b))&&(e=parseInt(i[1],10)*n.d+parseInt(i[2],10)*n.e+parseInt(i[3],10)*n.f+parseInt(i[5]||0,10)),isNaN(e)?null:e}function h(t,i){return/^\d+(\.\d+)?%$/g.test(t)?i?i*parseFloat(t.replace("%",""))/100:null:r(t)}function a(t){return Date.now()+t*n.a}function o(t,i=":"){const e=t=>t>=10?t:`0${t}`;return`${e(Math.floor(t/60))}${i}${e(Math.floor(t%60))}`}function c(t,i){const e=Date.now();return!(e<t||e>i)}function u(){const t=new Date;return t.getTime()-1e3*t.getTimezoneOffset()*60}},function(t,i,e){"use strict";e.d(i,"a",function(){return r}),e.d(i,"c",function(){return h}),e.d(i,"b",function(){return a});var s=e(8),n=e(1);const r=t=>Object.keys(t).map(i=>t[i]);function h(t){for(const i in t)t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=`%22${encodeURIComponent(t[i])}%22`);return JSON.stringify(t).cnx_replaceAll('"',"")}function a(t,i){if(!Object(n.f)(t)||!Object(n.f)(i))return!1;const e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(i);return e.length===r.length&&e.every(e=>Object(s.i)(t[e],i[e]))}},function(t,i,e){"use strict";var s;e.d(i,"a",function(){return s}),function(t){t[t.T0=0]="T0",t[t.OnPlsResponse=1]="OnPlsResponse",t[t.FirstTimeInView=2]="FirstTimeInView",t[t.Content_StartLoadingVideo=3]="Content_StartLoadingVideo",t[t.Content_FirstFramePlayed=4]="Content_FirstFramePlayed",t[t.AdImpression=5]="AdImpression"}(s||(s={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{}s.MaxLogOverflow=1e3,s.maxLogOverflowCount={},s.logCount={},s.maxLogSent={},s.sessionId="",s.pageFocus=!1,s.incrementLogCount=t=>{s.logCount[t]?(++s.maxLogOverflowCount[t],++s.logCount[t]):(s.logCount[t]=1,s.maxLogOverflowCount[t]=1)},s.isMaxLog=(t,i)=>!!(s.logCount[t]&&s.logCount[t]>i),s.isMaxLogOverflow=t=>s.maxLogOverflowCount[t]>s.MaxLogOverflow&&(s.maxLogOverflowCount[t]=1,!0),s.setMaxLogSent=t=>{s.maxLogSent[t]=!0},s.isMaxLogSent=t=>!!s.maxLogSent[t]},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n});const s="https://connatix.com/privacy-policy/",n="v"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"S",{value:!0}),s(e(135)),s(e(136)),s(e(137)),s(e(138))},function(t,i,e){"use strict";e.d(i,"b",function(){return r}),e.d(i,"a",function(){return h});class s{}s.clientAb0=1,s.clientAb1=0;class n{}var r;n.clientAb0=1,n.clientAb1=0,function(t){t[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService"}(r||(r={}));class h{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static getABValueForKey(t){switch(this.abServiceType){case r.PlayspaceABService:return n[t];default:return s[t]}}}},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"S",{value:!0}),s(e(66)),s(e(139)),s(e(67)),s(e(68)),s(e(140)),s(e(56)),s(e(69)),s(e(141)),s(e(142))},function(t,i,e){"use strict";e.d(i,"a",function(){return h});var s=e(11),n=e(3),r=e(7);class h{static Ci(){const t=h.Ti;return h.Ti++,t}static Pi(t){return h.Mi[t]}static Ei(t){t.forEach(t=>{h.Mi[t.advertiserLineItemId]&&h.addCustomHistoryLine("duplicate",{id:t.advertiserLineItemId}),h.Mi[t.advertiserLineItemId]=h.Ci()})}static Li(t){return t.map(t=>({advertiserLineItemId:t.advertiserLineItemId,creativeType:t.creativeType,impressionTimeout:t.impressionTimeSpent,lineItemPriority:t.lineItemPriority,playerSize:t.playerSize,requestCap:t.requestCap,sound:t.sound,viewability:t.viewability}))}static setClientSideAdList(t){h.Ri&&(h.Bi=h.Li(JSON.parse(JSON.stringify(t))),h.Ei(h.Bi))}static setRtbAdList(t){h.Ri&&(h.Di=h.Li(JSON.parse(JSON.stringify(t))),h.Ei(h.Di))}static setHeaderBidderAdList(t){h.Ri&&(h.Fi=h.Li(JSON.parse(JSON.stringify(t))),h.Ei(h.Fi))}static setTamAdList(t){h.Ri&&(h.Vi=h.Li(JSON.parse(JSON.stringify(t))),h.Ei(h.Vi))}static setLineItemStatus(t,i){if(!h.Ri)return;const e=h.Pi(t);h.Ui.push({type:"status",id:e,status:s.a[i]})}static setVpaidEvent(t,i){if(h.Ri)try{const e=h.Pi(t);switch(i){case n.b.AdLoaded:case n.b.AdStarted:case n.b.AdError:case n.b.AdSkipped:case n.b.AdStopped:case n.b.AdPaused:case n.b.AdPlaying:case n.b.AdImpression:h.Ui.push({type:"vpaid",id:e,event:i})}}catch(t){}}static setViewabilityState(t){h.Ri&&h.Ui.push({type:"view",inView:t})}static setFocusState(t){h.Ri&&h.Ui.push({type:"focus",inView:t})}static setAdState(t){h.Ri&&h.Ui.push({type:"adState",state:r.ProtoAdSlotsEnum[t]})}static enforcerAction(t){h.Ri&&h.Ui.push({type:"enforcer",action:t})}static addCustomHistoryLine(t,i){h.Ri&&h.Ui.push(Object.assign({type:t},i))}static getJsonString(){return h.Ri?JSON.stringify({clientAdList:h.Bi,rtbAdList:h.Di,headerBidderAdList:h.Fi,mappedAdList:h.Mi,history:h.Ui}).substring(0,h.Ni):""}static playerDestroyed(){this.$i=!0}static isPlayerDestroyed(){return this.$i}}h.Ri=Date.now()-1581093917537<0,h.Ni=5e4,h.Ti=0,h.Mi={},h.Bi=[],h.Di=[],h.Fi=[],h.Vi=[],h.Ui=[],h.$i=!1},function(t,i,e){"use strict";var s;e.d(i,"a",function(){return s}),function(t){t[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t[t.P4=4]="P4",t[t.P5=5]="P5",t[t.P6=6]="P6",t[t.P7=7]="P7",t[t.P8=8]="P8",t[t.P9=9]="P9",t[t.P10=10]="P10"}(s||(s={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{constructor(){this.Hi=!1,this.promise=new Promise((t,i)=>{this.qi=t,this.zi=i})}Gi(){this.Hi||(this.Hi=!0)}resolve(t){this.Gi(),this.qi(t)}reject(t){this.Gi(),this.zi(t)}get isPending(){return!this.Hi}}},function(t,i,e){"use strict";(function(t){var s=i;function n(t,i,e){for(var s=Object.keys(i),n=0;n<s.length;++n)void 0!==t[s[n]]&&e||(t[s[n]]=i[s[n]]);return t}function r(t){function i(t,e){if(!(this instanceof i))return new i(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return t}}),i.prototype.toString=function(){return this.name+": "+this.message},i}s.asPromise=e(122),s.base64=e(123),s.EventEmitter=e(124),s.float=e(125),s.inquire=e(126),s.utf8=e(127),s.pool=e(128),s.LongBits=e(129),s.global="undefined"!=typeof window&&window||void 0!==t&&t||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isNode=Boolean(s.global.process&&s.global.process.versions&&s.global.process.versions.node),s.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},s.isString=function(t){return"string"==typeof t||t instanceof String},s.isObject=function(t){return t&&"object"==typeof t},s.isset=s.isSet=function(t,i){var e=t[i];return!(null==e||!t.hasOwnProperty(i))&&("object"!=typeof e||(Array.isArray(e)?e.length:Object.keys(e).length)>0)},s.Buffer=function(){try{var t=s.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),s.Wi=null,s.Ji=null,s.newBuffer=function(t){return"number"==typeof t?s.Buffer?s.Ji(t):new s.Array(t):s.Buffer?s.Wi(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},s.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(t){return t?s.LongBits.from(t).toHash():s.LongBits.zeroHash},s.longFromHash=function(t,i){var e=s.LongBits.fromHash(t);return s.Long?s.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},s.merge=n,s.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},s.newError=r,s.ProtocolError=r("ProtocolError"),s.oneOfGetter=function(t){for(var i={},e=0;e<t.length;++e)i[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;e>-1;--e)if(1===i[t[e]]&&void 0!==this[t[e]]&&null!==this[t[e]])return t[e]}},s.oneOfSetter=function(t){return function(i){for(var e=0;e<t.length;++e)t[e]!==i&&delete this[t[e]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s.Qi=function(){var t=s.Buffer;t?(s.Wi=t.from!==Uint8Array.from&&t.from||function(i,e){return new t(i,e)},s.Ji=t.allocUnsafe||function(i){return new t(i)}):s.Wi=s.Ji=null}}).call(this,e(62))},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(34),n=function(){function t(){}return t.encode=function(t,i){var e;if("string"==typeof t&&(t=parseInt(t,10)),(e=t.toString(2)).length>i||t<0)throw new s.EncodingError(t+" too large to encode into "+i);return e.length<i&&(e="0".repeat(i-e.length)+e),e},t.decode=function(t,i){if(i!==t.length)throw new s.DecodingError("invalid bit length");return parseInt(t,2)},t}();i.IntEncoder=n},function(t,i,e){"use strict";var s=this&&this.Xi||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"S",{value:!0});var n=function(){function t(){}return t.prototype.clone=function(){var t=this,i=new this.constructor;return Object.keys(this).forEach(function(e){var s=t.deepClone(t[e]);void 0!==s&&(i[e]=s)}),i},t.prototype.deepClone=function(t){var i,e,n=typeof t;if("number"===n||"string"===n||"boolean"===n)return t;if(null!==t&&"object"===n){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){var r=[];try{for(var h=s(t),a=h.next();!a.done;a=h.next()){var o=a.value;r.push(this.deepClone(o))}}catch(t){i={error:t}}finally{try{a&&!a.done&&(e=h.return)&&e.call(h)}finally{if(i)throw i.error}}return t instanceof Array?r:new t.constructor(r)}var c={};for(var u in t)t.hasOwnProperty(u)&&(c[u]=this.deepClone(t[u]));return c}},t}();i.Cloneable=n},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return r});var s,n=e(0);!function(t){t[t.PreRoll=0]="PreRoll",t[t.MidRoll=1]="MidRoll",t[t.PostRoll=2]="PostRoll",t[t.Standalone=3]="Standalone"}(s||(s={}));const r={[n.ProtoAdSlotsEnum.PreRoll]:s.PreRoll,[n.ProtoAdSlotsEnum.MidRoll]:s.MidRoll,[n.ProtoAdSlotsEnum.PostRoll]:s.PostRoll}},function(t,i,e){"use strict";e.d(i,"a",function(){return d}),e.d(i,"b",function(){return f});var s=e(45),n=e(0),r=e(17),h=e(1),a=e(5);const o=new s.a(n.ProtoAdDomainBlockingResponse,"AdDomainBlockingService"),c=2;let u;const l=new Map;function d(t){u||(u=new Promise(i=>{const e=t.find(t=>t.blockedDomainsRevisionNumber);if(!e)return void i();const{publisherLineItemId:s,blockedDomainsRevisionNumber:h}=e,u=`${r.a.endPoints.base.lineItems}${s}/blockedDomains_${h}.bin`;o.fetchMetadata(u,c).then(t=>{l.set(s,t.domains),i()}).catch(()=>{Object(a.a)({message:"AdDomainBlockingService_fetchBlockedDomains_endpoint_unavailable",level:n.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),i()})}))}function f(t,i){return new Promise(e=>{Object(h.h)(i)?u.then(()=>{l.has(t)&&l.get(t).some(t=>i.includes(t))?e(!0):e(!1)}):e(!1)})}},function(t,i,e){"use strict";e.d(i,"a",function(){return o});var s=e(0),n=e(8),r=e(5),h=e(1),a=e(27);class o{constructor(t,i){this.Yi=t,this.Ki=i,this.Zi=t=>new Promise((i,e)=>{a.a.sendProtoRequest({ProtoResponse:this.Yi,endpoint:t,requestType:"GET",logError:!0}).then(t=>{i(t)}).catch(t=>{e(t)})})}fetchMetadata(t,i=5){return new Promise((e,s)=>{Object(n.j)(()=>this.Zi(t),i).then(i=>{if(Object(h.f)(i))return e(i);const n=new Error("invalid metadata");return this.te({url:t,metadata:i,e:n}),s(n)}).catch(i=>{this.te({url:t,e:i}),s(i)})})}te(t){var i;const e=Object(h.h)(null===(i=t.e)||void 0===i?void 0:i.message)?t.e.message:"";-1===e.indexOf("XhrUtils_XMLHttpRequest_error")&&Object(r.a)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this.Ki}_${e}:${JSON.stringify(t)}`,callStack:t.e&&t.e.stack,level:s.ProtoLoggingLevelEnum.FATAL})}}},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=function(){function t(){}return t.encode=function(t){return+t+""},t.decode=function(t){return"1"===t},t}();i.BooleanEncoder=s},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s,n=e(50),r=e(2),h=e(8);!function(t){const i=["adBanner","banner-search","abc_banner","Banner_Top","ad_container","pub_300x250","pub_300x250m","pub_728x90","text-ad","text_ad","textAd","text-ad-links","text_ads","text-ads","text-ad-links"],e="cnxtestadblock",s=function(){const t=i.join(" ");return`<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="${e}" class="${t}"></div>`},a={src:n.a};t.detectUsingCSS=function(t){try{let i=!1;t.document.body.insertAdjacentHTML("beforeend",s());const n=t.document.getElementById(e);return 0!==n.getBoundingClientRect().height&&0!==n.getBoundingClientRect().width||(i=!0),t.document.body.removeChild(n),i}catch(t){return!1}},t.detectUsingScript=function(){return new Promise(t=>{const i=Object(h.f)(window).topFrame;i.googletag&&t(!1),Object(r.x)(a,i.document.head,i,()=>i.googletag?t(!1):t(!0),()=>t(!0))})}}(s||(s={}))},function(t,i,e){"use strict";var s=e(8),n=e(28),r=e(27),h=e(0),a=e(17),o=e(1),c=e(33),u=e(21);class l{constructor(t){this.ie=t,this.ee=!0,this.se="",this.ne=!1,this.re=[]}static getInstance(t){const i=n.a,e=Object(s.f)(t).topFrame;return e[i]||(e[i]=new l(e)),e[i]}get userId(){if(Object(o.h)(this.he))return this.he.split("_")[0]}set userId(t){this.he=t}get isCcpaApplicable(){return this.ee}set isCcpaApplicable(t){this.ee=t}get usPrivacyString(){return this.se}set usPrivacyString(t){this.se=t}get consentPayload(){return this.ae}set consentPayload(t){this.ae||(this.ae=t)}getScope(){return this.ie}syncDemandPartner(t){if(this.userId){const i={userId:this.userId,demandPartner:parseInt(t.demandPartner,10),demandPartnerUserId:t.demandPartnerUserId};r.a.sendProtoRequest({ProtoRequest:h.ProtoUserSyncRequest,endpoint:a.a.endPoints.api.syncUrls,requestData:i,queryParams:{[c.b]:u.a.version},logError:!0}).then(t=>{}).catch(t=>{})}}registerPlsCall(t){return this.ne?(this.re.push(t),()=>{}):this.userId?(t(),()=>{}):(this.ne=!0,t(),()=>{this.ne=!1,this.re.forEach(t=>t()),this.re=[]})}}var d,f=e(29),p=e(5),v=e(6);!function(t){t.USER_ID="cnx_userId"}(d||(d={}));class b{constructor(t,i){this.ce=t,this.ue=i,this.le={[d.USER_ID]:30},this.de=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.fe=!1}pe({name:t,value:i}){t===d.USER_ID&&(this.ce.userId=this.ve(i))}be(t){let i="";const e=this.le[t.name];if(e){i=`; expires=${new Date(Object(f.b)(e)).toUTCString()}`}this.ue.document.cookie=`${t.name}=${t.value}${i}; path=/`}me(t,i){if(!Object(v.h)(t))return;const e={cookieList:t,secureMode:i?h.ProtoCookieSecureModeEnum.Unsecure:h.ProtoCookieSecureModeEnum.Auto,browserInfo:this.ge};return r.a.sendProtoRequest({requestData:e,ProtoRequest:h.ProtoCookieSyncRequest,endpoint:a.a.endPoints.api.cookie,withCredentials:!0,queryParams:{[c.b]:u.a.version},logError:!1}).catch(t=>Object(p.a)({message:"UserCookieManager_setThirdPartyCookie",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL}))}ve(t){return t.split("_")[0]}ye(t){try{const i=t+"=",e=decodeURIComponent(this.ue.document.cookie).split(";");for(let t of e){for(;" "===t.charAt(0);)t=t.substring(1);if(0===t.indexOf(i))return this.ve(t.substring(i.length,t.length))}}catch(t){}return""}getUserId(){return this.ce.userId}syncFirstPartyCookie(t){const i={name:t,value:"",timestamp:Object(f.b)(this.le[t])};t===d.USER_ID&&(i.value=this.ce.userId),Object(o.h)(i.value)&&this.be(i)}syncThirdPartyCookieList(t){const i=[d.USER_ID],e=[];i.forEach(t=>{t===d.USER_ID&&Object(o.h)(this.ce.userId)&&e.push({name:d.USER_ID,value:this.ce.userId,timestamp:Object(f.b)(this.le[d.USER_ID])})}),this.me(e,t)}setBrowserInfo(t,i){this.ge=t,this.fe=this.de.includes(t.browserType),this.fe&&i&&this.syncThirdPartyCookieList(this.fe)}setUserInformation(t){t&&this.pe({name:d.USER_ID,value:t.userId})}fetchCookies(){[d.USER_ID].map(t=>({name:t,value:this.ye(t)})).filter(({value:t})=>Object(o.h)(t)).forEach(t=>this.pe(t))}get unsecuredCookieSync(){return this.fe}}var m=e(24);const g={[m.a.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[m.a.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};class y{constructor(t,i){this.we=t,this.xe=i,this.apiType=m.a.CmpApi,this.ke={},this.ae=null,this.Se=t=>new Promise((i,e)=>{try{const s="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof s&&s.Oe)if(s.Oe.callId===this._e){const t=s.Oe.returnValue&&s.Oe.returnValue.vendorConsents;this.je(t).then(()=>i(this._e))}else if(s.Oe.callId===this.Ae){const t=s.Oe.returnValue&&s.Oe.returnValue.consentData;this.Ie(t).then(()=>i(this.Ae))}}catch(t){e()}})}isApiOnPage(){return null!==this.we||null!==this.xe}bindToApi(){return null!==this.we?new Promise((t,i)=>{this.Ce(this.we).then(()=>t()).catch(t=>i(t))}):null!==this.xe?this.Te(this.xe):Promise.reject()}isConsentForVendor(t){return!!this.ke[t]}getConsentPayload(){return this.ae}setInAppConsentData(t){this.je(t),this.Ie(t.consentString)}hasIvtConsent(){return this.isConsentForVendor(n.c.Connatix)}isConsentForPurposes(t){return!0}Te(t){this.Ae=Object(s.d)(),this._e=Object(s.d)();const i={};return new Promise(e=>{const s=t=>{this.Se(t).then(t=>{i[t]=!0,i[this.Ae]&&i[this._e]&&(window.removeEventListener("message",s,!1),e())}).catch(t=>{})};window.addEventListener("message",s,!1);const n=g[m.a.CmpApi].getVendorConsentDataMethodName,r=g[m.a.CmpApi].getConsentDataMethodName;t.postMessage({Pe:{command:n,parameter:null,callId:this._e}},"*"),t.postMessage({Pe:{command:r,parameter:null,callId:this.Ae}},"*")})}Ce(t){const i=g[m.a.CmpApi].windowPropertyName,e=g[m.a.CmpApi].getVendorConsentDataMethodName,s=g[m.a.CmpApi].getConsentDataMethodName;if(t&&t[i]){const n=new Promise(s=>{t[i](e,null,(t,i)=>{if(i){const{vendorConsents:i}=t;this.je(i).then(()=>s())}})}),r=new Promise(e=>{t[i](s,null,(t,i)=>{if(i){const{consentData:i}=t;this.Ie(i).then(()=>e())}})});return Promise.all([n,r])}return Promise.reject()}je(t){return Object(o.f)(t)?(this.ke=t,Promise.resolve()):Promise.reject()}Ie(t){return Object(o.g)(t)?(this.ae=t,Promise.resolve()):Promise.reject()}}var w=e(2),x=e(78),k=e(79);const S=(t,i)=>{const e=g[i].windowPropertyName;return Object(w.r)(t,e)},O=(t,i)=>{const e=g[i].framePropertyName;return Object(w.q)(t,e)},_=(t,i)=>null!==S(t,i)||null!==O(t,i),j=t=>{const i=x.TCString.decode(t),e={},s={};return i.vendorConsents.forEach((t,i)=>e[i]=t),i.purposeConsents.forEach((t,i)=>s[i]=t),{vendorConsents:e,purposeConsents:s,tcString:t}},A=t=>{const i=k.decodeConsentString(t);let e="";const s=i.maxVendorId;for(let t=1;t<=s;t++)e+="0";const n=e.split("");return i.allowedVendorIds.forEach(t=>{n[t-1]="1"}),(t=>{const i={consentString:t};for(let e=0;e<t.length;e++)i[e+1]="1"===t[e];return i})(n.join(""))},I=(t,i,e)=>{let s;try{s=i(t)}catch(t){}if(Object(o.f)(s))return s;try{s=e(t)}catch(t){}return s},C=t=>{var i;return Object(o.h)(null===(i=t)||void 0===i?void 0:i.tcString)},T=t=>{var i;return Object(o.h)(null===(i=t)||void 0===i?void 0:i.consentString)},P=({cmpEncodedString:t,tcfEncodedString:i})=>{if(!Object(o.h)(t)&&!Object(o.h)(i))return null;let e=null;return Object(o.h)(i)&&(e=I(i,j,A)),Object(o.f)(e)?e:Object(o.h)(t)?(e=I(t,A,j),Object(o.f)(e)?e:(Object(p.a)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:t,tcfEncodedString:i}),level:h.ProtoLoggingLevelEnum.FATAL}),null)):(Object(p.a)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:i}),level:h.ProtoLoggingLevelEnum.FATAL}),null)},M="useractioncomplete",E="tcloaded";class L{constructor(t,i){this.Me=t,this.Ee=i,this.apiType=m.a.TcfApi,this.Le=t=>new Promise((i,e)=>{try{let s=t.data;if("string"==typeof t.data)try{s=JSON.parse(t.data)}catch(t){s=void 0}if("object"==typeof s&&s.Re&&s.Re.callId===this.Be){const t=s.Re.returnValue.tcString;this.je(t).then(()=>i(this.Be)).catch(t=>e())}}catch(t){e()}})}isApiOnPage(){return null!==this.Me||null!==this.Ee}bindToApi(){return null!==this.Me?new Promise((t,i)=>{this.Ce(this.Me).then(()=>t()).catch(t=>i(t))}):null!==this.Ee?this.Te(this.Ee):Promise.reject()}isConsentForVendor(t){var i,e;return!(null===(i=this.De)||void 0===i||!i.vendorConsents)&&!!(null===(e=this.De)||void 0===e?void 0:e.vendorConsents[t])}getConsentPayload(){var t;return null===(t=this.De)||void 0===t?void 0:t.tcString}setInAppConsentData(t){this.De=Object.assign(Object.assign({},this.De),t)}hasIvtConsent(){return!0}isConsentForPurposes(t){var i;return!(null===(i=this.De)||void 0===i||!i.purposeConsents)&&t.every(t=>!!this.De.purposeConsents[t])}Te(t){this.Be=Object(s.d)();const i={};return new Promise(e=>{const s=t=>{this.Le(t).then(t=>{i[t]=!0,i[this.Be]&&(window.removeEventListener("message",s,!1),e())}).catch(t=>{})};window.addEventListener("message",s,!1);const n=g[m.a.TcfApi].getVendorConsentDataMethodName;t.postMessage({Fe:{command:n,parameter:null,callId:this.Be}},"*")})}Ce(t){const i=g[m.a.TcfApi].windowPropertyName,e=g[m.a.TcfApi].consentUpdateMethodName,s=g[m.a.TcfApi].removeUpdateListenerMethodName;return t&&t[i]?new Promise(t=>{this.Me[i](e,2,(e,n)=>{if(n&&(e.eventStatus===M||e.eventStatus===E)){const n=e.tcString;this.je(n).then(()=>t()),this.Me[i](s,2,()=>void 0,e.listenerId)}})}):Promise.reject()}je(t){const i=P({tcfEncodedString:t});return C(i)?(this.De=i,Promise.resolve()):Promise.reject()}}var R=e(38);const B=[R.a.P1,R.a.P2,R.a.P4,R.a.P7,R.a.P8];class D{constructor(t,i,e={}){var s,n;this.Ve=t,this.ue=i;const r=P({cmpEncodedString:null===(s=e.cmp)||void 0===s?void 0:s.consentString,tcfEncodedString:null===(n=e.tcf)||void 0===n?void 0:n.tcString}),a=this.Ue(r);null!==a?(this.Ne(a),(C(r)||T(r))&&this.$e.setInAppConsentData(r)):Object(p.a)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:e}),level:h.ProtoLoggingLevelEnum.FATAL})}setPageUrl(t){this.He=t}setAmpUserConsent(t){var i,e;if(!this.isConsentRequired())return;const s=t.consentStringTypeEnum.US_PRIVACY_STRING,n=null===(i=t.consentMetadata)||void 0===i?void 0:i.consentStringType,r=t.encodeConsentString||(null===(e=t.consentMetadata)||void 0===e?void 0:e.additionalConsent);let a;if(!Object(o.h)(r))return void Object(p.a)({level:h.ProtoLoggingLevelEnum.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.He});if(n===s)return void Object(p.a)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:h.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL_${this.He}`,throttle:2,sendMaxLog:!1});const c=P({tcfEncodedString:r,cmpEncodedString:r});C(c)?a=new L(null,null):T(c)&&(a=new y(null,null)),a?a?(this.$e=a,this.$e.setInAppConsentData(c)):Object(p.a)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:h.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.He}`,throttle:2,sendMaxLog:!1}):Object(p.a)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp",level:h.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.He}`,throttle:2,sendMaxLog:!1})}isConsentRequired(){return this.Ve}isConsent(t,i=[]){if(this.isConsentRequired()){return this.$e.isConsentForVendor(t)&&this.$e.isConsentForPurposes(i)}return!0}isConsentConnatix(){return this.isConsent(n.c.Connatix,B)}getConsentDataPayload(){return this.$e.getConsentPayload()}bindToConsentApi(){return this.$e.bindToApi()}isConsentApiOnPage(){return this.$e.isApiOnPage()}hasIVTConsent(){return this.$e.hasIvtConsent()}getConsentApiType(){return this.$e.apiType}Ne(t){const i=S(this.ue,t),e=O(this.ue,t);t===m.a.TcfApi?this.$e=new L(i,e):this.$e=new y(i,e)}Ue(t){if(C(t))return m.a.TcfApi;if(T(t))return m.a.CmpApi;return _(this.ue,m.a.TcfApi)?m.a.TcfApi:_(this.ue,m.a.CmpApi)?m.a.CmpApi:m.a.TcfApi}}var F=e(22);const V="yellowblue.io";class U{constructor(t,i){this.qe=t,this.Ve=i,this.ze=[]}replaceuserIdMacros(t,i){let e=t;return e=(e=(e=e.replace("%5BuserId%5D",i)).replace("[userId]",i)).replace("%7bUSER_ID%7d",i)}Ge(t,i){try{if(this.We(t)){const e=i.document.createElement("iframe");e.setAttribute("style","width:1px;height:1px;border:0px;margin:0px;padding:0px"),e.src=t.url,i.document.body.appendChild(e)}else Object(w.x)({src:t.url},i.document.head,i,null,null,1===Object(s.k)([95,5]),"UserManager_unable_to_insert_sync_url_script");return!0}catch(t){return!1}}We(t){switch(t.vendorId){case n.c.Rubicon:case n.c.Pubmatic:return!0;default:return t.url.indexOf(V)>-1}}syncUrls(t,i){this.ze.forEach(e=>{if(this.qe.isConsent(e.vendorId)&&!e.synced){if((e.vendorId===n.c.Pubmatic||e.vendorId===n.c.Rubicon)&&this.Ve){e.url=Object(F.e)(e.url,"gdpr","1");const t=this.qe.getConsentDataPayload();e.url=Object(F.e)(e.url,"gdpr_consent",t)}if(-1!==e.url.indexOf("openx.net"))return e.url=`${e.url.split("r=")[0]}&r=\n                        ${encodeURIComponent(`https://capi.connatix.com/core/us?DemandPartner=8&UserId=${t}&DemandPartnerUserId=`)}`,e.url=this.replaceuserIdMacros(e.url,t),r.a.trackPixel(e.url),void(e.synced=!0);e.url.indexOf("pixel.advertising.com")>-1&&(e.url=e.url.replace("gdpr=",`gdpr=${this.qe.isConsentRequired()?1:0}`),e.url=e.url.replace("gdpr_consent=","gdpr_consent=0")),e.url=this.replaceuserIdMacros(e.url,t),this.Ge(e,i)&&(e.synced=!0)}})}setSyncUrls(t={}){return!(this.ze.length>0)&&(this.ze=[],Object.keys(t).forEach(i=>{this.ze.push({vendorId:i,url:t[i],synced:!1})}),!0)}}var N=e(39);const $={subdivision:{California:5332921},country:{US:6252001}};class H{constructor(t,i){this.ce=t,this.Je=1,this.Qe="__uspapi",this.Xe="getUSPData",this.Ye(i)}getUsPrivacyString(){if(this.ce.usPrivacyString||this.ce.isCcpaApplicable)return this.ce.usPrivacyString}isCcpaApplicable(){return this.ce.isCcpaApplicable}isSellUserAllowed(){return!this.ce.isCcpaApplicable||this.Ke()}setGeoLocation(t){this.Ze=t,t.subdivisionId!==$.subdivision.California&&(this.ce.isCcpaApplicable=!1)}fetchUsPrivacyString(){return this.ts()&&this.es(),this.isCcpaApplicable()?new Promise(t=>{this.getUsPrivacyString()?t():t(this.ss())}):Promise.resolve()}ss(){return new Promise((t,i)=>{const e=this.ce.getScope()[this.Qe];e?e(this.Xe,this.Je,(e,s)=>{s?(this.Ye(e.uspString),t()):i()}):i()})}Ke(){return!this.ce.usPrivacyString||Object(v.g)(this.ce.usPrivacyString,n.b)}Ye(t){this.ce.usPrivacyString=t}ts(){if(!Object(s.k)([95,5]))return!1;const t=new Date(2020,10,16,12,0,0).getTime(),i=new Date(2020,10,17,12,0,0).getTime();return Object(f.d)(t,i)}es(){const{countryGeoId:t,subdivisionId:i}=this.Ze;t===$.country.US&&Object(p.a)({message:"UserCcpaManager_logCCPA",level:h.ProtoLoggingLevelEnum.INFO,callStack:JSON.stringify(i),exception:this.ce.usPrivacyString})}}var q,z;e.d(i,"a",function(){return q}),e.d(i,"b",function(){return G}),function(t){t.CCPA_INFO_RECEIVED="ccpaInfoReceived",t.CONSENT_DATA_UPDATE="consentDataUpdate"}(q||(q={})),function(t){t.SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived",t.USER_INFO_RECEIVED="userInfoReceived"}(z||(z={}));class G{constructor(t,i,e,s={}){this.ns=i,this.rs=e,this._appSettings=s,this.gdprConsentMode=h.ProtoGdprConsentModeEnum.Unknown,this.hs={},this.as="",this.cs=!1,this.us=()=>{!this.qe.isConsentRequired()||this.ns?this.resolveEvent(q.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this.qe.isConsentApiOnPage()||this.rs?h.ProtoGdprConsentModeEnum.NoConsent:h.ProtoGdprConsentModeEnum.NoCmp,this.qe.bindToConsentApi().then(()=>{this.isConsentConnatix()||(this.gdprConsentMode=h.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(q.CONSENT_DATA_UPDATE)}).catch(t=>{}))},this.ls=()=>{this.isConsentConnatix()&&(this.onEvent([z.USER_INFO_RECEIVED]).then(()=>{this.cs&&(this.ds.syncThirdPartyCookieList(),this.ds.unsecuredCookieSync&&this.ds.syncThirdPartyCookieList(this.ds.unsecuredCookieSync),this.ds.syncFirstPartyCookie(d.USER_ID))}),this.onEvent([z.SYNC_URLS_RECEIVED,q.CONSENT_DATA_UPDATE,q.CCPA_INFO_RECEIVED]).then(()=>{if(this.isConsentConnatix()&&this.fs.isSellUserAllowed())try{this.ps.syncUrls(this.ce.userId,this.ce.getScope())}catch(t){Object(p.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"UserManager_syncUrls",exception:t.message,callStack:t.stack})}}))};try{this.ce=l.getInstance(t),this.ns||(this.ds=new b(this.ce,t));const{cmp:i,tcf:e}=this._appSettings;this.qe=new D(!!this.as,t,{cmp:i,tcf:e}),this.ps=new U(this.qe,this.isGDPR()),this.fs=new H(this.ce,this._appSettings.usPrivacyString),this.vs()}catch(t){Object(p.a)({callStack:t.stack,exception:t.message,message:"UserManager_constructor",level:h.ProtoLoggingLevelEnum.FATAL})}}vs(){this.ds&&this.ds.fetchCookies(),this.us(),this.onEvent([q.CONSENT_DATA_UPDATE]).then(()=>{setTimeout(()=>{try{if(this.ns)return;this.ls()}catch(t){Object(p.a)({callStack:t.stack,exception:t.message,message:"UserManager_consent_data_received",level:h.ProtoLoggingLevelEnum.FATAL})}},0)})}bs(t){return void 0===this.hs[t]&&(this.hs[t]=new N.a,this.hs[t].promise.catch(()=>this.hs[t].reject())),this.hs[t]}resolveEvent(t,i){this.bs(t).resolve(i)}setAmpUserConsent(t){this.qe.setAmpUserConsent(t),this.resolveEvent(q.CONSENT_DATA_UPDATE)}setPageUrl(t){this.qe&&this.qe.setPageUrl(t)}onEvent(t){const i=t.map(t=>this.bs(t).promise);return Promise.all(i)}isConsent(t,i){return this.qe.isConsent(t,i)}isConsentConnatix(){return this.qe.isConsentConnatix()}getConsentPayload(){return this.qe.getConsentDataPayload()}isConsentRequired(){return this.qe.isConsentRequired()}setThirdPartySyncUrls(t){this.ns||this.ps.setSyncUrls(t)&&this.resolveEvent(z.SYNC_URLS_RECEIVED)}setGeoLocation(t){this.fs.setGeoLocation(t),this.fs.fetchUsPrivacyString().then(()=>{this.resolveEvent(q.CCPA_INFO_RECEIVED)}).catch(()=>{this.resolveEvent(q.CCPA_INFO_RECEIVED)})}getUserId(){if(this.isConsentConnatix()&&this.ds)return this.ds.getUserId()}ms(){return this.ds&&this.ds.getUserId()}setUserInformation(t){this.ds&&(this.ds.setUserInformation(t),this.resolveEvent(z.USER_INFO_RECEIVED),!this.ns&&this.isConsentConnatix()&&this.ds.syncFirstPartyCookie(d.USER_ID))}isGDPR(){return!!this.as}getUsPrivacyString(){return this.fs.getUsPrivacyString()}isCcpaApplicable(){return this.fs.isCcpaApplicable()}isSellUserAllowed(){return this.ns||this.fs.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}gs(){return this._appSettings.deviceID}getTrackableUser(){return this.ns?this.getDeviceId():this.getUserId()}getForcedTrackableUser(){return this.ns?this.gs():this.ms()}registerPlsCall(t){return this.isConsentConnatix()||(this.cs=!0),this.ce.registerPlsCall(t)}setBrowserInfo(t){this.ds&&this.ds.setBrowserInfo(t,this.isConsentConnatix())}getGdprConsentApiType(){return this.qe.getConsentApiType()}}},function(t,i,e){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(i,"S",{value:!0}),i.Subscription=i.EventListBase=i.DispatcherWrapper=i.DispatcherBase=void 0;var s=e(157);Object.defineProperty(i,"DispatcherBase",{enumerable:!0,get:function(){return s.DispatcherBase}}),Object.defineProperty(i,"DispatcherWrapper",{enumerable:!0,get:function(){return s.DispatcherWrapper}}),Object.defineProperty(i,"EventListBase",{enumerable:!0,get:function(){return s.EventListBase}});var n=e(77);Object.defineProperty(i,"Subscription",{enumerable:!0,get:function(){return n.Subscription}})},function(t,i,e){"use strict";e.d(i,"a",function(){return s});const s="//securepubads.g.doubleclick.net/tag/js/gpt.js"},function(t,i){t.exports='<cnx class=cnx-g-card> <cnx class=cnx-g-card-image-container> <cnx class=cnx-g-triangle></cnx> <cnx class=cnx-g-card-image> <cnx class=cnx-g-card-icon> <cnx class=cnx-ui-btn> <cnx class="cnx-icon-button cnx-ui-btn-hoverable cnx-mod-hover"> <cnx class=cnx-btn-container> <cnx class=cnx-play-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule=evenodd /></svg> </cnx> </cnx> </cnx> </cnx> </cnx> </cnx> </cnx> <cnx class=cnx-g-card-text-container> <cnx class=cnx-g-card-text> <cnx-span></cnx-span> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-button-caption cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-caption-off-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M20.556 5H3.444C3.163 5 3 5.15 3 5.25v13.5c0 .1.163.25.444.25h17.11c.275 0 .444-.156.444-.25V5.25c0-.094-.17-.25-.444-.25zm0-2C21.9 3 23 4.013 23 5.25v13.5c0 1.238-1.1 2.25-2.444 2.25H3.444C2.088 21 1 19.988 1 18.75V5.25C1 4.013 2.088 3 3.444 3h17.11zM11 11H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-caption-on-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><g fill=none><path d="M20.6 3C21.9 3 23 4 23 5.3L23 18.8C23 20 21.9 21 20.6 21L3.4 21C2.1 21 1 20 1 18.8L1 5.3C1 4 2.1 3 3.4 3L20.6 3Z" class=cnx-color-accent /><path d="M11 11L9.5 11 9.5 10.5 7.5 10.5 7.5 13.5 9.5 13.5 9.5 13 11 13 11 14C11 14.6 10.6 15 10 15L7 15C6.5 15 6 14.6 6 14L6 10C6 9.5 6.5 9 7 9L10 9C10.6 9 11 9.5 11 10L11 11ZM18 11L16.5 11 16.5 10.5 14.5 10.5 14.5 13.5 16.5 13.5 16.5 13 18 13 18 14C18 14.6 17.6 15 17 15L14 15C13.5 15 13 14.6 13 14L13 10C13 9.5 13.5 9 14 9L17 9C17.6 9 18 9.5 18 10L18 11Z" class=cnx-color-icon /></g></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class=cnx-ui-loader> <svg class=cnx-color-accent version=1.1 viewBox="0 0 79 90" xmlns=http://www.w3.org/2000/svg><polygon points="21 73.322 11 79 11 12 21 17.678" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="27 70 27 21 38 27.267 38 63.733" fill=transparent stroke-linecap=round stroke-linejoin=round /><polygon points="44 61 44 31 54 36.769 54 55.231" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="60 51 60 40 70 45.5" fill=none stroke-linecap=round stroke-linejoin=round /></svg> </cnx> '},function(t,i){t.exports='<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"><path d="M5 21.453c2.022 1.627 4.6 2.602 7.387 2.602 3.973 0 7.485-1.967 9.622-4.977l-4.596-3.34a3.87 3.87 0 0 0-4.548 0L5 21.453zM22 4.977A11.75 11.75 0 0 0 12.387 0 11.74 11.74 0 0 0 5 2.602l7.9 5.74a3.81 3.81 0 0 0 4.479 0l4.63-3.364zm1.563 11.395c.494-1.3.767-2.712.767-4.186S24.057 9.3 23.563 8l-3.858 2.803a1.71 1.71 0 0 0 0 2.766l3.858 2.803z" fill="#fff"></path><path d="M2.378 5c-.024-.017-.057-.012-.074.01A11.74 11.74 0 0 0 0 12.025a11.74 11.74 0 0 0 2.304 7.004c.017.023.05.028.074.01l8.013-5.822c.81-.59.81-1.797 0-2.386L2.378 5z" fill="#09f"></path></svg>'},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(36),n=function(){function t(){}var i,e,n,r,h,a,o,c,u,l,d,f,p,v,b,m,g,y;return i=s.Fields.cmpId,e=s.Fields.cmpVersion,n=s.Fields.consentLanguage,r=s.Fields.consentScreen,h=s.Fields.created,a=s.Fields.isServiceSpecific,o=s.Fields.lastUpdated,c=s.Fields.policyVersion,u=s.Fields.publisherCountryCode,l=s.Fields.publisherLegitimateInterests,d=s.Fields.publisherConsents,f=s.Fields.purposeConsents,p=s.Fields.purposeLegitimateInterests,v=s.Fields.purposeOneTreatment,b=s.Fields.specialFeatureOptins,m=s.Fields.useNonStandardStacks,g=s.Fields.vendorListVersion,y=s.Fields.version,t[i]=12,t[e]=12,t[n]=12,t[r]=6,t[h]=36,t[a]=1,t[o]=36,t[c]=6,t[u]=12,t[l]=24,t[d]=24,t[f]=24,t[p]=24,t[v]=1,t[b]=12,t[m]=1,t[g]=12,t[y]=6,t.anyBoolean=1,t.encodingType=1,t.maxId=16,t.numCustomPurposes=6,t.numEntries=12,t.numRestrictions=12,t.purposeId=6,t.restrictionType=2,t.segmentType=3,t.singleOrRange=1,t.vendorId=16,t}();i.BitLength=n},function(t,i,e){"use strict";var s;Object.defineProperty(i,"S",{value:!0}),(s=i.RestrictionType||(i.RestrictionType={}))[s.NOT_ALLOWED=0]="NOT_ALLOWED",s[s.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",s[s.REQUIRE_LI=2]="REQUIRE_LI"},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(46),n=e(34),r=e(36),h=function(){function t(){}return t.encode=function(t,i){for(var e="",n=1;n<=i;n++)e+=s.BooleanEncoder.encode(t.has(n));return e},t.decode=function(t,i){if(t.length!==i)throw new n.DecodingError("bitfield encoding length mismatch");for(var e=new r.Vector,h=1;h<=i;h++)s.BooleanEncoder.decode(t[h-1])&&e.set(h);return e.bitLength=t.length,e},t}();i.FixedVectorEncoder=h},function(t,i){t.exports="<cnx class=cnx-ui-progress-label> <cnx-span></cnx-span> </cnx> "},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"></path></svg>'},function(t,i,e){"use strict";t.exports=e(121)},function(t,i,e){"use strict";t.exports=l;var s,n=e(40),r=n.LongBits,h=n.base64,a=n.utf8;function o(t,i,e){this.fn=t,this.len=i,this.next=void 0,this.val=e}function c(){}function u(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new o(c,0,0),this.tail=this.head,this.states=null}function d(t,i,e){i[e]=255&t}function f(t,i){this.len=t,this.next=void 0,this.val=i}function p(t,i,e){for(;t.hi;)i[e++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[e++]=127&t.lo|128,t.lo=t.lo>>>7;i[e++]=t.lo}function v(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}l.create=n.Buffer?function(){return(l.create=function(){return new s})()}:function(){return new l},l.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(l.alloc=n.pool(l.alloc,n.Array.prototype.subarray)),l.prototype.ys=function(t,i,e){return this.tail=this.tail.next=new o(t,i,e),this.len+=i,this},f.prototype=Object.create(o.prototype),f.prototype.fn=function(t,i,e){for(;t>127;)i[e++]=127&t|128,t>>>=7;i[e]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this.ys(p,10,r.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.uint64=function(t){var i=r.from(t);return this.ys(p,i.length(),i)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(t){var i=r.from(t).zzEncode();return this.ys(p,i.length(),i)},l.prototype.bool=function(t){return this.ys(d,1,t?1:0)},l.prototype.fixed32=function(t){return this.ys(v,4,t>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(t){var i=r.from(t);return this.ys(v,4,i.lo).ys(v,4,i.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(t){return this.ys(n.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this.ys(n.float.writeDoubleLE,8,t)};var b=n.Array.prototype.set?function(t,i,e){i.set(t,e)}:function(t,i,e){for(var s=0;s<t.length;++s)i[e+s]=t[s]};l.prototype.bytes=function(t){var i=t.length>>>0;if(!i)return this.ys(d,1,0);if(n.isString(t)){var e=l.alloc(i=h.length(t));h.decode(t,e,0),t=e}return this.uint32(i).ys(b,i,t)},l.prototype.string=function(t){var i=a.length(t);return i?this.uint32(i).ys(a.write,i,t):this.ys(d,1,0)},l.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new o(c,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new o(c,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,i=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=i,this.len+=e),this},l.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,i,e),e+=t.len,t=t.next;return i},l.Qi=function(t){s=t}},function(t,i){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,i,e){"use strict";t.exports=o;var s,n=e(40),r=n.LongBits,h=n.utf8;function a(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function o(t){this.buf=t,this.pos=0,this.len=t.length}var c,u="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new o(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new o(t);throw Error("illegal buffer")};function l(){var t=new r(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new r(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}o.create=n.Buffer?function(t){return(o.create=function(t){return n.Buffer.isBuffer(t)?new s(t):u(t)})(t)}:u,o.prototype.ws=n.Array.prototype.subarray||n.Array.prototype.slice,o.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),o.prototype.int32=function(){return 0|this.uint32()},o.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},o.prototype.bool=function(){return 0!==this.uint32()},o.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},o.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},o.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},o.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},o.prototype.bytes=function(){var t=this.uint32(),i=this.pos,e=this.pos+t;if(e>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,e):i===e?new this.buf.constructor(0):this.ws.call(this.buf,i,e)},o.prototype.string=function(){var t=this.bytes();return h.read(t,0,t.length)},o.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},o.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},o.Qi=function(t){s=t;var i=n.Long?"toLong":"toNumber";n.merge(o.prototype,{int64:function(){return l.call(this)[i](!1)},uint64:function(){return l.call(this)[i](!0)},sint64:function(){return l.call(this).zzDecode()[i](!1)},fixed64:function(){return f.call(this)[i](!0)},sfixed64:function(){return f.call(this)[i](!1)}})}},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"S",{value:!0}),s(e(65)),s(e(55)),s(e(143)),s(e(147)),s(e(70)),s(e(76))},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(34),n=function(){function t(){}return t.encode=function(t){if(!/^[0-1]+$/.test(t))throw new s.EncodingError("Invalid bitField");var i=t.length%this.LCM;t+=i?"0".repeat(this.LCM-i):"";for(var e="",n=0;n<t.length;n+=this.BASIS)e+=this.DICT[parseInt(t.substr(n,this.BASIS),2)];return e},t.decode=function(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new s.DecodingError("Invalidly encoded Base64URL string");for(var i="",e=0;e<t.length;e++){var n=this.REVERSE_DICT.get(t[e]).toString(2);i+="0".repeat(this.BASIS-n.length)+n}return i},t.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),t.BASIS=6,t.LCM=24,t}();i.Base64Url=n},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0});var r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.root=null,i}return n(i,t),i.prototype.isEmpty=function(){return!this.root},i.prototype.add=function(t){var i,e={value:t,left:null,right:null};if(this.isEmpty())this.root=e;else for(i=this.root;;)if(t<i.value){if(null===i.left){i.left=e;break}i=i.left}else{if(!(t>i.value))break;if(null===i.right){i.right=e;break}i=i.right}},i.prototype.get=function(){for(var t=[],i=this.root;i;)if(i.left){for(var e=i.left;e.right&&e.right!=i;)e=e.right;e.right==i?(e.right=null,t.push(i.value),i=i.right):(e.right=i,i=i.left)}else t.push(i.value),i=i.right;return t},i.prototype.contains=function(t){for(var i=!1,e=this.root;e;){if(e.value===t){i=!0;break}t>e.value?e=e.right:t<e.value&&(e=e.left)}return i},i.prototype.min=function(t){var i;for(void 0===t&&(t=this.root);t;)t.left?t=t.left:(i=t.value,t=null);return i},i.prototype.max=function(t){var i;for(void 0===t&&(t=this.root);t;)t.right?t=t.right:(i=t.value,t=null);return i},i.prototype.remove=function(t,i){void 0===i&&(i=this.root);for(var e=null,s="left";i;)if(t<i.value)e=i,i=i.left,s="left";else if(t>i.value)e=i,i=i.right,s="right";else{if(i.left||i.right)if(i.left)if(i.right){var n=this.min(i.right);this.remove(n,i.right),i.value=n}else e?e[s]=i.left:this.root=i.left;else e?e[s]=i.right:this.root=i.right;else e?e[s]=null:this.root=null;i=null}},i}(e(42).Cloneable);i.BinarySearchTree=r},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=function(){function t(){}return t.cmpId="cmpId",t.cmpVersion="cmpVersion",t.consentLanguage="consentLanguage",t.consentScreen="consentScreen",t.created="created",t.supportOOB="supportOOB",t.isServiceSpecific="isServiceSpecific",t.lastUpdated="lastUpdated",t.numCustomPurposes="numCustomPurposes",t.policyVersion="policyVersion",t.publisherCountryCode="publisherCountryCode",t.publisherCustomConsents="publisherCustomConsents",t.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",t.publisherLegitimateInterests="publisherLegitimateInterests",t.publisherConsents="publisherConsents",t.publisherRestrictions="publisherRestrictions",t.purposeConsents="purposeConsents",t.purposeLegitimateInterests="purposeLegitimateInterests",t.purposeOneTreatment="purposeOneTreatment",t.specialFeatureOptins="specialFeatureOptins",t.useNonStandardStacks="useNonStandardStacks",t.vendorConsents="vendorConsents",t.vendorLegitimateInterests="vendorLegitimateInterests",t.vendorListVersion="vendorListVersion",t.vendorsAllowed="vendorsAllowed",t.vendorsDisclosed="vendorsDisclosed",t.version="version",t}();i.Fields=s},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0});var r=e(42),h=e(34),a=e(56),o=function(t){function i(i,e){var s=t.call(this)||this;return void 0!==i&&(s.purposeId=i),void 0!==e&&(s.restrictionType=e),s}return n(i,t),i.unHash=function(t){var e=t.split(this.hashSeparator),s=new i;if(2!==e.length)throw new h.TCModelError("hash",t);return s.purposeId=parseInt(e[0],10),s.restrictionType=parseInt(e[1],10),s},Object.defineProperty(i.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+i.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(t){this.purposeId_=t},enumerable:!0,configurable:!0}),i.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===a.RestrictionType.NOT_ALLOWED||this.restrictionType===a.RestrictionType.REQUIRE_CONSENT||this.restrictionType===a.RestrictionType.REQUIRE_LI)},i.prototype.isSameAs=function(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType},i.hashSeparator="-",i}(r.Cloneable);i.PurposeRestriction=o},function(t,i,e){"use strict";var s;Object.defineProperty(i,"S",{value:!0}),(s=i.Segment||(i.Segment={})).CORE="core",s.VENDORS_DISCLOSED="vendorsDisclosed",s.VENDORS_ALLOWED="vendorsAllowed",s.PUBLISHER_TC="publisherTC"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"S",{value:!0}),s(e(46)),s(e(71)),s(e(144)),s(e(57)),s(e(41)),s(e(72)),s(e(73)),s(e(75)),s(e(74))},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(41),n=e(34),r=function(){function t(){}return t.encode=function(t,i){return s.IntEncoder.encode(Math.round(t.getTime()/100),i)},t.decode=function(t,i){if(i!==t.length)throw new n.DecodingError("invalid bit length");var e=new Date;return e.setTime(100*s.IntEncoder.decode(t,i)),e},t}();i.DateEncoder=r},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(41),n=e(34),r=function(){function t(){}return t.encode=function(t,i){var e=(t=t.toUpperCase()).charCodeAt(0)-65,r=t.charCodeAt(1)-65;if(e<0||e>25||r<0||r>25)throw new n.EncodingError("invalid language code: "+t);if(i%2==1)throw new n.EncodingError("numBits must be even, "+i+" is not valid");return i/=2,s.IntEncoder.encode(e,i)+s.IntEncoder.encode(r,i)},t.decode=function(t,i){if(i!==t.length||t.length%2)throw new n.DecodingError("invalid bit length for language");var e=t.length/2,r=s.IntEncoder.decode(t.slice(0,e),e)+65,h=s.IntEncoder.decode(t.slice(e),e)+65;return String.fromCharCode(r)+String.fromCharCode(h)},t}();i.LangEncoder=r},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(55),n=e(46),r=e(34),h=e(41),a=e(36),o=function(){function t(){}return t.encode=function(t){var i=h.IntEncoder.encode(t.numRestrictions,s.BitLength.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach(function(e){i+=h.IntEncoder.encode(e.purposeId,s.BitLength.purposeId),i+=h.IntEncoder.encode(e.restrictionType,s.BitLength.restrictionType);for(var r=t.getVendors(e),a=r.length,o=0,c=0,u="",l=0;l<a;l++){var d=r[l];if(0===c&&(o++,c=d),l===a-1||r[l+1]>d+1){var f=!(d===c);u+=n.BooleanEncoder.encode(f),u+=h.IntEncoder.encode(c,s.BitLength.vendorId),f&&(u+=h.IntEncoder.encode(d,s.BitLength.vendorId)),c=0}}i+=h.IntEncoder.encode(o,s.BitLength.numEntries),i+=u}),i},t.decode=function(t){var i=0,e=new a.PurposeRestrictionVector,o=h.IntEncoder.decode(t.substr(i,s.BitLength.numRestrictions),s.BitLength.numRestrictions);i+=s.BitLength.numRestrictions;for(var c=0;c<o;c++){var u=h.IntEncoder.decode(t.substr(i,s.BitLength.purposeId),s.BitLength.purposeId);i+=s.BitLength.purposeId;var l=h.IntEncoder.decode(t.substr(i,s.BitLength.restrictionType),s.BitLength.restrictionType);i+=s.BitLength.restrictionType;var d=new a.PurposeRestriction(u,l),f=h.IntEncoder.decode(t.substr(i,s.BitLength.numEntries),s.BitLength.numEntries);i+=s.BitLength.numEntries;for(var p=0;p<f;p++){var v=n.BooleanEncoder.decode(t.substr(i,s.BitLength.anyBoolean));i+=s.BitLength.anyBoolean;var b=h.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,v){var m=h.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,m<b)throw new r.DecodingError("Invalid RangeEntry: endVendorId "+m+" is less than "+b);for(var g=b;g<=m;g++)e.add(g,d)}else e.add(b,d)}}return e.bitLength=i,e},t}();i.PurposeRestrictionVectorEncoder=o},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(36),n=e(64),r=e(41),h=e(46),a=e(57),o=e(75),c=e(34),u=function(){function t(){}return t.encode=function(t){var i,e=[],s=[],a=r.IntEncoder.encode(t.maxId,n.BitLength.maxId),c="",u=n.BitLength.maxId+n.BitLength.encodingType,l=u+t.maxId,d=2*n.BitLength.vendorId+n.BitLength.singleOrRange+n.BitLength.numEntries,f=u+n.BitLength.numEntries;return t.forEach(function(r,a){c+=h.BooleanEncoder.encode(r),(i=t.maxId>d&&f<l)&&r&&(t.has(a+1)?0===s.length&&(s.push(a),f+=n.BitLength.singleOrRange,f+=n.BitLength.vendorId):(s.push(a),f+=n.BitLength.vendorId,e.push(s),s=[]))}),i?(a+=o.VectorEncodingType.RANGE+"",a+=this.buildRangeEncoding(e)):(a+=o.VectorEncodingType.FIELD+"",a+=c),a},t.decode=function(t,i){var e,u=0,l=r.IntEncoder.decode(t.substr(u,n.BitLength.maxId),n.BitLength.maxId);u+=n.BitLength.maxId;var d=r.IntEncoder.decode(t.charAt(u),n.BitLength.encodingType);if(u+=n.BitLength.encodingType,d===o.VectorEncodingType.RANGE){if(e=new s.Vector,1===i){if("1"===t.substr(u,1))throw new c.DecodingError("Unable to decode default consent=1");u++}var f=r.IntEncoder.decode(t.substr(u,n.BitLength.numEntries),n.BitLength.numEntries);u+=n.BitLength.numEntries;for(var p=0;p<f;p++){var v=h.BooleanEncoder.decode(t.charAt(u));u+=n.BitLength.singleOrRange;var b=r.IntEncoder.decode(t.substr(u,n.BitLength.vendorId),n.BitLength.vendorId);if(u+=n.BitLength.vendorId,v){var m=r.IntEncoder.decode(t.substr(u,n.BitLength.vendorId),n.BitLength.vendorId);u+=n.BitLength.vendorId;for(var g=b;g<=m;g++)e.set(g)}else e.set(b)}}else{var y=t.substr(u,l);u+=l,e=a.FixedVectorEncoder.decode(y,l)}return e.bitLength=u,e},t.buildRangeEncoding=function(t){var i=t.length,e=r.IntEncoder.encode(i,n.BitLength.numEntries);return t.forEach(function(t){var i=1===t.length;e+=h.BooleanEncoder.encode(!i),e+=r.IntEncoder.encode(t[0],n.BitLength.vendorId),i||(e+=r.IntEncoder.encode(t[1],n.BitLength.vendorId))}),e},t}();i.VendorVectorEncoder=u},function(t,i,e){"use strict";var s;Object.defineProperty(i,"S",{value:!0}),(s=i.VectorEncodingType||(i.VectorEncodingType={}))[s.FIELD=0]="FIELD",s[s.RANGE=1]="RANGE"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"S",{value:!0}),s(e(145)),s(e(146))},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0}),i.Subscription=void 0;var s=function(){function t(t,i){this.handler=t,this.isOnce=i,this.isExecuted=!1}return t.prototype.execute=function(t,i,e){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;t?setTimeout(function(){s.apply(i,e)},1):s.apply(i,e)}},t}();i.Subscription=s},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(64),n=e(36),r=e(41),h=e(148),a=function(){function t(){}return t.encode=function(t,i){var e,n,r="";return t=s.SemanticPreEncoder.process(t,i),(n=Array.isArray(null===(e=i)||void 0===e?void 0:e.segments)?i.segments:new s.SegmentSequence(t,i)[""+t.version]).forEach(function(i,e){var h="";e<n.length-1&&(h="."),r+=s.SegmentEncoder.encode(t,i)+h}),r},t.decode=function(t,i){var e=t.split("."),a=e.length;i||(i=new h.TCModel);for(var o=0;o<a;o++){var c=e[o],u=s.Base64Url.decode(c.charAt(0)).substr(0,s.BitLength.segmentType),l=n.SegmentIDs.ID_TO_KEY[r.IntEncoder.decode(u,s.BitLength.segmentType).toString()];s.SegmentEncoder.decode(c,i,l)}return i},t}();i.TCString=a},function(t,i,e){"use strict";var s=e(151).decodeConsentString;t.exports={decodeConsentString:s}},function(t,i,e){"use strict";e.d(i,"a",function(){return D});var s=e(0),n=e.n(s),r=e(5),h=e(8),a=e(2),o=e(119),c=e(115),u=e(81),l=e(82),d=e(22),f=e(21),p=e(32),v=e(1),b=e(6),m=e(13),g=e(83),y=e(35),w=e(48),x=e(84),k=e(116),S=e(117),O=e(26),_=e(25),j=e(85),A=e(19),I=e(14),C=e(4),T=e(86),P=e(120),M=e(118),E=e(44),L=e(47),R=e(31);const B="player_instance";class D extends A.a{constructor(t,i,e,s,n,r){super(),this.services=t,this.GLOBAL=i,this.ns=e,this.rs=s,this.Ss=n,this.readyCallback=r,this.Os={},this._s="<cnx-placeholder></cnx-placeholder>",this.js=100,this.As=1e3,this.isServerlessMode=!1,this.Is=!1,this.Cs=[],this.Ts="{{omidVerificationClient}}",this.ns&&this.Ps(),this.Es=L.a.detectUsingCSS(this.GLOBAL),this.Ls=Object(a.o)(this.GLOBAL)}Rs(){const t={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(t.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(t.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(t.customParam3=this.externalAttributes.customParam3),this.externalAttributes.settings.useExternalViewabilityService&&(t.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=t}Bs(t){const i=this.GLOBAL.frameElement;if(!Object(a.B)(i))return;let e=!0;i&&t&&(e=!1),e?Object(a.u)(i):Object(a.M)(i)}Ds(t,i){try{return this.Fs(t,i)}catch(t){return null}}Vs(t){let i;try{i=eval(t)}catch(e){i=t.replace(/\[(\d+)]/g,":nth-child($1)")}return i}Us(t,i){const e=this.Ds(t,i);return null===e?new Promise(e=>{setTimeout(()=>{e(this.Us(t,i))},this.js)}):Promise.resolve(e)}Ns(t,i){const e=this.Vs(t);return Promise.resolve(this.Us(e,i))}Fs(t,i){let e;return t.split(/(\.cnxEq\(\d+\))/).filter(t=>t).forEach(t=>{e=-1===t.indexOf("cnxEq")?e?e.querySelectorAll(t):Object(a.G)(t,i):this.$s(e,t)}),e?(e.hasOwnProperty("length")&&(e=e.length>0?e[0]:null),e):null}$s(t,i){const e=/\d+/g.exec(i),s=parseInt(e[0],10);return s>t.length?Object(b.c)(t)[t.length-1]:Object(b.c)(t)[s]}Hs(){return this.rs?s.ProtoImplementationType.Amp:s.ProtoImplementationType.Web}qs(t,i){const e=Object(h.f)(this.GLOBAL);let s;return s=Object(v.a)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering.forceInsertPath:i.forceInsertPath,new Promise((n,r)=>{let h=Object(a.f)(this._s,this.GLOBAL);if(s||t.tag.parentNode===this.GLOBAL.document.head&&(!e.topChildFrame||i.renderInFrame)){let t,s,r;e.topChildFrame&&Object(a.H)(e.topChildFrame.frameElement,C.h.DisplayNone),t=Object(v.h)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering.containerSelector:i.containerSelector,s=Object(v.a)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering.insertPosition:i.insertPosition,r=Object(v.a)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering.position:i.position,this.Ns(t,e.topFrame).then(t=>{this.zs(t,h,s,r),n({insertContainer:h,insertWindow:e.topFrame})})}else e.topChildFrame&&!i.renderInFrame?(h=Object(a.f)(this._s,e.topFrame),e.topChildFrame.frameElement.parentNode.insertBefore(h,e.topChildFrame.frameElement),Object(a.a)(e.topChildFrame.frameElement,C.h.DisplayNone),n({insertContainer:h,insertWindow:e.topFrame})):(t.tag.parentNode.insertBefore(h,t.tag),n({insertContainer:h}))})}Gs(t,i,e){Object(a.v)(i,t,e)}Ws(t,i,e){switch(e){case s.ProtoPlayerInsertMode.BeforeContainer:t.parentElement.insertBefore(i,t);break;case s.ProtoPlayerInsertMode.ReplaceContainer:t.parentElement.insertBefore(i,t),Object(a.I)(t);break;case s.ProtoPlayerInsertMode.HideContainer:t.parentElement.insertBefore(i,t),Object(a.u)(t);break;case s.ProtoPlayerInsertMode.AfterContainer:t.nextElementSibling?t.parentElement.insertBefore(i,t.nextElementSibling):t.parentElement.appendChild(i)}}zs(t,i,e,n){e===s.ProtoPlayerInsertMode.WithinContainer?this.Gs(t,i,n):this.Ws(t,i,e)}Js(t,i=[]){t.lineItems=[...t.lineItems,...i];const e=t.lineItems.length;t.lineItems=Object(b.e)("advertiserLineItemId",t.lineItems);const n=this.GLOBAL.cnxOverrideLineitems;this.queryParams.cnxOverrideLineitems&&Object(b.h)(n)&&t.lineItems.forEach((i,e)=>{const s=n.find(({advertiserLineItemId:t})=>t===i.advertiserLineItemId);s&&(t.lineItems[e]=Object.assign(Object.assign({},i),s))}),e!==t.lineItems.length&&Object(r.a)({level:s.ProtoLoggingLevelEnum.WARNING,message:"Loader_duplicated_adsources",callStack:"_"})}Qs(t,i){const e=t.players[i],{playerModel:n,globalDomUtilsService:a}=this.Os[i];if(this.Es||this.services.UserManagerService.setThirdPartySyncUrls(t.cookieSyncUrls),this.services.UserManagerService.setGeoLocation(t.geoLocation),p.a.sessionId=e.sessionId,this.Ys.addPlayerSession(e.playerId,e.sessionId),!n)return void this.registerApiError(m.a.SetupError,"No playlist was provided!");const o=new l.a({browser:t.browser,geoLocation:t.geoLocation,pageUrl:this.pageUrl,playerId:n.playerId,explorationMode:t.explorationMode,bundleID:this.externalAttributes._appSettings.bundleID,appID:this.externalAttributes._appSettings.appID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,deviceId:this.externalAttributes._appSettings.deviceID,isRecyclerViewIntegration:this.externalAttributes._appSettings.isRecyclerViewIntegration}),d=o.browser.browserType===_.a.InternetExplorer,f=new g.a(a),b=this.getViewabilityService(n,f,d),y=this.Es;if(this.Es=L.a.detectUsingCSS(n.global),y!==this.Es&&Object(r.a)({message:"Loader_adBlockerDetection_changed_after_new_global",throttle:2,sendMaxLog:!1,level:s.ProtoLoggingLevelEnum.INFO,exception:`${y}`}),this.Es){Object(h.k)([95,5])&&Object(r.a)({message:"Loader_adBlockerDetected",throttle:2,sendMaxLog:!1,level:s.ProtoLoggingLevelEnum.INFO})}const x=new u.a(n,t.geoLocation,o.pageUrl,o.pageDomain,this.externalAttributes._appSettings,this.Ls),k={services:{GlobalDomUtilsService:a,ViewabilityService:b,TrackingService:this.Ks(n,t,i),ResizeObserver:new c.a(n.global),UserManagerService:this.services.UserManagerService,MacrosService:x,EventsStorageService:this.services.EventsStorageService,PageFocusService:f,InteractionService:new M.a(n.global,o.isMobile),TimeLogService:this.services.TimeLogService},config:o};k.services.UserManagerService.setPageUrl(k.config.pageUrl);const S=this.Hs();k.services.TrackingService.setImplementationTypeOnMeta(S),n.externalMacros&&k.services.MacrosService.addExtraMacros(n.externalMacros),k.services.UserManagerService.onEvent([w.a.CCPA_INFO_RECEIVED]).then(()=>{k.services.MacrosService.setUsPrivacyString(k.services.UserManagerService.getUsPrivacyString())}),k.services.UserManagerService.onEvent([w.a.CONSENT_DATA_UPDATE]).then(()=>{k.services.TrackingService.updateMetadataModel({userId:k.services.UserManagerService.getTrackableUser()});const t=k.services.UserManagerService.getConsentPayload();if(k.services.TrackingService.hasGdprConsentPayload=Object(v.h)(t),this.services.UserManagerService.gdprConsentMode===s.ProtoGdprConsentModeEnum.NoConsent||this.ns){const t=n.lineItemSettings.lineItems.filter(t=>Object(v.h)(t.vendorId)).every(t=>this.services.UserManagerService.isConsent(t.vendorId));this.services.UserManagerService.gdprConsentMode=t?s.ProtoGdprConsentModeEnum.AllGood:s.ProtoGdprConsentModeEnum.NotAllDemandConsent}});const O={wasPlayerReloaded:this.Ys.wasPlayerReloaded(e.playerId),wasPlayerInView:this.Ys.getSessionInView(e.playerId)};this.renderer=this.getRendererInstance(n,k,this.Es,O,this.externalAttributes._appSettings),this.subscribe(I.c.SessionView,this.renderer,()=>{this.Ys.addSessionInView(e.playerId)}),this.subscribe(I.c.SessionRendered,this.renderer,()=>{if(this.Zs){const t=this.services.UserManagerService.getUserId();new P.a(x,a,this.Zs,t).addFraudSensorScript()}});const j=this.renderer.init(),A=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let C=e.customJsCode;if(C){const t=`${B}_${k.config.appId}`;this.GLOBAL[t]=A,C=C.cnx_replaceAll(`"{{${B}}}"`,`window.${t}`)}j?this.registerApiSuccess(A,C):this.registerApiError(m.a.RenderError,"Player size under supported value")}Ks(t,i,e){return t.disableTracking?new x.a:new o.a({userManagerService:this.services.UserManagerService,browser:i.browser,geoLocation:i.geoLocation,playerId:t.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:i.players[e].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3,abTestId:i.players[e].abTestId,explorationMode:i.explorationMode})}tn(t,i={useSafeMode:!0}){if(!t)return;const{global:e,useSafeMode:s}=i,n=e||this.GLOBAL;let r;r=s?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,Object(a.w)(n.document.head,n,r.trim())}Ps(){if(this.Ts.includes("{{omidVerificationClient"))return;const t={useSafeMode:!1,global:window};this.tn(decodeURI(this.Ts),t)}in(){const{playerId:t,parseDomain:i}=this.en;return this.nn(t,i).catch(t=>{const i=new Error(t);throw Object(r.a)({callStack:i.stack,level:s.ProtoLoggingLevelEnum.FATAL,exception:i.message,message:"Loader_player_id_call_get_pls"}),this.registerApiError(m.a.SetupError,"player data call error"),this.rn(),i})}hn(t){this.services.TimeLogService.add(this.en.playerId,R.a.OnPlsResponse);const{browser:i,userInformation:e}=t;if(this.services.UserManagerService.setUserInformation(e),this.services.UserManagerService.setBrowserInfo(i),e&&e.callFraudSensor){const{lookupId:t,lookupResponseCode:s,publisherAdsTxt:n}=e;this.Zs={lookupId:t,lookupResponseCode:s,publisherAdsTxt:n,deviceType:i.device}}y.a.serverAb0=t.serverAb0,y.a.serverAb1=t.serverAb1,Object(b.h)(t.players)?(t.players.length>1&&(this.Rs(),this.Is=!0),Object.keys(t.players).forEach(i=>{this.an(t,this.en,i)})):this.registerApiError(m.a.NoPlayer,`No player available for given player id:${this.en.playerId}`),this.rn()}rn(){this.cn(),this.un()}un(){setTimeout(()=>{if(!this.Is){const t=this.Cs[0];this.readyCallback&&this.readyCallback(t.apiErrorObj,t.apiConfigObj)}this.ln()})}ln(){this.Cs.filter(t=>t.apiErrorObj).forEach(()=>{this.services.EventsStorageService.emitRenderError()}),this.Cs.filter(t=>t.customJs).forEach(t=>{this.tn(t.customJs)})}an(t,i,e){const s=t.players[e],{playerModel:n}=this.Os[e];this.Bs(s.renderInFrame),this.Qs(t,e),this.dn(n,this.renderer.playerContainer)}nn(t,i=!1){let e={parseDomain:i,referrer:this.Ls,pageUrl:this.pageUrl,tokens:[t]};e.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(e.forceLineItemId=this.queryParams.cnxLineItemId),this.queryParams.cnxPlayerId?e.forcePlayerId=this.queryParams.cnxPlayerId:this.externalAttributes.settings._connatixInternals.skipServingRules&&(e.forcePlayerId=t),this.queryParams.cnxExplorationMode&&(e.forceExploration=!0);const{queryJsTargeting:s}=this.externalAttributes.settings;return Object(v.f)(s)&&Object.keys(s).length>0&&(e.queryJsTargeting=Object.keys(s).reduce((t,i)=>Object.assign(Object.assign({},t),{[i]:`${s[i]}`}),{})),e.customParam1=this.externalAttributes.customParam1,e.customParam2=this.externalAttributes.customParam2,e.customParam3=this.externalAttributes.customParam3,e.disableTracking=this.externalAttributes.settings._connatixInternals.disableTracking,e.version=f.a.version,e.es6=f.b,e.userId=this.services.UserManagerService.getForcedTrackableUser(),e.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),e.clientAb0=y.a.clientAb0,e.clientAb1=y.a.clientAb1,e.implementationType=this.Hs(),e.reloadedPlayers=this.Ys.getCookiePlayersSession(),e=Object.assign(Object.assign({},e),this.getSpecificRequestData()),this.en.playerId?this.getPlayerResponse(e,this.en.playerId||"serverless"):new Promise((t,i)=>{this.isServerlessMode=!0,t(this.defaultInitFromProto())})}pn(){const t=Object(d.b)("cnxVideoPosition",this.pageUrl),i=parseInt(Object(d.b)("cnxStoryPosition",this.pageUrl),10);return{cnxStoryId:Object(d.b)("cnxStoryId",this.pageUrl),cnxLineItemId:Object(d.b)("cnxLineItemId",this.pageUrl),cnxPlayerId:Object(d.b)("cnxPlayerId",this.pageUrl),cnxMediaId:Object(d.b)("cnxMediaId",this.pageUrl),cnxPlaylistId:Object(d.b)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:t?parseInt(t,10):null,cnxExplorationMode:"true"===Object(d.b)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:Object(v.e)(i)?i:null,cnxSkipAdsFlag:"true"===Object(d.b)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt(Object(d.b)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===Object(d.b)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===Object(d.b)("cnxIsSeoTraffic",this.pageUrl)}}dn(t,i){const e=this.getDelegateHandler();new k.a(this.GLOBAL,this.services.EventsStorageService,e,t,i).start()}vn(){const t=this.GLOBAL.OmidSessionClient&&this.GLOBAL.OmidSessionClient[O.j];t?this.bn=new S.a(t,this.services.EventsStorageService,this.externalAttributes._appSettings.sdkVersion):Object(r.a)({message:"OmidSessionClient not found.",level:s.ProtoLoggingLevelEnum.FATAL})}mn(t){const i=()=>new Promise((i,e)=>{const s=this.gn();t.addCssStylesheetToHead(s,()=>i(),t=>e(t))});return Object(h.j)(()=>i()).catch(t=>{throw Object(r.a)({message:"Loader_add_css_link",exception:t,level:s.ProtoLoggingLevelEnum.INFO}),new Error(t)})}updateQueryParams(){this.queryParams=this.pn()}loadScriptTag(t,i){let e;if(this.externalAttributes=t,i&&(e=this.GLOBAL.document.getElementById(i)),!e)return Object(r.a)({message:"Loader_no_script_id",exception:`${t.playerId}`,level:s.ProtoLoggingLevelEnum.WARNING}),this.registerApiError(m.a.SetupError,"Could not locate any script tag ids in the page"),!1;const n=Object(v.f)(t.settings.plugins.adobeAnalyticsSettings);return this.Ss&&this.vn(),this.en={parseDomain:n,playerId:t.playerId,tag:e},!0}insertRenderer(){try{this.Ys=new j.a(this.queryParams.cnxReloadTime),this.Bs();const t=()=>{this.in().then(t=>{const i=[];t.players.forEach((e,n)=>{t.players[n].limitClientSideApiUse&&this.Rs();const h=this.qs(this.en,e).then(i=>{this.Js(e,t.lineItems);const s=this.getPlayerModel(i,t,n.toString()),r=new T.a(s.global);return Object(E.a)(s.lineItemSettings.lineItems),this.Os[n]={playerModel:s,globalDomUtilsService:r},this.mn(r)}).catch(t=>{this.registerApiError(m.a.SetupError,"rendering error"),Object(r.a)({message:"Loader_send_data_to_renderer",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL})});i.push(h)}),Promise.all(i).then(()=>this.hn(t))})};this.cn=this.services.UserManagerService.registerPlsCall(t)}catch(t){Object(r.a)({message:"Loader_insert_renderer",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL})}}findPageUrl(t,i){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=i||Object(h.e)(Object(h.f)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return new Promise(e=>{setTimeout(()=>{this.findPageUrl(t,i).then(()=>e())},this.As)});try{return this.pageUrl=Object(d.d)(this.pageUrl),Promise.resolve()}catch(t){return Object(r.a)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL}),Promise.reject()}}registerApiError(t=m.a.SetupError,i=""){this.Cs.push({apiErrorObj:{type:t,message:i}})}registerApiSuccess(t,i){this.Cs.push({apiConfigObj:t,customJs:i})}}},function(t,i,e){"use strict";e.d(i,"a",function(){return u});var s,n=e(0),r=e(8),h=e(2),a=e(30),o=e(23),c=e(1);!function(t){t.AppUrl="APP_URL",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.Uuid="UUID",t.PageUrl="PAGE_URL",t.AdPosition="AD_POSITION",t.VideoTitle="VIDEO_TITLE",t.MediaTitle="MEDIA_TITLE",t.VideoDuration="VIDEO_DURATION",t.ContentLength="CONTENT_LENGTH",t.VideoDescription="VIDEO_DESCRIPTION",t.VideoUrl="VIDEO_URL",t.VideoId="VIDEO_ID",t.VideoTime="VIDEO_TIME",t.DescriptionUrl="DESCRIPTION_URL",t.VideoKeywords="VIDEO_KEYWORDS",t.Autoplay="AUTOPLAY",t.UserAgent="UA",t.Ip="IP",t.CashBuster="CB",t.Width="WIDTH",t.Height="HEIGHT",t.Domain="DOMAIN",t.SourceReferrer="SOURCE_REFERRER",t.Gdpr="GDPR",t.GdprConsent="GDPR_CONSENT",t.Consent="CONSENT",t.Ctd="CTD",t.Publisher="PUBLISHER",t.Random="RAND",t.Site="SITE",t.SubId="SUB_ID",t.Url="URL",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.UsPrivacyString="US_PRIVACY",t.DoNotTrack="DNT",t.FraudSensorUserId="FS_USER_ID",t.PublisherId="PUBLISHER_ID",t.SessionId="SESSION_ID",t.FraudSensorDeviceType="FS_DEVICE_TYPE",t.FraudSensorLookupId="MGID",t.FraudSensorLookupResponseCode="MGTO",t.FraudSensorMediaType="FS_MEDIA_TYPE",t.CnxSupplierId="CNX_SUPPLIER_ID"}(s||(s={}));class u{constructor(t,i,e,r,h,a){this.yn=new Map,this.wn="[",this.xn="]",this.yn.set(s.Autoplay,t.playbackMode===n.ProtoPlayerPlaybackModeEnum.Autoplay),this.yn.set(s.UserAgent,navigator.userAgent),this.yn.set(s.UserLong,i.lon),this.yn.set(s.UserLat,i.lat),this.yn.set(s.Ip,i.ip),this.kn(h),this.Sn(a),this._n(e),this.jn(),this.yn.set(s.Domain,r),this.yn.set(s.CnxSupplierId,o.f),this.yn.set(s.SessionId,t.sessionId)}kn(t){this.yn.set(s.AppBundle,t.bundleID),this.yn.set(s.AppName,t.appName),this.yn.set(s.AppUrl,t.storeURL)}Sn(t){this.yn.set(s.SourceReferrer,t)}jn(){const t=Object(h.A)()?1:0;this.yn.set(s.DoNotTrack,t)}_n(t){this.yn.set(s.PageUrl,t),this.yn.set(s.Url,t),this.yn.set(s.Publisher,t),this.yn.set(s.Site,t),this.yn.set(s.DescriptionUrl,t)}An(){const t=Object(r.d)(2);this.yn.set(s.CashBuster,t),this.yn.set(s.Random,t),this.yn.set(s.Ctd,t)}In(t){return t.split("?")[0]}Cn(t){return t.split("?").slice(1).join("?")}Tn(t,i,e){return 0===t.indexOf(i)&&t.indexOf(e,e.length)===t.length-i.length}Pn(t,i){const e=this.In(t),s=this.Mn(this.Cn(t),i);return`${e}${s?`?${s}`:""}`}Mn(t,i,e=!1){let s=t;return s.split("&").forEach(t=>{const n=t.split("=");if(n[1])if(this.Tn(n[1],this.wn,this.xn))s=s.replace(n[1],this.En(n[1].toLowerCase(),i,e));else if(decodeURIComponent(n[1]).split("=").length>1){const t=this.Mn(decodeURIComponent(n[1]),i,!0);s=s.replace(n[1],encodeURIComponent(t))}}),this.Ln(s)}Ln(t){return t.indexOf(this.wn)>-1&&(t=t.cnx_replaceAll(this.wn,encodeURIComponent(this.wn))),t.indexOf(this.xn)>-1&&(t=t.cnx_replaceAll(this.xn,encodeURIComponent(this.xn))),t}En(t,i,e){let s,n=t;return i.forEach((t,i)=>{for(;n.indexOf(this.wn+i.toLowerCase()+this.xn)>-1;)s=e?t:encodeURIComponent(t),n=n.replace(this.wn+i.toLowerCase()+this.xn,s)}),n}setAdWidth(t){this.yn.set(s.Width,Math.floor(t))}setAdHeight(t){this.yn.set(s.Height,Math.floor(t))}setSubId(t){this.yn.set(s.SubId,t)}setGDPR(t){this.yn.set(s.Gdpr,t)}setUUID(t){this.yn.set(s.Uuid,t)}setGDPRConsent(t){this.yn.set(s.GdprConsent,t)}setConsent(t){this.yn.set(s.Consent,t)}setVideoId(t){this.yn.set(s.VideoId,t)}setVideoTime(t){this.yn.set(s.VideoTime,Math.floor(t))}setVideoUrl(t){this.yn.set(s.VideoUrl,t)}setVideoDescription(t){this.yn.set(s.VideoDescription,t)}setVideoDuration(t){this.yn.set(s.VideoDuration,t),this.yn.set(s.ContentLength,t)}setVideoTitle(t){let i;this.yn.set(s.VideoTitle,t),this.yn.set(s.MediaTitle,t),t&&(i=t.split(" ").join(",")),this.yn.set(s.VideoKeywords,i)}setAdPosition(t="midRoll"){this.yn.set(s.AdPosition,t)}setupMacros(t){return this.An(),this.Pn(t,this.yn)}addExtraMacros(t){const i=Object(a.a)(s);Object.keys(t).filter(t=>!i.includes(t.toUpperCase())).forEach(i=>{this.yn.set(i,t[i])})}getExtraMacros(){const t=Object(a.a)(s),i={};return this.yn.forEach((e,s)=>{t.includes(s)||null==e||(i[s]=Object(c.h)(e)?e:JSON.stringify(e))}),i}setUsPrivacyString(t){const i=t||"";this.yn.set(s.UsPrivacyString,i)}setUserId(t){this.yn.set(s.FraudSensorUserId,t)}setPublisherId(t){this.yn.set(s.PublisherId,t)}setFraudSensorMacros(t){this.yn.set(s.FraudSensorDeviceType,t.deviceType),this.yn.set(s.FraudSensorLookupId,t.lookupId),this.yn.set(s.FraudSensorLookupResponseCode,t.lookupResponseCode),this.yn.set(s.FraudSensorMediaType,t.mediaType)}destroy(){}}},function(t,i,e){"use strict";e.d(i,"a",function(){return o});var s=e(20),n=e(8),r=e(25),h=e(22),a=e(1);class o{constructor(t){this.Rn=t,this.Bn=100,this.Dn=Object(n.f)(window).topFrame,this.Fn=s.a.indexOf(this.Rn.browser.device)>-1,this.Vn=Object(n.d)(1),this.Un={browserType:this.Nn(),browserVersion:this.Rn.browser.browserVersion},this.$n=this.Hn(),this.qn=this.pageUrl.substr(0,this.Bn),this.zn=Object(h.a)(this.qn)}Nn(){let t;return Object.keys(r.a).forEach(i=>{this.Rn.browser.browserType.toLowerCase().indexOf(r.a[i])>-1&&(t=r.a[i])}),t}Hn(){let t,i=0;const e=this.Rn.browser.osCode.split("_"),n=e[0].toLowerCase();return Object.keys(s.b).forEach(i=>{n.indexOf(s.b[i])>-1&&(t=s.b[i])}),e.length>1&&(i=parseFloat(`${e[1]||0}.${e[2]||0}`)),{os:t,osVersion:i}}get device(){return this.Rn.browser.device}get browser(){return this.Un}get os(){return this.$n}get geoLocation(){return this.Rn.geoLocation}get pageUrl(){return this.Rn.pageUrl||""}get pageUrlTrunc(){return this.qn}get pageDomain(){return this.zn}get isMobile(){return this.Fn}get isInApp(){return Object(a.h)(this.Rn.bundleID)}get isInAppAndroid(){return this.isInApp&&this.os.os===s.b.Android}get playerId(){return this.Rn.playerId}get appId(){return this.Vn}get bundleID(){return this.Rn.bundleID}get iOSAppID(){return this.Rn.appID}get domainURL(){return this.Rn.domainURL}get storeURL(){return this.Rn.storeURL}get explorationMode(){return this.Rn.explorationMode}get appName(){return this.Rn.appName}get appCategories(){return this.Rn.appCategories}get appVersion(){return this.Rn.appVersion}get appPrivacyPolicy(){return this.Rn.appPrivacyPolicy}get appIsPaid(){return this.Rn.appIsPaid}get deviceId(){return this.Rn.deviceId}get topWindow(){return this.Dn}get isRecyclerViewIntegration(){return this.Rn.isRecyclerViewIntegration}}},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return r}),function(t){t.hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden"}(s||(s={})),function(t){t.visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange"}(n||(n={}));class r{constructor(t){this.Gn=t,this.Wn=[],this.Jn(),this.Qn()}on(t){this.Wn.push(t),t(this.isDocumentVisible())}off(t){this.Wn=this.Wn.filter(i=>i!==t)}Jn(){void 0!==this.Gn.getDocumentProperty(s.hidden)?(this.Xn=s.hidden,this.Yn=n.visibilitychange):void 0!==this.Gn.getDocumentProperty(s.msHidden)?(this.Xn=s.msHidden,this.Yn=n.msvisibilitychange):void 0!==this.Gn.getDocumentProperty(s.webkitHidden)&&(this.Xn=s.webkitHidden,this.Yn=n.webkitvisibilitychange)}Qn(){this.Gn.addEventListenerOnGlobal(this.Yn,()=>{this.Wn.forEach(t=>{t(this.isDocumentVisible())})},!0,!1)}isDocumentVisible(){return!this.Gn.getDocumentProperty(this.Xn)}}},function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{setNewMedia(){}updateMediaMetadata(){}setMediaStart(){}setContentStart(){}setSessionPlayback(){}setSessionViewability(){}trackSessionRendered(){}trackSessionViewability(){}trackMediaQuartile(){}trackMediaClick(){}setAdViewability(){}setAdViewabilityDelay(){}setAdStart(){}startBidRequests(){}addPrebid(){}addPostBid(){}addBid(){}adFinished(){}trackVideoAdImpression(){}trackVideoAdQuartile(){}trackAdClick(){}trackAdOpportunity(){}getMetadataModel(){}updateMetadataModel(){}setIsConsentPayload(){}destroy(){}publish(){}setImplementationTypeOnMeta(){}addPlatformCappedLineItemSubscriber(){}removePlatformCappedLineItemSubscriber(){}setImpressionRevenueSubscriber(){}unsubscribeToImpressionRevenue(){}}},function(t,i,e){"use strict";e.d(i,"a",function(){return a});var s=e(8),n=e(5),r=e(0),h=e(10);class a{constructor(t){this.RELOAD_TIME=h.a,this.RELOAD_COOKIES="cnx_player_reload",this.SESSION_IN_VIEW_FLAG="_sessionWasViewed",this.Kn={},this.Zn={},this.tr={},this.Dn=Object(s.f)(window).topFrame,this.ir(t);try{this.er()}catch(t){Object(n.a)({message:"PlayerReloader_cookie_fetch_failed",level:r.ProtoLoggingLevelEnum.WARNING,exception:t})}}wasPlayerReloaded(t){return!!this.Kn[t]}addPlayerSession(t,i){this.Zn[t]=i}getCookiePlayersSession(){return this.Kn}addSessionInView(t){this.Zn[t]+=this.SESSION_IN_VIEW_FLAG}getSessionInView(t){return this.tr[t]}ir(t){setTimeout(()=>{this.sr(),this.Dn.location.reload()},t||this.RELOAD_TIME)}er(){decodeURIComponent(this.Dn.document.cookie).split(";").forEach(t=>{const i=t.split("=");i[0].indexOf(this.RELOAD_COOKIES)>-1&&(this.Kn=JSON.parse(i[1]))}),this.nr(),this.rr()}nr(){Object.keys(this.Kn).forEach(t=>{const i=this.Kn[t].indexOf(this.SESSION_IN_VIEW_FLAG);i>-1&&(this.Kn[t]=this.Kn[t].substr(0,i),this.tr[t]=!0)})}rr(){this.Dn.document.cookie=`${this.RELOAD_COOKIES}=; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/`}sr(){Object.keys(this.tr).forEach(t=>{-1===this.Zn[t].indexOf(this.SESSION_IN_VIEW_FLAG)&&this.addSessionInView(t)});const t=new Date;let i=t.getTime();i+=h.g*h.f,t.setTime(i),this.Dn.document.cookie=`${this.RELOAD_COOKIES}=${JSON.stringify(this.Zn)}; expires=${t.toUTCString()}; path=/`}}},function(t,i,e){"use strict";e.d(i,"a",function(){return l});var s=e(8),n=e(2),r=e(17),h=e(6),a=e(5),o=e(0),c=e(15),u=e(1);class l{constructor(t){this.createElement=(t,i=this.ue)=>i.document.createElement(t),this.ue=t,this.addPreconnect()}initHls(t){return t.cnxRenderWindow=this.ue,new c(t)}addCssString(t,i=""){return Object(n.b)(t,i,this.ue)}addPreconnect(){Object(n.c)(r.a.endPoints.base.video,this.ue),Object(n.c)(r.a.endPoints.base.core,this.ue),Object(n.c)(r.a.endPoints.base.image,this.ue)}getLineHeightPropertyValue(t){return Object(n.k)(t,this.ue).getPropertyValue("line-height")}getFontSizePropertyValue(t){return Object(n.k)(t,this.ue).getPropertyValue("font-size")}getFontWeightPropertyValue(t){return Object(n.k)(t,this.ue).getPropertyValue("font-weight")}getTransformPropertyValue(t){return Object(n.k)(t,this.ue).getPropertyValue("transform")}getPaddingTopPropertyValue(t){return Object(n.k)(t,this.ue).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(t){return Object(n.k)(t,this.ue).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(t){return Object(n.k)(t,this.ue).getPropertyValue("margin-top")}getMarginBottomPropertyValue(t){return Object(n.k)(t,this.ue).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(t){return Object(n.k)(t,this.ue).getPropertyValue("margin-left")}getMarginRightPropertyValue(t){return Object(n.k)(t,this.ue).getPropertyValue("margin-right")}createElementByString(t,i=this.ue){return Object(n.f)(t,i)}createDocumentFragment(t=this.ue){return t.document.createDocumentFragment()}isHttpsProtocolUsed(){return Object(n.C)(this.ue)}isURLSameDomainToTop(t){return Object(n.D)(t,this.ue)}isDetachedFromDOM(t){let i=t;for(;i.parentNode;)if((i=i.parentNode)===this.ue.document.body)return!1;return!0}querySelector(t,i=this.ue){let e;try{e=i.document.querySelector(t)}catch(t){}return e}addCssStylesheetToHead(t,i,e){const s=this.ue.document;s.getElementById(t.id)?Object(u.b)(i)&&i():Object(n.y)(t,s.head,this.ue,i,e)}getFullscreenKeys(t){return Object(n.n)(t||this.ue.document)}exitFullscreen(t,i){(i||this.ue.document)[t]()}getDocumentProperty(t){return this.ue.document[t]}addEventListenerOnGlobal(t,i,e,s=!1){(e?this.ue.document:this.ue).addEventListener(t,i,s)}removeEventListenerOnGlobal(t,i,e,s=!1){(e?this.ue.document:this.ue).removeEventListener(t,i,s)}trackWithImages(t,i){Object(s.l)(t,this.ue,i)}getElementCoordinates(t){let{top:i,left:e}=t.getBoundingClientRect();const{width:s,height:n}=t.getBoundingClientRect(),r=this.ue.pageYOffset;return{clientX:e+=this.ue.pageXOffset,clientY:i+=r,width:s,height:n}}requestAnimationFrameHelper(t){return Object(n.K)(this.ue,t)}cancelRequestAnimationFrame(t){return Object(n.e)(this.ue,t)}getGlobalLocationProperties(){const t=this.ue.location;return{hostname:t.hostname,pathname:t.pathname,href:t.href,protocol:t.protocol,host:t.host,port:t.port,search:t.search,hash:t.hash}}open(t,i){this.ue.open(t,i)}getComputedTranslateX(t){let i=0;const e=Object(n.k)(t,this.ue).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return Object(h.h)(e)&&(i=parseFloat(e[1].split(", ")[4])),i}getBodyDimensions(){try{const t=Object(s.f)(this.ue).topFrame.document.body;let{offsetWidth:i,offsetHeight:e}=t;const r=Object(n.k)(t,this.ue);return{width:i+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10),height:e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}}catch(t){return Object(a.a)({message:"DomUtils_error_getting_body_dimensions",exception:t.message,callStack:t.stack,level:o.ProtoLoggingLevelEnum.FATAL}),{width:0,height:0}}}getViewportWidth(){return Object(s.f)(this.ue).topFrame.innerWidth}getViewportHeight(){return Object(s.f)(this.ue).topFrame.innerHeight}getGlobalClosestTop(){return Object(s.f)(this.ue)}stripHtmlTags(t){return Object(n.N)(t,this.ue)}getComputedStyle(t,i){return Object(n.k)(t,this.ue,i)}getElementById(t){return Object(n.l)(t,this.ue)}getElementsByClassName(t){return Object(n.m)(t,this.ue)}insertScript(t,i,e){this.ue.document.getElementById(t.id)?Object(u.b)(i)&&i():Object(n.x)(t,this.ue.document.head,this.ue,i,null,!0,e)}destroy(){}}},function(t,i){t.exports='<cnx class=cnx-g-card> <cnx class=cnx-g-triangle></cnx> <cnx class=cnx-g-card-image></cnx> <cnx class=cnx-g-card-text-container> <cnx class=cnx-g-card-text></cnx> </cnx> <cnx class=cnx-g-card-icon> <cnx class=cnx-ui-btn> <cnx class="cnx-icon-button cnx-ui-btn-hoverable cnx-mod-hover"> <cnx class=cnx-btn-container> <cnx class=cnx-play-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule=evenodd /></svg> </cnx> </cnx> </cnx> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-tooltip-holder cnx-color-tt-bg"> <cnx class="cnx-tooltip-text cnx-color-tt-text">TEST</cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-button-settings cnx-context-controller cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-settings-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewBox="0 0 22 22"><path d="M18.454 5.847l-2.642 1.05-1.03-.784c-.444-.338-.904-.603-1.39-.8l-1.205-.488-.404-2.786h-1.563l-.404 2.786-1.205.488c-.465.188-.93.46-1.413.817L6.17 6.9 3.546 5.847l-.783 1.34 2.232 1.727-.16 1.266c-.042.33-.062.59-.062.82s.02.49.062.82l.16 1.266-2.233 1.727.783 1.34 2.642-1.05 1.03.784c.444.338.904.603 1.39.8l1.205.488.404 2.786h1.563l.404-2.786 1.205-.488c.465-.188.93-.46 1.413-.817l1.025-.76 2.625 1.043.783-1.34-2.233-1.727.16-1.266c.043-.337.062-.584.062-.82s-.02-.483-.062-.82l-.16-1.266 2.233-1.727-.783-1.34zm.71 6.227l2.32 1.81c.21.164.264.46.132.702l-2.198 3.793c-.132.24-.418.34-.67.24l-2.736-1.096c-.57.427-1.187.8-1.857 1.074l-.418 2.905c-.033.263-.264.46-.538.46H8.802c-.275 0-.506-.197-.538-.46l-.418-2.905c-.67-.274-1.286-.636-1.857-1.074l-2.736 1.096c-.242.088-.538 0-.67-.24L.385 14.584c-.132-.24-.077-.537.132-.702l2.32-1.81A8.67 8.67 0 0 1 2.758 11a8.67 8.67 0 0 1 .077-1.074l-2.32-1.81a.54.54 0 0 1-.132-.702l2.198-3.793c.132-.24.418-.34.67-.24L5.99 4.478c.57-.427 1.187-.8 1.857-1.074L8.264.5c.033-.263.264-.46.538-.46h4.396c.275 0 .506.197.538.46l.418 2.905c.67.274 1.286.636 1.857 1.074l2.736-1.096c.242-.088.538 0 .67.24l2.198 3.793c.132.24.077.537-.132.702l-2.32 1.81A8.52 8.52 0 0 1 19.242 11a8.52 8.52 0 0 1-.077 1.074zM11 14.256A3.26 3.26 0 0 0 14.256 11 3.26 3.26 0 0 0 11 7.744 3.26 3.26 0 0 0 7.744 11 3.26 3.26 0 0 0 11 14.256zm0-2A1.26 1.26 0 0 1 9.744 11 1.26 1.26 0 0 1 11 9.744 1.26 1.26 0 0 1 12.256 11 1.26 1.26 0 0 1 11 12.256z"/></svg> </cnx> <cnx class=cnx-hd-flag> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 17 11"><g fill=none><rect class=cnx-color-accent width=17 height=11 rx=2 fill=#09F /><path class=cnx-color-icon d="M8 9L6.9 9 6.9 5.9 4.1 5.9 4.1 9 3 9 3 2 4.1 2 4.1 4.9 6.9 4.9 6.9 2 8 2 8 9ZM10 9L10 2 12 2C12.6 2 13.1 2.2 13.6 2.4 14 2.7 14.4 3.1 14.6 3.6 14.9 4.1 15 4.7 15 5.3L15 5.7C15 6.4 14.9 6.9 14.6 7.4 14.4 7.9 14 8.3 13.5 8.6 13.1 8.9 12.5 9 11.9 9L10 9ZM11 3L11 8 12.2 8C12.8 8 13.2 7.8 13.5 7.4 13.8 7 14 6.4 14 5.7L14 5.3C14 4.6 13.8 4 13.5 3.6 13.2 3.2 12.8 3 12.2 3L11 3Z"/></g></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-up-next-container cnx-hide-on-single-video"> <cnx class=cnx-up-next-box> <cnx class=cnx-up-next-box-image> <img/> </cnx> <cnx class=cnx-up-next-box-gradient></cnx> <cnx class=cnx-up-next-box-text></cnx> <cnx class=cnx-up-next-box-button> <cnx class=cnx-up-next-box-button-text>NEXT</cnx> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-progress-bar cnx-video-progress"> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-accent"></cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-context"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports="<cnx class=cnx-captions> <cnx class=cnx-captions-container> <cnx-span class=cnx-captions-text-holder></cnx-span> </cnx> </cnx> "},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-icon"></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-icon"></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-expand-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-collapse-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" fill-rule=evenodd><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-quality"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<svg viewBox="0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>'},function(t,i){t.exports='<cnx class="cnx-ui-btn cnx-skip-ad-container"> <cnx class="cnx-icon-button cnx-skip-ad-button"> <cnx class=cnx-skip-ad-text> Skip <cnx-span></cnx-span> </cnx> <cnx class=cnx-skip-ad-icon> <svg markup-inline viewBox="0 0 24 24" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-timer-loader> <svg markup-inline viewBox="0 0 28 28" xmlns=http://www.w3.org/2000/svg viewBox="0 0 28 28"><circle class=cnx-svg-circle-stroke cx=14 cy=14 r=13 /></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"></path></svg>'},function(t,i){t.exports="<cnx class=cnx-pod-loading-screen-container> <img class=cnx-pod-loading-background /> <cnx class=cnx-pod-loading-info> <cnx class=cnx-pod-open-new-icon> </cnx> <cnx class=cnx-pod-visit-website-text> <cnx-span>Visit Advertiser website</cnx-span> </cnx> <cnx class=cnx-pod-read-more-container> <cnx-span class=cnx-pod-read-more-btn>GO TO PAGE</cnx-span> </cnx> </cnx> <cnx class=cnx-pod-loading-fallback> <cnx class=cnx-pod-loading-spinner></cnx> <cnx-span class=cnx-pod-slot-count-text></cnx-span> </cnx> </cnx>"},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.9 12.7c.05-.23.1-.46.1-.7s-.04-.47-.1-.7l7.05-4.1c.54.5 1.25.8 2.04.8 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.1.7L8.04 9.8C7.5 9.3 6.8 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.8 0 1.5-.3 2.04-.8l7.12 4.16a2.82 2.82 0 0 0-.08.65c0 1.6 1.3 2.92 2.92 2.92s2.92-1.3 2.92-2.92-1.3-2.92-2.92-2.92z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-icon-button> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="nonzero"><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill="#FFF"></path><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill="#FF4047"></path><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill="#FFF"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill="#FFF" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(t,i){t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><rect class="cnx-live-icon-svg-rectangle" transform="rotate(90 22.06 21.43)" x="20.059" y="15.929"></rect><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(t,i){t.exports='<cnx class="cnx-live-poster cnx-mod-active"> <cnx class=cnx-live-broadcast> <cnx class=cnx-live-icon> <svg class=cnx-live-icon-starting markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=none fill-rule=nonzero><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill=#FFF /><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill=#FF4047 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill=#FFF /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill=#FFF transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> <svg class=cnx-live-icon-ended markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=#FFF fill-rule=evenodd><rect class=cnx-live-icon-svg-rectangle transform="rotate(90 22.06 21.43)" x=20.059 y=15.929 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> </cnx> <cnx class=cnx-live-message> <cnx-span></cnx-span> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-live-badge-wrapper cnx-d-md-none"> <cnx class=cnx-ui-live-badge> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 37 9" fill-rule=nonzero><path d="M15.223 9V7.816H11.35V.47H9.868V9h5.356zm3.7 0V.47h-1.477V9h1.477zm6.555 0L28.55.47h-1.63l-2.168 6.674L22.608.47h-1.623L24.043 9h1.436zm10.6 0V7.816h-4.096V5.2h3.504V4.02h-3.504V1.664h4.055V.47H30.5V9h5.578zM3 2a3 3 0 1 0 0 6 3 3 0 1 0 0-6z" fill=#fff /><path d="M3 3a2 2 0 1 1 0 4 2 2 0 1 1 0-4z" fill=#ff4047 /></svg> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 14" fill-rule="evenodd"><path d="M21.886 14H2.114C.97 14 0 13.008 0 11.842V2.158C0 .992.97 0 2.114 0H21.83C23.03 0 24 .992 24 2.158v9.625C24 13.008 23.03 14 21.886 14z" fill="#ffc800"></path><path d="M14 3h1.49c.866 0 3.51.868 3.51 4 0 3.046-2.328 4-3.51 4H13V3h1zm0 1.006v6.04h1.49C16.7 10.046 18.026 9 18.026 7s-1.322-2.994-2.535-2.994H14zM10.18 9H6.816L6.1 11H5l3.005-7.987L8 3h.963l-.005.013L12.006 11h-1.1l-.726-2zm-.363-1l-1.33-3.665L7.174 8h2.643z" fill="#000"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 27 20" version="1.1"><path d="M3.07619048,0 C1.37619048,0 0,1.41666667 0,3.08333333 L0,16.8333333 C0,18.5833333 1.37619048,20 2.9952381,20 L27,20 L27,0 L3.07619048,0 Z" fill="#FFC800"></path><path d="M9.61385787,4.28571429 L9.606,4.30471429 L13.9249985,15.7142857 L12.3665146,15.7142857 L11.337,12.8567143 L6.572,12.8567143 L5.55848393,15.7142857 L4,15.7142857 L8.256,4.30471429 L8.25,4.28571429 L9.61385787,4.28571429 Z M15.3333333,15.7142857 L15.3333333,4.28571429 L18.8623641,4.28571429 L18.8623641,4.28571429 C20.0898911,4.28571429 23.8333333,5.52590267 23.8333333,10 C23.8333333,14.3513179 20.5347016,15.7142857 18.8623641,15.7142857 L15.3333333,15.7142857 Z M16.749,14.3507143 L18.8623641,14.3513179 L18.8623641,14.3513179 C20.5749549,14.3513179 22.4529227,12.8571429 22.4529227,10 C22.4529227,7.14285714 20.5795594,5.72298834 18.8623641,5.72298834 L16.749,5.72271429 L16.749,14.3507143 Z M8.936,6.19271429 L7.079,11.4277143 L10.822,11.4277143 L8.936,6.19271429 Z" fill="#000000"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-mute-watermark> <cnx> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> '},function(t,i,e){"use strict";var s,n=e(5),r=e(0),h=e(2),a=[],o="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(s||(s={}));var c,u=function(){function t(t,i,e,s){return this.x=t,this.y=i,this.width=e,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(i){return new t(i.x,i.y,i.width,i.height)},t}(),l=function(t){return t instanceof SVGElement&&"getBBox"in t},d=function(t){if(l(t)){var i=t.getBBox(),e=i.width,s=i.height;return!e&&!s}var n=t,r=n.offsetWidth,h=n.offsetHeight;return!(r||h||t.getClientRects().length)},f=function(t){var i,e,s=null===(e=null===(i=t)||void 0===i?void 0:i.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(s&&t instanceof s.Element)},p="undefined"!=typeof window?window:{},v=new WeakMap,b=/auto|scroll/,m=/^tb|vertical/,g=/msie|trident/i.test(p.navigator&&p.navigator.userAgent),y=function(t){return parseFloat(t||"0")},w=function(t,i,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=!1),Object.freeze({inlineSize:(e?i:t)||0,blockSize:(e?t:i)||0})},x=Object.freeze({devicePixelContentBoxSize:w(),borderBoxSize:w(),contentBoxSize:w(),contentRect:new u(0,0,0,0)}),k=function(t,i){if(void 0===i&&(i=!1),v.has(t)&&!i)return v.get(t);if(d(t))return v.set(t,x),x;var e=getComputedStyle(t),s=l(t)&&t.ownerSVGElement&&t.getBBox(),n=!g&&"border-box"===e.boxSizing,r=m.test(e.writingMode||""),h=!s&&b.test(e.overflowY||""),a=!s&&b.test(e.overflowX||""),o=s?0:y(e.paddingTop),c=s?0:y(e.paddingRight),f=s?0:y(e.paddingBottom),p=s?0:y(e.paddingLeft),k=s?0:y(e.borderTopWidth),S=s?0:y(e.borderRightWidth),O=s?0:y(e.borderBottomWidth),_=p+c,j=o+f,A=(s?0:y(e.borderLeftWidth))+S,I=k+O,C=a?t.offsetHeight-I-t.clientHeight:0,T=h?t.offsetWidth-A-t.clientWidth:0,P=n?_+A:0,M=n?j+I:0,E=s?s.width:y(e.width)-P-T,L=s?s.height:y(e.height)-M-C,R=E+_+T+A,B=L+j+C+I,D=Object.freeze({devicePixelContentBoxSize:w(Math.round(E*devicePixelRatio),Math.round(L*devicePixelRatio),r),borderBoxSize:w(R,B,r),contentBoxSize:w(E,L,r),contentRect:new u(p,o,E,L)});return v.set(t,D),D},S=function(t,i,e){var n=k(t,e),r=n.borderBoxSize,h=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(i){case s.DEVICE_PIXEL_CONTENT_BOX:return a;case s.BORDER_BOX:return r;default:return h}},O=function(){return function(t){var i=k(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=[i.borderBoxSize],this.contentBoxSize=[i.contentBoxSize],this.devicePixelContentBoxSize=[i.devicePixelContentBoxSize]}}(),_=function(t){if(d(t))return 1/0;for(var i=0,e=t.parentNode;e;)i+=1,e=e.parentNode;return i},j=function(){var t=1/0,i=[];a.forEach(function(e){if(0!==e.activeTargets.length){var s=[];e.activeTargets.forEach(function(i){var e=new O(i.target),n=_(i.target);s.push(e),i.lastReportedSize=S(i.target,i.observedBox),n<t&&(t=n)}),i.push(function(){e.callback.call(e.observer,s,e.observer)}),e.activeTargets.splice(0,e.activeTargets.length)}});for(var e=0,s=i;e<s.length;e++){(0,s[e])()}return t},A=function(t){a.forEach(function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach(function(e){e.isActive()&&(_(e.target)>t?i.activeTargets.push(e):i.skippedTargets.push(e))})})},I=function(){var t,i=0;for(A(i);a.some(function(t){return t.activeTargets.length>0});)i=j(),A(i);return a.some(function(t){return t.skippedTargets.length>0})&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:o}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=o),window.dispatchEvent(t)),i>0},C=[],T=function(t){if(!c){var i=0,e=document.createTextNode("");new MutationObserver(function(){return C.splice(0).forEach(function(t){return t()})}).observe(e,{characterData:!0}),c=function(){e.textContent=""+(i?i--:i++)}}C.push(t),c()},P=0,M={attributes:!0,characterData:!0,childList:!0,subtree:!0},E=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],L=function(t){return void 0===t&&(t=0),Date.now()+t},R=!1,B=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var i=this;if(void 0===t&&(t=250),!R){R=!0;var e,s=L(t);e=function(){var e=!1;try{e=I()}finally{if(R=!1,t=s-L(),!P)return;e?i.run(1e3):t>0?i.run(t):i.start()}},T(function(){requestAnimationFrame(e)})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,M)};document.body?i():p.addEventListener("DOMContentLoaded",i)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),E.forEach(function(i){return p.addEventListener(i,t.listener,!0)}))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),E.forEach(function(i){return p.removeEventListener(i,t.listener,!0)}),this.stopped=!0)},t}()),D=function(t){!P&&t>0&&B.start(),!(P+=t)&&B.stop()},F=function(){function t(t,i){this.target=t,this.observedBox=i||s.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,i=S(this.target,this.observedBox,!0);return t=this.target,l(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=i),this.lastReportedSize.inlineSize!==i.inlineSize||this.lastReportedSize.blockSize!==i.blockSize},t}(),V=function(){return function(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i}}(),U=new WeakMap,N=function(t,i){for(var e=0;e<t.length;e+=1)if(t[e].target===i)return e;return-1},$=function(){function t(){}return t.connect=function(t,i){var e=new V(t,i);U.set(t,e)},t.observe=function(t,i,e){var s=U.get(t),n=0===s.observationTargets.length;N(s.observationTargets,i)<0&&(n&&a.push(s),s.observationTargets.push(new F(i,e&&e.box)),D(1),B.schedule())},t.unobserve=function(t,i){var e=U.get(t),s=N(e.observationTargets,i),n=1===e.observationTargets.length;s>=0&&(n&&a.splice(a.indexOf(e),1),e.observationTargets.splice(s,1),D(-1))},t.disconnect=function(t){var i=this,e=U.get(t);e.observationTargets.slice().forEach(function(e){return i.unobserve(t,e.target)}),e.activeTargets.splice(0,e.activeTargets.length)},t}(),H=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");$.connect(this,t)}return t.prototype.observe=function(t,i){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");$.observe(this,t,i)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");$.unobserve(this,t)},t.prototype.disconnect=function(){$.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();e.d(i,"a",function(){return q});class q{constructor(t){this.hr=[],this.ar=(t,i)=>{t.forEach(t=>{this.or(t.target).forEach(t=>{t&&(Object(h.i)(t.element),t.callback(t.element))})})};try{const i=t.ResizeObserver||H;this.cr=new i(this.ar)}catch(t){Object(n.a)({message:"ResizeObserver_constructor",callStack:t.stack,exception:t.message,level:r.ProtoLoggingLevelEnum.FATAL})}}on(t,i){this.ur(t,i)||(this.hr.push({element:t,callback:i}),this.cr.observe(t))}off(t,i){const e=this.ur(t,i);if(!e)return;this.cr.unobserve(e.element);const s=this.hr.indexOf(e);s>=0&&this.hr.splice(s,1)}destroy(){if(this.hr)for(;this.hr.length>0;)this.hr.pop();this.cr.disconnect()}or(t){return this.hr.filter(i=>i.element===t)}ur(t,i){return this.hr.find(e=>e.element===t&&e.callback===i)}}},function(t,i,e){"use strict";var s,n=e(2);class r{constructor(t){this.lr=[],this.dr=t=>{this.lr.push(t)},this.pr=t.subscribe(this.dr)}get cachedEvents(){return this.lr}destroy(){this.lr=null,this.pr()}}!function(t){t.AdobeAnalytics="AdobeAnalytics",t.MoatAnalytics="MoatAnalytics"}(s||(s={}));const h={AdobeAnalytics:{id:"cnx-adobe-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.external.measurement.js"},MoatAnalytics:{id:"cnx-moat-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.moat.plugin.js"}};var a=e(1),o=e(5),c=e(0),u=e(6),l=e(30),d=e(8),f=e(22),p=e(21);e.d(i,"a",function(){return v});class v{constructor(t,i,e,s,n){this.vr=i,this.br=e,this.mr=s,this.gr=n,this.yr=[],this.wr=t=>{try{this.xr(t);const i=this.yr.find(i=>i.name===t.type);let e;if(i&&!i.started){i.started=!0;const t=i.eventsCacheHandler;e=t.cachedEvents,t.destroy()}const{adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r}=this.mr.apiConfig.settings.plugins,{secondLevelDomain:h,playerId:a}=this.mr,u={cachedEvents:e,adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r,secondLevelDomain:h,playerId:a,pageName:this.kr,pageUrl:this.He,version:p.a.version,delegateHandlers:this.br,playerContainer:this.gr,playerWindow:window};t.getInstance().start(this.vr,u)}catch(t){Object(o.a)({callStack:t.stack,exception:t.message,level:c.ProtoLoggingLevelEnum.FATAL,message:"PluginsHandler_initPlugin"})}};const r=Object(d.f)(t);this.ue=r.topFrame,this.He=Object(d.e)(r,this.ue),this.He=Object(f.d)(this.He),this.kr=Object(f.a)(this.He)}start(){this.Sr(),this.Or(),this.ue.cnxPlugins.pluginsHandlers.push(this.wr)}Sr(){let t=[];Array.isArray(this.ue.cnxPlugins)&&this.ue.cnxPlugins.length>0&&(t=this.ue.cnxPlugins).forEach(t=>this.wr(t)),Object(a.f)(this.ue.cnxPlugins)||this._r(t)}Or(){const t=this.jr();Object(u.h)(t)&&this.Ar(t)}Ir(t){const i=this.ue.cnxPlugins.cachedPlugins;if(Object(u.h)(i))return i.find(i=>i.type===t)}xr(t){this.Ir(t.type)||this.ue.cnxPlugins.cachedPlugins.push(t)}_r(t){this.ue.cnxPlugins={cachedPlugins:t,pluginsHandlers:[],push:function(t){this.pluginsHandlers.forEach(i=>{i(t)})}}}Ar(t){t.forEach(t=>{this.Ir(t)||this.yr.push({name:t,started:!1,eventsCacheHandler:new r(this.vr)})}),this.yr.forEach(({name:t})=>this.Cr(t))}Tr(t){return Object(l.a)(t).every(t=>Object(a.h)(t))}jr(){const t=[];return this.mr.apiConfig.settings.plugins.adobeAnalyticsSettings&&this.Tr(this.mr.apiConfig.settings.plugins.adobeAnalyticsSettings)&&t.push(s.AdobeAnalytics),this.mr.moatTrackingEnabled&&t.push(s.MoatAnalytics),t}Cr(t){const i=h[t];this.ue.document.getElementById(i.id)||Object(n.x)(i,this.ue.document.head,this.ue,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},function(t,i,e){"use strict";var s,n,r=e(26),h=e(12),a=e(43);!function(t){t.Minimized="minimized",t.Collapsed="collapsed",t.Normal="normal",t.Expanded="expanded",t.Fullscreen="fullscreen"}(s||(s={})),function(t){t.StateChanged="stateChanged"}(n||(n={}));class o{constructor(t){this.mediator=t}computeState(t){const i=this.Pr(t);this.Mr&&this.Mr.name===i||this.mediator.publish(this,n.StateChanged,{payload:{state:i}}),this.Mr={dimensions:t,name:i},this.Er||i!==s.Normal||(this.Er=Object.assign({},this.Mr))}setPlayerState(t){this.Mr&&this.Mr.name===t||this.mediator.publish(this,n.StateChanged,{payload:{state:t}}),this.Mr={name:t},this.Er||t!==s.Normal||(this.Er=Object.assign({},this.Mr))}get currentState(){return this.Mr&&this.Mr.name}Pr(t){if(!this.Er)return s.Normal;const{width:i,height:e}=this.Er.dimensions,n=i*e,r=t.width*t.height;switch(!0){case n<r:return s.Expanded;case n>r:return s.Collapsed;default:return s.Normal}}}var c=e(19),u=e(5),l=e(0);e.d(i,"a",function(){return d});class d extends c.a{constructor(t,i,e){super(),this.Lr=t,this.vr=i,this.Rr=new o(this),this.Br=!1,this.Dr={[h.a.AdError]:()=>this.Fr(),[h.a.PlayError]:()=>this.Vr(),[h.a.RenderError]:()=>this.Ur(),[h.a.AdImpression]:()=>this.Nr(),[h.a.AdComplete]:()=>this.$r(),[h.a.AdVideoStart]:({adVideoStartMetadata:t})=>this.Hr(t),[h.a.AdVideoFirstQuartile]:()=>this.qr(),[h.a.AdVideoMidpoint]:()=>this.zr(),[h.a.AdVideoThirdQuartile]:()=>this.Gr(),[h.a.AdVideoComplete]:()=>this.Wr(),[h.a.VolumeChange]:({volume:t})=>this.Jr(t),[h.a.AdPause]:()=>this.Qr(),[h.a.AdPlay]:()=>this.Xr(),[h.a.AdSkipped]:()=>this.Yr(),[h.a.AdClickThru]:()=>this.Kr(),[h.a.AdInteraction]:()=>this.Zr(),[h.a.AdLoaded]:({adLoadedMetadata:t})=>this.th(t),[h.a.AdStateChange]:({adStateChangedMetadata:t})=>this.ih(t),[h.a.PlayerResized]:({playerDimensionsMetadata:t})=>this.eh(t),[h.a.OnEnterFullscreen]:()=>this.sh(),[h.a.PlayerCollapsed]:()=>this.nh(),[h.a.PlayerExpanded]:()=>this.rh(),[h.a.Destroy]:()=>this.unsubscribeAll(this.Rr)},this.hh=t=>{try{const i=this.Dr[t.name];if(!i)return;i(t.metadata)}catch(t){Object(u.a)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:t.message,callStack:t.callStack,level:l.ProtoLoggingLevelEnum.WARNING})}};try{const{AdSession:t,AdEvents:i,MediaEvents:s}=this.Lr,r=this.ah(e);this.oh=new t(r),this.uh=new i(this.oh),this.lh=new s(this.oh),this.vr.subscribe(this.hh),this.subscribe(n.StateChanged,this.Rr,({payload:{state:t}})=>{this.dh(t)}),this.fh()}catch(t){Object(u.a)({message:"SessionClientWrapper_omsdk_classes_init_err",exception:t.message,callStack:t.callStack,level:l.ProtoLoggingLevelEnum.WARNING})}}Fr(){this.oh.error(r.d.Video,h.a.AdError)}Vr(){this.oh.error(r.d.Video,h.a.PlayError)}Ur(){this.oh.error(r.d.Generic,h.a.RenderError)}ah(t){const{Partner:i,Context:e}=this.Lr;return new e(new i(r.i,t))}Nr(){this.Br=!0,this.uh.impressionOccurred();const t=this.Rr.currentState;t!==s.Normal&&this.dh(t)}$r(){this.Br=!1}Hr(t){const{duration:i,mediaPlayerVolume:e}=t;this.lh.start(i,e)}qr(){this.lh.firstQuartile()}zr(){this.lh.midpoint()}Gr(){this.lh.thirdQuartile()}Wr(){this.lh.complete()}Jr(t){this.Br&&this.lh.volumeChange(t)}Qr(){this.lh.pause()}Xr(){this.lh.resume()}Yr(){this.lh.skipped()}Kr(){this.lh.adUserInteraction(r.g.Click)}Zr(){this.lh.adUserInteraction(r.g.InvitationAccept)}th(t){const{isSkippable:i,skipOffset:e,isAutoPlay:s}=t,{VastProperties:n}=this.Lr,r=new n(i,e,s,this.ph);this.uh.loaded(r)}ih({state:t}){this.ph=r.h[a.a[t]]}dh(t){t&&this.lh.playerStateChange(t)}vh(t){this.Rr.computeState(t)}bh(t){this.Rr.setPlayerState(t)}eh(t){this.vh(t)}sh(){this.bh(s.Fullscreen)}nh(){this.bh(s.Minimized)}rh(){this.bh(s.Normal)}fh(){this.oh.registerSessionObserver(t=>{t.type===r.b.SessionStart?this.mh(t):t.type===r.b.SessionError&&Object(u.a)({message:"SessionClientWrapper_omsdk_session_error",exception:t.type,callStack:JSON.stringify(t),level:l.ProtoLoggingLevelEnum.WARNING,throttle:1,sendMaxLog:!1})})}mh(t){t.data.creativeType===r.c.DefinedByJavascript&&this.oh.setCreativeType(r.c.Video),t.data.impressionType===r.f.DefinedByJavascript&&this.oh.setImpressionType(r.f.BeginToRender)}}},function(t,i,e){"use strict";var s,n,r,h,a=e(4),o=e(9);!function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(s||(s={})),function(t){t.Click="click",t.InteractionStart="interactionstart",t.Interaction="interaction",t.InteractionEnd="interactionend"}(n||(n={})),function(t){t[t.Swipe=0]="Swipe",t[t.Hold=1]="Hold"}(r||(r={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(h||(h={}));var c=e(6),u=e(2);const l={MAIN:0,AUXILIARY:1,SECONDARY:2,FOURTH:3,FIFTH:4};function d(t){return t.button===l.MAIN}var f=e(18),p=e(1);e.d(i,"a",function(){return g});const v=25,b=250,m=30;class g{constructor(t,i,e){this.gh=t,this.Fn=i,this.mediator=null,this.yh=m,this.wh=b,this.xh=v,this.kh=[],this.Sh={},this.Oh=0,this._h=0,this.jh=!0,this.Ah=null,this.Ih=!1,this.Ch=!1,this.Th=!1,this.Ph=!1,this.Mh=0,this.Eh=0,this.Lh=null,this.Rh=null,this.Bh=null,this.Dh=!0,this.Fh=t=>{this.Fn?(t.element.addEventListener("touchstart",this.Vh),t.element.addEventListener("touchmove",this.Uh),t.element.addEventListener("touchend",this.Nh),t.element.addEventListener("touchcancel",this.$h)):(t.element.addEventListener("mousedown",this.Hh),t.element.addEventListener("mouseup",this.qh))},this.zh=t=>{this.Fn?(t.element.removeEventListener("touchstart",this.Vh),t.element.removeEventListener("touchmove",this.Uh),t.element.removeEventListener("touchend",this.Nh),t.element.removeEventListener("touchcancel",this.$h)):(t.element.removeEventListener("mousedown",this.Hh),t.element.removeEventListener("mouseup",this.qh))},this.Vh=t=>{t.stopPropagation();const i=this.Gh(t);this.Bh=i,this.Ch=!1,this.Wh(i,r.Hold)&&this.Jh(t);const e=this.Qh(t);this._h=e.eventX,this.Oh=e.eventY,this.Xh(t,i,n.InteractionStart),this.jh=!0},this.Uh=t=>{t.stopPropagation();const i=this.Gh(t),e=this.Qh(t);if(this.jh&&(Math.abs(e.deltaXFromStart)>this.xh||Math.abs(e.deltaYFromStart)>this.xh)&&(this.jh=!1),this.Ih||this.Wh(i,r.Swipe)){if(null===this.Lh&&this.Yh(i,e),this.Lh===s.Y)return;t.preventDefault(),null===this.Rh&&(this.Rh=Object(u.K)(this.gh,()=>{this.Rh=null,this.Kh(e.deltaXFromStart),i.mediator.publish(i.context,o.a[o.a.SwipeMove],{payload:e.deltaXFromStart})}))}},this.Nh=t=>{const i=this.Gh(t);if(this.Bh===i){const e=this.Qh(t);t.cancelable&&this.Wh(i,r.Hold)&&Math.abs(e.deltaXFromStart)<this.xh&&Math.abs(e.deltaYFromStart)<this.xh&&t.preventDefault(),this.Zh(t,i,e),this.ta(e)===s.Y&&Math.abs(e.deltaYFromStart)>=this.xh?this.Dh&&i.mediator.publish(i.context,o.a[o.a.Scroll]):!this.jh||this.Th||this.Ch||i.mediator.publish(i.context,o.a[o.a.Click])}this.Bh=null},this.$h=t=>{const i=this.Gh(t);this.Zh(t,i),this.Bh=null},this.Hh=t=>{if(!d(t))return void this.ia(n.InteractionStart,t);const i=this.Gh(t);this.Bh=i,t.stopPropagation(),t.preventDefault(),this.Wh(i,r.Hold)&&this.Jh(t),this.Xh(t,i,n.InteractionStart)},this.qh=t=>{if(!d(t)||!this.Bh)return this.ia(n.Interaction,t),void this.ia(n.InteractionEnd,t);const i=this.Gh(t);t.stopPropagation(),t.preventDefault(),this.Xh(t,this.Bh,n.Interaction),this.Xh(t,this.Bh,n.InteractionEnd),(this.Ih||this.Wh(i,r.Hold))&&this.ea(t),this.Bh===i&&(this.Xh(t,i,n.Click),i.mediator.publish(i.context,o.a[o.a.Click])),this.Bh=null},this.sa=t=>{if(!d(t))return this.ia(n.Interaction,t),void this.ia(n.InteractionEnd,t);this.Bh=null},this.na=t=>{if(!d(t)||!this.Bh)return this.ia(n.Interaction,t),void this.ia(n.InteractionEnd,t);this.Xh(t,this.Bh,n.Interaction),this.Xh(t,this.Bh,n.InteractionEnd),(this.Ih||this.Wh(this.Bh,r.Hold))&&this.ea(t),this.Bh=null};const{leftTapSizeThreshold:h,holdTriggerDuration:a,scrollThreshold:c}=Object.assign({},e);this.yh=h||this.yh,this.wh=a||this.wh,this.xh=c||this.xh,this.gh.document.addEventListener("mousedown",this.sa),this.gh.document.addEventListener("mouseup",this.na)}register(t,i,e,s={},n=[]){const r={element:t,mediator:i,context:e,callbacks:s||{},allowedSpecialInteractions:n,disabledSpecialInteractions:[]};this.kh.push(r),this.Fh(r)}unregister(t){const i=this.kh.find(i=>i.element===t);i&&(this.kh=this.kh.filter(i=>i.element!==t),this.zh(i))}unregisterAll(t){const i=this.kh.filter(i=>i.mediator===t);i.forEach(this.zh),this.kh=Object(c.a)(this.kh,i)}addGlobalActions(t,i){Object.keys(Object.assign({},i)).forEach(e=>{this.Sh[e]=this.Sh[e]||[],this.Sh[e].push({initiator:t,action:i[e]})})}removeGlobalActions(t){Object.keys(this.Sh).forEach(i=>{this.Sh[i].some(i=>i.initiator===t)&&(this.Sh[i]=this.Sh[i].filter(i=>i.initiator!==t))})}disableSpecialInteractions(t){const i=this.ra(t);i.disabledSpecialInteractions=Object(c.n)(i.allowedSpecialInteractions)}enableSpecialInteractions(t){this.ra(t).disabledSpecialInteractions=[]}getNonInterruptibleInteractions(){return[o.a.HoldStart,o.a.HoldEnd,o.a.SwipeMove,o.a.SwipeEnd,o.a.Scroll]}disableScrollEvent(){this.Dh=!1}enableScrollEvent(){this.Dh=!0}destroy(){clearTimeout(this.Ah),this.kh.forEach(this.zh),this.gh.document.removeEventListener("mousedown",this.sa),this.gh.document.removeEventListener("mouseup",this.na)}ha(t){const i=this.Gh(t),e=i.element.getBoundingClientRect(),s=this.aa(t),n=e.width,r=Object(f.d)(0,n,0,100,s);this.oa(i,this.yh,r)}oa(t,i,e){e<i?t.mediator.publish(t.context,o.a[o.a.TapLeft]):t.mediator.publish(t.context,o.a[o.a.TapRight])}Jh(t){clearTimeout(this.Ah),this.Ih=!1,this.Th=!1;const i=this.Gh(t);Object(u.a)(i.element,a.h.OnHold),this.Ah=setTimeout(()=>{this.Ih=!0,this.jh&&(this.Th=!0,i.mediator.publish(i.context,o.a[o.a.HoldStart]))},this.wh)}ea(t){clearTimeout(this.Ah);const i=this.Gh(t);Object(u.H)(i.element,a.h.OnHold),this.Ih?(this.Ih=!1,this.Th&&(this.Th=!1,i.mediator.publish(i.context,o.a[o.a.HoldEnd]))):(this.Ch=!0,this.ha(t))}Zh(t,i,e){e=e||this.Qh(t),t.stopPropagation(),this.Xh(t,i,n.Interaction),this.Xh(t,i,n.InteractionEnd),(this.Ih||this.Ph||this.jh&&this.Wh(i,r.Hold))&&this.ea(t),(this.Ph||this.Wh(i,r.Swipe))&&this.ca(i,e)}Yh(t,i){this.Lh=this.ta(i),this.Lh===s.X&&(this.Ph=!0,this.Ih||(clearTimeout(this.Ah),this.Ah=null,this.Ih=!0,t.mediator.publish(t.context,o.a[o.a.HoldStart])))}ca(t,i){if(this.Ph){const e=this.ua(i);t.mediator.publish(t.context,o.a[o.a.SwipeEnd],{payload:e})}Object(u.e)(this.gh,this.Rh),this.Rh=null,this.Ph=!1,this._h=null,this.Oh=null,this.Lh=null,this.Mh=0,this.Eh=0}Kh(t){this.Eh<this.xh?this.Eh++:(this.Mh=t,this.Eh=0)}ta(t){return Math.abs(t.deltaXFromStart)>=Math.abs(t.deltaYFromStart)?s.X:s.Y}ua(t){return t.deltaXFromStart-this.Mh<0?h.Left:h.Right}Qh(t){const i=t.changedTouches[0];return{deltaXFromStart:i.clientX-this._h,deltaYFromStart:i.clientY-this.Oh,eventX:i.clientX,eventY:i.clientY}}Gh(t){return this.Bh||this.ra(t.currentTarget)}ra(t){return this.kh.find(i=>i.element===t)}aa(t){const i=this.Gh(t);if(this.Fn){return t.changedTouches[0].clientX-i.element.getBoundingClientRect().left}return t.offsetX}Wh(t,i){return t.allowedSpecialInteractions.includes(i)&&!t.disabledSpecialInteractions.includes(i)}Xh(t,i,e){const s=i.callbacks[e];Object(p.b)(s)&&s(t),this.ia(e,t)}ia(t,i){var e;null===(e=this.Sh[t])||void 0===e||e.forEach(t=>{t.action(i)})}}},function(t,i,e){"use strict";var s=e(27),n=e(0),r=e(21),h=e(17),a=e(10);class o{constructor(){this.la=null,this.da=0}fa(){if(null===this.la)return;const t=(new Date).getTime();this.da=t-this.la}startCountingTime(){this.la=(new Date).getTime()}stopCountingTime(){this.fa(),this.la=null}fetchTime(t){this.fa();const i=Math.round(this.da/a.f);return this.da=0,null!==this.la&&this.startCountingTime(),i>t?t:i}}var c=e(19),u=e(1),l=e(35),d=e(33),f=e(8),p=e(6),v=e(32);e.d(i,"a",function(){return m});const b=500;class m extends c.a{constructor({userId:t,playerId:i,geoLocation:e,browser:s,sessionId:n,pageUrl:h,bundleId:a,pa:c,userManagerService:u,customParam1:d,customParam2:v,customParam3:b,abTestId:m,explorationMode:g}){super(),this.hasGdprConsentPayload=!1,this.va={},this.ba={},this.ma=!1,this.ga=!1,this.ya=!1,this.wa=!1,this.xa=[],this.ka=[],this.Sa=[],this.Oa=5e3,this._a=!1,this.ja=!1,this.pa=!1,this.Aa=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800}],this.Ia=0,this.Ca=[],this.Ta=()=>{this.Pa||(this.Pa=setTimeout(()=>{this.Ma()},this.Ea))},this.La=()=>{this.Pa&&(clearTimeout(this.Pa),this.Pa=void 0)};Object(p.g)(i,["47286b3d-90c5-4634-ac87-0061769d15a8","2a9c6007-6213-4187-9b0d-1a6e9d7826f0","dac6e2fc-472a-46e6-8a6b-b5bea57a50bc","112cdb88-91ea-452d-990c-03a7d3118d2c","075127fa-fec9-4ee7-9a4c-bfb4478a4412","2febda63-6ec9-4951-9c07-5939376b8226","55ca7ad7-f311-4854-b29a-a2d590760493","62bbbcda-024e-4769-968a-db84830f65cc","648d8d4d-fa41-496c-8415-26f3ad2d1989","6fdffbf5-b899-44ac-96a6-4eab50497b5b","b6094ff6-54a0-4ddd-b799-66193f8346c7","c81bb1f8-de80-428b-ae42-1ce0e75d3998","ddbadb2c-9e78-442a-b757-a49113a791ed","20d71b12-41ce-45db-8135-1a3cd111b25d","13e4ee65-6bed-40e6-8e41-4ef9087c294b","62d76d13-cd32-4021-a243-98b2444cd14d","b1c78103-4bb7-47ac-9cfe-dcd9b603e8a2","77a7ef56-c608-456d-8ff9-a382d139ff95","5d8eeea7-4ee0-4ad7-9023-97fbc8d97fa7","ed379095-5f46-4c1c-917d-ad063d84eaf1","0527ea2b-cb60-408e-85c1-e500bee128c3","148a0193-55d6-47a1-8a33-2c4ba9c97b5e","27937f13-f008-457b-938c-87c9fe447de8","4c2b6243-5715-4651-a27e-f6052b61af80","10efae62-af17-4d47-a65e-baabc2b60496","65d7cfb4-70a5-480a-95a7-25a713d61695","6e3ef6a1-2ccf-48b3-973c-55244487dc38","13426e00-211b-4c70-981e-d71a622543cf","728b020d-aa32-4009-ad0d-9c1b6b57b3c9","77e6bf0d-befe-4364-9f95-df37d478f297","19e14bfd-d5ef-4f82-8c9d-ea19512d0793","8c175c10-202a-4275-9e10-5ab9b216a61d","9429315c-a644-4fbf-938f-30cd23f2b098","a1bf91f8-98cb-4642-a2ec-2124782bf273","3025741e-c645-46ee-93db-c6b1c5cdb842","c32f1fb1-68d7-41cc-9a33-5f541d5b0cfd","c92ebcd4-b4c1-449e-809a-6744a0cd21d1","d0ad8360-284d-47d3-861d-6be5b09619e1","9b3b0ce6-cae5-43e0-b669-023c76e9127f","bbb6ab44-3b47-44d8-990c-642de4bb12ba","eeb97179-3486-4ca8-968c-c18f49e3be4a","ffc13c6a-6d6b-48dc-9965-d5a5adfea0f1","a8ec4044-50c7-46b1-8e8a-4da98ff95aed","ce2e36d0-8e66-4433-bb3c-47e78ad6f250","079b7e9c-6d8f-4772-b5d7-579c6f5f873b","04f884af-47ec-4754-a913-b38823f701a5","2e7b1501-840a-46f0-a3ae-015008b666d8","2ea0b3ba-66c9-46f4-a4a3-300f1bb36a93","3e1fcf24-0e7a-4aeb-9dce-a98d552dd7c7","5156a44c-a3d9-40ad-a592-b6ffb8019b2a","6b55d261-63c7-4349-804f-3d9bbd7aac85","8d95a3a5-ffa0-4932-8208-e06a8f659b55","a49d8dbb-b91f-41a3-b5a8-8a5b053af776","a585524a-2784-4b2d-924b-d872994cb7a8","225f96d6-6d58-483b-8856-ddffd61bac40","ad5efc62-db13-40f2-a76e-df9b90a2687b","08b46451-1849-433c-9019-85b2aeca87d1","bb5ad3b4-8fcd-4cb8-af70-383839db3712","e68c7376-e6c7-44ff-ad65-775691372f19","f5a3920b-15fc-4b52-8586-16091b9bedde","0c83603a-5d0c-4b62-a613-5f2db36510d3","0f3c7056-05d4-46fe-824c-32df48115369","81329826-a1f3-4f0b-86e1-2c1fb58cac85","a7b4eaad-8dea-41d5-8bd0-c8f13cd84296","c1282781-f75a-46b7-b774-5695e0a74c3d","d47819ae-be18-4054-8ffd-dc86eb6fdb5a"])?this.va.trackAllRequests=!0:this.va.trackAllRequests=1===Object(f.k)([99,1]),this.Ra=u,this.va.userId=t,this.va.playerId=i,this.va.geo=e,this.va.browser=s,this.va.version=r.a.version,this.va.sessionId=n,this.va.clientAb0=l.a.clientAb0,this.va.clientAb1=l.a.clientAb1,this.va.serverAb0=l.a.serverAb0,this.va.serverAb1=l.a.serverAb1,this.va.pageUrl=h,this.va.bundleId=a,this.va.customParam1=d,this.va.customParam2=v,this.va.customParam3=b,this.va.abTestId=m,this.Ba=new o,this.Da=new o,this.Fa=g}Va(t,i=n.ProtoTrackingRequest,e,h=!0){this.va.pageInFocus=v.a.pageFocus;const a=s.a.sendProtoRequest({endpoint:t,ProtoRequest:i,ProtoResponse:n.ProtoTrackingResponse,requestData:Object.assign({trackingRequestMeta:h?this.va:void 0},e),queryParams:{[d.b]:r.a.version},logError:!0});return a.then(t=>{const i=t.platformCappedLineItemIdList;Object(p.h)(i)&&this.Ca.forEach(t=>{t.setPlatformCappedLineItemIdList(i)}),Object(u.e)(t.impressionRevenue)&&this.Ua&&this.Ua.notifyImpressionRevenue(t.impressionRevenue)}).catch(t=>{}),a}addPlatformCappedLineItemSubscriber(t){this.Ca.push(t)}removePlatformCappedLineItemSubscriber(t){const i=this.Ca.indexOf(t);i>=0&&this.Ca.splice(i,1)}setImpressionRevenueSubscriber(t){this.Ua=t}unsubscribeToImpressionRevenue(t){this.Ua!==t&&(this.Ua=void 0)}Na(t,i,e=n.ProtoMediaTrackingRequest){const s=Object.assign({},i);Object(u.h)(this.ba.mediaId)&&(s.mediaGuid=this.ba.mediaId),this.Va(t,e,s)}$a(){this.ja||(this.ja=!0,this.Va(h.a.endPoints.tracking.playerStart,n.ProtoTrackingRequest))}Ha(t,i,e=n.ProtoMediaTrackingRequest){return this.Va(t,e,Object.assign({mediaGuid:this.ba.mediaId},i))}qa(t){this.Na(h.a.endPoints.tracking.media_quartile,{baseMeta:this.ba,mediaId:this.ba.mediaId,quartile:t})}za(){this.Ga(this.ka,this.xa,this.Sa),this.ka=[],this.xa=[],this.Sa=[]}Ga(t,i,e){if(0===t.length&&0===i.length&&0===e.length)return;e.forEach(t=>{t.error&&t.error.length>0&&(t.error=t.error.substring(0,b))});const s={mediaGuid:this.ba.mediaId,prebids:t,bids:i,postBids:e,logEveryting:this.pa,hasGdprConsentPayload:this.hasGdprConsentPayload,gdprConsentMode:this.Ra.gdprConsentMode,useExploration:this.Fa};this.Va(h.a.endPoints.tracking.bids,n.ProtoBidTrackingsRequest,s)}Ma(){this.Wa&&(this.Ha(h.a.endPoints.tracking.ad_impression_viewable,this.Wa,n.ProtoVideoAdImpressionViewableRequest),this.Wa=null)}Ja(t){this.Va(h.a.endPoints.tracking.ad_click,n.ProtoAdClickTrackingRequest,Object.assign({mediaGuid:this.ba.mediaId},t))}Qa(){const t=this.Aa[this.Ia];clearTimeout(this.Xa),this.Xa=setTimeout(()=>{this.Ya(t.delay),Object(u.e)(t.timesRepeatDelay)&&t.timesRepeatDelay--,0===t.timesRepeatDelay&&this.Ia++,this.Qa()},1e3*t.delay)}Ya(t){this.Va(h.a.endPoints.tracking.session_time,n.ProtoSessionTimeTrackingRequest,{trackingRequestMeta:this.va,sessionTime:t,timePlayed:this.Ba.fetchTime(t),timePlayedInView:this.Da.fetchTime(t)})}Ka(t){const{sessionId:i}=this.va;this.Va(h.a.endPoints.tracking.adOpportunity,n.ProtoAdOpportunityRequest,{sessionId:i,adBreak:t.adBreakType})}setNewMedia(t){this.ba=t}updateMediaMetadata(t){this.ba=t}setImplementationTypeOnMeta(t){this.va.implementationType=t}setMediaStart(){this.qa(n.ProtoQuartilesEnum.Start)}setContentStart(){this.$a()}setSessionPlayback(t){this.ya!==t&&(this.ya=t,this.wa&&this.ya&&this.Da.startCountingTime(),this.ya?this.Ba.startCountingTime():(this.Ba.stopCountingTime(),this.Da.stopCountingTime()))}setSessionViewability(t){this.wa!==t&&(this.wa=t,this.wa&&this.ya?this.Da.startCountingTime():this.wa||this.Da.stopCountingTime())}trackSessionRendered(t){this.ma||(this.Va(h.a.endPoints.tracking.session_rendered,n.ProtoTrackingRequest,{hasAdBlocker:t}),this.ma=!0,this.Qa())}trackSessionViewability(){!this.ga&&this.ja&&(this.Va(h.a.endPoints.tracking.session_view),this.ga=!0)}trackMediaQuartile(t){this.qa(t)}trackMediaClick(t=n.ProtoMediaClickTypeEnum.Click){const i={type:t,clickUrl:t===n.ProtoMediaClickTypeEnum.UrlClick?this.ba.clickUrl:void 0,slideTitle:this.ba.slideTitle,slideNumber:this.ba.slideNumber,slideMediaType:this.ba.slideMediaType};this.Na(h.a.endPoints.tracking.media_click,i,n.ProtoMediaClickTrackingRequest)}setAdViewability(t){this._a=t,this.Wa&&(t?this.Ta():this.La())}setAdViewabilityDelay(t){this.Ea=t}setAdStart(){this.$a()}startBidRequests(){this.Za=setInterval(()=>{this.za()},this.Oa)}addPrebid(t){this.ka.push(t)}addPostBid(t){Object(u.g)(t.error)||(t.error=JSON.stringify(t.error)),this.Sa.push(t)}addBid(t){this.xa.push(t)}adFinished(){this.Wa=null,this.La()}trackVideoAdImpression(t){const i=this.Ha(h.a.endPoints.tracking.ad_impression,t,n.ProtoVideoAdImpressionRequest);return this.Wa={advertiserLineItemId:t.advertiserLineItemId,publisherLineItemId:t.publisherLineItemId},this._a&&this.Ta(),i}trackVideoAdQuartile(t){this.Na(h.a.endPoints.tracking.ad_quartile,t,n.ProtoVideoAdQuartilesRequest)}trackAdClick(t){this.Ja(t)}trackAdOpportunity(t){this.Ka(t)}getMetadataModel(){return this.va}updateMetadataModel(t){this.va=Object.assign(Object.assign({},this.va),t)}destroy(){clearInterval(this.Xa),clearInterval(this.Za),clearTimeout(this.Pa)}}},function(t,i,e){"use strict";var s,n=e(1),r=e(0);!function(t){t[t.Desktop=2]="Desktop",t[t.SmartTV=3]="SmartTV",t[t.Smartphone=4]="Smartphone",t[t.Tablet=5]="Tablet",t[t.GameConsole=6]="GameConsole",t[t.Unrecognized=7]="Unrecognized"}(s||(s={}));const h={[r.ProtoDeviceType.Desktop]:s.Desktop,[r.ProtoDeviceType.Smartphone]:s.Smartphone,[r.ProtoDeviceType.Tablet]:s.Tablet,[r.ProtoDeviceType.GameConsole]:s.GameConsole,[r.ProtoDeviceType.SmartTV]:s.SmartTV,[r.ProtoDeviceType.WearableComputer]:s.Unrecognized,[r.ProtoDeviceType.PDA]:s.Unrecognized,[r.ProtoDeviceType.Unrecognized]:s.Unrecognized},a="https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[APP_BUNDLE]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]",o="cnx_fraud_sensor",c="00000000-0000-0000-0000-000000000000",u=2;e.d(i,"a",function(){return l});class l{constructor(t,i,e,s){this.to=t,this.io=i,this.Zs=e,this.eo(s)}addFraudSensorScript(){if(this.io.getElementById(o))return;const t={id:o,src:this.to.setupMacros(a)};this.io.insertScript(t,null,"FraudSensor_script_error")}eo(t){t=Object(n.h)(t)?t:c;const{lookupId:i,lookupResponseCode:e,publisherAdsTxt:s}=this.Zs,r=h[this.Zs.deviceType];this.to.setPublisherId(s),this.to.setUserId(t),this.to.setFraudSensorMacros({lookupId:i,lookupResponseCode:e,deviceType:r,mediaType:u})}}},function(t,i,e){"use strict";var s=i;function n(){s.Reader.Qi(s.BufferReader),s.util.Qi()}s.build="minimal",s.Writer=e(61),s.BufferWriter=e(130),s.Reader=e(63),s.BufferReader=e(131),s.util=e(40),s.rpc=e(132),s.roots=e(134),s.configure=n,s.Writer.Qi(s.BufferWriter),n()},function(t,i,e){"use strict";t.exports=function(t,i){var e=new Array(arguments.length-1),s=0,n=2,r=!0;for(;n<arguments.length;)e[s++]=arguments[n++];return new Promise(function(n,h){e[s]=function(t){if(r)if(r=!1,t)h(t);else{for(var i=new Array(arguments.length-1),e=0;e<i.length;)i[e++]=arguments[e];n.apply(null,i)}};try{t.apply(i||null,e)}catch(t){r&&(r=!1,h(t))}})}},function(t,i,e){"use strict";var s=i;s.length=function(t){var i=t.length;if(!i)return 0;for(var e=0;--i%4>1&&"="===t.charAt(i);)++e;return Math.ceil(3*t.length)/4-e};for(var n=new Array(64),r=new Array(123),h=0;h<64;)r[n[h]=h<26?h+65:h<52?h+71:h<62?h-4:h-59|43]=h++;s.encode=function(t,i,e){for(var s,r=null,h=[],a=0,o=0;i<e;){var c=t[i++];switch(o){case 0:h[a++]=n[c>>2],s=(3&c)<<4,o=1;break;case 1:h[a++]=n[s|c>>4],s=(15&c)<<2,o=2;break;case 2:h[a++]=n[s|c>>6],h[a++]=n[63&c],o=0}a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,h)),a=0)}return o&&(h[a++]=n[s],h[a++]=61,1===o&&(h[a++]=61)),r?(a&&r.push(String.fromCharCode.apply(String,h.slice(0,a))),r.join("")):String.fromCharCode.apply(String,h.slice(0,a))};s.decode=function(t,i,e){for(var s,n=e,h=0,a=0;a<t.length;){var o=t.charCodeAt(a++);if(61===o&&h>1)break;if(void 0===(o=r[o]))throw Error("invalid encoding");switch(h){case 0:s=o,h=1;break;case 1:i[e++]=s<<2|(48&o)>>4,s=o,h=2;break;case 2:i[e++]=(15&s)<<4|(60&o)>>2,s=o,h=3;break;case 3:i[e++]=(3&s)<<6|o,h=0}}if(1===h)throw Error("invalid encoding");return e-n},s.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)}},function(t,i,e){"use strict";function s(){this.so={}}t.exports=s,s.prototype.on=function(t,i,e){return(this.so[t]||(this.so[t]=[])).push({fn:i,ctx:e||this}),this},s.prototype.off=function(t,i){if(void 0===t)this.so={};else if(void 0===i)this.so[t]=[];else for(var e=this.so[t],s=0;s<e.length;)e[s].fn===i?e.splice(s,1):++s;return this},s.prototype.emit=function(t){var i=this.so[t];if(i){for(var e=[],s=1;s<arguments.length;)e.push(arguments[s++]);for(s=0;s<i.length;)i[s].fn.apply(i[s++].ctx,e)}return this}},function(t,i,e){"use strict";function s(t){return"undefined"!=typeof Float32Array?function(){var i=new Float32Array([-0]),e=new Uint8Array(i.buffer),s=128===e[3];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3]}function r(t,s,n){i[0]=t,s[n]=e[3],s[n+1]=e[2],s[n+2]=e[1],s[n+3]=e[0]}function h(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i[0]}function a(t,s){return e[3]=t[s],e[2]=t[s+1],e[1]=t[s+2],e[0]=t[s+3],i[0]}t.writeFloatLE=s?n:r,t.writeFloatBE=s?r:n,t.readFloatLE=s?h:a,t.readFloatBE=s?a:h}():function(){function i(t,i,e,s){var n=i<0?1:0;if(n&&(i=-i),0===i)t(1/i>0?0:2147483648,e,s);else if(isNaN(i))t(2143289344,e,s);else if(i>3.4028234663852886e38)t((n<<31|2139095040)>>>0,e,s);else if(i<1.1754943508222875e-38)t((n<<31|Math.round(i/1.401298464324817e-45))>>>0,e,s);else{var r=Math.floor(Math.log(i)/Math.LN2);t((n<<31|r+127<<23|8388607&Math.round(i*Math.pow(2,-r)*8388608))>>>0,e,s)}}function e(t,i,e){var s=t(i,e),n=2*(s>>31)+1,r=s>>>23&255,h=8388607&s;return 255===r?h?NaN:n*(1/0):0===r?1.401298464324817e-45*n*h:n*Math.pow(2,r-150)*(h+8388608)}t.writeFloatLE=i.bind(null,n),t.writeFloatBE=i.bind(null,r),t.readFloatLE=e.bind(null,h),t.readFloatBE=e.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var i=new Float64Array([-0]),e=new Uint8Array(i.buffer),s=128===e[7];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3],s[n+4]=e[4],s[n+5]=e[5],s[n+6]=e[6],s[n+7]=e[7]}function r(t,s,n){i[0]=t,s[n]=e[7],s[n+1]=e[6],s[n+2]=e[5],s[n+3]=e[4],s[n+4]=e[3],s[n+5]=e[2],s[n+6]=e[1],s[n+7]=e[0]}function h(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],e[4]=t[s+4],e[5]=t[s+5],e[6]=t[s+6],e[7]=t[s+7],i[0]}function a(t,s){return e[7]=t[s],e[6]=t[s+1],e[5]=t[s+2],e[4]=t[s+3],e[3]=t[s+4],e[2]=t[s+5],e[1]=t[s+6],e[0]=t[s+7],i[0]}t.writeDoubleLE=s?n:r,t.writeDoubleBE=s?r:n,t.readDoubleLE=s?h:a,t.readDoubleBE=s?a:h}():function(){function i(t,i,e,s,n,r){var h=s<0?1:0;if(h&&(s=-s),0===s)t(0,n,r+i),t(1/s>0?0:2147483648,n,r+e);else if(isNaN(s))t(0,n,r+i),t(2146959360,n,r+e);else if(s>1.7976931348623157e308)t(0,n,r+i),t((h<<31|2146435072)>>>0,n,r+e);else{var a;if(s<2.2250738585072014e-308)t((a=s/5e-324)>>>0,n,r+i),t((h<<31|a/4294967296)>>>0,n,r+e);else{var o=Math.floor(Math.log(s)/Math.LN2);1024===o&&(o=1023),t(4503599627370496*(a=s*Math.pow(2,-o))>>>0,n,r+i),t((h<<31|o+1023<<20|1048576*a&1048575)>>>0,n,r+e)}}}function e(t,i,e,s,n){var r=t(s,n+i),h=t(s,n+e),a=2*(h>>31)+1,o=h>>>20&2047,c=4294967296*(1048575&h)+r;return 2047===o?c?NaN:a*(1/0):0===o?5e-324*a*c:a*Math.pow(2,o-1075)*(c+4503599627370496)}t.writeDoubleLE=i.bind(null,n,0,4),t.writeDoubleBE=i.bind(null,r,4,0),t.readDoubleLE=e.bind(null,h,0,4),t.readDoubleBE=e.bind(null,a,4,0)}(),t}function n(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}function r(t,i,e){i[e]=t>>>24,i[e+1]=t>>>16&255,i[e+2]=t>>>8&255,i[e+3]=255&t}function h(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0}function a(t,i){return(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0}t.exports=s(s)},function(t,i,e){"use strict";function s(t){try{var i=eval("quire".replace(/^/,"re"))(t);if(i&&(i.length||Object.keys(i).length))return i}catch(t){}return null}t.exports=s},function(t,i,e){"use strict";var s=i;s.length=function(t){for(var i=0,e=0,s=0;s<t.length;++s)(e=t.charCodeAt(s))<128?i+=1:e<2048?i+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(s+1))?(++s,i+=4):i+=3;return i},s.read=function(t,i,e){if(e-i<1)return"";for(var s,n=null,r=[],h=0;i<e;)(s=t[i++])<128?r[h++]=s:s>191&&s<224?r[h++]=(31&s)<<6|63&t[i++]:s>239&&s<365?(s=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536,r[h++]=55296+(s>>10),r[h++]=56320+(1023&s)):r[h++]=(15&s)<<12|(63&t[i++])<<6|63&t[i++],h>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,r)),h=0);return n?(h&&n.push(String.fromCharCode.apply(String,r.slice(0,h))),n.join("")):String.fromCharCode.apply(String,r.slice(0,h))},s.write=function(t,i,e){for(var s,n,r=e,h=0;h<t.length;++h)(s=t.charCodeAt(h))<128?i[e++]=s:s<2048?(i[e++]=s>>6|192,i[e++]=63&s|128):55296==(64512&s)&&56320==(64512&(n=t.charCodeAt(h+1)))?(s=65536+((1023&s)<<10)+(1023&n),++h,i[e++]=s>>18|240,i[e++]=s>>12&63|128,i[e++]=s>>6&63|128,i[e++]=63&s|128):(i[e++]=s>>12|224,i[e++]=s>>6&63|128,i[e++]=63&s|128);return e-r}},function(t,i,e){"use strict";t.exports=function(t,i,e){var s=e||8192,n=s>>>1,r=null,h=s;return function(e){if(e<1||e>n)return t(e);h+e>s&&(r=t(s),h=0);var a=i.call(r,h,h+=e);return 7&h&&(h=1+(7|h)),a}}},function(t,i,e){"use strict";t.exports=n;var s=e(40);function n(t,i){this.lo=t>>>0,this.hi=i>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var h=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return r;var i=t<0;i&&(t=-t);var e=t>>>0,s=(t-e)/4294967296>>>0;return i&&(s=~s>>>0,e=~e>>>0,++e>4294967295&&(e=0,++s>4294967295&&(s=0))),new n(e,s)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(s.isString(t)){if(!s.Long)return n.fromNumber(parseInt(t,10));t=s.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,e=~this.hi>>>0;return i||(e=e+1>>>0),-(i+4294967296*e)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return s.Long?new s.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return t===h?r:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return 0===e?0===i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:e<128?9:10}},function(t,i,e){"use strict";t.exports=h;var s=e(61);(h.prototype=Object.create(s.prototype)).constructor=h;var n=e(40),r=n.Buffer;function h(){s.call(this)}h.alloc=function(t){return(h.alloc=n.Ji)(t)};var a=r&&r.prototype instanceof Uint8Array&&"set"===r.prototype.set.name?function(t,i,e){i.set(t,e)}:function(t,i,e){if(t.copy)t.copy(i,e,0,t.length);else for(var s=0;s<t.length;)i[e++]=t[s++]};function o(t,i,e){t.length<40?n.utf8.write(t,i,e):i.utf8Write(t,e)}h.prototype.bytes=function(t){n.isString(t)&&(t=n.Wi(t,"base64"));var i=t.length>>>0;return this.uint32(i),i&&this.ys(a,i,t),this},h.prototype.string=function(t){var i=r.byteLength(t);return this.uint32(i),i&&this.ys(o,i,t),this}},function(t,i,e){"use strict";t.exports=r;var s=e(63);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(40);function r(t){s.call(this,t)}n.Buffer&&(r.prototype.ws=n.Buffer.prototype.slice),r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},function(t,i,e){"use strict";i.Service=e(133)},function(t,i,e){"use strict";t.exports=n;var s=e(40);function n(t,i,e){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(e)}(n.prototype=Object.create(s.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(i,e,n,r,h){if(!r)throw TypeError("request must be specified");var a=this;if(!h)return s.asPromise(t,a,i,e,n,r);if(a.rpcImpl)try{return a.rpcImpl(i,e[a.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(t,e){if(t)return a.emit("error",t,i),h(t);if(null!==e){if(!(e instanceof n))try{e=n[a.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return a.emit("error",t,i),h(t)}return a.emit("data",e,i),h(null,e)}a.end(!0)})}catch(t){return a.emit("error",t,i),void setTimeout(function(){h(t)},0)}else setTimeout(function(){h(Error("already ended"))},0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,i,e){"use strict";t.exports={}},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="DecodingError",e}return n(i,t),i}(Error);i.DecodingError=r},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="EncodingError",e}return n(i,t),i}(Error);i.EncodingError=r},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="GVLError",e}return n(i,t),i}(Error);i.GVLError=r},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0});var r=function(t){function i(i,e,s){void 0===s&&(s="");var n=t.call(this,"invalid value "+e+" passed for "+i+" "+s)||this;return n.name="TCModelError",n}return n(i,t),i}(Error);i.TCModelError=r},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=function(){function t(){}return t.prototype.has=function(i){return t.langSet.has(i)},t.prototype.forEach=function(i){t.langSet.forEach(i)},Object.defineProperty(t.prototype,"size",{get:function(){return t.langSet.size},enumerable:!0,configurable:!0}),t.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","ZH"]),t}();i.ConsentLanguages=s},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0});var r=e(68),h=e(66),a=e(56),o=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.map=new Map,i}return n(i,t),i.prototype.has=function(t){return this.map.has(t)},i.prototype.isOkToHave=function(t,i,e){var s,n=!0;if(null===(s=this.gvl)||void 0===s?void 0:s.vendors){var r=this.gvl.vendors[e];if(r)if(t===a.RestrictionType.NOT_ALLOWED)n=r.legIntPurposes.includes(i)||r.purposes.includes(i);else if(r.flexiblePurposes.length)switch(t){case a.RestrictionType.REQUIRE_CONSENT:n=r.flexiblePurposes.includes(i)&&r.legIntPurposes.includes(i);break;case a.RestrictionType.REQUIRE_LI:n=r.flexiblePurposes.includes(i)&&r.purposes.includes(i)}else n=!1;else n=!1}return n},i.prototype.add=function(t,i){if(this.isOkToHave(i.restrictionType,i.purposeId,t)){var e=i.hash;this.has(e)||(this.map.set(e,new h.BinarySearchTree),this.bitLength=0),this.map.get(e).add(t)}},i.prototype.getVendors=function(t){var i=[];if(t){var e=t.hash;this.has(e)&&(i=this.map.get(e).get())}else{var s=new Set;this.map.forEach(function(t){t.get().forEach(function(t){s.add(t)})}),i=Array.from(s)}return i},i.prototype.getRestrictionType=function(t,i){var e;return this.getRestrictions(t).forEach(function(t){t.purposeId===i&&(void 0===e||e>t.restrictionType)&&(e=t.restrictionType)}),e},i.prototype.vendorHasRestriction=function(t,i){for(var e=!1,s=this.getRestrictions(t),n=0;n<s.length&&!e;n++)e=i.isSameAs(s[n]);return e},i.prototype.getMaxVendorId=function(){var t=0;return this.map.forEach(function(i){t=Math.max(i.max(),t)}),t},i.prototype.getRestrictions=function(t){var i=[];return this.map.forEach(function(e,s){t?e.contains(t)&&i.push(r.PurposeRestriction.unHash(s)):i.push(r.PurposeRestriction.unHash(s))}),i},i.prototype.getPurposes=function(){var t=new Set;return this.map.forEach(function(i,e){t.add(r.PurposeRestriction.unHash(e).purposeId)}),Array.from(t)},i.prototype.remove=function(t,i){var e=i.hash,s=this.map.get(e);s&&(s.remove(t),s.isEmpty()&&(this.map.delete(e),this.bitLength=0))},Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){var i=this;this.gvl_||(this.gvl_=t,this.map.forEach(function(t,e){var s=r.PurposeRestriction.unHash(e);t.get().forEach(function(e){i.isOkToHave(s.restrictionType,s.purposeId,e)||t.remove(e)})}))},enumerable:!0,configurable:!0}),i.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(i.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),i}(e(42).Cloneable);i.PurposeRestrictionVector=o},function(t,i,e){"use strict";var s;Object.defineProperty(i,"S",{value:!0});var n=e(69),r=function(){function t(){}return t.ID_TO_KEY=[n.Segment.CORE,n.Segment.VENDORS_DISCLOSED,n.Segment.VENDORS_ALLOWED,n.Segment.PUBLISHER_TC],t.KEY_TO_ID=((s={})[n.Segment.CORE]=0,s[n.Segment.VENDORS_DISCLOSED]=1,s[n.Segment.VENDORS_ALLOWED]=2,s[n.Segment.PUBLISHER_TC]=3,s),t}();i.SegmentIDs=r},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.no||function(t,i){var e,s,n,r,h={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,s=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(!(n=(n=h.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){h=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){h.label=r[1];break}if(6===r[0]&&h.label<n[1]){h.label=n[1],n=r;break}if(n&&h.label<n[2]){h.label=n[2],h.ops.push(r);break}n[2]&&h.ops.pop(),h.trys.pop();continue}r=i.call(t,h)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},h=this&&this.Xi||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"S",{value:!0});var a=e(42),o=e(34),c=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.maxId_=0,i.set_=new Set,i}return n(i,t),i.prototype[Symbol.iterator]=function(){var t;return r(this,function(i){switch(i.label){case 0:t=1,i.label=1;case 1:return t<=this.maxId?[4,[t,this.has(t)]]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype.values=function(){return this.set_.values()},Object.defineProperty(i.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this.set_.has(t)},i.prototype.unset=function(t){var i=this;Array.isArray(t)?t.forEach(function(t){return i.unset(t)}):"object"==typeof t?this.unset(Object.keys(t).map(function(t){return+t})):(this.set_.delete(t),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach(function(t){i.maxId_=Math.max(i.maxId,t)})))},i.prototype.isIntMap=function(t){var i=this,e="object"==typeof t;return e&&Object.keys(t).every(function(e){var s=Number.isInteger(parseInt(e,10));return(s=s&&i.isValidNumber(t[e].id))&&void 0!==t[e].name})},i.prototype.isValidNumber=function(t){return parseInt(t,10)>0},i.prototype.isSet=function(t){var i=!1;return t instanceof Set&&(i=Array.from(t).every(this.isValidNumber)),i},i.prototype.set=function(t){var i=this;if(Array.isArray(t))t.forEach(function(t){return i.set(t)});else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map(function(t){return+t}));else{if(!this.isValidNumber(t))throw new o.TCModelError("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}},i.prototype.empty=function(){this.set_=new Set},i.prototype.forEach=function(t){var i,e;try{for(var s=h(this),n=s.next();!n.done;n=s.next()){var r=n.value;t(r[1],r[0])}}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=s.return)&&e.call(s)}finally{if(i)throw i.error}}},Object.defineProperty(i.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),i.prototype.setAll=function(t){this.set(t)},i}(a.Cloneable);i.Vector=c},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(65),n=e(55),r=e(70),h=e(76),a=e(34),o=e(67),c=e(36),u=function(){function t(){}return t.encode=function(t,i){var e,h=this;try{e=this.fieldSequence[""+t.version][i]}catch(e){throw new a.EncodingError("Unable to encode version: "+t.version+", segment: "+i)}var u="";return i!==c.Segment.CORE&&(u=r.IntEncoder.encode(c.SegmentIDs.KEY_TO_ID[i],n.BitLength.segmentType)),e.forEach(function(e){var s=t[e],c=r.FieldEncoderMap[e],l=n.BitLength[e];void 0===l&&h.isPublisherCustom(e)&&(l=+t[o.Fields.numCustomPurposes]);try{u+=c.encode(s,l)}catch(t){throw new a.EncodingError("Error encoding "+i+"->"+e+": "+t.message)}}),s.Base64Url.encode(u)},t.decode=function(t,i,e){var h=this,u=s.Base64Url.decode(t),l=0;return e===c.Segment.CORE&&(i.version=r.IntEncoder.decode(u.substr(l,n.BitLength[o.Fields.version]),n.BitLength[o.Fields.version])),e!==c.Segment.CORE&&(l+=n.BitLength.segmentType),this.fieldSequence[""+i.version][e].forEach(function(t){var e=r.FieldEncoderMap[t],s=n.BitLength[t];if(void 0===s&&h.isPublisherCustom(t)&&(s=+i[o.Fields.numCustomPurposes]),0!==s){var c=u.substr(l,s);if(e===r.VendorVectorEncoder?i[t]=e.decode(c,i.version):i[t]=e.decode(c,s),Number.isInteger(s))l+=s;else{if(!Number.isInteger(i[t].bitLength))throw new a.DecodingError(t);l+=i[t].bitLength}}}),i},t.isPublisherCustom=function(t){return 0===t.indexOf("publisherCustom")},t.fieldSequence=new h.FieldSequence,t}();i.SegmentEncoder=u},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(36),n=e(46),r=e(71),h=e(57),a=e(41),o=e(72),c=e(73),u=e(74),l=function(){function t(){}var i,e,l,d,f,p,v,b,m,g,y,w,x,k,S,O,_,j,A,I,C,T,P,M,E,L;return i=s.Fields.version,e=s.Fields.created,l=s.Fields.lastUpdated,d=s.Fields.cmpId,f=s.Fields.cmpVersion,p=s.Fields.consentScreen,v=s.Fields.consentLanguage,b=s.Fields.vendorListVersion,m=s.Fields.policyVersion,g=s.Fields.isServiceSpecific,y=s.Fields.useNonStandardStacks,w=s.Fields.specialFeatureOptins,x=s.Fields.purposeConsents,k=s.Fields.purposeLegitimateInterests,S=s.Fields.purposeOneTreatment,O=s.Fields.publisherCountryCode,_=s.Fields.vendorConsents,j=s.Fields.vendorLegitimateInterests,A=s.Fields.publisherRestrictions,I=s.Fields.vendorsDisclosed,C=s.Fields.vendorsAllowed,T=s.Fields.publisherConsents,P=s.Fields.publisherLegitimateInterests,M=s.Fields.numCustomPurposes,E=s.Fields.publisherCustomConsents,L=s.Fields.publisherCustomLegitimateInterests,t[i]=a.IntEncoder,t[e]=r.DateEncoder,t[l]=r.DateEncoder,t[d]=a.IntEncoder,t[f]=a.IntEncoder,t[p]=a.IntEncoder,t[v]=o.LangEncoder,t[b]=a.IntEncoder,t[m]=a.IntEncoder,t[g]=n.BooleanEncoder,t[y]=n.BooleanEncoder,t[w]=h.FixedVectorEncoder,t[x]=h.FixedVectorEncoder,t[k]=h.FixedVectorEncoder,t[S]=n.BooleanEncoder,t[O]=o.LangEncoder,t[_]=u.VendorVectorEncoder,t[j]=u.VendorVectorEncoder,t[A]=c.PurposeRestrictionVectorEncoder,t.segmentType=a.IntEncoder,t[I]=u.VendorVectorEncoder,t[C]=u.VendorVectorEncoder,t[T]=h.FixedVectorEncoder,t[P]=h.FixedVectorEncoder,t[M]=a.IntEncoder,t[E]=h.FixedVectorEncoder,t[L]=h.FixedVectorEncoder,t}();i.FieldEncoderMap=l},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(36);i.FieldSequence=function(){var t,i;this[1]=((t={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.purposeConsents,s.Fields.vendorConsents],t),this[2]=((i={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.policyVersion,s.Fields.isServiceSpecific,s.Fields.useNonStandardStacks,s.Fields.specialFeatureOptins,s.Fields.purposeConsents,s.Fields.purposeLegitimateInterests,s.Fields.purposeOneTreatment,s.Fields.publisherCountryCode,s.Fields.vendorConsents,s.Fields.vendorLegitimateInterests,s.Fields.publisherRestrictions],i[s.Segment.PUBLISHER_TC]=[s.Fields.publisherConsents,s.Fields.publisherLegitimateInterests,s.Fields.numCustomPurposes,s.Fields.publisherCustomConsents,s.Fields.publisherCustomLegitimateInterests],i[s.Segment.VENDORS_ALLOWED]=[s.Fields.vendorsAllowed],i[s.Segment.VENDORS_DISCLOSED]=[s.Fields.vendorsDisclosed],i)}},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=e(36);i.SegmentSequence=function(t,i){if(this[1]=[s.Segment.CORE],this[2]=[s.Segment.CORE],2===t.version)if(t.isServiceSpecific)this[2].push(s.Segment.PUBLISHER_TC);else{var e=!(!i||!i.isForVendors);e&&!0!==t[s.Fields.supportOOB]||this[2].push(s.Segment.VENDORS_DISCLOSED),e&&(t[s.Fields.supportOOB]&&t[s.Fields.vendorsAllowed].size>0&&this[2].push(s.Segment.VENDORS_ALLOWED),this[2].push(s.Segment.PUBLISHER_TC))}}},function(t,i,e){"use strict";var s=this&&this.Xi||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.ro||function(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),h=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)h.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return h};Object.defineProperty(i,"S",{value:!0});var r=e(34),h=e(36),a=function(){function t(){}return t.process=function(t,i){var e,s,n=t.gvl;if(!n)throw new r.EncodingError("Unable to encode TCModel without a GVL");if(!n.isReady)throw new r.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=n.language.toUpperCase(),(null===(e=i)||void 0===e?void 0:e.version)>0&&(null===(s=i)||void 0===s?void 0:s.version)<=this.processor.length?t.version=i.version:t.version=this.processor.length;var h=t.version-1;if(!this.processor[h])throw new r.EncodingError("Invalid version: "+t.version);return this.processor[h](t,n)},t.processor=[function(t){return t},function(t,i){var e,r,a,o;t.publisherRestrictions.gvl=i,t.purposeLegitimateInterests.unset(1);var c=new Map;c.set("legIntPurposes",t.vendorLegitimateInterests),c.set("purposes",t.vendorConsents);try{for(var u=s(c),l=u.next();!l.done;l=u.next()){var d=n(l.value,2),f=d[0],p=d[1];try{for(var v=(a=void 0,s(p.values())),b=v.next();!b.done;b=v.next()){var m=b.value,g=i.vendors[m];if(!g||g.deletedDate)p.unset(m);else if(0===g[f].length)if(t.isServiceSpecific)if(0===g.flexiblePurposes.length)p.unset(m);else{for(var y=t.publisherRestrictions.getRestrictions(m),w=!1,x=0,k=y.length;x<k&&!w;x++)w=y[x].restrictionType===h.RestrictionType.REQUIRE_CONSENT&&"purposes"===f||y[x].restrictionType===h.RestrictionType.REQUIRE_LI&&"legIntPurposes"===f;w||p.unset(m)}else p.unset(m)}}catch(t){a={error:t}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(a)throw a.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return t.vendorsDisclosed.set(i.vendors),t}],t}();i.SemanticPreEncoder=a},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0});var r=e(42),h=e(34),a=e(149),o=e(36),c=function(t){function i(i){var e=t.call(this)||this;return e.isServiceSpecific_=!1,e.supportOOB_=!0,e.useNonStandardStacks_=!1,e.purposeOneTreatment_=!1,e.publisherCountryCode_="AA",e.version_=2,e.consentScreen_=0,e.policyVersion_=2,e.consentLanguage_="EN",e.cmpId_=0,e.cmpVersion_=0,e.vendorListVersion_=0,e.numCustomPurposes_=0,e.specialFeatureOptins=new o.Vector,e.purposeConsents=new o.Vector,e.purposeLegitimateInterests=new o.Vector,e.publisherConsents=new o.Vector,e.publisherLegitimateInterests=new o.Vector,e.publisherCustomConsents=new o.Vector,e.publisherCustomLegitimateInterests=new o.Vector,e.vendorConsents=new o.Vector,e.vendorLegitimateInterests=new o.Vector,e.vendorsDisclosed=new o.Vector,e.vendorsAllowed=new o.Vector,e.publisherRestrictions=new o.PurposeRestrictionVector,i&&(e.gvl=i),e.created=new Date,e.updated(),e}return n(i,t),Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){a.GVL.isInstanceOf(t)||(t=new a.GVL(t)),this.gvl_=t,this.publisherRestrictions.gvl=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(t){if(!(Number.isInteger(+t)&&t>1))throw new h.TCModelError("cmpId",t);this.cmpId_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new h.TCModelError("cmpVersion",t);this.cmpVersion_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new h.TCModelError("consentScreen",t);this.consentScreen_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(t){this.consentLanguage_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(t){if(!/^([A-z]){2}$/.test(t))throw new h.TCModelError("publisherCountryCode",t);this.publisherCountryCode_=t.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(t){if((t=+t>>0)<0)throw new h.TCModelError("vendorListVersion",t);this.vendorListVersion_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(t){if(this.policyVersion_=parseInt(t,10),this.policyVersion_<0)throw new h.TCModelError("policyVersion",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){return this.version_},set:function(t){this.version_=parseInt(t,10)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(t){this.isServiceSpecific_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(t){this.useNonStandardStacks_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(t){this.supportOOB_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(t){this.purposeOneTreatment_=t},enumerable:!0,configurable:!0}),i.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},i.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},i.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},i.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},i.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},i.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},i.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},i.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},i.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},i.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},i.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},i.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},i.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},i.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(i.prototype,"numCustomPurposes",{get:function(){var t=this.numCustomPurposes_;if("object"==typeof this.customPurposes){var i=Object.keys(this.customPurposes).sort(function(t,i){return+t-+i});t=parseInt(i.pop(),10)}return t},set:function(t){if(this.numCustomPurposes_=parseInt(t,10),this.numCustomPurposes_<0)throw new h.TCModelError("numCustomPurposes",t)},enumerable:!0,configurable:!0}),i.prototype.updated=function(){this.lastUpdated=new Date},i.consentLanguages=a.GVL.consentLanguages,i}(r.Cloneable);i.TCModel=c},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.ho||function(t,i,e,s){return new(e||(e=Promise))(function(n,r){function h(t){try{o(s.next(t))}catch(t){r(t)}}function a(t){try{o(s.throw(t))}catch(t){r(t)}}function o(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e(function(t){t(i)})).then(h,a)}o((s=s.apply(t,i||[])).next())})},h=this&&this.no||function(t,i){var e,s,n,r,h={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,s=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(!(n=(n=h.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){h=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){h.label=r[1];break}if(6===r[0]&&h.label<n[1]){h.label=n[1],n=r;break}if(n&&h.label<n[2]){h.label=n[2],h.ops.push(r);break}n[2]&&h.ops.pop(),h.trys.pop();continue}r=i.call(t,h)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(i,"S",{value:!0});var a=e(42),o=e(34),c=e(150),u=e(36),l=function(t){function i(e){var s=t.call(this)||this;s.isReady_=!1,s.isLatest=!1;var n=i.baseUrl;if(s.lang_=i.DEFAULT_LANGUAGE,s.isVendorList(e))s.populate(e),s.readyPromise=Promise.resolve();else{if(!n)throw new o.GVLError("must specify GVL.baseUrl before loading GVL json");if(e>0){var r=e;i.CACHE.has(r)?(s.populate(i.CACHE.get(r)),s.readyPromise=Promise.resolve()):(n+=i.versionedFilename.replace("[VERSION]",r+""),s.readyPromise=s.fetchJson(n))}else i.CACHE.has(i.LATEST_CACHE_KEY)?(s.populate(i.CACHE.get(i.LATEST_CACHE_KEY)),s.readyPromise=Promise.resolve()):(s.isLatest=!0,s.readyPromise=s.fetchJson(n+i.latestFilename))}return s}return n(i,t),Object.defineProperty(i,"baseUrl",{get:function(){return this.baseUrl_},set:function(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new o.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.baseUrl_=t},enumerable:!0,configurable:!0}),i.emptyLanguageCache=function(t){var e=!1;return void 0===t&&i.LANGUAGE_CACHE.size>0?(i.LANGUAGE_CACHE=new Map,e=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(i.LANGUAGE_CACHE.delete(t.toUpperCase()),e=!0),e},i.emptyCache=function(t){var e=!1;return Number.isInteger(t)&&t>=0?(i.CACHE.delete(t),e=!0):void 0===t&&(i.CACHE=new Map,e=!0),e},i.prototype.cacheLanguage=function(){i.LANGUAGE_CACHE.has(this.lang_)||i.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},i.prototype.fetchJson=function(t){return r(this,void 0,void 0,function(){var i,e;return h(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),i=this.populate,[4,c.Json.fetch(t)];case 1:return i.apply(this,[s.sent()]),[3,3];case 2:throw e=s.sent(),new o.GVLError(e.message);case 3:return[2]}})})},i.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},i.prototype.changeLanguage=function(t){return r(this,void 0,void 0,function(){var e,s,n,r,a;return h(this,function(h){switch(h.label){case 0:if(e=t.toUpperCase(),!i.consentLanguages.has(e))return[3,6];if(e===this.lang_)return[3,5];if(this.lang_=e,!i.LANGUAGE_CACHE.has(e))return[3,1];for(n in s=i.LANGUAGE_CACHE.get(e))s.hasOwnProperty(n)&&(this[n]=s[n]);return[3,5];case 1:r=i.baseUrl+i.languageFilename.replace("[LANG]",t),h.label=2;case 2:return h.trys.push([2,4,,5]),[4,this.fetchJson(r)];case 3:return h.sent(),this.cacheLanguage(),[3,5];case 4:throw a=h.sent(),new o.GVLError("unable to load language: "+a.message);case 5:return[3,7];case 6:throw new o.GVLError("unsupported language "+t);case 7:return[2]}})})},Object.defineProperty(i.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),i.prototype.isVendorList=function(t){return void 0!==t&&void 0!==t.vendors},i.prototype.populate=function(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&i.CACHE.set(i.LATEST_CACHE_KEY,this.getJson()),i.CACHE.has(this.vendorListVersion)||i.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},i.prototype.mapVendors=function(t){var i=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(t){i.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(t){i.bySpecialPurposeVendorMap[t]=new Set}),Object.keys(this.features).forEach(function(t){i.byFeatureVendorMap[t]=new Set}),Object.keys(this.specialFeatures).forEach(function(t){i.bySpecialFeatureVendorMap[t]=new Set}),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map(function(t){return+t})),this.vendorIds=new Set(t),this.vendors_=t.reduce(function(t,e){var s=i.vendors_[""+e];return s&&void 0===s.deletedDate&&(s.purposes.forEach(function(t){i.byPurposeVendorMap[t+""].consent.add(e)}),s.specialPurposes.forEach(function(t){i.bySpecialPurposeVendorMap[t+""].add(e)}),s.legIntPurposes.forEach(function(t){i.byPurposeVendorMap[t+""].legInt.add(e)}),s.flexiblePurposes&&s.flexiblePurposes.forEach(function(t){i.byPurposeVendorMap[t+""].flexible.add(e)}),s.features.forEach(function(t){i.byFeatureVendorMap[t+""].add(e)}),s.specialFeatures.forEach(function(t){i.bySpecialFeatureVendorMap[t+""].add(e)}),t[e]=s),t},{})},i.prototype.getFilteredVendors=function(t,i,e,s){var n=this,r=t.charAt(0).toUpperCase()+t.slice(1),h={};return("purpose"===t&&e?this["by"+r+"VendorMap"][i+""][e]:this["by"+(s?"Special":"")+r+"VendorMap"][i+""]).forEach(function(t){h[t+""]=n.vendors[t+""]}),h},i.prototype.getVendorsWithConsentPurpose=function(t){return this.getFilteredVendors("purpose",t,"consent")},i.prototype.getVendorsWithLegIntPurpose=function(t){return this.getFilteredVendors("purpose",t,"legInt")},i.prototype.getVendorsWithFlexiblePurpose=function(t){return this.getFilteredVendors("purpose",t,"flexible")},i.prototype.getVendorsWithSpecialPurpose=function(t){return this.getFilteredVendors("purpose",t,void 0,!0)},i.prototype.getVendorsWithFeature=function(t){return this.getFilteredVendors("feature",t)},i.prototype.getVendorsWithSpecialFeature=function(t){return this.getFilteredVendors("feature",t,void 0,!0)},Object.defineProperty(i.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),i.prototype.narrowVendorsTo=function(t){this.mapVendors(t)},Object.defineProperty(i.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),i.prototype.clone=function(){return new i(this.getJson())},i.isInstanceOf=function(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo},i.LANGUAGE_CACHE=new Map,i.CACHE=new Map,i.LATEST_CACHE_KEY=0,i.DEFAULT_LANGUAGE="EN",i.consentLanguages=new u.ConsentLanguages,i.latestFilename="vendor-list.json",i.versionedFilename="archives/vendor-list-v[VERSION].json",i.languageFilename="purposes-[LANG].json",i}(a.Cloneable);i.GVL=l},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0});var s=function(){function t(){}return t.absCall=function(t,i,e,s){return new Promise(function(n,r){var h=new XMLHttpRequest;h.withCredentials=e,h.addEventListener("load",function(){if(h.readyState==XMLHttpRequest.DONE)if(h.status>=200&&h.status<300){var t=h.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}n(t)}else r(new Error("HTTP Status: "+h.status+" response type: "+h.responseType))}),h.addEventListener("error",function(){r(new Error("error"))}),h.addEventListener("abort",function(){r(new Error("aborted"))}),null===i?h.open("GET",t,!0):h.open("POST",t,!0),h.responseType="json",h.timeout=s,h.ontimeout=function(){r(new Error("Timeout "+s+"ms "+t))},h.send(i)})},t.post=function(t,i,e,s){return void 0===e&&(e=!1),void 0===s&&(s=0),this.absCall(t,JSON.stringify(i),e,s)},t.fetch=function(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=0),this.absCall(t,null,i,e)},t}();i.Json=s},function(t,i,e){"use strict";var s=e(152),n=s.decodeBitsToIds,r=s.decodeFromBase64;t.exports={decodeConsentString:function(t){var i=r(t),e=i.version,s=i.cmpId,h=i.vendorListVersion,a=i.purposeIdBitString,o=i.maxVendorId,c=i.created,u=i.lastUpdated,l=i.isRange,d=i.defaultConsent,f=i.vendorIdBitString,p=i.vendorRangeList,v=i.cmpVersion,b=i.consentScreen,m=i.consentLanguage,g={version:e,cmpId:s,vendorListVersion:h,allowedPurposeIds:n(a),maxVendorId:o,created:c,lastUpdated:u,cmpVersion:v,consentScreen:b,consentLanguage:m};if(l){var y=p.reduce(function(t,i){for(var e=i.isRange,s=i.startVendorId,n=i.endVendorId,r=e?n:s,h=s;h<=r;h+=1)t[h]=!0;return t},{});g.allowedVendorIds=[];for(var w=1;w<=o;w+=1)(d&&!y[w]||!d&&y[w])&&-1===g.allowedVendorIds.indexOf(w)&&g.allowedVendorIds.push(w)}else g.allowedVendorIds=n(f);return g}}},function(t,i,e){"use strict";var s=e(153),n=e(155),r=n.versionNumBits,h=n.vendorVersionMap;function a(t,i,e){return parseInt(t.substr(i,e),2)}function o(t,i,e){return new Date(100*a(t,i,e))}function c(t){var i=a(t);return String.fromCharCode(i+65).toLowerCase()}function u(t,i,e){var s=t.substr(i,e);return c(s.slice(0,e/2))+c(s.slice(e/2))}function l(t){var i=t.input,e=t.output,s=t.startPosition,n=t.field,r=n.type,h=n.numBits,c=n.decoder,l=n.validator,f=n.listCount;if("function"==typeof l&&!l(e))return{newPosition:s};if("function"==typeof c)return c(i,e,s);var p,v,b="function"==typeof h?h(e):h;switch(r){case"int":return{fieldValue:a(i,s,b)};case"bool":return{fieldValue:(p=i,v=s,1===parseInt(p.substr(v,1),2))};case"date":return{fieldValue:o(i,s,b)};case"bits":return{fieldValue:i.substr(s,b)};case"list":return function(t,i,e,s,n){var r=0;"function"==typeof n?r=n(i):"number"==typeof n&&(r=n);for(var h=e,a=[],o=0;o<r;o+=1){var c=d({input:t,fields:s.fields,startPosition:h});h=c.newPosition,a.push(c.decodedObject)}return{fieldValue:a,newPosition:h}}(i,e,s,n,f);case"language":return{fieldValue:u(i,s,b)};default:throw new Error("ConsentString - Unknown field type "+r+" for decoding")}}function d(t){var i=t.input,e=t.fields,s=t.startPosition,n=void 0===s?0:s;return{decodedObject:e.reduce(function(t,e){var s=e.name,r=e.numBits,h=l({input:i,output:t,startPosition:n,field:e}),a=h.fieldValue,o=h.newPosition;return void 0!==a&&(t[s]=a),void 0!==o?n=o:"number"==typeof r&&(n+=r),t},{}),newPosition:n}}t.exports={decodeBitsToIds:function(t){return t.split("").reduce(function(t,i,e){return"1"===i&&-1===t.indexOf(e+1)&&t.push(e+1),t},[])},decodeFromBase64:function(t,i){for(var e=t;e.length%4!=0;)e+="=";e=e.replace(/-/g,"+").replace(/_/g,"/");for(var n,o,c=s.decode(e),u="",l=0;l<c.length;l+=1){var f=c.charCodeAt(l).toString(2);u+=(n=f,o=8-f.length,function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",e="",s=0;s<t;s+=1)e+=i;return e}(Math.max(0,o))+n)}return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,e=a(t,0,r);if("number"!=typeof e)throw new Error("ConsentString - Unknown version number in the string to decode");if(!h[e])throw new Error("ConsentString - Unsupported version "+e+" in the string to decode");return d({input:t,fields:i[e].fields}).decodedObject}(u,i)}}},function(t,i,e){(function(t,s){var n;/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(r){var h=i,a=(t&&t.exports,"object"==typeof s&&s);a.global!==a&&a.window;var o=function(t){this.message=t};(o.prototype=new Error).name="InvalidCharacterError";var c=function(t){throw new o(t)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,d={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var i,e,s,n,r=t.length%3,h="",a=-1,o=t.length-r;++a<o;)i=t.charCodeAt(a)<<16,e=t.charCodeAt(++a)<<8,s=t.charCodeAt(++a),h+=u.charAt((n=i+e+s)>>18&63)+u.charAt(n>>12&63)+u.charAt(n>>6&63)+u.charAt(63&n);return 2==r?(i=t.charCodeAt(a)<<8,e=t.charCodeAt(++a),h+=u.charAt((n=i+e)>>10)+u.charAt(n>>4&63)+u.charAt(n<<2&63)+"="):1==r&&(n=t.charCodeAt(a),h+=u.charAt(n>>2)+u.charAt(n<<4&63)+"=="),h},decode:function(t){var i=(t=String(t).replace(l,"")).length;i%4==0&&(i=(t=t.replace(/==?$/,"")).length),(i%4==1||/[^+a-zA-Z0-9\/]/.test(t))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var e,s,n=0,r="",h=-1;++h<i;)s=u.indexOf(t.charAt(h)),e=n%4?64*e+s:s,n++%4&&(r+=String.fromCharCode(255&e>>(-2*n&6)));return r},version:"0.1.0"};void 0===(n=function(){return d}.call(i,e,i,t))||(t.exports=n)}()}).call(this,e(154)(t),e(62))},function(t,i){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,i,e){"use strict";t.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(t){return t.maxVendorId},validator:function(t){return!t.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(t){return t.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(t){return t.isRange}},{name:"vendorRangeList",type:"list",listCount:function(t){return t.numEntries},validator:function(t){return t.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(t){return t.isRange}}]}]}}}},function(t,i){String.prototype.cnx_replaceAll=function(t,i){return this.split(t).join(i)}},function(t,i,e){"use strict";var s=this&&this.ao||function(){for(var t=0,i=0,e=arguments.length;i<e;i++)t+=arguments[i].length;var s=Array(t),n=0;for(i=0;i<e;i++)for(var r=arguments[i],h=0,a=r.length;h<a;h++,n++)s[n]=r[h];return s};Object.defineProperty(i,"S",{value:!0}),i.DispatcherWrapper=i.EventListBase=i.DispatcherBase=void 0;var n=e(158),r=e(77),h=function(){function t(){this.oo=new o(this),this.co=new Array}return Object.defineProperty(t.prototype,"count",{get:function(){return this.co.length},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var i=this;return t&&this.co.push(new r.Subscription(t,!1)),function(){i.unsubscribe(t)}},t.prototype.sub=function(t){return this.subscribe(t)},t.prototype.one=function(t){var i=this;return t&&this.co.push(new r.Subscription(t,!0)),function(){i.unsubscribe(t)}},t.prototype.has=function(t){return!!t&&this.co.some(function(i){return i.handler==t})},t.prototype.unsubscribe=function(t){if(t)for(var i=0;i<this.co.length;i++)if(this.co[i].handler==t){this.co.splice(i,1);break}},t.prototype.unsub=function(t){this.unsubscribe(t)},t.prototype.uo=function(t,i,e){for(var r=this,h=function(s){var h=new n.EventManagement(function(){return r.unsub(s.handler)}),o=Array.prototype.slice.call(e);if(o.push(h),s.execute(t,i,o),a.cleanup(s),!t&&h.propagationStopped)return"break"},a=this,o=0,c=s(this.co);o<c.length;o++){if("break"===h(c[o]))break}},t.prototype.cleanup=function(t){if(t.isOnce&&t.isExecuted){var i=this.co.indexOf(t);i>-1&&this.co.splice(i,1)}},t.prototype.asEvent=function(){return this.oo},t.prototype.clear=function(){this.co.splice(0,this.co.length)},t}();i.DispatcherBase=h;var a=function(){function t(){this.tt={}}return t.prototype.get=function(t){var i=this.tt[t];return i||(i=this.createDispatcher(),this.tt[t]=i,i)},t.prototype.remove=function(t){delete this.tt[t]},t}();i.EventListBase=a;var o=function(){function t(t){this.do=function(i){return t.subscribe(i)},this.pr=function(i){return t.unsubscribe(i)},this.fo=function(i){return t.one(i)},this.po=function(i){return t.has(i)},this.vo=function(){return t.clear()},this.bo=function(){return t.count}}return Object.defineProperty(t.prototype,"count",{get:function(){return this.bo()},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){return this.do(t)},t.prototype.sub=function(t){return this.subscribe(t)},t.prototype.unsubscribe=function(t){this.pr(t)},t.prototype.unsub=function(t){this.unsubscribe(t)},t.prototype.one=function(t){return this.fo(t)},t.prototype.has=function(t){return this.po(t)},t.prototype.clear=function(){this.vo()},t}();i.DispatcherWrapper=o},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0}),i.EventManagement=void 0;var s=function(){function t(t){this.unsub=t,this.propagationStopped=!1}return t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();i.EventManagement=s},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0}),i.NonUniformEventList=i.EventList=i.EventHandlingBase=i.EventDispatcher=void 0;var s=e(160);Object.defineProperty(i,"EventDispatcher",{enumerable:!0,get:function(){return s.EventDispatcher}}),Object.defineProperty(i,"EventHandlingBase",{enumerable:!0,get:function(){return s.EventHandlingBase}}),Object.defineProperty(i,"EventList",{enumerable:!0,get:function(){return s.EventList}}),Object.defineProperty(i,"NonUniformEventList",{enumerable:!0,get:function(){return s.NonUniformEventList}})},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0}),i.EventHandlingBase=i.EventList=i.NonUniformEventList=i.EventDispatcher=void 0;var r=e(49),h=function(t){function i(){return t.call(this)||this}return n(i,t),i.prototype.dispatch=function(t,i){this.uo(!1,this,arguments)},i.prototype.dispatchAsync=function(t,i){this.uo(!0,this,arguments)},i.prototype.asEvent=function(){return t.prototype.asEvent.call(this)},i}(r.DispatcherBase);i.EventDispatcher=h;var a=function(){function t(){this.tt={}}return t.prototype.get=function(t){if(this.tt[t])return this.tt[t];var i=this.createDispatcher();return this.tt[t]=i,i},t.prototype.remove=function(t){delete this.tt[t]},t.prototype.createDispatcher=function(){return new h},t}();i.NonUniformEventList=a;var o=function(t){function i(){return t.call(this)||this}return n(i,t),i.prototype.createDispatcher=function(){return new h},i}(r.EventListBase);i.EventList=o;var c=function(){function t(){this.tt=new o}return Object.defineProperty(t.prototype,"events",{get:function(){return this.tt},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t,i){this.tt.get(t).subscribe(i)},t.prototype.sub=function(t,i){this.subscribe(t,i)},t.prototype.unsubscribe=function(t,i){this.tt.get(t).unsubscribe(i)},t.prototype.unsub=function(t,i){this.unsubscribe(t,i)},t.prototype.one=function(t,i){this.tt.get(t).one(i)},t.prototype.has=function(t,i){return this.tt.get(t).has(i)},t}();i.EventHandlingBase=c},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0}),i.NonUniformSimpleEventList=i.SimpleEventList=i.SimpleEventHandlingBase=i.SimpleEventDispatcher=void 0;var s=e(162);Object.defineProperty(i,"SimpleEventDispatcher",{enumerable:!0,get:function(){return s.SimpleEventDispatcher}}),Object.defineProperty(i,"SimpleEventHandlingBase",{enumerable:!0,get:function(){return s.SimpleEventHandlingBase}}),Object.defineProperty(i,"SimpleEventList",{enumerable:!0,get:function(){return s.SimpleEventList}}),Object.defineProperty(i,"NonUniformSimpleEventList",{enumerable:!0,get:function(){return s.NonUniformSimpleEventList}})},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0}),i.SimpleEventHandlingBase=i.SimpleEventList=i.NonUniformSimpleEventList=i.SimpleEventDispatcher=void 0;var r=e(49),h=function(t){function i(){return t.call(this)||this}return n(i,t),i.prototype.dispatch=function(t){this.uo(!1,this,arguments)},i.prototype.dispatchAsync=function(t){this.uo(!0,this,arguments)},i.prototype.asEvent=function(){return t.prototype.asEvent.call(this)},i}(r.DispatcherBase);i.SimpleEventDispatcher=h;var a=function(){function t(){this.tt={}}return t.prototype.get=function(t){if(this.tt[t])return this.tt[t];var i=this.createDispatcher();return this.tt[t]=i,i},t.prototype.remove=function(t){delete this.tt[t]},t.prototype.createDispatcher=function(){return new h},t}();i.NonUniformSimpleEventList=a;var o=function(t){function i(){return t.call(this)||this}return n(i,t),i.prototype.createDispatcher=function(){return new h},i}(r.EventListBase);i.SimpleEventList=o;var c=function(){function t(){this.tt=new o}return Object.defineProperty(t.prototype,"events",{get:function(){return this.tt},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t,i){this.tt.get(t).subscribe(i)},t.prototype.sub=function(t,i){this.subscribe(t,i)},t.prototype.one=function(t,i){this.tt.get(t).one(i)},t.prototype.has=function(t,i){return this.tt.get(t).has(i)},t.prototype.unsubscribe=function(t,i){this.tt.get(t).unsubscribe(i)},t.prototype.unsub=function(t,i){this.unsubscribe(t,i)},t}();i.SimpleEventHandlingBase=c},function(t,i,e){"use strict";Object.defineProperty(i,"S",{value:!0}),i.SignalList=i.SignalHandlingBase=i.SignalDispatcher=void 0;var s=e(164);Object.defineProperty(i,"SignalDispatcher",{enumerable:!0,get:function(){return s.SignalDispatcher}}),Object.defineProperty(i,"SignalHandlingBase",{enumerable:!0,get:function(){return s.SignalHandlingBase}}),Object.defineProperty(i,"SignalList",{enumerable:!0,get:function(){return s.SignalList}})},function(t,i,e){"use strict";var s,n=this&&this.ks||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"S",{value:!0}),i.SignalHandlingBase=i.SignalList=i.SignalDispatcher=void 0;var r=e(49),h=function(t){function i(){return t.call(this)||this}return n(i,t),i.prototype.dispatch=function(){this.uo(!1,this,arguments)},i.prototype.dispatchAsync=function(){this.uo(!0,this,arguments)},i.prototype.asEvent=function(){return t.prototype.asEvent.call(this)},i}(r.DispatcherBase);i.SignalDispatcher=h;var a=function(t){function i(){return t.call(this)||this}return n(i,t),i.prototype.createDispatcher=function(){return new h},i}(r.EventListBase);i.SignalList=a;var o=function(){function t(){this.tt=new a}return Object.defineProperty(t.prototype,"events",{get:function(){return this.tt},enumerable:!1,configurable:!0}),t.prototype.one=function(t,i){this.tt.get(t).one(i)},t.prototype.has=function(t,i){return this.tt.get(t).has(i)},t.prototype.subscribe=function(t,i){this.tt.get(t).subscribe(i)},t.prototype.sub=function(t,i){this.subscribe(t,i)},t.prototype.unsubscribe=function(t,i){this.tt.get(t).unsubscribe(i)},t.prototype.unsub=function(t,i){this.unsubscribe(t,i)},t}();i.SignalHandlingBase=o},function(t,i,e){"use strict";e.r(i);var s,n=e(5),r=e(48),h=(e(156),e(0)),a=e(80),o=e(19),c=e(14),u=e(30),l=e(6),d=e(4),f=e(37);!function(t){t.Deprecation="deprecation",t.Intervention="intervention",t.Crash="crash"}(s||(s={}));const p="HeavyAdIntervention";var v=e(1);class b{constructor(t,i,e){this.ue=t,this.mo=i,this.yo=e,this.wo=!1,this.xo=()=>{"hidden"===this.ue.document.visibilityState&&this.ko()},this.ko=()=>{if(this.wo||!this.So)return;const t=this.So.takeRecords();this.Oo(t),this.wo=!0},this.Oo=t=>{const i=Object(v.h)(this.mo)?`HeavyAds_${this.mo}`:"HeavyAds";t.filter(({body:t})=>{var i;return(null===(i=t)||void 0===i?void 0:i.id)===p}).forEach(t=>{Object(n.a)({message:i,sendBeacon:!0,level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.type,exception:JSON.stringify({report:t,advertiserLineItemId:this.yo})})})},this._o()&&this.vs()}destroy(){this.ue.removeEventListener("pagehide",this.ko),this.ue.removeEventListener("visibilitychange",this.xo)}_o(){return!!this.ue.ReportingObserver}vs(){this.So=new this.ue.ReportingObserver(t=>{this.Oo(t)},{buffered:!0,types:[s.Intervention]}),this.So.observe(),this.ue.addEventListener("pagehide",this.ko),this.ue.addEventListener("visibilitychange",this.xo)}}const m="Renderer",g="Script";class y extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.playerModel=i,this.app=e,this.Es=s,this.jo=n,this._appSettings=r,this.macroElements={player:[]},this.Ao=!1,this.Io={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.Co=null,this.To=500,this.createExperience(i,r),this.Po=new b(i.global,m),this.Mo=new b(window,g)}subscribeToEvents(){this.subscribe(c.b.Destroy,this.experience,()=>{this.destroy()}),this.subscribe(c.b.CanStart,this.experience,()=>{this.experience.start()}),this.subscribe(c.c.SessionRendered,this.experience,()=>{this.jo.wasPlayerReloaded||this.app.services.TrackingService.trackSessionRendered(this.Es),this.mediator.publish(this,c.c.SessionRendered)}),this.subscribe(c.c.SessionView,this.experience,()=>{this.jo.wasPlayerInView||(this.app.services.TrackingService.trackSessionViewability(),this.mediator.publish(this,c.c.SessionView))}),Object(u.a)(this.experience.events).forEach(t=>{this.subscribe(t,this.experience,i=>{this.experienceApi.trigger(t,i.payload)})})}updateMacroContent(t,i){t&&t.forEach(t=>{t.textContent=i})}mn(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}Eo(t){return`<cnx>${t}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}Lo(){if(this.experienceContainer=this.Ro(),this.playerModel.html){const t=this.app.services.GlobalDomUtilsService.createElementByString(this.Eo(this.playerModel.html));this.Bo(t);const i=this.macroElements.player[0];if(!i)throw Error("player macro was not found");i.innerHTML="",i.parentNode.insertBefore(this.experienceContainer,i),i.parentNode.removeChild(i),Object(l.c)(t.children).forEach(t=>{this.playerModel.targetContainer.parentNode.insertBefore(t,this.playerModel.targetContainer)})}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}Ro(){const t=this.app.config.isMobile?d.g.Mobile:d.g.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.b.MainContainer} ${t} ${this.Do}"></cnx>`)}Bo(t){Object(l.c)(t.children).forEach(t=>{t.children.length>0&&this.Bo(t),Object.keys(this.Io).forEach(i=>{const e=this.Io[i];t.textContent.indexOf(e)>-1&&this.Fo(i,t)})})}Fo(t,i){this.macroElements[t]||(this.macroElements[t]=[]),this.macroElements[t].push(i),i.textContent=""}Vo(){null!==this.Co&&(clearInterval(this.Co),this.Co=null)}init(){this.mn(),this.Lo();const t=this.app.config.device;return this.isSupportedBreakpoint(t)?(this.subscribeToEvents(),this.experience.Uo(this.playerModel,this.app,this.experienceContainer),this.Co=setInterval(()=>{this.Ao?this.Vo():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&(this.destroy(),Object(n.a)({message:"player_removed_from_DOM",level:h.ProtoLoggingLevelEnum.INFO}))},this.To),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}get playerContainer(){return this.experienceContainer}destroy(){try{f.a.playerDestroyed(),this.Ao=!0,this.Vo(),this.app.services.TrackingService.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.app.services.InteractionService.destroy(),this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this.Po.destroy(),this.Mo.destroy()}catch(t){Object(n.a)({callStack:t.stack,level:h.ProtoLoggingLevelEnum.WARNING,message:"Renderer_destroy",exception:t.message})}}}const w={Play:"play",Pause:"pause",Mute:"mute",Unmute:"unmute",Canplay:"canplay",Ended:"ended",Timeupdate:"timeupdate",Seeking:"seeking",Seeked:"seeked",Volumechange:"volumechange",Durationchange:"durationchange",Fullscreen:"fullscreen",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Error:"error"};var x,k,S;!function(t){t[t.Auto=0]="Auto",t[t.Strict=1]="Strict"}(x||(x={})),function(t){t[t.PlayingState=0]="PlayingState",t[t.PausedState=1]="PausedState",t[t.PrerollState=2]="PrerollState",t[t.PostrollState=3]="PostrollState",t[t.StoppedState=4]="StoppedState",t[t.ReplayState=5]="ReplayState",t[t.HiddenState=6]="HiddenState",t[t.BufferingState=7]="BufferingState",t[t.LiveStreamStarting=8]="LiveStreamStarting",t[t.LiveStreamEnded=9]="LiveStreamEnded",t[t.LiveStreamStopped=10]="LiveStreamStopped",t[t.LiveStreamNotSupported=11]="LiveStreamNotSupported"}(k||(k={})),function(t){t.H264="h264",t.Hevc="hevc"}(S||(S={}));const O={PlayError:"playError",NewVideo:"newVideo",Buffering:"buffering",Buffered:"buffered",LevelSwitching:"levelSwitching",EndOfStream:"endOfStream",LiveStreamNotPlayable:"liveNotPlayable"},_={Change:"VideoQualityChanged",CurrentQuality:"CurrentQuality",Loaded:"QualityListLoaded"};var j;!function(t){t[t.Low144p=144]="Low144p",t[t.Low240p=240]="Low240p",t[t.Medium360p=360]="Medium360p",t[t.Medium480p=480]="Medium480p",t[t.High720p=720]="High720p",t[t.High1080p=1080]="High1080p"}(j||(j={}));const A=720,I=5e3,C={NewThumbnail:"NewThumbnail"};var T=Object.assign(Object.assign({},c.a),{FirstFramePlayed:"firstFramePlayed",ContentQuartiles:"contentQuartiles",MediaMetaUpdate:"mediaMetaUpdate",ChangeVideo:"changeVideo"});const P=Object.assign(Object.assign(Object.assign(Object.assign({},{VideoStarted:"videoStarted",VideoCompleted25:"videoCompleted25",VideoCompleted50:"videoCompleted50",VideoCompleted75:"videoCompleted75",VideoCompleted100:"videoCompleted100"}),{SubtitlesVisibilityChanged:"subtitlesVisibilityChanged"}),{PlayerClicked:"playerClicked"}),{GalleryCardClicked:"galleryCardClicked"}),M={Collapsed:"collapsed",AdCycleComplete:"adCycleComplete"};var E=e(2);class L{constructor(t,i,e,s){this.No=t,this.$o=s,this.Ho=this.qo(e,i)}qo(t,i){return Object.assign({},t[i]||t[h.ProtoDeviceType.Smartphone])}updateWidth(t){const i=this.zo(t);i!==this.currentBreakpointClass&&(Object(E.H)(this.No,this.currentBreakpointClass),Object(E.a)(this.No,i),this.currentBreakpointClass=i)}zo(t){switch(!0){case t>=this.Ho.xxl:return this.$o.Xxl;case t>=this.Ho.xl:return this.$o.Xl;case t>=this.Ho.lg:return this.$o.Lg;case t>=this.Ho.md:return this.$o.Md;case t>=this.Ho.sm:return this.$o.Sm;case t>=this.Ho.xs:return this.$o.Xs;default:return this.$o.Xxs}}}var R=e(7);const B={xl:720,lg:320,md:204,sm:142,xs:0},D={[h.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[h.ProtoDeviceType.Tablet]:Object.assign({},B),[h.ProtoDeviceType.Smartphone]:Object.assign({},B)},F={xl:720,lg:320,md:204,sm:142,xs:0},V={[h.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[h.ProtoDeviceType.Tablet]:Object.assign({},F),[h.ProtoDeviceType.Smartphone]:Object.assign({},F)},U=176,N=160,$=144,H=112,q={xl:F.xl+U,lg:F.lg+N,md:F.md+$,sm:F.sm+H},z={[h.ProtoDeviceType.Desktop]:{xl:468+U,lg:388+N,md:248+$,sm:142+H,xs:0},[h.ProtoDeviceType.Tablet]:Object.assign({},q),[h.ProtoDeviceType.Smartphone]:Object.assign({},q)},G={lg:320,md:204,sm:0},W={[h.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:0},[h.ProtoDeviceType.Tablet]:Object.assign({},G),[h.ProtoDeviceType.Smartphone]:Object.assign({},G)},J={xxl:1080,xl:0},Q={[h.ProtoDeviceType.Desktop]:{xxl:720,xl:0},[h.ProtoDeviceType.Tablet]:Object.assign({},J),[h.ProtoDeviceType.Smartphone]:Object.assign({},J)},X={[R.ProtoGalleryOrientationEnum.Landscape]:{[R.ProtoGalleryStyleMode.Detailed]:Q,[R.ProtoGalleryStyleMode.Visual]:z},[R.ProtoGalleryOrientationEnum.Portrait]:{[R.ProtoGalleryStyleMode.Detailed]:W,[R.ProtoGalleryStyleMode.Visual]:V}};var Y;!function(t){t[t.CardClicked=0]="CardClicked"}(Y||(Y={}));const K={width:160,height:90},Z={width:80,height:80},tt=3,it="EXPLORE MORE";class et{constructor(t,i,e={}){this.Go=t,this.Gn=i,this.Wo=1.2,this.Jo=16,this.Qo="normal",this.Xo={lines:0,useNativeClamping:!0},this.Yo=!1,this.Xo=Object.assign(Object.assign({},this.Xo),e),this.Yo=this.Ko()}setLines(t){this.Xo.lines=t}getClampedText(t){this.Zo=t.trim(),this.tc=this.Gn.createElementByString(`<cnx-span style="display:inline-block;width:100%;line-height:inherit;font-family:inherit;font-size:inherit;">${this.Zo}</cnx-span>`),this.Go.appendChild(this.tc);let i=0;try{i=this.ic()}catch(t){Object(n.a)({message:"LineClamp_getMaxLines",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}const e=this.ec(this.Xo.lines,i),s=this.sc(e);return Math.ceil(this.tc.getBoundingClientRect().height)-1<=s?(this.nc(),this.Zo):this.Yo?void Object(E.L)(this.Go,{overflow:"hidden",textOverflow:"ellipsis",webkitBoxOrient:"vertical",display:"-webkit-box",webkitLineClamp:e}):this.rc(this.tc.firstChild,s)}Ko(){return!!this.Xo.useNativeClamping&&void 0!==this.Go.style.webkitLineClamp}sc(t){return this.hc(this.Go)*t+(this.ac(this.tc)+this.ac(this.Go))+(this.oc(this.tc)+this.oc(this.Go))}uc(t){if(t.getBoundingClientRect){const{height:i}=t.getBoundingClientRect();if(i>0)return Math.ceil(i)}const i=t.clientHeight;return i&&i>0?Math.ceil(i):t.parentNode?this.uc(t.parentNode):0}ic(){const t=this.uc(this.Go),i=this.hc(this.Go),e=this.ac(this.tc)+this.ac(this.Go),s=this.oc(this.tc)+this.oc(this.Go),n=Math.floor((t-e-s)/i+.05);return Math.max(n,0)}lc(t){const i=this.Gn.getFontSizePropertyValue(t);return i?parseInt(i,10):this.Jo}hc(t){let i=this.Gn.getLineHeightPropertyValue(t);return i&&i!==this.Qo||(i=`${this.Wo*this.lc(t)}`),parseInt(i,10)}ac(t){if(!t)return 0;const i=this.Gn.getPaddingTopPropertyValue(t);return parseInt(i,10)||0}oc(t){if(!t)return 0;const i=this.Gn.getPaddingBottomPropertyValue(t);return parseInt(i,10)||0}ec(t,i){return t>0?0===i?t:Math.min(this.Xo.lines,i):i}rc(t,i,e){if(!i)return;void 0===e&&(e=t.nodeValue.split(" "));const s=[...e];if(s.length>1){return s.pop(),this.dc(t,`${s.join(" ")}...`),t.parentNode.offsetHeight>i?this.rc(t,i,s):(this.nc(),`${s.join(" ")}...`)}}dc(t,i){t.nodeValue=i}nc(){this.Go.innerHTML="",this.tc=null}}var st=e(87),nt=e.n(st),rt=e(51),ht=e.n(rt),at=e(29),ot=e(9);var ct=class extends o.a{constructor(t,i,e,s,n){super(),this.mediator=t,this.cr=i,this.fc=e,this.pc=s,this.Rn=n,this.ar=()=>{this.Rn.metadata.title&&this.vc()},this.bc=()=>{this.mediator.publish(this,Y[Y.CardClicked],{payload:this.Rn.id})},this.mc=this.fc.createElementByString(this.gc()),this.yc=this.mc.getElementsByClassName(d.o.CardImage)[0],this.wc=this.mc.getElementsByClassName(d.o.CardText)[0],this.xc=this.mc.getElementsByClassName(d.o.CardTextContainer)[0],this.Rn.titleFont&&Object(E.L)(this.xc,{"font-family":this.Rn.titleFont});const r=this.fc.createElement("img");r.onload=()=>{this.yc.appendChild(r)};const h=this.Rn.metadata.getThumbnailUrl(this.kc().width,this.kc().height);if(Object(v.h)(h)&&(r.src=h),r.alt=Object(v.a)(this.Rn.metadata.altText)?this.Rn.metadata.altText:"",this.Rn.style===R.ProtoGalleryStyleMode.Detailed&&this.Rn.metadata.duration){const t=this.fc.createElementByString(`<cnx class="cnx-g-card-text-info">${Object(at.f)(this.Rn.metadata.duration)}</cnx>`);this.Rn.bodyFont&&Object(E.L)(t,{"font-family":this.Rn.bodyFont}),this.xc.appendChild(t)}this.pc.register(this.mc,this,this.pc),this.subscribe(ot.a[ot.a.Click],this.pc,()=>{this.bc()}),this.relay(ot.a[ot.a.Scroll],this.pc,this,this.mediator),this.Sc=new et(this.wc,this.fc,{lines:tt,useNativeClamping:!1}),this.cr.on(this.mc,this.ar)}gc(){return this.Rn.style===R.ProtoGalleryStyleMode.Visual?nt.a:ht.a}kc(){return this.Rn.style===R.ProtoGalleryStyleMode.Visual?K:Z}vc(){const t=this.Sc.getClampedText(this.Rn.metadata.title),i=this.fc.createElementByString(`<cnx-span>${t}</cnx-span>`);Object(E.d)(i,this.wc)}get $element(){return this.mc}setActiveState(t){t?Object(E.a)(this.mc,d.h.Active):Object(E.H)(this.mc,d.h.Active)}destroy(){this.mc.removeEventListener("click",this.bc),this.cr.off(this.mc,this.ar)}clampLines(){this.vc()}};var ut=class extends o.a{constructor(t,i,e,s,n){if(super(),this.mediator=t,this.cr=i,this.fc=e,this.pc=s,this.Rn=n,this.Oc=!1,this.Rn.$slot.innerHTML=`<cnx class="${d.o.CardPlaceholder}"></cnx>`,this.Rn.style===R.ProtoGalleryStyleMode.Detailed){const t=e.createElementByString(this._c(ht.a));this.Rn.$slot.firstChild.appendChild(t)}this.pc.register(this.Rn.$slot,this.mediator,this),this.relay(ot.a[ot.a.Scroll],this.pc,this,this.mediator)}_c(t){const i=[...Array(12)].map(()=>`<cnx-span style='width: ${10+Math.floor(40*Math.random())}%'></cnx-span> `).reduce((t,i)=>t+i,"");return t.replace("<cnx-span></cnx-span>",i)}setCardData(t){this.jc=new ct(this,this.cr,this.fc,this.pc,{id:this.Rn.id,style:this.Rn.style,metadata:t,titleFont:this.Rn.titleFont,bodyFont:this.Rn.bodyFont}),this.subscribe(Y[Y.CardClicked],this.jc,({payload:t})=>{this.mediator.publish(this,Y[Y.CardClicked],{payload:t})}),this.unsubscribeAll(this.pc),this.relay(ot.a[ot.a.Scroll],this.jc,this,this.mediator),this.jc.setActiveState(this.Oc),this.Rn.$slot.innerHTML="",this.Rn.$slot.appendChild(this.jc.$element)}setActiveState(t){this.Oc=t,this.jc&&this.jc.setActiveState(this.Oc)}getContainer(){return this.Rn.$slot}clampLines(){this.jc.clampLines()}};const lt=4,dt=4,ft=20,pt=100,vt=50;var bt;!function(t){t.MainContainer="cnx-scrollbar",t.Wrapper="cnx-scrollbar-wrapper",t.Content="cnx-scrollbar-content",t.Horizontal="cnx-scrollbar-horizontal",t.Handle="cnx-scrollbar-handle",t.PreventSelect="cnx-scrollbar-prevent-select",t.ShowOnHover="cnx-scrollbar-show-on-hover"}(bt||(bt={}));class mt{constructor(t,i={}){if(this.Ac=t,this.Rn=i,this.Ic=0,this.Cc=t=>{t.preventDefault(),this.Tc=t.pageY,this.Pc=t.pageX,Object(E.a)(this.Mc,bt.PreventSelect),Object(E.a)(this.ue.document.body,bt.PreventSelect),this.ue.document.addEventListener("mousemove",this.Ec),this.ue.document.addEventListener("mouseup",this.Lc)},this.Ec=t=>{const i=this.Rn.horizontal?t.pageX-this.Pc:t.pageY-this.Tc;this.Tc=t.pageY,this.Pc=t.pageX,Object(E.K)(this.ue,()=>{this.Rn.horizontal?this.Rc.scrollLeft+=i/this.Bc:this.Rc.scrollTop+=i/this.Bc})},this.Lc=t=>{Object(E.H)(this.Mc,bt.PreventSelect),Object(E.H)(this.ue.document.body,bt.PreventSelect),this.ue.document.removeEventListener("mousemove",this.Ec),this.ue.document.removeEventListener("mouseup",this.Lc)},this.Dc=t=>{if(!this.Rn.horizontal)return;t.preventDefault();const i=t.deltaMode?pt*(t.deltaY<0?-1:1):t.deltaY,e=ft*(Math.floor(i)/33),s=this.Ic+e;s>=-1*this.Mc.clientWidth&&s<=this.Rc.scrollWidth-this.Mc.clientWidth&&(this.Ic=s),Object(E.K)(this.ue,()=>this.Rc.scrollLeft=this.Ic)},this.Fc=()=>{clearTimeout(this.Vc),this.Vc=setTimeout(()=>{this.Uc()},vt)},this.Uc=()=>{const t=this.Rn.horizontal?this.Rc.scrollWidth:this.Rc.scrollHeight,i=this.Rn.horizontal?this.Ac.clientWidth:this.Ac.clientHeight;this.Bc=i/t;const e=-1*(this.Ac.clientWidth-(this.Mc.clientWidth||lt)-dt),s=this.Ac.clientHeight-this.Mc.clientHeight-dt;Object(E.K)(this.ue,()=>{if(this.Bc>=1)Object(E.u)(this.Mc);else{if(Object(E.M)(this.Mc),this.Rn.horizontal)return void Object(E.L)(this.Mc,{width:`${Math.max(100*this.Bc,10)}%`,height:"",top:`${s}px`,right:"",left:`${this.Rc.scrollLeft/t*100}%`});Object(E.L)(this.Mc,{width:"",height:`${Math.max(100*this.Bc,10)}%`,top:`${this.Rc.scrollTop/t*100}%`,right:`${e}px`,left:""})}})},this.ue=Object(E.s)(t),!this.ue)throw new Error("window was not found");this.Nc(),this.Mc.addEventListener("mousedown",this.Cc),this.Rn.overrideNativeHorizontalScroll&&this.Rc.addEventListener("wheel",this.Dc),this.ue.addEventListener("resize",this.Fc),this.Rc.addEventListener("scroll",this.Uc),this.Rc.addEventListener("mouseenter",this.Uc),Object(E.a)(this.Ac,bt.MainContainer,this.Rn.horizontal?bt.Horizontal:void 0,this.Rn.showOnHover?bt.ShowOnHover:void 0),this.Uc();const e=Object(E.k)(this.Ac,this.ue);"0px"===e.height&&"0px"!==e.maxHeight&&Object(E.L)(this.Ac,{height:e.maxHeight})}Nc(){for(this.Mc=Object(E.f)(`<cnx class="${bt.Handle}">`,this.ue),this.$c=Object(E.f)(`<cnx class="${bt.Wrapper}">`,this.ue),this.Rc=Object(E.f)(`<cnx class="${bt.Content}">`,this.ue),this.$c.appendChild(this.Rc);this.Ac.firstChild;)this.Rc.appendChild(this.Ac.firstChild);this.Ac.appendChild(this.$c),this.Ac.insertAdjacentElement("beforeend",this.Mc)}destroy(){for(this.ue.document.removeEventListener("mousemove",this.Ec),this.ue.document.removeEventListener("mouseup",this.Lc),this.Mc.removeEventListener("mousedown",this.Cc),this.Rc.removeEventListener("wheel",this.Dc),this.ue.removeEventListener("resize",this.Fc),this.Rc.removeEventListener("scroll",this.Uc),this.Rc.removeEventListener("mouseenter",this.Uc),Object(E.I)(this.Mc);this.Rc.firstChild;)this.Ac.appendChild(this.Rc.firstChild);Object(E.I)(this.$c),Object(E.H)(this.Ac,bt.MainContainer,bt.Horizontal,bt.ShowOnHover)}}const gt=t=>t.clientHeight||t.getBoundingClientRect().height||0,yt=t=>t.clientWidth||t.getBoundingClientRect().width||0,wt=(t,i,e=!1)=>{const s=t.offsetTop,n=((t,i)=>{return(parseInt(i.getMarginTopPropertyValue(t),10)||0)+(parseInt(i.getMarginBottomPropertyValue(t),10)||0)})(t,i),r=gt(t),h=gt(t.parentElement);let a=s;if(e){const t=Math.floor(h/(r+n)),i=Math.floor(t/2);a=Math.max(s-i*(r+n),0)}t.parentElement.scrollTop=a},xt=(t,i,e=!1)=>{const s=t.offsetLeft,n=((t,i)=>{return(parseInt(i.getMarginLeftPropertyValue(t),10)||0)+(parseInt(i.getMarginRightPropertyValue(t),10)||0)})(t,i),r=yt(t),h=yt(t.parentElement);let a=s;if(e){const t=Math.floor(h/(r+n)),i=Math.floor(t/2);a=Math.max(s-i*(r+n),0)}t.parentElement.scrollLeft=a};class kt extends o.a{constructor(t,i,e,s,n,r,h,a,o){super(),this.mediator=t,this.cr=i,this.fc=e,this.pc=s,this.Hc=n,this.qc=r,this.zc=h,this.Gc=a,this.Wc=[],this.Jc=[],this.Qc=null,this.Xc=0,this.Yc=Object(E.p)(this.Hc),this.Kc=Object(E.j)(this.Hc);const c=this.zc===R.ProtoGalleryStyleMode.Detailed?d.o.StyleDetailed:d.o.StyleVisual;if(Object(E.a)(this.Hc,c),this.zc===R.ProtoGalleryStyleMode.Detailed&&(this.Hc.innerHTML=`<cnx class="${d.o.ExploreMore}">${it}</cnx>`),this.Zc=e.createElementByString(`<cnx class="${d.o.CardRail}"></cnx>`),this.Hc.appendChild(this.Zc),this.zc===R.ProtoGalleryStyleMode.Detailed){const t=e.createElementByString(`<cnx class="${d.o.FadeOut}"></cnx>`);this.Hc.appendChild(t)}this.tu(o)}start(){this.iu(),this.eu()}onResize(t){this.su&&(this.su.updateWidth(t),this.nu(),this.ru())}setCurrentIndex(t){this.Xc=t,this.Wc.forEach((i,e)=>i.card.setActiveState(t===e)),this.ru()}tu(t){t.forEach((t,i)=>{const e=this.hu(i);this.Zc.appendChild(e.getContainer()),this.Wc.push({card:e,videoSource:t}),this.subscribe(Y[Y.CardClicked],e,({payload:t})=>this.au(t)),this.relay(ot.a[ot.a.Scroll],e,this,this.mediator)})}ru(){if(Object(l.h)(this.Jc))return;const t=this.Wc[this.Xc].card.getContainer();this.Gc===R.ProtoGalleryOrientationEnum.Landscape?wt(t,this.fc,!0):xt(t,this.fc,!0)}hu(t){const i=this.fc.createElementByString(`<cnx class="${d.o.CardSlot}"></cnx>`);return new ut(this,this.cr,this.fc,this.pc,{id:t,style:this.zc,$slot:i,titleFont:this.Yc,bodyFont:this.Kc})}au(t){this.mediator.publish(this,T.ChangeVideo,{payload:{videoIndex:t}})}iu(){this.Wc.forEach(t=>{t.videoSource.getMetadata(i=>{t.card.setCardData(i),t.card.clampLines()})})}ou(){this.Jc.forEach(t=>{this.unsubscribeAll(t),this.Zc.removeChild(t.getContainer())}),this.Jc=[]}cu(){const t=this.Gc===R.ProtoGalleryOrientationEnum.Portrait?this.Zc.clientWidth:this.Zc.clientHeight,i=this.Wc[0].card.getContainer(),e=this.Gc===R.ProtoGalleryOrientationEnum.Portrait?i.clientWidth:i.clientHeight,s=Math.ceil(t/e)+1-(this.Wc.length-1);if(s>this.Jc.length-1)for(let t=0;t<=s;t++){const i=this.hu(t);this.Jc.push(i),this.relay(ot.a[ot.a.Scroll],i,this,this.mediator),this.Zc.appendChild(i.getContainer())}}nu(){this.uu()?(this.ou(),this.lu()):(this.du(),this.cu())}lu(){null===this.Qc&&(this.Qc=new mt(this.Zc,{horizontal:this.Gc===R.ProtoGalleryOrientationEnum.Portrait}),Object(E.a)(this.Zc,d.h.HasCustomScrollbar))}du(){null!==this.Qc&&(this.Qc.destroy(),this.Qc=null,Object(E.H)(this.Zc,d.h.HasCustomScrollbar))}uu(){const t=this.Wc[this.Wc.length-1].card.getContainer();return this.Gc===R.ProtoGalleryOrientationEnum.Landscape?t.offsetTop+t.clientHeight>this.Zc.clientHeight:t.offsetLeft+t.clientWidth>this.Zc.clientWidth}eu(){const t=this.fu();this.su=new L(this.Hc,this.qc,t,d.r)}fu(){return X[this.Gc][this.zc]}}var St,Ot,_t=e(20),jt=e(39),At=e(25);!function(t){t.enter="enterFullscreen",t.exit="exitFullscreen"}(St||(St={}));class It{constructor(t,i,e,s){if(this.mediator=t,this.fc=i,this.$n=s,this.pu=!1,this.vu=1e3,this.bu=!0,this.mu=!1,this.gu=()=>{this.pu&&this.yu()},this.wu=t=>{this.pu?null!==this.fullscreenElement?this.yu():this.xu():this.mediator.publish(this,St.exit)},this.xu=()=>{this.mu=!1,this.ku.reject(),this.pu=!1,clearTimeout(this.Su)},this.Ou=s&&s===_t.b.Ios?e.getElementsByTagName("video")[0]:e,!this.Ou)throw new Error("element is missing");try{const t=this._u();if(null==t)return void(this.bu=!1);this.ju=t.keys,this.Au=t.name,this.Iu()}catch(t){this.bu=!1,Object(n.a)({message:"Fullscreen init failed",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}_u(){let t;return t=this.$n===_t.b.Ios?this.fc.getFullscreenKeys(this.Ou):this.fc.getFullscreenKeys()}get fullscreenElement(){return this.fc.getDocumentProperty(this.ju.fullscreenElement)}get fullscreenEnabled(){return this.fc.getDocumentProperty(this.ju.fullscreenEnabled)}enterFullScreen(){if(this.bu){this.ku=new jt.a,this.pu=!0,clearTimeout(this.Su),this.Su=setTimeout(this.xu,this.vu);try{this.Ou[this.ju.requestFullscreen]()}catch(t){this.xu()}return this.ku.promise}}exitFullScreen(){try{this.fc.exitFullscreen(this.ju.exitFullscreen,this.$n===_t.b.Ios?this.Ou:void 0)}catch(t){Object(n.a)({message:"fullscreen_exit",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.WARNING})}this.mu=!1}Iu(){this.Au===At.d.Moz||this.Au===At.d.Ms?(this.fc.addEventListenerOnGlobal(this.ju.fullscreenchange,this.wu),this.fc.addEventListenerOnGlobal(this.ju.fullscreenerror,this.xu)):(this.Ou.addEventListener(this.ju.fullscreenchange,this.wu),this.Ou.addEventListener(this.ju.fullscreenerror,this.xu)),this.$n===_t.b.Ios&&(this.Ou.addEventListener("webkitbeginfullscreen",this.gu),this.Ou.addEventListener("webkitendfullscreen",this.wu))}Cu(){this.Au===At.d.Moz||this.Au===At.d.Ms?(this.fc.removeEventListenerOnGlobal(this.ju.fullscreenchange,this.wu),this.fc.removeEventListenerOnGlobal(this.ju.fullscreenerror,this.xu)):(this.Ou.removeEventListener(this.ju.fullscreenchange,this.wu),this.Ou.removeEventListener(this.ju.fullscreenerror,this.xu)),this.$n===_t.b.Ios&&(this.Ou.removeEventListener("webkitbeginfullscreen",this.gu),this.Ou.removeEventListener("webkitendfullscreen",this.wu))}yu(){this.mu=!0,this.mediator.publish(this,St.enter),this.ku.resolve(),this.pu=!1,clearTimeout(this.Su)}get isFullscreen(){return this.mu}destroy(){this.isFullscreen&&this.exitFullScreen(),this.Cu(),this.ku&&this.ku.isPending&&this.ku.reject()}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Replay=2]="Replay",t[t.Volume=3]="Volume",t[t.Mute=4]="Mute",t[t.Unmute=5]="Unmute",t[t.Seek=6]="Seek",t[t.DraggingStart=7]="DraggingStart",t[t.DraggingStopped=8]="DraggingStopped",t[t.SeekingStart=9]="SeekingStart",t[t.SeekingStopped=10]="SeekingStopped",t[t.Expand=11]="Expand",t[t.Collapse=12]="Collapse",t[t.Quality=13]="Quality",t[t.Close=14]="Close",t[t.Next=15]="Next",t[t.Prev=16]="Prev",t[t.Settings=17]="Settings",t[t.CaptionOn=18]="CaptionOn",t[t.CaptionOff=19]="CaptionOff",t[t.CaptionUpdate=20]="CaptionUpdate",t[t.VolumeHoverStart=21]="VolumeHoverStart",t[t.VolumeHoverStopped=22]="VolumeHoverStopped",t[t.OverlayClick=23]="OverlayClick",t[t.UIHideStart=24]="UIHideStart",t[t.UIShowStart=25]="UIShowStart",t[t.UIEndShowHide=26]="UIEndShowHide",t[t.AboutClick=27]="AboutClick",t[t.ContextClick=28]="ContextClick",t[t.SettingsMenu=29]="SettingsMenu",t[t.HoverStart=30]="HoverStart",t[t.HoverEnd=31]="HoverEnd",t[t.StateChanged=32]="StateChanged",t[t.RebindComponent=33]="RebindComponent",t[t.SkipAd=34]="SkipAd",t[t.LogoClicked=35]="LogoClicked",t[t.ContextMenuOpen=36]="ContextMenuOpen",t[t.ContextMenuClose=37]="ContextMenuClose"}(Ot||(Ot={}));var Ct,Tt,Pt,Mt=e(13),Et=e(3);!function(t){t.EnterStart="enterStart",t.EnterStop="enterStop",t.ExitStart="exitStart",t.ExitStop="exitStop"}(Ct||(Ct={})),function(t){t[t.DirectionIn=0]="DirectionIn",t[t.DirectionOut=1]="DirectionOut",t[t.FadeIn=2]="FadeIn"}(Tt||(Tt={})),function(t){t.Float="float",t.Embed="embed"}(Pt||(Pt={}));const Lt=400,Rt=1e3,Bt=20,Dt=.5;class Ft{constructor(t,i,e,s,n,r=0){this.Tu=t,this.Rn=i,this.No=e,this.qc=s,this.Gn=n,this.Pu=r,this.Mu=0,this.Eu=void 0,this.Lu=null,this.Ru=!1,this.Bu=500,this.Du=()=>{this.Eu&&this.Fu()},this.Vu=()=>{if(this.Rn.width=this.Uu.clientWidth,this.Nu(),this.Eu){const t=!1;this.$u(t)}},this.Nu=()=>{this.Hu()?!this.qu||this.Eu||this.Ru?this.zu():this.Gu():this.Eu&&this.Wu()},this.Ju=t=>{if(this.Qu(t.propertyName))switch(this.transitionState){case Tt.DirectionIn:this.transitionState=void 0,this.Xu();break;case Tt.DirectionOut:this.transitionState=void 0,this.Yu();break;case Tt.FadeIn:this.transitionState=void 0,this.Ku()}},this.Zu()}get transitionState(){return this.tl}set transitionState(t){this.tl===Tt.FadeIn&&this.il(d.m.FadeInBase,d.m.FadeIn),this.tl=t}el(...t){Object(E.a)(this.No,...t)}il(...t){Object(E.H)(this.No,...t)}zu(){this.qc!==h.ProtoDeviceType.Smartphone&&(this.No.style.width=`${this.Rn.width}px`);const t=this.No.getBoundingClientRect().width;this.No.style.height=this.Rn.getHeight(t)}sl(){return Object(l.g)(this.qc,this.Rn.floatingDeviceMode)}nl(){this.Gn.addEventListenerOnGlobal("scroll",this.Du)}Fu(){this.Uu&&(this.rl(),this.hl<this.Rn.floatingGutterY?this.al(this.Rn.floatingGutterY):this.al(this.hl))}ol(){this.Uu=this.Gn.querySelector(this.Rn.pageElement),this.Uu&&(clearInterval(this.Lu),this.Rn.width=this.Uu.clientWidth,this.Nu(),this.Tu.on(this.Uu,this.Vu),this.Tu.on(this.Gn.getGlobalClosestTop().topFrame.document.body,this.Vu))}rl(){switch(this.Rn.appendLocation){case h.ProtoFloatingAppendLocationEnum.Above:this.hl=this.Uu.getBoundingClientRect().top-this.No.offsetHeight-this.Rn.floatingYAxisPadding;break;case h.ProtoFloatingAppendLocationEnum.Below:this.hl=this.Uu.getBoundingClientRect().top+this.Uu.offsetHeight+this.Rn.floatingYAxisPadding;break;case h.ProtoFloatingAppendLocationEnum.Within:this.hl=this.Uu.getBoundingClientRect().top}}cl(){this.Lu=setInterval(()=>{this.ol()},this.Bu),this.ol()}ul(){return this.Rn.floatingPosition===h.ProtoFloatingFixedPositionMode.Element}Qu(t){switch(this.transitionState){case Tt.DirectionIn:case Tt.DirectionOut:if("right"===t||"left"===t)return!0;break;case Tt.FadeIn:if("opacity"===t)return!0}return!1}ll(){this.No.style.top="",this.No.style.bottom="",this.No.style.left="",this.No.style.right="",this.No.style.width="",this.No.style.height="",this.No.style.transform=""}Yu(){this.Eu=!1,this.il(d.n.MainClass,d.n.TransitionClass,this.Rn.positionClass),this.ll(),this.dl()}fl(){this.Rn.isPositionedTop?(this.No.style.top=`${this.Rn.floatingGutterY}px`,this.No.style.bottom="auto"):this.Rn.isPositionedBottom&&(this.No.style.top="auto",this.No.style.bottom=`${this.Rn.floatingGutterY}px`)}al(t){this.No.style.transform=`translateY(${t}px)`}pl(t){t?this.el(d.n.TransitionClass):this.il(d.n.TransitionClass)}vl(t,i=!1,e=!1){this.pl(i),e||this.Rn.isPositionedLeft?(this.No.style.left=`${t}px`,this.No.style.right="auto"):(this.No.style.left="auto",this.No.style.right=`${t}px`)}Hu(){return Object(E.s)(this.No).document.body.getBoundingClientRect().width>=this.Pu}Gu(){if(this.Hu()&&(!this.ul()||this.Uu&&(!this.Uu||0!==this.Uu.clientWidth)))if(this.Eu=!0,this.transitionState=Tt.DirectionIn,this.el(d.n.MainClass,this.Rn.positionClass),this.Nu(),this.ul()?(this.No.style.top="0px",this.bl(),this.vl(this.Mu,!1,!0),this.Fu()):(this.fl(),this.vl(this.Mu)),this.ml(),Object(E.i)(this.No),this.Uu){const t=!0;this.$u(t)}else this.vl(this.Rn.floatingGutterX,!0)}bl(){this.Uu&&(this.Gn.getElementCoordinates(this.Uu).clientX<this.Gn.getBodyDimensions().width/2?(this.Rn.isPositionedLeft=!0,this.Rn.isPositionedRight=!1):(this.Rn.isPositionedLeft=!1,this.Rn.isPositionedRight=!0),this.Zu())}Zu(){this.ul()&&this.Rn.isPositionedRight?this.Mu=this.Gn.getBodyDimensions().width+(this.Rn.floatingWidth||Rt)+Bt:this.Mu=-((this.Rn.floatingWidth||Rt)+Bt)}$u(t){let i;this.bl(),i=this.Gn.getElementCoordinates(this.Uu).clientX,this.Rn.isPositionedLeft?i+=this.Rn.floatingGutterX:i-=this.Rn.floatingGutterX,this.vl(i,t,!0)}Wu(t=!0){let i;t&&(this.transitionState=Tt.DirectionOut),this.gl(),i=this.ul(),this.vl(this.Mu,t,i),t||this.Yu()}yl(){this.No.addEventListener("transitionend",this.Ju),this.Tu.on(this.No,this.Nu),this.ul()&&(this.cl(),this.nl())}wl(){this.Tu.off(this.No,this.Nu),this.No.removeEventListener("transitionend",this.Ju),this.Uu&&(this.Tu.off(this.Uu,this.Vu),this.Tu.off(this.Gn.getGlobalClosestTop().topFrame.document.body,this.Vu),this.Gn.removeEventListenerOnGlobal("scroll",this.Du),clearInterval(this.Lu))}get isInFloating(){return this.Eu}}class Vt extends Ft{constructor(t,i,e,s,n,r,a,o=0){super(e,n,s,r,a,o),this.mediator=t,this.kl=i,this.Sl=!0,this.Ol=!0,this._l=!1,this.qu=!1,this.jl=t=>{const i=this.kl.getIsTabInFocus();t&&this.isInFloating&&(this.qu=!1,this.Wu()),this.Sl&&this.Rn.floatingMode===h.ProtoPlayerFloatingMode.AfterInView&&t&&(this.Sl=!1),!t&&!this.Sl&&this.Ol&&i&&(this.qu=!0,super.Gu())},this.zu=()=>{this.isInFloating&&super.zu()}}Wu(){const t=!this._l;super.Wu(t)}gl(){this.mediator.publish(this,Ct.ExitStart)}dl(){this.Al()}ml(){this.mediator.publish(this,Ct.EnterStart)}Al(){this.transitionState=Tt.FadeIn,this.il(d.m.FadeIn),this.el(d.m.FadeInBase),Object(E.i)(this.No),this.el(d.m.FadeIn)}Xu(){this.mediator.publish(this,Ct.EnterStop)}Ku(){this.il(d.m.FadeInBase,d.m.FadeIn),this.mediator.publish(this,Ct.ExitStop),this.Ru&&super.wl()}Il(){this.kl.on(this.No.parentElement,this.jl,{threshold:Dt})}Cl(){this.kl.off(this.No.parentElement,this.jl)}start(){this.sl()&&(super.yl(),this.Rn.floatingMode===h.ProtoPlayerFloatingMode.OnPageLoad&&(this.Sl=!1),this.Il(),this.jl(this.kl.check({element:this.No.parentElement,threshold:Dt})))}canFloat(){return this.sl()&&this.Rn.floatingMode!==h.ProtoPlayerFloatingMode.Off}destroy(){this.isInFloating?(this.Yu(),this.Ru=!0):super.wl(),this.Cl()}get enabled(){return this.Ol}set enabled(t){this.Ol=t}fullscreenStateChange(t){this._l=t,t?this.Cl():this.Il(),this.jl(t)}}class Ut extends Ft{constructor(t,i,e,s,n,r,h=0){super(i,s,e,n,r,h),this.mediator=t,this.qu=!0}ml(){}Xu(){this.mediator.publish(this,Ct.EnterStop)}gl(){}dl(){}Ku(){}start(){this.sl()&&(super.yl(),super.Gu())}}const Nt={DetachedFromDom:"detachedFromDom",AdSlotResized:"adSlotResized"},$t={DetachedFromDom:"detachedFromDom",AdsEnabled:"adsEnabled"},Ht={MidRollCapped:"midRollCapped",TotalAdBreakLengthExpired:"totalAdBreakLengthExpired",EnableAds:"enableAds",DisableAds:"disableAds",ForceStopAdSlot:"ForceStopAdSlot",ForceStopAdPod:"ForceStopAdPod",AdOpportunity:"adOpportunity",AdPodRemainingTime:"AdPodRemainingTime"};var qt;!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(qt||(qt={}));var zt=qt;const Gt=1.3;class Wt{constructor(){this.Tl={},this.Pl=[]}getImage(t,i,e,s,n="",r=!1){return this.Ml=t,this.El=Object(v.h)(i)?i:"",this.Ll=e,this.Rl=s,this.Bl=n,this.Dl=r,this.Fl()}Fl(){const t=this.Vl();if(t)return t;const i=this.Ml+this.Bl,e=new Image;return e.src=i,e.alt=this.El,this.Tl[this.Ml]=this.Tl[this.Ml]||{},this.Tl[this.Ml][this.Ll]=this.Tl[this.Ml][this.Ll]||{},this.Tl[this.Ml][this.Ll][this.Rl]=this.Tl[this.Ml][this.Ll][this.Rl]||{},this.Tl[this.Ml][this.Ll][this.Rl][this.Bl]=e,e}Vl(){const t=this.Ul();if(t)return t;if(!this.Dl)return;this.Nl();const i=this.$l();if(i)return i;const e=this.Hl();return e||void 0}Nl(){const t=[];if(!this.Tl[this.Ml])return void(this.Pl=[]);const i=this.Tl[this.Ml],e=this.Ll>this.Rl?zt.Landscape:zt.Portrait;Object.keys(i).forEach(s=>{const n=parseInt(s,10);Object.keys(i[s]).filter(t=>!!i[s][t]).forEach(i=>{const s=parseInt(i,10);if((n>s?zt.Landscape:zt.Portrait)!==e)return;const r={area:n*s,img:this.ql(this.Ml,n,s)};t.push(r)})}),this.Pl=[...t]}ql(t,i,e){if(this.Tl[t]&&this.Tl[t][i]&&this.Tl[t][i][e])return this.Tl[t][i][e][Object.keys(this.Tl[t][i][e])[0]]}Ul(){return this.Tl[this.Ml]&&this.Tl[this.Ml][this.Ll]&&this.Tl[this.Ml][this.Ll][this.Rl]&&this.Tl[this.Ml][this.Ll][this.Rl][this.Bl]}$l(){if(0===this.Pl.length)return;const t=this.Ll*this.Rl,i=this.Pl.filter(({area:i})=>i>t).sort((t,i)=>t.area-i.area);return 0!==i.length?i[0].img:void 0}Hl(){if(0===this.Pl.length)return;const t=this.Ll*this.Rl,i=this.Pl.filter(({area:i})=>i<t&&t/i<=Gt).sort((t,i)=>i.area-t.area);return 0!==i.length?i[0].img:void 0}}var Jt=e(43);class Qt{constructor(t){this.zl=t,this.Gl={breakType:h.ProtoAdBreakTypeEnum.None,currentPodNumber:0,maxAdSlotDuration:0,maxAdPodDuration:0,totalNumberOfAdSlots:0},this.Wl=null}setNewBreak(t){this.zl.forEach(i=>{i.types.forEach(e=>{(function(t,i){let e=!1;switch(t){case h.ProtoAdBreakTypeEnum.PreRoll:e=i===h.ProtoAdSlotsEnum.PreRoll;break;case h.ProtoAdBreakTypeEnum.MidRoll:e=i===h.ProtoAdSlotsEnum.MidRoll;break;case h.ProtoAdBreakTypeEnum.PostRoll:e=i===h.ProtoAdSlotsEnum.PostRoll}return e})(e,t)&&(this.Gl.currentPodNumber=i.numberOfAdSlots,this.Gl.maxAdSlotDuration=i.maxAdSlotDuration,this.Gl.maxAdPodDuration=i.maxAdPodDuration,this.Gl.totalNumberOfAdSlots=i.numberOfAdSlots)})})}adStarted(){this.Jl(),0===this.Gl.currentPodNumber&&(this.Gl.currentPodNumber=this.Gl.totalNumberOfAdSlots),this.Gl.currentPodNumber--}endPod(){this.Jl(),this.Gl.currentPodNumber=0}enterPodTimeout(t){this.Jl(),this.Wl=setTimeout(()=>{this.Jl(),t()},I)}isInAdPod(){return this.Gl.currentPodNumber>0}isCurrentBreakInPod(){return this.Gl.totalNumberOfAdSlots>1}getMaxAdSlotDuration(){return this.Gl.maxAdSlotDuration}getMaxAdPodDuration(){return this.Gl.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let i=0;i<this.zl.length;i++){if(0===this.zl[i].maxAdSlotDuration)return 0;t=Math.max(t,this.zl[i].maxAdSlotDuration)}return t}getCurrentSlotIndex(){return this.Gl.totalNumberOfAdSlots-this.Gl.currentPodNumber}getNextSlotIndex(){const t=this.getCurrentSlotIndex();return this.Gl.totalNumberOfAdSlots>t?t+1:1}getTotalNumberOfSlots(){return this.Gl.totalNumberOfAdSlots}isInPodTimeout(){return!!this.Wl}Jl(){clearTimeout(this.Wl),this.Wl=null}}var Xt=e(18),Yt=e(8),Kt=e(47),Zt=e(10),ti=e(31);const ii=["com.accuweather.android"],ei=.05*Zt.f;class si extends o.a{constructor(t,i,e){super(),this.mediator=t,this.Es=i,this._appSettings=e,this.Ql=.01,this.Yl=.5,this.Kl=2e3,this.Zl=0,this.td=!1,this.ed=!1,this.sd=!1,this.nd=!1,this.rd=!1,this.hd=!1,this.od=!1,this.ph=h.ProtoAdSlotsEnum.PreRoll,this.mu=!1,this.ud=!1,this.ld=!1,this.dd=!1,this.fd=!1,this.pd=!1,this.vd=!1,this.bd={[Et.b.AdRemainingTimeChange]:t=>{var i;this.fd&&this.app.config.isInAppAndroid&&(null===(i=this.adHandler)||void 0===i||i.pause())},[Et.b.AdImpression]:t=>{this.app.services.TimeLogService.add(this.app.config.playerId,ti.a.AdImpression),this.gd.onAdImpression(t),this.yd(),this.mediator.publish(this,Mt.b.AdImpression,t);const{adSourceData:i,customAdData:e}=t.payload;this.wd(i,e)},[Et.b.AdStopped]:t=>{this.mediator.publish(this,Mt.b.AdStopped,t),this.xd(),this.kd(),this.app.services.EventsStorageService.emitAdStopped(),this.od&&this.Sd()},[Et.b.AdError]:t=>{this.adHandler.inImpression&&this.xd(),this.mediator.publish(this,Mt.b.AdError,t),this.app.services.EventsStorageService.emitAdError()},[Et.b.AdSkipped]:t=>{this.mediator.publish(this,Mt.b.AdSkipped,t),this.app.services.EventsStorageService.emitAdSkipped();this.floatingModule.enabled=!0,this.xd(!0),this.kd(),this.od&&this.Sd()},[Et.b.AdPaused]:t=>{this.gd.onAdPause(),this.app.services.TrackingService.setSessionPlayback(!1),this.app.services.EventsStorageService.emitAdPaused(),this.mediator.publish(this,Mt.b.AdPause,t)},[Et.b.AdPlaying]:t=>{this.gd.onAdPlay(),this.app.services.TrackingService.setSessionPlayback(!0),this.app.services.EventsStorageService.emitAdPlaying(),this.mediator.publish(this,Mt.b.AdPlay,t)},[Et.b.AdVideoFirstQuartile]:t=>{this.mediator.publish(this,Mt.b.AdCompleted25,t),this.app.services.EventsStorageService.emitAdVideoFirstQuartile()},[Et.b.AdVideoMidpoint]:t=>{this.mediator.publish(this,Mt.b.AdCompleted50,t),this.app.services.EventsStorageService.emitAdVideoMidpoint()},[Et.b.AdVideoThirdQuartile]:t=>{this.mediator.publish(this,Mt.b.AdCompleted75,t),this.app.services.EventsStorageService.emitAdVideoThirdQuartile()},[Et.b.AdVideoComplete]:t=>{this.mediator.publish(this,Mt.b.AdCompleted100,t),this.app.services.EventsStorageService.emitAdVideoComplete()},[Et.b.AdClickThru]:t=>{this.mediator.publish(this,Mt.b.AdClick,t),this.app.services.EventsStorageService.emitAdClickThru()},[Et.b.AdInteraction]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[Et.b.AdUserAcceptInvitation]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[Et.b.AdUserClose]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[Et.b.AdUserMinimize]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[Et.b.AdVideoStart]:t=>{const{adSourceData:i}=t.payload,e={duration:i&&i.length,mediaPlayerVolume:this.getVolume()};this.app.services.EventsStorageService.emitAdVideoStart(e)},[Et.b.AdLoaded]:t=>{var i;const{adLoadedData:e}=t.payload;(null===(i=e)||void 0===i?void 0:i.skipOffset)<0&&(e.skipOffset=void 0);const s=this.Od(e);this.app.services.EventsStorageService.emitAdLoaded(s)},[Et.b.AdVolumeChange]:()=>{this.app.services.EventsStorageService.emitAdVolumeChange()}},this._d=t=>i=>{const e=this.bd[t];e&&e(i)},this.jd=t=>{this.ud=t,t&&(this.app.services.ViewabilityService.off(this.$playerContainer,this.jd),this.Id())},this.Cd=t=>{t&&this.adHandler&&!this.dd&&setTimeout(()=>{this.adHandler.resumeWithoutUserInteraction()},ei)},this.Td=()=>{!this.ed&&this.Pd()&&(this.mediator.publish(this,c.b.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.Td))},this.Ed=({payload:{playback:t,isFullscreenClose:i}})=>{this.floatingModule&&Object(v.a)(t)&&!i&&(this.floatingModule.enabled=t)},this.Ld=()=>{this.Rd(1)},this.Bd=()=>{this.Rd(0)},this.Dd=t=>{this.Ed(t);const{playback:i}=t.payload;Object(v.a)(i)&&(i?(this.app.services.EventsStorageService.emitAdPlay(),this.dd=!1):(this.app.services.EventsStorageService.emitAdPause(),this.dd=!0))},this.Fd=new Wt}Vd(){}wd(t,i){this.app.services.EventsStorageService.emitAdImpression(t,i)}kd(){this.app.services.EventsStorageService.emitAdComplete()}Ud(){}Sd(){}Nd(){}$d(){}Hd(){}qd(){}zd(){}Gd(t){const i={state:t};this.app.services.EventsStorageService.emitAdStateChange(i)}Wd(){const{clientWidth:t,clientHeight:i}=this.$playerContainer,e={width:t,height:i};this.app.services.EventsStorageService.emitPlayerResized(e)}Jd(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}Qd(){this.app.services.EventsStorageService.emitOnExitFullscreen()}Xd(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}Yd(){this.app.services.EventsStorageService.emitOnPlayerExpanded()}Kd(t){this.Zd(t),this.tf(t),this.if(t),this.ph=t,this.ef(t)}tf(t){this.adHandler&&this.adHandler.adStateChange(t,this.sf.getMaxAdSlotDuration())}if(t){this.gd.onAdStateChange(t,{maxAdPodDuration:this.sf.getMaxAdPodDuration(),maxAdSlotDuration:this.sf.getMaxAdSlotDuration()})}Zd(t){this.sf.setNewBreak(t)}ef(t){this.Gd(Jt.b[t])}nf(){this.adHandler&&this.adHandler.contentChanged(),this.gd.contentChanged()}rf(){this.adHandler=this.hf(),this.af(),this.relay(Mt.b.ImpressionPrice,this.adHandler,this,this.mediator),this.subscribe(c.b.UserInteraction,this.adHandler,this.Dd),this.subscribe(Nt.DetachedFromDom,this.adHandler,()=>{this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.$experienceContainer)?this.triggerDestroy():(this.unsubscribeAll(this.adHandler),this.adHandler.destroy(),this.adHandler=null,Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"only_adHandler_destroyed",sendMaxLog:!1,throttle:1}))});const t=()=>{this.app.services.TrackingService.setAdStart(),this.ld=!0,this.dd=!1,this.Id(),this.unsubscribe($t.AdsEnabled,this.adHandler,t)};this.subscribe($t.AdsEnabled,this.adHandler,t),this.subscribe(Nt.AdSlotResized,this.adHandler,({payload:{width:t,height:i}})=>{this.gd.onResize(t,i)})}af(){Object.keys(Et.b).forEach(t=>{this.subscribe(Et.b[t],this.adHandler,i=>{const e=Et.b[t];this._d(e)(i),this.mediator.publish(this,e,i)})})}xd(t=!1){let i=this.sf.isInAdPod();t&&(i=!1,this.sf.endPod()),this.gd.onAdFinished(this.adHandler.inImpression,i),this.cf(),this.uf.isCloseButton&&(this.floatingModule&&this.floatingModule.isInFloating?this.lf(this.uf.floatingCloseButtonMode):this.lf(this.uf.closeButtonMode))}yd(){this.sf.adStarted(),this.adHandler.show()}cf(){this.adHandler.hide()}df(t){this.adHandler.enterAdPodLoadingState(),this.sf.enterPodTimeout(()=>{this.sf.endPod(),t()})}ff(){Object(E.i)(this.$playerContainer),this.gd=this.pf(),this.subscribe(Ht.EnableAds,this.gd,()=>{this.adHandler&&this.adHandler.enableAds()}),this.subscribe(Ht.DisableAds,this.gd,()=>{this.adHandler&&this.adHandler.disableAds()}),this.subscribe(Ht.ForceStopAdSlot,this.gd,()=>{this.adHandler&&this.adHandler.stopAd("forceStopAdSlot")}),this.subscribe(Ht.ForceStopAdPod,this.gd,()=>{if(this.adHandler)if(this.adHandler.inImpression)this.sf.endPod(),this.adHandler.stopAd("forceStopAdPod");else{const t=!0;this.xd(t)}}),this.subscribe(Ht.AdPodRemainingTime,this.gd,t=>{this.adHandler&&this.adHandler.updatePodRemainingTime(t.payload.remainingTime)}),this.subscribe(Ht.AdOpportunity,this.gd,t=>{const i=t.payload;this.app.services.TrackingService.trackAdOpportunity(i),this.adHandler&&this.adHandler.newAdOpportunity()})}vf(){this.app.services.ViewabilityService.on(this.$playerContainer,this.jd,{threshold:this.Yl,callbackDelay:this.Kl}),this.app.services.ViewabilityService.on(this.$playerContainer,(t,i)=>this.jl(t,i),{threshold:this.Ql}),this.app.services.ViewabilityService.subscribe(Mt.e.OmidViewabilityThreshold,t=>{this.mediator.publish(this,Mt.e.OmidViewabilityThreshold,{payload:{threshold:t}})}),this.app.config.os.os===_t.b.Ios&&this.app.services.PageFocusService.on(this.Cd)}Id(){this.ud&&this.ld&&this.mediator.publish(this,c.c.SessionView)}jl(t,i=!1){var e;const{isRecyclerViewIntegration:s}=this.app.config;this.gd.setToggleAdsReason({isAppBackgrounded:i,inAppRecyclerViewViewability:s&&!t}),this.app.config.isInApp&&(i?(this.fd=!0,this.vd?this.pd=!0:this.pd=!1,this.bf=this.getVolume(),this.setVolume(0),null===(e=this.adHandler)||void 0===e||e.disableAds(),this.pause()):(this.bf&&(this.setVolume(this.bf),this.bf=null),this.fd&&(this.fd=!1,this.pd||this.play()))),this.od=t,this.mediator.publish(this,Mt.b.IsViewable,{payload:t}),this.gd.viewabilityStateChanged(this.checkFloatingViewability(t),this.sf.isInAdPod(),this.sf.isInPodTimeout()),this.app.services.TrackingService.setSessionViewability(t),t&&this.app.services.TimeLogService.add(this.app.config.playerId,ti.a.FirstTimeInView)}checkFloatingViewability(t){const i=this.app.services.ViewabilityService.getIsTabInFocus();return!(t||!this.floatingModule||!this.floatingModule.isInFloating||!i)||t}eh(){const t=this.$playerContainer.clientWidth,i=this.$playerContainer.clientHeight;this.adHandler?this.resizeAdHandler():this.gd.onResize(t,i),this.breakPointsHandler.updateWidth(t),setTimeout(()=>{this.mediator.publish(this,Mt.b.SizeChanged,{payload:{width:t,height:i}}),this.mf()})}mf(){this.mu||this.Wd()}gf(){this.app.services.ResizeObserver.on(this.$playerContainer,()=>{this.eh()})}yf(){this.mu=!0,this.app.services.InteractionService.disableScrollEvent(),this.Jd(),this.adHandler&&this.adHandler.setVastViewMode(Et.a.Fullscreen)}wf(){this.mu=!1,this.app.services.InteractionService.enableScrollEvent(),this.Qd(),this.adHandler&&this.adHandler.setVastViewMode(Et.a.Normal)}xf(){const t=`<cnx class='${d.c}'></cnx>`,i=this.app.services.GlobalDomUtilsService.createElementByString(t);return this.kf(i),i}kf(t){Object(E.L)(t,{"padding-bottom":`${this.Sf()}%`})}Sf(){return this.uf.playerSize.ratioHeight/this.uf.playerSize.ratioWidth*100}Of(){this.subscribe(Ct.EnterStart,this.floatingModule,()=>{this.mediator.publish(this,Mt.c.PlayerFloatChanged,{payload:Pt.Float})}),this.subscribe(Ct.ExitStop,this.floatingModule,()=>{this.mediator.publish(this,Mt.c.PlayerFloatChanged,{payload:Pt.Embed})}),this.subscribe(Ct.EnterStop,this.floatingModule,()=>{this.jl(!0)})}_f(){this.floatingModule=new Vt(this,this.app.services.ViewabilityService,this.app.services.ResizeObserver,this.$playerContainer,this.uf.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService,this.jf),this.Of(),this.floatingModule.start()}Af(){const t=new Ut(this,this.app.services.ResizeObserver,this.$experienceContainer,this.uf.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService);this.subscribe(Ct.EnterStop,t,()=>{this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)}),t.start()}setNewVolume(t){this.adHandler&&this.adHandler.setVolume(t)}If(){this.Cf(),this.adHandler&&this.Tf(this.adHandler)}Tf(t){this.subscribe(c.b.UserInteraction,t,({payload:{volume:t}})=>{t&&this.Pf()})}Jr(t){this.mediator.publish(this,Mt.b.VolumeChanged,{payload:t}),this.app.services.EventsStorageService.emitVolumeChange(t)}Rd(t){this.getVolume()!==t&&this.setNewVolume(t)}Cf(){this.td=!0,this.$playerContainer.addEventListener("mouseover",this.Ld),this.$playerContainer.addEventListener("mouseout",this.Bd)}Pf(){this.td&&(this.td=!1,this.$playerContainer.removeEventListener("mouseover",this.Ld),this.$playerContainer.removeEventListener("mouseout",this.Bd))}Mf(t){switch(t){case h.ProtoPlayerCloseButtonMode.OnHover:case h.ProtoPlayerCloseButtonMode.AlwaysOn:return!0;case h.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd:return!(!this.adHandler||!this.adHandler.firstAdShown);default:return!1}}lf(t){this.Mf(t)?(Object(E.a)(this.$playerContainer,d.g.CanClose),this.Ef(t)):Object(E.H)(this.$playerContainer,d.g.CanClose)}Lf(){this.breakPointsHandler=new L(this.$playerContainer,this.app.config.device,this.Rf,this.Bf),this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}Df(){this.uf.isCloseButton&&(this.subscribe(Ot[Ot.Close],this.adHandler,()=>{this.handleClose()}),this.lf(this.uf.closeButtonMode),this.floatingModule&&this.floatingModule.canFloat()&&(this.subscribe(Ct.EnterStop,this.floatingModule,()=>{this.lf(this.uf.floatingCloseButtonMode)}),this.subscribe(Ct.ExitStart,this.floatingModule,()=>{this.lf(this.uf.closeButtonMode)}),this.subscribe(Ct.ExitStop,this.floatingModule,()=>{this.lf(this.uf.closeButtonMode)})))}Od(t){const{skipOffset:i}=t;return{isAutoPlay:this.uf.playbackMode===h.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:i,isSkippable:Object(v.d)(i)}}Ff(){this.ld=!0,this.app.services.TrackingService.setContentStart(),this.Id()}Pd(){const{clientWidth:t,clientHeight:i}=this.$experienceContainer;return!Object(Xt.c)({width:t,height:i})||this.Vf()}Vf(){return ii.includes(this.app.config.bundleID)}Uf(t){try{const{display:i,width:e,height:s,flex:n,maxWidth:r,minWidth:h}=this.app.services.GlobalDomUtilsService.getComputedStyle(t),{width:a,height:o}=t.getBoundingClientRect(),c={display:i,compWidth:e,boundWidth:a,compHeight:s,boundHeight:o,flex:n,maxWidth:r,minWidth:h};return{type:t.nodeName,styles:JSON.stringify(c)}}catch(t){return{err:"BaseExperience_getElementInfo_error"}}}Nf(){if(!Object(Yt.k)([95,5]))return;const t={parent:this.Uf(this.$experienceContainer.parentElement),main:this.Uf(this.$experienceContainer)};Object(n.a)({message:"BaseExperience_invalid_dimensions",level:h.ProtoLoggingLevelEnum.INFO,exception:JSON.stringify(t)})}$f(){this.sf=new Qt(this.uf.adBreaks)}Uo(t,i,e){this.uf=t,this.app=i,this.$experienceContainer=e,this.Vd(),this.app.services.ViewabilityService.setViewableThreshold(this.Zl),this.generateHTML(),this.$f(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.Td),this.Pd()?this.mediator.publish(this,c.b.CanStart):this.Nf()}start(){this.ed=!0,Object(E.a)(this.$experienceContainer,d.b.MainContainerFlex),this.mediator.publish(this,c.c.SessionRendered),this.Lf(),this.gf(),this.uf.floatingSettings.floatingMode===h.ProtoPlayerFloatingMode.Always?this.Af():(this.Wd(),this._f()),this.vf(),this.uf.lineItemSettings.lineItems.length>0&&!this.uf.disableAdvertising&&!this.Es&&this.rf(),this.app.config.isMobile||this.uf.soundMode!==h.ProtoPlayerSoundMode.Hover||this.If(),this.uf.isCloseButton&&this.Df(),this.ff(),this.Es||Kt.a.detectUsingScript().then(t=>{if(t){this.gd.disableAdvertising(),Object(Yt.k)([95,5])&&Object(n.a)({message:"BaseExperience_adBlockerDetected",throttle:2,sendMaxLog:!1,level:h.ProtoLoggingLevelEnum.INFO})}})}play(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.play()}pause(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.pause()}setVolume(t){this.setNewVolume(t),this.Pf()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(t,i){Object(Xt.c)({width:t,height:i})||Object(E.L)(this.$experienceContainer,{width:`${t}px`,height:`${i}px`})}setCustomMacros(t){this.app.services.MacrosService.addExtraMacros(t)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.Ql})}setViewableThreshold(t){this.app?this.app.services.ViewabilityService.setViewableThreshold(t):this.Zl=t}setAmpUserConsent(t){this.app.services.UserManagerService.setAmpUserConsent(t)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,c.b.Destroy)}disableAdvertising(){this.gd.disableAdvertising()}enableAdvertising(){this.gd.enableAdvertising()}destroy(){this.adHandler&&this.adHandler.destroy(),this.gd&&this.gd.destroy(),this.floatingModule&&(this.floatingModule.destroy(),this.floatingModule=null)}}var ni=e(17);const ri=140,hi=80;class ai{static getScaledImageUrl(t,i,e,s){if(t&&!Object(Xt.c)({width:i,height:e}))return Object(v.e)(s)&&(i=Object(Xt.b)(i,s),e=Object(Xt.b)(e,s)),`${t}${ai.getScaledImageQueryParams(i,e)}`.trim()}static getScaledImageQueryParams(t,i){return Object(Xt.c)({width:t,height:i})?"":`?width=${t}&height=${i}&fit=bounds`}static getSmartCroppedImageUrl(t,i,e){return Object(v.h)(t)||(t=ni.a.endPoints.base.image),Object(Xt.c)({width:i,height:e})&&(i=ri,e=hi),`${t}${ai.getSmartCroppedImageQueryParams(i,e)}`}static getSmartCroppedImageQueryParams(t,i){return Object(Xt.c)({width:t,height:i})?"":`?crop=${t}:${i},smart&width=${t}&height=${i}&format=jpeg&quality=60&fit=crop`}}class oi{constructor(t){this.context=t}onClick(){}canTransitionToState(t){return!0}enterState(){this.initState(),this.context.currentState=this}}var ci,ui,li;function di(t,i,e,s){t.style.top=`${function(t,i,e,s,n){let r=i-s.clientY;const h=s.clientY+s.height-i;n.alignTop&&r>t.offsetHeight?r-=t.offsetHeight:!n.alignTop&&h<t.offsetHeight?r-=t.offsetHeight-h:(r+=e)+t.offsetHeight>s.height&&(r=s.height-t.offsetHeight);return r}(t,i.clientY,i.height,e,s)}px`,t.style.left=`${function(t,i,e,s){const n=s.distanceFromMargin?s.distanceFromMargin:0;let r=Math.ceil(i)-Math.ceil(e.clientX),h=i,a=h+t.offsetWidth;const o=e.clientX+e.width;if(s.alignMiddle){const i=t.offsetWidth/2;r-=Math.ceil(i),h-=i,a-=i}if(s.alignMiddle||s.forceRight)return e.clientX>h?r=0+n:o<a&&(r-=Math.ceil(a)-Math.ceil(o)+n),r;a>o&&(r-=t.offsetWidth);return r}(t,i.clientX,e,s)}px`}!function(t){t[t.PlayButton=0]="PlayButton",t[t.BigPlayButton=1]="BigPlayButton",t[t.VolumeButton=2]="VolumeButton",t[t.VolumeProgress=3]="VolumeProgress",t[t.VolumeControls=4]="VolumeControls",t[t.ExpandButton=5]="ExpandButton",t[t.SettingsButton=6]="SettingsButton",t[t.CaptionButton=7]="CaptionButton",t[t.CaptionComponent=8]="CaptionComponent",t[t.CastButton=9]="CastButton",t[t.ShareButton=10]="ShareButton",t[t.UpNextButton=11]="UpNextButton",t[t.UpNextBox=12]="UpNextBox",t[t.PreviousButton=13]="PreviousButton",t[t.LogoComponent=14]="LogoComponent",t[t.LogoOutstream=15]="LogoOutstream",t[t.MoreButton=16]="MoreButton",t[t.ElapsedTimeLabel=17]="ElapsedTimeLabel",t[t.TotalDurationLabel=18]="TotalDurationLabel",t[t.ProgressBar=19]="ProgressBar",t[t.QualityMenu=20]="QualityMenu",t[t.QueStateOverlay=21]="QueStateOverlay",t[t.Loader=22]="Loader",t[t.ContextMenu=23]="ContextMenu",t[t.ElementsSettingsMenu=24]="ElementsSettingsMenu",t[t.CloseButton=25]="CloseButton",t[t.SkipAdButton=26]="SkipAdButton",t[t.AdLoadingScreen=27]="AdLoadingScreen",t[t.CtaButton=28]="CtaButton",t[t.PlayspaceProgressBar=29]="PlayspaceProgressBar",t[t.PlayspaceSettingsMenu=30]="PlayspaceSettingsMenu",t[t.ClickToPlayButton=31]="ClickToPlayButton",t[t.SlideTitle=32]="SlideTitle",t[t.SkipAd=33]="SkipAd",t[t.TopTitle=34]="TopTitle",t[t.TopLogo=35]="TopLogo",t[t.TopSlideTitle=36]="TopSlideTitle",t[t.TopStoryTitle=37]="TopStoryTitle",t[t.TextLabel=38]="TextLabel",t[t.LivePoster=39]="LivePoster",t[t.LiveIcon=40]="LiveIcon"}(ci||(ci={})),function(t){t[t.Top=1]="Top",t[t.Bottom=2]="Bottom",t[t.Right=4]="Right",t[t.Left=8]="Left",t[t.Middle=16]="Middle"}(ui||(ui={}));class fi extends o.a{constructor(t,i,e,s,n){super(),this.mediator=t,this.Gn=i,this.pc=e,this.Fn=n,this.Hc=i.createElementByString(s)}getContainer(){return this.Hc}getCoordinates(t){const i=this.Gn.getElementCoordinates(this.Hc);return this.Fn&&t?((t&ui.Top)===ui.Top&&(i.clientY-=this.Hc.clientHeight),(t&ui.Right)===ui.Right&&(i.clientX+=this.Hc.clientWidth)):i.clientX+=i.width/2,i}showComponent(t=!1){if(!this.Hc||!this.Hc.parentElement)return;const i=Object(E.t)(this.Hc.parentElement,"cnx-ui-btn")?this.Hc.parentElement:this.Hc;t&&Object(E.B)(i)?Object(E.g)(i):Object(E.M)(i)}hideComponent(t=!1){if(!this.Hc||!this.Hc.parentElement)return;const i=Object(E.t)(this.Hc.parentElement,"cnx-ui-btn")?this.Hc.parentElement:this.Hc;t&&!Object(E.B)(i)?Object(E.h)(i,()=>Object(E.u)(i)):Object(E.u)(i)}destroy(){this.Hc.innerHTML="",this.Hc.style.display="none",this.pc.unregisterAll(this)}}class pi extends fi{constructor(t,i,e,s,n){super(t,i,e,s,n),this.eventList=[ot.a[ot.a.Scroll],ot.a[ot.a.Click]],this.Hf=t=>{this.onInteractionHandler(t)},this.onBeforeClick=t=>{t.stopPropagation()},this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(t)}}onInteractionHandler(t){t.stopPropagation()}onClickHandler(t){}initComponent(){const t={interactionstart:this.onBeforeClick,interaction:this.Hf,click:this.onClick};this.pc.register(this.Hc,this,this.pc,t),this.Fn&&(this.subscribe(ot.a[ot.a.Click],this.pc,()=>{this.onClickHandler()}),this.relay(ot.a[ot.a.Scroll],this.pc,this,this.mediator))}destroy(){this.unsubscribeAll(this.pc),super.destroy()}}class vi extends pi{constructor(){super(...arguments),this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(),this.addBoomEffect()}}addBoomEffect(){Object(E.a)(this.Hc,"cnx-boom"),this.Hc.getClientRects(),Object(E.a)(this.Hc,"cnx-boom-anim");const t=i=>{"transform"===i.propertyName&&(Object(E.H)(this.Hc,"cnx-boom"),Object(E.H)(this.Hc,"cnx-boom-anim"),this.Hc.removeEventListener("transitionend",t))};this.Hc.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this.Hc.appendChild(this.Gn.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class bi extends vi{constructor(){super(...arguments),this.eventList=[Ot[Ot.HoverStart],Ot[Ot.HoverEnd],...this.eventList],this.onStartHover=()=>{Object(E.a)(this.Hc,d.h.HoverStart),Object(E.a)(this.Hc,d.h.HoverEnd),this.mediator.publish(this,Ot[Ot.HoverStart])},this.onEndHover=()=>{Object(E.H)(this.Hc,d.h.HoverEnd),this.mediator.publish(this,Ot[Ot.HoverEnd])}}initComponent(){super.initComponent(),this.Fn?(this.Hc.addEventListener("touchstart",this.onStartHover),this.Hc.addEventListener("touchend",this.onEndHover),this.Hc.addEventListener("touchcancel",this.onEndHover)):(this.Hc.addEventListener("mouseenter",this.onStartHover),this.Hc.addEventListener("mouseleave",this.onEndHover))}destroy(){this.Fn?(this.Hc.removeEventListener("touchstart",this.onStartHover),this.Hc.removeEventListener("touchend",this.onEndHover),this.Hc.removeEventListener("touchcancel",this.onEndHover)):(this.Hc.removeEventListener("mouseenter",this.onStartHover),this.Hc.removeEventListener("mouseleave",this.onEndHover)),super.destroy()}onInteractionHandler(t){this.onEndHoverClick()}onEndHoverClick(){Object(E.H)(this.Hc,d.h.HoverEnd),Object(E.H)(this.Hc,d.h.HoverStart)}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(li||(li={}));class mi extends bi{constructor(t,i,e,s,n){super(t,i,e,s,n),this.qf=!1,this.eventList=[Ot[Ot.Play],Ot[Ot.Pause],Ot[Ot.Replay],Ot[Ot.StateChanged],...this.eventList],this.zf="Play",this.Gf="Pause",this.setState(li.Pause)}onClickHandler(){this.Ft===li.Pause?this.mediator.publish(this,Ot[Ot.Pause]):this.qf?this.mediator.publish(this,Ot[Ot.Replay]):this.mediator.publish(this,Ot[Ot.Play])}Wf(){}toggleReplay(t){this.qf=t}setState(t){this.Ft!==t&&(this.Ft=t,this.Wf(),this.mediator.publish(this,Ot[Ot.StateChanged]))}get tooltip(){return this.Ft===li.Play?this.zf:this.Gf}}class gi extends oi{initState(){this.context.$uiContainer.classList.add(d.j.Playing);const t=this.context.getComponent(ci.PlayButton);t&&t.setState(li.Pause);const i=this.context.getComponent(ci.BigPlayButton);i&&i.setState(li.Pause)}exitState(){this.context.$uiContainer.classList.remove(d.j.Playing)}}class yi extends gi{constructor(){super(...arguments),this.Jf=100}Qf(){if(this.elapsedTimeoutId||!this.context.duration)return;const t=Date.now();this.elapsedTimeoutId=setTimeout(()=>{this.context.elapsedTime+=(Date.now()-t)/1e3;const i=this.context.getComponent(ci.ProgressBar);i&&i.setProgress(Object(Xt.d)(0,this.context.duration,0,100,this.context.elapsedTime)),this.elapsedTimeoutId=null,this.Qf()},this.Jf)}initState(){super.initState(),this.context.duration&&this.Qf()}exitState(){super.exitState(),this.context.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}class wi extends oi{initState(){this.context.$uiContainer.classList.add(d.j.Paused);const t=this.context.getComponent(ci.PlayButton);t&&t.setState(li.Play);const i=this.context.getComponent(ci.BigPlayButton);i&&i.setState(li.Play)}exitState(){this.context.$uiContainer.classList.remove(d.j.Paused)}}class xi extends wi{initState(){super.initState()}exitState(){super.exitState()}}class ki{constructor(t,i){this.Xf=t,this.Gn=i,this.Yf=/\[\[([0-9]+)]]/g,this.Kf=[],this.Zf=[],this.tp=this.Gn.createElementByString(this.ep(this.Xf))}sp(t){return`<cnx class="pl_${t}"></cnx>`}ep(t){return t.replace(this.Yf,(t,i)=>(this.Kf.push(parseInt(i,10)),this.sp(i)))}np(t,i){return this.Zf.some(i=>i.slotName===t)?null:this.Zf.some(t=>t.component===i)?null:this.tp.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.Kf}getRenderedDom(){return this.tp}registerSlot(t,i){const e=this.np(t,i);if(null!==e){const s=i.getContainer();return e.parentNode.replaceChild(s,e),this.Zf.push({component:i,slotName:t}),!0}return!1}initComponents(){this.Zf.forEach(t=>t.component.initComponent())}}class Si extends o.a{constructor(t,i,e){super(),this.globalDomUtilsService=t,this.templateString=i,this.componentFactory=e,this.rp={},this.ap=new ki(i,t),this.addComponents()}addComponents(){this.ap.getComponentList().forEach(t=>{const i=this.componentFactory.createComponent(t,this);this.registerComponent(t,i)})}registerComponent(t,i){this.ap.registerSlot(t,i),this.rp[t]=i,this.op(i)}op(t){t.eventList.forEach(i=>{this.subscribe(i,t,e=>{i===Ot[Ot.RebindComponent]&&this.rebindComponentEvents(t),this.handleComponentEvent(i,e,t)})})}rebindComponentEvents(t){t&&(this.unsubscribeAll(t),this.op(t))}getComponent(t){return this.rp[t]}destroy(){Object.keys(this.rp).forEach(t=>{this.rp[t].destroy()})}}class Oi extends Si{constructor(t,i,e,s,n){super(e,s,n),this.mediator=t,this.$container=i,this.componentFactory=n,this.$uiContainer=this.ap.getRenderedDom(),i.appendChild(this.$uiContainer),this.ap.initComponents()}changeState(t){const i=this.cp[t];i!==this.currentState&&this.currentState.canTransitionToState(i)&&(this.currentState.exitState(i),i.enterState())}hide(){Object(E.a)(this.$uiContainer,d.h.DisplayNone)}show(){Object(E.H)(this.$uiContainer,d.h.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}var _i,ji=e(88),Ai=e.n(ji);class Ii{constructor(t,i){this.up=t,this.Gn=i,this.lp=[],this.dp=12,this.fp=24,this.pp=4,this.vp=!1}bp(){this.mp=this.Gn.getElementCoordinates(this.up.parentElement)}gp(t,i){t.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=i}yp(t){if(!t||!t.tooltip||this.vp)return;if(this.lp.find(i=>i.component===t))return;const i=this.Gn.createElementByString(Ai.a);this.gp(i,t.tooltip),this.bp();const e=t.getCoordinates();let s=!1;const{clientY:n,height:r}=e,{clientY:h,height:a}=this.Gn.getElementCoordinates(this.up);n<=h+a/2-r?e.clientY+=this.dp:(e.clientY-=this.fp,s=!0),this.up.appendChild(i),di(i,e,this.mp,{alignMiddle:!0,alignTop:s,forceRight:!0,distanceFromMargin:this.pp}),Object(E.i)(i),Object(E.a)(i,d.q.OpacityInTransition),this.lp.push({component:t,domElement:i})}wp(t){if(!t.tooltip)return;const i=this.lp.find(i=>i.component===t);if(!i)return;const e=i.domElement;this.up.removeChild(e),this.lp=this.lp.filter(i=>i.component!==t)}xp(t){if(!t.tooltip)return;const i=this.lp.find(t=>t.component===this.kp);i&&this.gp(i.domElement,t.tooltip)}Sp(){this.kp=null,this.lp.forEach(t=>this.wp(t.component))}hoverStart(t){this.kp=t,this.yp(t)}hoverEnd(t){this.kp=null,this.wp(t)}stateChanged(t){this.kp===t&&this.xp(t)}disableTooltips(){this.vp=!0,this.Sp()}enableTooltips(){this.vp=!1,this.yp(this.kp)}}!function(t){t[t.expand=0]="expand",t[t.collapse=1]="collapse"}(_i||(_i={}));class Ci extends bi{constructor(){super(...arguments),this.eventList=[Ot[Ot.Expand],Ot[Ot.Collapse],...this.eventList],this.Op="Full Screen",this._p="Exit Full Screen"}onClickHandler(){switch(this.Ft){case _i.collapse:this.mediator.publish(this,Ot[Ot.Expand]);break;case _i.expand:this.mediator.publish(this,Ot[Ot.Collapse]);break;default:this.mediator.publish(this,Ot[Ot.Expand])}}Wf(){this.Hc&&(this.Ft===_i.expand?this.Hc.classList.add(d.h.Active):this.Hc.classList.remove(d.h.Active))}setState(t){this.Ft!==t&&(this.Ft=t,this.Wf())}get tooltip(){return this.Ft===_i.expand?this._p:this.Op}}class Ti extends Oi{constructor(t,i,e,s,n){super(t,i,e,s,n),this.jp=new Ii(this.$uiContainer,e)}handleComponentEvent(t,i,e){let s=e;switch(i.payload&&i.payload.targetComponent&&(s=i.payload.targetComponent),t){case Ot[Ot.HoverStart]:this.jp.hoverStart(s);break;case Ot[Ot.HoverEnd]:this.jp.hoverEnd(s);break;case Ot[Ot.StateChanged]:this.jp.stateChanged(s)}}updateDuration(t,i){if(!Object(E.t)(this.$uiContainer,d.g.ShowControls))return;const e=this.getComponent(ci.ElapsedTimeLabel),s=this.getComponent(ci.TotalDurationLabel),n=this.getComponent(ci.ProgressBar);if(e&&e.setTime(t),s&&s.setTime(i),n){const e=0,s=i,r=0,h=100;n.setProgress(Object(Xt.d)(e,s,r,h,t))}}updateVolume(t){}expand(){this.getComponent(ci.ExpandButton).setState(_i.expand)}collapse(){this.getComponent(ci.ExpandButton).setState(_i.collapse)}}class Pi extends bi{constructor(){super(...arguments),this.eventList=[Ot[Ot.Settings],...this.eventList],this.Ap="Settings"}onClickHandler(){this.mediator.publish(this,Ot[Ot.Settings])}toggleHDFlag(t){t?Object(E.a)(this.Hc,d.h.Active):Object(E.H)(this.Hc,d.h.Active)}get tooltip(){return this.Ap}}var Mi=e(89),Ei=e.n(Mi);class Li extends bi{constructor(t,i,e,s,n,r=!1,h){super(t,i,e,s,h),this.Cp=n,this.isActive=r}onClickHandler(){this.isActive=!this.isActive,this.onStateChange()}get isActive(){return this.Ft}set isActive(t){this.Ft=t,this.Ft?Object(E.a)(this.Hc,this.Cp):Object(E.H)(this.Hc,this.Cp)}}class Ri extends Li{constructor(){super(...arguments),this.eventList=[Ot[Ot.CaptionOn],Ot[Ot.CaptionOff],Ot[Ot.StateChanged],...this.eventList],this.Tp="Subtitles On",this.Pp="Subtitles Off"}onStateChange(){this.mediator.publish(this,this.isActive?Ot[Ot.CaptionOn]:Ot[Ot.CaptionOff]),this.mediator.publish(this,Ot[Ot.StateChanged])}get tooltip(){return this.isActive?this.Pp:this.Tp}}var Bi=e(52),Di=e.n(Bi),Fi=e(90),Vi=e.n(Fi);class Ui extends pi{constructor(){super(...arguments),this.od=!1,this.eventList=[Ot[Ot.Next]]}onClickHandler(){this.mediator.publish(this,Ot[Ot.Next])}show(){this.od=!0,this.Hc.classList.add("cnx-fade-in-up-next")}hide(){this.od=!1,this.Hc.classList.remove("cnx-fade-in-up-next")}isInView(){return this.od}updateCard(t,i){const e=this.Hc.getElementsByTagName("img")[0];e.setAttribute("src",t),e.style.display="none",e.onload=()=>{e.style.display="block"},this.Hc.getElementsByClassName("cnx-up-next-box-text")[0].innerHTML=Object(v.h)(i)?i:""}}class Ni extends fi{constructor(t,i,e,s,n){super(t,i,e,s),this.settings=n,this.eventList=[],this.Mp=144,this.Ep=36}createLogo(){let t=this.Gn.createElement("img");t.onload=()=>{t=this.resizeLogo(t),this.Hc.appendChild(t)},t.src=this.settings.logoUrl,t.alt=""}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;if(!i||!e)return t;if(this.settings.logoPosition===R.ProtoLogoPositionMode.ControlBar)t.style.setProperty("height",`${this.Ep}px`,"important"),t.style.setProperty("width",`${this.Ep}px`,"important");else{const s=i/e;this.Ep*s>this.Mp?(t.style.setProperty("width",`${this.Mp}px`,"important"),t.style.setProperty("height","auto","important")):(t.style.setProperty("width","auto","important"),t.style.setProperty("height",`${this.Ep}px`,"important"))}return t}initComponent(){try{this.createLogo()}catch(t){Object(n.a)({message:"LogoComponent_createLogo",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}}class $i extends fi{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Lp=this.Hc.getElementsByTagName("cnx-span")[0]}setTime(t){isNaN(t)||"number"!=typeof t?Object(E.a)(this.Hc,d.h.Invisible):(this.Lp.innerHTML=Object(at.f)(t),Object(E.H)(this.Hc,d.h.Invisible))}}var Hi=e(58),qi=e.n(Hi);class zi extends fi{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.Rp=0,this.Bp=null,this.Dp=0,this.Fp=0,this.Vp=100,this.cacheDomElements()}cacheDomElements(){this.Up=this.Hc.getElementsByClassName("cnx-progress-fill")[0],this.Zc=this.Hc.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.Rp=this.fixedRailWidth?this.fixedRailWidth:this.Zc.getBoundingClientRect().width,this.Bp=this.Zc.getBoundingClientRect().left}updateUi(t){const i=this.getComputedTranslation(t);this.Dp=i,this.Up.style.transform=`translateX(${i}px)`}isValidTranslation(){return this.Dp>=0&&this.Dp<=this.Rp}getComputedTranslation(t){return t<0?0:t>this.Rp?this.Rp:t}setProgress(t){this.cacheWidths();const i=this.getComputedTranslation(Object(Xt.d)(0,100,0,this.Rp,t));this.updateUi(i)}disableTransition(){Object(E.a)(this.Hc,d.h.NoTransition)}enableTransition(){Object(E.H)(this.Hc,d.h.NoTransition)}Np(t){this.disableTransition(),this.setProgress(t),Object(E.i)(this.Up),this.enableTransition()}forceStartState(){this.Np(this.Fp)}forceEndState(){this.Np(this.Vp)}initComponent(){this.cacheWidths()}destroy(){super.destroy()}}class Gi extends zi{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.$p=0,this.Rh=null,this.Hp=!1,this.eventList=[Ot[Ot.DraggingStart],Ot[Ot.DraggingStopped]],this.qp=t=>{this.cacheWidths(),this.zp(this.Gp(t)),this.Fn?this.Hc.addEventListener(this.Wp,this.Jp):this.Gn.addEventListenerOnGlobal(this.Wp,this.Jp),this.onDragStart()},this.Jp=t=>{null===this.Rh&&(this.Hp||(this.Hp=!0,this.disableTransition()),this.Rh=this.Gn.requestAnimationFrameHelper(()=>{const i=this.Qp+(this.Gp(t)-this.Xp);this.isValidTranslation()&&this.Yp(i),this.Rh=null}))},this.Kp=t=>{t.stopPropagation(),this.Fn?this.Hc.removeEventListener(this.Wp,this.Jp):this.Gn.removeEventListenerOnGlobal(this.Wp,this.Jp),this.Hp=!1,this.enableTransition(),this.onDragEnd()},this.Wp=n?"touchmove":"mousemove"}cacheDomElements(){super.cacheDomElements(),this.Zp=this.Hc.getElementsByClassName("cnx-progress-handle")[0]}cacheWidths(){super.cacheWidths(),this.$p=this.Zp.getBoundingClientRect().width/2}updateUi(t){super.updateUi(t);const i=this.getComputedTranslation(t);this.Zp.style.transform=`translateX(${i-this.$p}px)`}onDragEnd(){this.mediator.publish(this,Ot[Ot.DraggingStopped])}onDragStart(){this.mediator.publish(this,Ot[Ot.DraggingStart])}Gp(t){return this.Fn?t.touches.item(0).clientX:t.clientX}zp(t){this.Qp=t-this.Bp,this.Xp=t,this.Yp(this.Qp)}Yp(t){if(this.isValidTranslation()){const i=this.getComputedTranslation(t),e=0,s=this.Rp,n=0,r=100;this.updateUi(i),this.onProgressChange(Object(Xt.d)(e,s,n,r,i))}}setProgress(t){super.setProgress(t)}initComponent(){super.initComponent();const t={interactionstart:this.qp,interactionend:this.Kp};this.pc.register(this.Hc,this,this.pc,t)}destroy(){super.destroy()}}class Wi extends Gi{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.tv=!1,this.ev=t=>{Object(E.a)(this.Hc,d.h.HoverEnd),this.tv=!0},this.sv=t=>{const i=this.getComputedTranslation(t.clientX-this.Bp);this.nv.style.transform=`translateX(${i}px)`},this.rv=t=>{this.nv.style.transform="translateX(0)",this.tv=!1,this.hv()},this.eventList=this.eventList.concat([Ot[Ot.Seek],Ot[Ot.SeekingStart],Ot[Ot.SeekingStopped]])}onProgressChange(t){this.mediator.publish(this,Ot[Ot.Seek],{payload:t-.1})}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,Ot[Ot.SeekingStopped]),this.hv()}onDragStart(){super.onDragStart(),this.mediator.publish(this,Ot[Ot.SeekingStart])}hv(){this.tv||this.Hp||Object(E.H)(this.Hc,d.h.HoverEnd)}initComponent(){super.initComponent(),this.Hc.addEventListener("mousemove",this.sv),this.Hc.addEventListener("mouseenter",this.ev),this.Hc.addEventListener("mouseleave",this.rv),this.nv=this.Hc.getElementsByClassName("cnx-progress-follow")[0]}hide(){Object(E.u)(this.Hc)}show(){Object(E.M)(this.Hc)}destroy(){super.destroy(),this.Hc.removeEventListener("mousemove",this.sv),this.Hc.removeEventListener("mouseenter",this.ev),this.Hc.removeEventListener("mouseleave",this.rv)}}var Ji=e(91),Qi=e.n(Ji);class Xi extends fi{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(E.M)(this.Hc)}hide(){Object(E.u)(this.Hc)}}var Yi,Ki=e(92),Zi=e.n(Ki),te=e(53),ie=e.n(te),ee=e(93),se=e.n(ee);!function(t){t[t.SimpleMenuItem=0]="SimpleMenuItem",t[t.ToggleMenuItem=1]="ToggleMenuItem",t[t.SubmenuMenuItem=2]="SubmenuMenuItem"}(Yi||(Yi={}));class ne extends fi{constructor(t,i,e,s,n,r,h,a){super(t,i,e,s,a),this.eventName=n,this.av=r,this.ov=h,this.cv=[],this.eventList=[Ot[Ot.RebindComponent],ot.a[ot.a.HoldStart],ot.a[ot.a.HoldEnd],Ot[Ot.ContextMenuOpen],Ot[Ot.ContextMenuClose]],this.uv=!1,this.lv=10,this.dv=t=>{this.fv.removeChild(t.target),this.fv.style.width=`${this.Hc.clientWidth}px`},this.close=t=>{t&&Object(Yt.h)(t.target,d.g.ContextController,this.lv)||!1!==this.isOpen&&(this.uv&&(this.mediator.publish(this,ot.a[ot.a.HoldEnd]),Object(E.H)(this.ov,d.h.OnHold),this.uv=!1),this.isOpen=!1,this.mediator.publish(this,Ot[Ot.ContextMenuClose]),Object(E.a)(this.Hc,d.h.Invisible),this.pc.removeGlobalActions(this.Hc),this.closeAllSubmenuItems())},this.close(),this.cacheCoordinates(),this.eventList.push(this.eventName),this.fv=this.Hc.getElementsByClassName(d.k.Container)[0],this.pv=this.Gn.createElementByString(`<cnx class="${d.k.Items}"></cnx>`),this.fv.appendChild(this.pv),Object(E.a)(this.fv,d.g.ContextController)}addNewItemsEvent(t){const i=t.filter(t=>!Object(l.g)(t,this.eventList));i.length>0&&(this.eventList=[...this.eventList,...i],this.mediator.publish(this,Ot[Ot.RebindComponent],{payload:this.av}))}cacheCoordinates(){this.mp=this.Gn.getElementCoordinates(this.ov)}positionContextMenu(t){this.cacheCoordinates(),di(this.Hc,t,this.mp,{alignMiddle:this.alignMiddle,alignTop:this.alignTop,forceRight:this.forceRight})}vv(t){switch(t.type){case Yi.SimpleMenuItem:this.close();break;case Yi.SubmenuMenuItem:this.bv(t)}}sendEvent(t,i){this.mediator.publish(this,t,i)}bv(t){const i=this.Hc.clientWidth;t.isOpen?(t.$menuContainer.addEventListener("transitionend",this.dv),this.pv.style.left="0px",t.$menuContainer.style.left="0px"):(t.$menuContainer.removeEventListener("transitionend",this.dv),this.fv.style.width=`${2*i}px`,this.fv.appendChild(t.$menuContainer),Object(E.i)(this.fv),this.pv.style.left=`${-i}px`,t.$menuContainer.style.left=`${-i}px`),t.isOpen=!t.isOpen}closeAllSubmenuItems(){this.cv.forEach(t=>{t.type===Yi.SubmenuMenuItem&&t.isOpen&&this.bv(t)})}buildContextMenu(t){let i=[];this.pv.innerHTML="",this.fv.style.width=`${this.Hc.clientWidth}px`,this.cv.forEach(t=>this.unsubscribeAll(t)),this.cv=t,this.cv.forEach(t=>{i=[...i,...t.eventList],t.eventList.forEach(i=>this.subscribe(i,t,e=>{this.vv(t),this.sendEvent(i,e)})),t.initComponent(),this.pv.appendChild(t.getContainer())}),this.addNewItemsEvent(i)}getAnchorCoordinatesTo(t){var i;return null===(i=t)||void 0===i?void 0:i.getCoordinates()}open(t,i=!1){i&&(this.uv=i,this.mediator.publish(this,ot.a[ot.a.HoldStart]),Object(E.a)(this.ov,d.h.OnHold)),this.isOpen=!0,this.mediator.publish(this,Ot[Ot.ContextMenuOpen]),this.positionContextMenu(t);const e={interactionend:this.close};this.pc.addGlobalActions(this.Hc,e),Object(E.H)(this.Hc,d.h.Invisible)}}class re extends pi{constructor(t,i,e,s,n){super(t,i,e,re.getTemplate(n),s),this.mediator=t,this.Oc=!1,this.type=Yi.SimpleMenuItem,this.eventList=[],this.event=n.activeEvent,this.name=n.name,n.eventList?this.eventList=n.eventList:this.eventList.push(this.event),this.mv=this.Hc.getElementsByClassName(d.k.ItemTitle)[0],this.gv=this.Hc.getElementsByClassName(d.k.ItemIcon)[0]}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`,e=`<cnx class="${d.k.ItemExtra}">${t.label}</cnx>`;return`<cnx class="${d.k.ClickOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    ${t.label?e:""}\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}changeItemName(t){this.mv.innerHTML=t}changeItemIcon(t){this.gv.innerHTML=t}get isActive(){return this.Oc}set isActive(t){this.Oc=t,this.Oc?Object(E.a)(this.Hc,d.h.Active,d.f.AccentColor):Object(E.H)(this.Hc,d.h.Active,d.f.AccentColor)}}var he=e(54),ae=e.n(he),oe=e(21);class ce extends ne{constructor(){super(...arguments),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!0}yv(){const t=oe.a.version?`V${oe.a.version}`:"dev",i=[new re(this,this.Gn,this.pc,this.Fn,{activeEvent:Ot[Ot.AboutClick],name:"About Connatix",icon:ae.a,label:t})];this.buildContextMenu(i)}initComponent(){this.yv()}onResize(){this.cacheCoordinates(),this.close()}}class ue extends Li{constructor(t,i,e,s,n){super(t,i,e,ue.getTemplate(n),d.h.Active,n.defaultState,s),this.mediator=t,this.eventList=[],this.type=Yi.ToggleMenuItem,({eventOn:this.wv,eventOff:this.xv}=n),this.eventList.push(this.wv,this.xv)}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${d.k.ToggleOption} ${t.defaultState?d.h.Active:""}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${d.k.ItemExtra}">\n                        <cnx class="cnx-cm-toggle-switch">\n                            <cnx class="cnx-cm-slider ${d.f.AccentColor}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>`}onStateChange(){this.mediator.publish(this,this.isActive?this.wv:this.xv)}get tooltip(){return""}}const le={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextCaption:"Closed Caption"};class de extends ne{constructor(t,i,e,s,n,r,h,a,o,c=!0){super(t,i,e,s,n,r,h,o),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1,this.kv=[new re(this,this.Gn,this.pc,this.Fn,{activeEvent:Ot[Ot.AboutClick],name:le.ContextAbout,icon:ae.a,label:oe.a.version?`V${oe.a.version}`:"dev"})],this.Sv=new ue(this,this.Gn,this.pc,this.Fn,{eventOff:Ot[Ot.CaptionOff],eventOn:Ot[Ot.CaptionOn],defaultState:c,name:le.ContextCaption,icon:Di.a}),this.Ov=[this.Sv],this._v=a}jv(){let t=this.kv;this._v===d.r.Lg&&(t=[...this.Ov,...this.kv]),this.buildContextMenu(t)}initComponent(){this.jv()}onResize(t,i){this.isOpen&&this.positionContextMenu(t),this._v!==i?(this._v=i,this.closeAllSubmenuItems(),this.jv()):this._v=i}toggleCaptionState(t){this.Sv.isActive!==t&&(this.Sv.isActive=t)}hideCaptionOption(){this.Sv.hideComponent()}showCaptionOption(){this.Sv.showComponent()}getAnchorCoordinatesTo(t){let i=ui.Right;return this._v!==d.r.Xl&&this._v!==d.r.Xxl&&(i|=ui.Top),t.getCoordinates(i)}}function fe(t){try{return Object.keys(t).reduce((i,e)=>Object.assign(Object.assign({},i),{[e]:Object(v.h)(t[e])&&t[e].includes("%%")?void 0:t[e]}),{})}catch(i){return Object(n.a)({message:"sanitizeDfpMacros_error",exception:i.message,callStack:i.stack,level:h.ProtoLoggingLevelEnum.WARNING}),Object.keys(t).reduce((i,e)=>Object.assign(Object.assign({},i),{[e]:Object(v.h)(t[e])&&t[e].indexOf("%%")>-1?void 0:t[e]}),{})}}class pe extends fi{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Av=this.Hc.getElementsByClassName(d.e.CaptionContainer)[0]}updateCaptions(t){var i,e;this.Av.innerHTML=t&&t.text?(i=t.text,e="<br>",i.replace(/(?:\r\n|\r|\n)/g,e)):""}}var ve=e(94),be=e.n(ve);class me extends Ni{constructor(){super(...arguments),this.Iv="cnx-logo-height",this.Cv="cnx-logo-width"}createLogo(){this.Hc.onload=()=>{this.Hc.style.visibility="visible",this.resizeLogo(this.Hc)},this.Hc.style.visibility="hidden",this.Hc.src=this.settings.logoUrl}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;return i&&e?(i>e?Object(E.a)(t,this.Cv):Object(E.a)(t,this.Iv),t):t}}var ge=e(95),ye=e.n(ge),we=e(96),xe=e.n(we);class ke extends Gi{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.Tv=80,this.fixedRailWidth=this.Tv,this.eventList.push(Ot[Ot.Volume])}onProgressChange(t){this.mediator.publish(this,Ot[Ot.Volume],{payload:t})}}var Se=e(97),Oe=e.n(Se),_e=e(98),je=e.n(_e);function Ae(t,i,e){const s=e?x[x.Auto]:i.height.toString();t.forEach(t=>t.name.indexOf(s)>-1?t.isActive=!0:t.isActive=!1);const n=t.find(t=>x[t.event]===x.Auto);if(e){const e=t.find(t=>t.event===i.height.toString());if(e){const t=`${n.name} (${e.name})`;n.changeItemName(t)}}else n.changeItemName(n.name)}class Ie extends ne{constructor(){super(...arguments),this.alignMiddle=!0,this.alignTop=!0,this.forceRight=!1,this.Pv=[],this.Mv={height:360,quality:x.Auto},this.Ev=!0}sendEvent(t){this.Ev=x[t]===x.Auto,this.mediator.publish(this,this.eventName,{payload:{height:this.Ev?this.Mv.height:parseInt(t,10),quality:this.Ev?x.Auto:x.Strict}})}initComponent(){}createQualityMenu(t){this.Pv=[],this.Lv=t,this.Lv.forEach(t=>{this.Pv.push(new re(this,this.Gn,this.pc,this.Fn,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0}))}),this.Pv.push(new re(this,this.Gn,this.pc,this.Fn,{name:x[x.Auto],activeEvent:x[x.Auto]})),Ae(this.Pv,this.Mv,this.Ev),this.buildContextMenu(this.Pv)}onResize(t){this.cacheCoordinates(),this.isOpen&&this.positionContextMenu(t)}updateQuality(t){Object(l.h)(this.Lv)&&(this.Ev=t.quality===x.Auto,this.Mv.quality=t.quality,this.Mv.height=Object(Xt.a)(t.height,this.Lv.map(t=>t.videoHeight)),Ae(this.Pv,this.Mv,this.Ev))}}var Ce=e(99),Te=e.n(Ce);class Pe extends fi{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(E.M)(this.Hc),Object(E.i)(this.Hc),Object(E.a)(this.Hc,d.h.Active)}hide(){Object(E.H)(this.Hc,d.h.Active),Object(E.u)(this.Hc)}}class Me extends bi{constructor(t,i,e,s,n,r,h){super(t,i,e,s,n),this.tooltip=h,this.Rv=ci[r],this.eventList.push(this.Rv)}onClickHandler(){this.mediator.publish(this,this.Rv)}}class Ee extends pi{constructor(t,i,e,s,n,r,h){super(t,i,e,s,n),this.tooltip=h,this.eventList=[],this.Rv=ci[r],this.eventList.push(this.Rv)}onClickHandler(){this.mediator.publish(this,this.Rv)}}class Le{constructor(t,i,e,s){this.Gn=t,this.pc=i,this.Fn=e,this.Bv=new Map,Object.keys(s).forEach(t=>this.Dv(ci[t],s[t]))}getButton(t,i){const{isHoverable:e,template:s,tooltip:n}=this.Fv(t);return e?new Me(i,this.Gn,this.pc,s,this.Fn,t,n):new Ee(i,this.Gn,this.pc,s,this.Fn,t,n)}isGeneralComponent(t){return this.Bv.has(t)}Fv(t){return this.Bv.get(t)}Dv(t,i){this.Bv.set(t,i)}}var Re=e(100),Be=e.n(Re);function De(t,i,e=!0){return e?`\n            <cnx class="cnx-icon-button cnx-button-${ci[t].toLowerCase()} cnx-ui-btn-hoverable">\n                <cnx class="cnx-btn-container">\n                    ${i}\n                </cnx>\n            </cnx>\n        `.trim():`<cnx class="cnx-button-${ci[t].toLowerCase()}">${i}</cnx>`}var Fe=e(59),Ve=e.n(Fe),Ue=e(101),Ne=e.n(Ue);var $e={[ci[ci.MoreButton]]:{template:De(ci.MoreButton,Ne.a),tooltip:"More",isHoverable:!0},[ci[ci.CloseButton]]:{template:De(ci.CloseButton,Be.a),tooltip:"Close",isHoverable:!0},[ci[ci.UpNextButton]]:{template:De(ci.UpNextButton,Ve.a),tooltip:"Next",isHoverable:!0},[ci[ci.PreviousButton]]:{template:De(ci.PreviousButton,Ve.a),tooltip:"Previous",isHoverable:!0}};class He extends bi{constructor(){super(...arguments),this.eventList=[Ot[Ot.SkipAd],...this.eventList],this.Vv=-1,this.Uv=-1}initComponent(){super.initComponent(),this.hideComponent(),this.Nv=this.Hc.getElementsByTagName("cnx-span")[0],this.$v=this.Hc.querySelectorAll(`.${d.p.Timer} svg`)[0]}setSecondsUntilSkip(t){this.Vv=Math.ceil(t),this.Uv=-1,Object(E.L)(this.$v,{"animation-duration":this.Vv+"s"})}tickDown(t){const i=this.Vv-Math.floor(t);if(i<0||0===this.Uv)return;const e=Object(E.t)(this.Hc,d.p.InTimer);this.Uv=i,0===this.Uv?(e&&Object(E.H)(this.Hc,d.p.InTimer),this.Nv.innerHTML="Ad"):(e||Object(E.a)(this.Hc,d.p.InTimer),this.Nv.innerHTML=`in ${this.Uv}s`)}get tooltip(){}onClickHandler(){0===this.Uv&&this.mediator.publish(this,Ot[Ot.SkipAd])}}var qe=e(102),ze=e.n(qe),Ge=e(103),We=e.n(Ge);const Je="Loading ad";class Qe extends fi{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Hv=this.Hc.getElementsByClassName(d.a.BackgroundImg)[0],this.qv=this.Hc.getElementsByClassName(d.a.Icon)[0],this.qv.innerHTML=We.a,this.zv=this.Hc.getElementsByClassName(d.a.ButtonContainer)[0];const t=this.Hc.getElementsByClassName(d.a.Button)[0];this.Gv=this.Gn.createElementByString(`<a class="${d.a.Wrapper}" href="#">`),this.Gv.target=At.c.Blank,this.Gv.appendChild(t),this.zv.innerHTML="",this.zv.appendChild(this.Gv),this.Wv=this.Hc.getElementsByClassName(d.a.InfoContainer)[0],this.Jv=this.Hc.getElementsByClassName(d.a.FallbackContainer)[0],this.Qv=this.Hc.getElementsByClassName(d.a.SlotCountText)[0]}setBackgroundImg(t){Object(v.h)(t)?(Object(E.H)(this.Hv,d.h.DisplayNone),this.Hv.src=t):Object(E.a)(this.Hv,d.h.DisplayNone)}setClickUrl(t){if(!Object(v.h)(t))return Object(E.M)(this.Jv),void Object(E.u)(this.Wv);Object(E.M)(this.Wv),Object(E.u)(this.Jv),this.Gv.href=t}setFallbackText(t,i){const e=t||1,s=i||1;this.Qv.innerHTML=`${Je} ${e}/${s}`}}var Xe,Ye=e(104),Ke=e.n(Ye);class Ze{constructor(t,i,e,s={},n={}){this.Gn=t,this.pc=i,this.Hc=e,this.Rn=s,this.Xv={[ci.PlayButton]:t=>this.Yv(!1,t),[ci.BigPlayButton]:t=>this.Yv(!0,t),[ci.VolumeProgress]:t=>new ke(t,this.Gn,this.pc,Oe.a),[ci.ExpandButton]:t=>new Ci(t,this.Gn,this.pc,je.a,this.Rn.isMobile),[ci.QualityMenu]:t=>new Ie(t,this.Gn,this.pc,Te.a,Ot[Ot.Quality],ci.QualityMenu,this.Hc,this.Rn.isMobile),[ci.Loader]:t=>new Pe(t,this.Gn,this.pc,ie.a),[ci.SkipAdButton]:t=>new He(t,this.Gn,this.pc,ze.a,this.Rn.isMobile),[ci.AdLoadingScreen]:t=>new Qe(t,this.Gn,this.pc,Ke.a)},this.Yv=(t,i)=>new mi(i,this.Gn,this.pc,function(t=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${t?"cnx-button-big-play":""}">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon">${ye.a}</cnx>\n            <cnx class="cnx-pause-icon">${xe.a}</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(t),this.Rn.isMobile),this.Kv=t=>i=>{const e=this.Xv[t];if(e)return e(i)},this.Zv=new Le(this.Gn,this.pc,this.Rn.isMobile,Object.assign(Object.assign({},$e),n))}createComponent(t,i){const e=this.Kv(t)(i);return e||(this.Zv.isGeneralComponent(t)?this.Zv.getButton(t,i):void 0)}}!function(t){t[t.Mute=0]="Mute",t[t.Unmute=1]="Unmute"}(Xe||(Xe={}));class ts extends bi{constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.eventList=[Ot[Ot.Mute],Ot[Ot.Unmute],Ot[Ot.StateChanged],...this.eventList],this.tb="Mute",this.ib="Unmute",this.Ft=n}onClickHandler(){this.Ft===Xe.Mute?(this.mediator.publish(this,Ot[Ot.Unmute]),this.setState(Xe.Unmute)):(this.mediator.publish(this,Ot[Ot.Mute]),this.setState(Xe.Mute))}Wf(){this.Ft===Xe.Mute?Object(E.J)(this.Hc,"cnx-sound-on","cnx-sound-off"):Object(E.J)(this.Hc,"cnx-sound-off","cnx-sound-on")}get tooltip(){return this.Ft===Xe.Mute?this.ib:this.tb}initComponent(){super.initComponent(),this.Wf()}setState(t){this.Ft!==t&&(this.Ft=t,this.Wf(),this.mediator.publish(this,Ot[Ot.StateChanged]))}setVolume(t){t>0?this.setState(Xe.Unmute):this.setState(Xe.Mute)}}class is extends Si{constructor(t,i,e,s){super(i,e,s),this.mediator=t,this.Hc=this.ap.getRenderedDom()}getContainer(){return this.Hc}initComponent(){this.ap.initComponents()}showComponent(){Object(E.M)(this.Hc)}hideComponent(){Object(E.u)(this.Hc)}}class es extends is{constructor(t,i,e,s){super(t,i,e,s),this.eb=null,this.eventList=[Ot[Ot.Volume],Ot[Ot.VolumeHoverStart],Ot[Ot.VolumeHoverStopped],Ot[Ot.DraggingStopped],Ot[Ot.DraggingStart],Ot[Ot.HoverStart],Ot[Ot.HoverEnd],Ot[Ot.StateChanged]],this.sb=.2,this.rb=1e3,this.hb=!1,this.ab=t=>{clearTimeout(this.eb),Object(E.a)(this.Hc,"cnx-mod-hover"),this.mediator.publish(this,Ot[Ot.VolumeHoverStart])},this.ob=()=>{this.hb||(null!==this.eb&&clearTimeout(this.eb),this.eb=setTimeout(()=>{Object(E.H)(this.Hc,"cnx-mod-hover"),this.mediator.publish(this,Ot[Ot.VolumeHoverStopped])},this.rb))},this.cb=this.sb,this.ub=this.getComponent(ci.VolumeButton),this.lb=this.getComponent(ci.VolumeProgress)}handleComponentEvent(t,i,e){let s;switch(t){case Ot[Ot.Volume]:s=i.payload/100,this.fb(s),this.pb(i.payload);break;case Ot[Ot.Mute]:s=0,this.setVolumeProgress(0);break;case Ot[Ot.Unmute]:s=this.cb,this.setVolumeProgress(100*this.cb);break;case Ot[Ot.DraggingStopped]:this.hb=!1,this.mediator.publish(this,Ot[Ot.DraggingStopped]),this.ob();break;case Ot[Ot.DraggingStart]:this.hb=!0,this.mediator.publish(this,Ot[Ot.DraggingStart]);break;case Ot[Ot.HoverStart]:this.mediator.publish(this,Ot[Ot.HoverStart],{payload:{targetComponent:e}});break;case Ot[Ot.HoverEnd]:this.mediator.publish(this,Ot[Ot.HoverEnd],{payload:{targetComponent:e}});break;case Ot[Ot.StateChanged]:this.mediator.publish(this,Ot[Ot.StateChanged],{payload:{targetComponent:e}})}void 0!==s&&this.vb(s)}fb(t){t<this.sb?this.cb=this.sb:this.cb=t}vb(t){this.mediator.publish(this,Ot[Ot.Volume],{payload:t})}pb(t){0===t?this.ub.setState(Xe.Mute):this.ub.setState(Xe.Unmute)}setVolumeProgress(t){this.lb.setProgress(t)}initComponent(){super.initComponent(),this.Hc.addEventListener("mouseenter",this.ab),this.Hc.addEventListener("mouseleave",this.ob)}setVolume(t){const i=100*t;this.pb(i),this.setVolumeProgress(i)}destroy(){super.destroy(),this.Hc.removeEventListener("mouseenter",this.ab),this.Hc.removeEventListener("mouseleave",this.ob)}}var ss=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${ci.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${ci.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim(),ns=e(105),rs=e.n(ns),hs=e(106),as=e.n(hs);var os={[ci[ci.ShareButton]]:{template:De(ci.ShareButton,as.a),tooltip:"Share",isHoverable:!0},[ci[ci.CastButton]]:{template:De(ci.CastButton,rs.a),tooltip:"Cast",isHoverable:!0}},cs=e(107),us=e.n(cs),ls=e(108),ds=e.n(ls),fs=e(109),ps=e.n(fs);const vs=90*Zt.g,bs="This live stream will start shortly",ms="This live stream is not currently available. Please check again shortly",gs="Live stream not supported by browser";class ys extends fi{constructor(){super(...arguments),this.eventList=[],this.bb=null}initComponent(){this.mb=this.Gn.createElementByString("<img/>"),this.Hc.appendChild(this.mb),this.gb=this.Hc.getElementsByTagName("cnx-span")[0],this.yb=this.Hc.getElementsByClassName("cnx-live-message")[0],this.wb=this.Hc.getElementsByClassName("cnx-live-icon")[0]}setPosterSrc(t){Object(v.h)(t)&&(this.mb.src=t)}setPosterAltText(t){this.mb.alt=t}setIconToStarting(){this.wb.innerHTML=`${ds.a}`}setIconToEnded(){this.wb.innerHTML=`${ps.a}`}setMessageToStarting(){this.xb(bs)}setMessageToEnded(){this.xb(ms)}setMessageToNotSupported(){this.xb(gs)}handleDelayedStart(t){Object(v.e)(Date.parse(t))&&(this.kb=new Date(t),this.Sb()>0&&(this.Ob(),clearInterval(this.bb),this.bb=setInterval(()=>{this.Ob()},Zt.f*Zt.g)))}showMessage(){Object(E.M)(this.wb),Object(E.M)(this.yb)}hideMessage(){Object(E.u)(this.wb),Object(E.u)(this.yb)}show(){Object(E.M)(this.Hc),Object(E.a)(this.Hc,d.h.Active)}hide(){Object(E.H)(this.Hc,d.h.Active),Object(E.u)(this.Hc)}destroy(){super.destroy(),clearInterval(this.bb)}Ob(){const t=this.Sb();if(t>0){const i=this._b(t);this.xb(`Live in ${i}`)}else this.xb(bs),clearInterval(this.bb),this.bb=null}Sb(){return(Math.max(this.kb.getTime(),Date.now())-Date.now())/Zt.f}_b(t){const i=t>=vs?Math.round(t/(Zt.g*Zt.c)):Math.ceil(t/Zt.g);return`${i} ${t>=vs?"hours":`minute${1===i?"":"s"}`}`}xb(t){this.gb.innerHTML=t}}var ws=e(110),xs=e.n(ws);class ks extends fi{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hideComponent()}}var Ss,Os=e(111),_s=e.n(Os);class js extends Ze{constructor(t,i,e,s,n){super(t,i,e,s,os),this.Gn=t,this.Hc=e,this.Rn=s,this.jb=n,this.Ab={[ci.VolumeControls]:t=>new es(t,this.Gn,ss,this),[ci.VolumeButton]:t=>new ts(t,this.Gn,this.pc,us.a,Xe.Mute,this.Rn.isMobile),[ci.SettingsButton]:t=>new Pi(t,this.Gn,this.pc,Ei.a,this.Rn.isMobile),[ci.CaptionButton]:t=>new Ri(t,this.Gn,this.pc,Di.a,d.h.Active,this.Rn.closedCaptionDefault,this.Rn.isMobile),[ci.UpNextBox]:t=>new Ui(t,this.Gn,this.pc,Vi.a,this.Rn.isMobile),[ci.LogoComponent]:t=>{if(!Object(v.a)(this.Rn.logoUrl)&&!Object(v.a)(this.Rn.logoPosition))throw new Error("custom logo is undefined");return new Ni(t,this.Gn,this.pc,'<cnx class="cnx-logo"></cnx>',{logoUrl:this.Rn.logoUrl,logoPosition:this.Rn.logoPosition})},[ci.LogoOutstream]:t=>{if(!Object(v.a)(this.Rn.logoUrl)&&!Object(v.a)(this.Rn.logoPosition))throw new Error("outstream logo undefined");return new me(t,this.Gn,this.pc,'<img class="cnx-home-screen-logo" />',{logoUrl:this.Rn.logoUrl})},[ci.LivePoster]:t=>new ys(t,this.Gn,this.pc,xs.a),[ci.LiveIcon]:t=>new ks(t,this.Gn,this.pc,_s.a),[ci.ElapsedTimeLabel]:t=>new $i(t,this.Gn,this.pc,qi.a),[ci.TotalDurationLabel]:t=>new $i(t,this.Gn,this.pc,qi.a),[ci.ProgressBar]:t=>new Wi(t,this.Gn,this.pc,Qi.a,this.Rn.isMobile),[ci.QueStateOverlay]:t=>new Xi(t,this.Gn,this.pc,ie.a),[ci.ContextMenu]:t=>new ce(t,this.Gn,this.pc,Zi.a,Ot[Ot.ContextClick],ci.ContextMenu,this.Hc,this.Rn.isMobile),[ci.ElementsSettingsMenu]:t=>new de(t,this.Gn,this.pc,se.a,Ot[Ot.SettingsMenu],ci.ElementsSettingsMenu,this.Hc,this.jb,this.Rn.isMobile,this.Rn.closedCaptionDefault),[ci.CaptionComponent]:t=>new pe(t,this.Gn,this.pc,be.a)},this.Ib=t=>i=>{const e=this.Ab[t];if(e)return e(i)}}createComponent(t,i){return this.Ib(t)(i)||super.createComponent(t,i)}}!function(t){t.InPod="cnx-ad-in-pod",t.AdMarkerInPodTextContainer="cnx-ad-marker-pod-right-side-text"}(Ss||(Ss={}));class As extends Ti{constructor(t,i,e,s,n,r={},h){super(t,s,i,n,h||new js(i,e,s,r)),this.mediator=t,this.globalDomUtilsService=i,this.$container=s,this.settings=r,this.cp={[k.PlayingState]:new yi(this),[k.PausedState]:new xi(this)},this.Cb=0,this.cp[k.PausedState].enterState()}handleComponentEvent(t,i,e){switch(super.handleComponentEvent(t,i,e),t){case Ot[Ot.Volume]:this.mediator.publish(this,Ot[Ot.Volume],i);break;case Ot[Ot.Mute]:this.mediator.publish(this,Ot[Ot.Mute]);break;case Ot[Ot.Unmute]:this.mediator.publish(this,Ot[Ot.Unmute]);break;case ci[ci.CloseButton]:this.mediator.publish(this,Ot[Ot.Close]);break;default:this.mediator.publish(this,t,i)}}updateDuration(t){const i=this.getComponent(ci.ProgressBar),e=this.getComponent(ci.TotalDurationLabel);t||!i?(this.elapsedTime=0,this.duration=t,i&&i.setProgress(Object(Xt.d)(0,t,0,100,0)),e&&e.setTime(t),this.Tb(this.Cb)):i.setProgress(100)}updateVolume(t){const i=this.getComponent(ci.VolumeControls),e=this.getComponent(ci.VolumeButton);i&&i.setVolume(t),e&&e.setVolume(t)}get elapsedTime(){return this.Cb}set elapsedTime(t){this.Cb=t,this.Tb(this.Cb)}showSkipAdButton(t){const i=this.getComponent(ci.SkipAdButton);i&&(i.showComponent(),i.setSecondsUntilSkip(t))}hideSkipAdButton(){const t=this.getComponent(ci.SkipAdButton);t&&t.hideComponent()}addPodAdMarker(t,i){Object(E.a)(this.$uiContainer,Ss.InPod),Object(l.c)(this.$uiContainer.getElementsByClassName(Ss.AdMarkerInPodTextContainer)).forEach(e=>{e.innerHTML=`${t}/${i}`})}removeAddPodAdMarker(){Object(E.H)(this.$uiContainer,Ss.InPod)}Tb(t){const i=this.getComponent(ci.ElapsedTimeLabel);i&&i.setTime(t);const e=this.getComponent(ci.SkipAdButton);e&&e.tickDown(t)}hideAdLoadingScreen(){const t=this.getComponent(ci.AdLoadingScreen);t&&t.hideComponent(),Object(E.H)(this.$container,d.g.PodLoadingScreen)}showAdLoadingScreen(t,i,e,s){const n=this.getComponent(ci.AdLoadingScreen);n&&(n.showComponent(),n.setBackgroundImg(t),n.setClickUrl(i),n.setFallbackText(e,s),Object(E.a)(this.$container,d.g.PodLoadingScreen))}hideAdMarker(){const t=this.$container.getElementsByClassName("cnx-ad-marker")[0];Object(E.u)(t)}hideProgressBar(){this.getComponent(ci.ProgressBar).hideComponent()}}var Is=e(112),Cs=e.n(Is),Ts=e(113),Ps=e.n(Ts);class Ms{get template(){return`\n        <cnx class="cnx-ui cnx-ui-ad-content">\n            [[${ci.AdLoadingScreen}]]\n            [[${ci.SkipAdButton}]]\n            <cnx class="cnx-ui-buttons cnx-ad-buttons">\n                <cnx class="cnx-ui-btn cnx-ad-play-button">[[${ci.PlayButton}]]</cnx>\n                <cnx class="cnx-ad-volume-controls">[[${ci.VolumeControls}]]</cnx>\n                <cnx class="cnx-ui-btn cnx-ad-volume-button">[[${ci.VolumeButton}]]</cnx>\n            </cnx>\n            <cnx class="cnx-ad-marker">${Cs.a}</cnx>\n            <cnx class="cnx-ad-marker-pod">\n                ${Ps.a}\n                <cnx class="cnx-ad-marker-pod-right-side">\n                    <cnx class="cnx-ad-marker-pod-right-side-text">1/1</cnx>\n                </cnx>\n            </cnx>\n            <cnx class="cnx-ui-progress cnx-ui-bar cnx-ad-progress-bar">\n                <cnx class="cnx-ui-progress-bar">[[${ci.ProgressBar}]]</cnx>\n            </cnx>\n        </cnx>\n        `.trim()}}var Es=e(23);class Ls extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.mr=i,this.Pb=e,this.Mb=s,this.Eb=n,this.Lb=r,this.Rb=[],this.firstAdShown=!1,this.Br=!1,this.Bb=0,this.Db=!0,this.Fb=!1,this.Vb=!1,this.Ub=Et.a.Normal,this.Nb=this.getNewAdManager(),this.subscribe($t.AdsEnabled,this.Nb,()=>{this.mediator.publish(this,$t.AdsEnabled)})}$b(t,i,e){this.Nb.initAd(t,i,this.Ub,1,e,[{container:this.Hb,width:t,height:i,type:h.ProtoAdType.Video}])}qb(){this.zb.showSkipAdButton(this.mr.skipAdAfter)}Gb(t){const i=this.Nb.getCurrentAdClickTrackingProperties();i&&this.Lb.services.TrackingService.trackAdClick(Object.assign(Object.assign({},i),{type:t}))}Wb(t){if(t.payload.adLoadedData.skipOffset&&t.payload.adLoadedData.skipOffset>=0)return!1;const i=this.Nb.getAdDuration();switch(this.mr.adSkippability){case h.ProtoPlayerAdSkippability.IfLongerThan31Sec:if((t.payload.adSkipMode===h.ProtoAdSkipMode.IfLongerThan31Sec||t.payload.adSkipMode===h.ProtoAdSkipMode.Never)&&(i<Es.g||!i))return!1;break;case h.ProtoPlayerAdSkippability.NoRestrictions:if(t.payload.adSkipMode===h.ProtoAdSkipMode.Never||t.payload.adSkipMode===h.ProtoAdSkipMode.IfLongerThan31Sec&&(i<Es.g||!i))return!1}return!0}Jb(t){this.Rb.filter(i=>i!==t).forEach(t=>{Object(E.a)(t,d.h.Hide)})}Qb(){this.Rb.forEach(t=>{Object(E.H)(t,d.h.Hide)})}updateFilterConfig(t){this.Nb.updateFilterConfig(t)}Xb(){this.Vb=!1,this.zb.hideAdLoadingScreen()}Yb(){this.zb.hideSkipAdButton()}Kb(){let t;Object.keys(Et.b).forEach(i=>{this.subscribe(Et.b[i],this.Nb,e=>{switch(t=!1,Et.b[i]){case Et.b.AdLoaded:const s=e;this.Fb=this.Wb(e),this.Fb&&(s.payload.adLoadedData.skipOffset=this.mr.skipAdAfter);break;case Et.b.AdPaused:this.zb.changeState(k.PausedState);break;case Et.b.AdPlaying:this.zb.changeState(k.PlayingState);break;case Et.b.AdImpression:this.Zb(e);break;case Et.b.AdSkipped:this.Gb(h.ProtoAdClickTypeEnum.AdSkipClick),this.Qb(),t=!0;break;case Et.b.AdStopped:case Et.b.AdError:this.Qb(),t=!0;break;case Et.b.AdClickThru:this.Gb(h.ProtoAdClickTypeEnum.AdClickThrough)}this.Db&&this.mediator.publish(this,Et.b[i],e),this.Db=!0,t&&(this.Br=!1,this.zb.changeState(k.PausedState)),Et.b[i]===Et.b.AdImpression&&(this.Eb.getTotalNumberOfSlots()>1?this.zb.addPodAdMarker(this.Eb.getCurrentSlotIndex(),this.Eb.getTotalNumberOfSlots()):this.zb.removeAddPodAdMarker())})}),this.subscribe(Ot[Ot.Volume],this.zb,({payload:t})=>{this.setVolume(t),this.Gb(h.ProtoAdClickTypeEnum.VolumeClick)}),this.subscribe(Ot[Ot.Play],this.zb,()=>{this.Gb(h.ProtoAdClickTypeEnum.PlayClick),this.play()}),this.subscribe(Ot[Ot.Pause],this.zb,()=>{this.Gb(h.ProtoAdClickTypeEnum.PauseClick),this.pause()}),this.subscribe(Ot[Ot.Close],this.zb,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,Ot[Ot.Close])}),this.subscribe(Ot[Ot.Mute],this.zb,()=>{this.setVolume(0),this.Gb(h.ProtoAdClickTypeEnum.MuteClick)}),this.subscribe(Ot[Ot.Unmute],this.zb,()=>{this.setVolume(1),this.Gb(h.ProtoAdClickTypeEnum.UnmuteClick)}),this.subscribe($t.DetachedFromDom,this.Nb,()=>{this.mediator.publish(this,Nt.DetachedFromDom)}),this.relay(Mt.b.ImpressionPrice,this.Nb,this,this.mediator)}Zb(t){this.Yb(),t.payload.adDuration=this.Nb.getAdDuration(),t.payload.adDuration||this.firstAdShown||this.show(),this.firstAdShown=!0,this.Br=!0,this.zb.updateDuration(t.payload.adDuration),this.zb.changeState(k.PlayingState),this.tm=t.payload.clickThroughUrl,this.Fb&&this.qb(),this.Jb(t.payload.selectedAdSlot)}im(t){this.Pb.appendChild(t)}em(t=""){return this.Lb.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${t}"></div>`)}nm(){this.Hb=this.em(),this.im(this.Hb),this.Rb.push(this.Hb)}rm(){const t=(i=this.mr,e=this.Lb.config,{logoUrl:i.logoUrl,isMobile:e.isMobile,closeButtonMode:i.closeButtonMode,floatingCloseButtonMode:i.floatingCloseButtonMode,isCloseButton:i.isCloseButton,uiComponentsVisibility:i.uiComponentsVisibility,sharingDestinations:i.sharingDestinations});var i,e;this.zb=new As(this,this.Lb.services.GlobalDomUtilsService,this.Lb.services.InteractionService,this.Pb,(new Ms).template,t),this.zb.hide()}start(t,i,e){try{this.rm(),this.nm(),this.$b(t,i,e),this.setVolume(e),this.Kb()}catch(t){Object(n.a)({callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL,exception:t.message,message:"adhandler_start"})}}getVolume(){return this.Bb}hide(){Object(E.H)(this.Pb,d.g.Ad,d.g.AdOverlayType),this.zb.hide()}show(){const t=[d.g.Ad],i=this.Nb.getCurrentAdType();i===h.ProtoAdType.Overlay&&t.push(d.g.AdOverlayType),this.hm=i,Object(E.a)(this.Pb,...t),this.zb.show(),this.zb.updateVolume(this.Bb),this.Xb()}setVolume(t){this.Bb=t,this.Nb.setAdVolume(t),this.zb&&this.zb.updateVolume(t),this.mediator.publish(this,c.b.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,Ot[Ot.Volume],{payload:{volume:t}})}resizeAd(t,i,e,s=[]){this.setVastViewMode(e);const n=s;n.push({container:this.Hb,width:t,height:i,type:h.ProtoAdType.Video}),this.Nb.resizeAd(t,i,e,n),this.mediator.publish(this,Nt.AdSlotResized,{payload:{width:t,height:i}})}adStateChange(t,i){this.Nb.onAdStateChange(t,i)}contentChanged(){this.Nb.onContentChange()}get inImpression(){return this.Br}get adInWin(){return this.Nb.adInWin}get inAdPodLoadingState(){return this.Vb}resumeWithoutUserInteraction(){this.Nb.resumeAd(!1)}play(){this.Nb.resumeAd(!0),this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}})}pause(){this.Nb.pauseAd(!0),this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}})}stopAd(t){const i=()=>{this.mediator.publish(this,Et.b.AdStopped),this.Db=!1};this.Nb&&this.inImpression?(i(),this.Nb.stopAd(t)):this.inAdPodLoadingState&&i()}skipAd(){this.Nb&&this.inImpression?this.Nb.skipAd():this.Vb&&(this.mediator.publish(this,Et.b.AdSkipped),this.Xb())}userInteraction(t){this.Nb.userInteraction(t)}enableAds(){this.Nb.enableAds()}enterAdPodLoadingState(){this.Vb=!0;const{width:t,height:i}=this.Nb.getLastAdSlot(this.hm);this.zb.showAdLoadingScreen(ai.getSmartCroppedImageUrl(this.am,t,i),this.tm,this.Eb.getNextSlotIndex(),this.Eb.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(t){this.am=t}updatePodRemainingTime(t){this.Nb.updatePodRemainingTime(t)}newAdOpportunity(){this.Nb.newAdOpportunity()}disableAds(){this.Nb.disableAds()}setVastViewMode(t){this.Ub=t,this.Nb.setVastViewMode(t)}destroy(){this.Nb.disableAds(),this.zb.destroy(),this.Nb.destroy()}}var Rs,Bs=e(28);!function(t){t.AppNexus="appnexus",t.DistrictM="districtm",t.IndexExchange="ix",t.Lkqd="lkqd",t.OneVideo="oneVideo",t.OpenX="openx",t.Pubmatic="pubmatic",t.RhythmOne="rhythmone",t.Rubicon="rubicon",t.SpotX="spotx",t.Telaria="telaria",t.MediaNet="medianet",t.Adman="adman",t.IronSource="ironsource",t.Undertone="undertone",t.SynacorMedia="synacormedia"}(Rs||(Rs={}));const Ds={[Rs.Lkqd]:Bs.c.Lkqd,[Rs.RhythmOne]:Bs.c.RhythmOne,[Rs.Telaria]:Bs.c.Telaria,[Rs.IronSource]:Bs.c.IronSource,[Rs.Undertone]:Bs.c.Undertone,[Rs.SynacorMedia]:Bs.c.SynacorMedia},Fs=[Rs.AppNexus,Rs.DistrictM,Rs.IndexExchange,Rs.OneVideo,Rs.OpenX,Rs.Pubmatic,Rs.RhythmOne,Rs.Rubicon,Rs.SpotX,Rs.Telaria,Rs.MediaNet,Rs.Adman,Rs.IronSource,Rs.Undertone],Vs=[Rs.AppNexus,Rs.DistrictM,Rs.IndexExchange,Rs.OneVideo,Rs.OpenX,Rs.Pubmatic,Rs.Rubicon,Rs.SpotX,Rs.MediaNet,Rs.Adman],Us=[Rs.OneVideo,Rs.IndexExchange,Rs.Rubicon,Rs.Pubmatic,Rs.SpotX,Rs.AppNexus,Rs.DistrictM,Rs.OpenX,Rs.MediaNet,Rs.Adman,Rs.IronSource,Rs.Undertone,Rs.SynacorMedia],Ns="https://prebid.adnxs.com/pbc/v1/cache",$s=180,Hs="//cds.connatix.com/p/plugins/prebid4.30.0.js",qs=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],zs={VAST_1:1,VAST_2:2,VAST_3:3,VAST_1_WRAPPER:4,VAST_2_WRAPPER:5,VAST_3_WRAPPER:6},Gs=1,Ws={VPAID_1:1,VPAID_2:2};class Js{constructor(){this.om=Date.now(),this.cm={advertiser:{}}}addPrebid(t){Object(v.a)(this.cm.advertiser[t])||this.um(t),this.cm.advertiser[t].prebidData.push({timestamp:Date.now()})}addBid(t,i){Object(v.a)(this.cm.advertiser[t])||this.um(t),this.cm.advertiser[t].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:i})}addImpression(t,i){Object(v.a)(this.cm.advertiser[t])||this.um(t),this.cm.advertiser[t].impressionRevenueList.push({timestamp:Date.now(),obfuscatedPrice:i})}shouldRequestLineItem(t){const i=Date.now();return!(this.lm(i,3)&&this.dm(t,i,5)<-.5&&this.fm(t,i,3)>=11.5&&this.pm(t,i,10,.1)<.35)}lm(t,i){return t-this.om>=i*Zt.e}dm(t,i,e){const s=this.cm.advertiser[t];if(!Object(v.a)(s))return-1;const n=this.vm(s.impressionRevenueList,i,e).map(t=>t.obfuscatedPrice);let r=0;return Object(l.h)(n)&&(r=n.reduce((t,i)=>t+this.bm(i))),this.mm(r)}fm(t,i,e){const s=this.cm.advertiser[t];if(!Object(v.a)(s))return-1;const n=this.vm(s.prebidData,i,e).length;return this.mm(n)}pm(t,i,e,s){const n=this.cm.advertiser[t];if(!Object(v.a)(n))return-1;const r=this.vm(n.impressionRevenueList,i,e).map(t=>t.floorPrice),h=this.gm(r,s);return this.mm(h)}vm(t,i,e){const s=i-Zt.f,n=i-e*Zt.e,r=[];for(let i=t.length-1;i>=0&&t[i].timestamp>=n;i--)t[i].timestamp<=s&&r.push(t[i]);return r}mm(t){return 0===t?-1:t}um(t){this.cm.advertiser[t]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}bm(t){return 2*(t+41)}gm(t,i){if(0===t.length)return 0;if(i<=0)return t[0];if(i>=1)return t[t.length-1];const e=((t=t.sort((t,i)=>t-i)).length-1)*i,s=Math.floor(e),n=s+1,r=e%1;return n>=t.length?t[s]:t[s]*(1-r)+t[n]*r}}class Qs{constructor(){this.ym=new Set}addPlatformCappedLineItemIdList(t){t.forEach(t=>{this.ym.add(t)})}isLineItemPlatformCapped(t){return this.ym.has(t)}}var Xs=e(16);class Ys{constructor(){this.wm=new Xs.SimpleEventDispatcher,this.xm=new Xs.SimpleEventDispatcher,this.km=new Xs.SimpleEventDispatcher,this.Om=new Xs.SimpleEventDispatcher,this._m=new Xs.SimpleEventDispatcher,this.jm=new Xs.SimpleEventDispatcher,this.callingLineItems=[],this.bids=[],this.bidsLoading=[],this.bidsReady=[],this.bidStarted=null}get onBid(){return this.wm.asEvent()}get onBidConsumed(){return this.xm.asEvent()}get onBidLoadingConsumed(){return this.km.asEvent()}get onBidReady(){return this.Om.asEvent()}get onBidStarted(){return this._m.asEvent()}get onBidReadyConsumed(){return this.jm.asEvent()}addBid(t){this.bids.push(t),this.wm.dispatch(t)}moveBidToLoading(t){this.bidsLoading.push(t),this.consumeBid(t)}moveBidToReady(t){this.bidsReady.push(t),this.consumeBidLoading(t),this.Om.dispatch(t)}moveBidToStarted(t){this.bidStarted=t,this.consumeBidReady(t),this._m.dispatch(t)}consumeBid(t){Object(l.k)(this.bids,t),this.xm.dispatch(t)}consumeBidLoading(t){Object(l.k)(this.bidsLoading,t),this.km.dispatch(t)}consumeBidReady(t){Object(l.k)(this.bidsReady,t)}consumeBidStarted(t){this.bidStarted=null,this.jm.dispatch(t)}getAllBids(){const t=this.bidStarted?[this.bidStarted]:[];return[...this.bids,...this.bidsReady,...t]}}class Ks{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}class Zs{constructor(t){this.clickTrackings=[],this.customClicks=[],this.errorUrls=[],this.impressions=[],this.trackingEvents=new Ks,t.inLine?this.Am(t.inLine):this.Im(t.wrapper)}Am(t){this.Cm(t.errors),this.Tm(t.impressions),this.Pm(t.creatives)}Im(t){this.Cm(t.errors),this.Tm(t.impressions),this.Pm(t.creatives)}Mm(t){this.Em(t.trackingEvents),this.Lm(t.videoClicks)}Lm(t){t&&(this.Rm(t.clickTrackings),this.Bm(t.customClicks))}Rm(t){this.clickTrackings.push(...t)}Bm(t){this.customClicks.push(...t)}Em(t){t.forEach(t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(i){Object(n.a)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:i.stack,level:h.ProtoLoggingLevelEnum.INFO})}})}Pm(t){t.forEach(t=>{t.linear&&this.Mm(t.linear)})}Cm(t){this.errorUrls.push(...t)}Tm(t){this.impressions.push(...t)}}const tn={[h.ProtoTrackerTriggerType.Impression]:"adImpression",[h.ProtoTrackerTriggerType.Complete25Pc]:"adQuartileFirst",[h.ProtoTrackerTriggerType.Complete50Pc]:"adQuartileSecond",[h.ProtoTrackerTriggerType.Complete75Pc]:"adQuartileThird",[h.ProtoTrackerTriggerType.ViewCompletion]:"adQuartileFourth",[h.ProtoTrackerTriggerType.VideoClick]:"adClick",[h.ProtoTrackerTriggerType.Pause]:"adPause",[h.ProtoTrackerTriggerType.Resume]:"adResume",[h.ProtoTrackerTriggerType.Mute]:"adMute",[h.ProtoTrackerTriggerType.Unmute]:"adUnmute"};class en{constructor(){this.adError=[],this.adWin=[],this.adImpression=[],this.adStarted=[],this.adVideoStart=[],this.adQuartileFirst=[],this.adQuartileSecond=[],this.adQuartileThird=[],this.adQuartileFourth=[],this.adClick=[],this.adPause=[],this.adResume=[],this.adSkip=[],this.adMute=[],this.adUnmute=[],this.adUserClose=[],this.adUserAcceptInvitation=[],this.adUserMinimize=[]}static track(t,i,e,s){if(!Array.isArray(t))return;const{width:n,height:r}=s.adContainerState.get(e.adType),{adBreakType:a}=s.adBreakState,{mediaDescription:o,mediaDuration:c,mediaId:u,mediaUrl:l,mediaTitle:d}=s.media;t.forEach(t=>{if(t.url)try{const s=i.replace(t.url,e.vendorId,{adMacros:{adWidth:n,adHeight:r,adPostion:a},mediaMacros:{mediaDescription:o,mediaDuration:c,mediaId:u,mediaUrl:l,mediaTitle:d}});switch(t.type){case h.ProtoTrackerType.Image:Object(Yt.l)([s],window);break;case h.ProtoTrackerType.Javascript:Object(E.x)({src:s},window.document.head,window)}}catch(t){}})}}function sn(t,i){t.forEach(t=>(function(t,i){(function(t,i){return i[tn[t]]})(t.trigger,i).push({type:t.type,url:t.url})})(t,i))}function nn(t){return{type:h.ProtoTrackerType.Image,url:t}}function rn(t){return t.map(t=>nn(t))}var hn;!function(t){t[t.HandlingSdkUrl=0]="HandlingSdkUrl",t[t.NetworkRequestUrl=1]="NetworkRequestUrl",t[t.XmlInvalidString=2]="XmlInvalidString",t[t.XmlParseGeneral=3]="XmlParseGeneral",t[t.XmlInvalidTree=4]="XmlInvalidTree",t[t.XmlInvalidAd=5]="XmlInvalidAd",t[t.XmlAdaptorWrapperLimit=6]="XmlAdaptorWrapperLimit",t[t.HTMLUnknownMimeType=7]="HTMLUnknownMimeType"}(hn||(hn={}));const an={[hn.HandlingSdkUrl]:h.ConnatixNoBidReasonEnum.CsRequestException,[hn.NetworkRequestUrl]:h.ConnatixNoBidReasonEnum.CsRequestException,[hn.XmlInvalidString]:h.ConnatixNoBidReasonEnum.CsEmptyResponse,[hn.XmlParseGeneral]:h.ConnatixNoBidReasonEnum.CsInvalidResponse,[hn.XmlInvalidTree]:h.ConnatixNoBidReasonEnum.CsInvalidResponse,[hn.XmlInvalidAd]:h.ConnatixNoBidReasonEnum.CsInvalidResponse,[hn.XmlAdaptorWrapperLimit]:h.ConnatixNoBidReasonEnum.CsInvalidResponse,[hn.HTMLUnknownMimeType]:h.ConnatixNoBidReasonEnum.CsInvalidResponse};var on,cn,un=e(11);!function(t){t.VOLUME_DETECTED="volume_detected",t.MALWARE_DETECTED="malware_detected",t.BADURI_DETECTED="baduri_detected"}(on||(on={})),function(t){t[t.None=0]="None",t[t.Mute=1]="Mute",t[t.ScrollHijack=2]="ScrollHijack",t[t.MemoryLeak=4]="MemoryLeak",t[t.Malware=8]="Malware",t[t.All=15]="All"}(cn||(cn={}));const ln="2.0";class dn{constructor(){this.Dm=new Xs.SimpleEventDispatcher}get onVpaidEvent(){return this.Dm.asEvent()}handshakeVersion(t=ln){return"2.0"}}var fn,pn;!function(t){t[t.Win=0]="Win",t[t.AdLoaded=1]="AdLoaded",t[t.AdStarted=2]="AdStarted",t[t.AdImpression=3]="AdImpression"}(fn||(fn={}));class vn{constructor(t){this.Fm=t,this.Vm=new Map,Object(v.a)(this.Fm.settings.bidLifecycle)||(this.Fm.settings.bidLifecycle={})}onTrackingLifecycleEvent(t){switch(this.Vm.set(t,Date.now()),t){case fn.AdLoaded:this.Um();break;case fn.AdImpression:this.Nm()}}Um(){this.Fm.settings.bidLifecycle.winToAdLoadedTime=this.$m}Nm(){this.Fm.settings.bidLifecycle.startAdToImpressionTime=this.Hm}get Hm(){return this.Vm.get(fn.AdImpression)&&this.Vm.get(fn.AdStarted)?this.Vm.get(fn.AdImpression)-this.Vm.get(fn.AdStarted):0}get $m(){return this.Vm.get(fn.AdLoaded)&&this.Vm.get(fn.Win)?this.Vm.get(fn.AdLoaded)-this.Vm.get(fn.Win):0}}!function(t){t[t.IMPRESSION_TIMEOUT=0]="IMPRESSION_TIMEOUT",t[t.SKIP_AD_TIMEOUT=1]="SKIP_AD_TIMEOUT",t[t.STOP_AD_TIMEOUT=2]="STOP_AD_TIMEOUT",t[t.AD_LOADED_TIMEOUT=3]="AD_LOADED_TIMEOUT"}(pn||(pn={}));const bn={[pn.IMPRESSION_TIMEOUT]:25e3,[pn.SKIP_AD_TIMEOUT]:500,[pn.STOP_AD_TIMEOUT]:500,[pn.AD_LOADED_TIMEOUT]:25e3},mn=500,gn="cnx-ad-bid-slot",yn="cnx-ad-bid-slot-selected",wn="Connatix Ad";class xn extends dn{constructor(t){super(),this.settings=t,this.qm=void 0,this.zm=null,this.Gm=null,this.Wm=null,this.Jm=!1,this.Ru=!1,this.Qm=!1,this.Xm=!1,this.Ym={[pn.IMPRESSION_TIMEOUT]:null,[pn.SKIP_AD_TIMEOUT]:null,[pn.STOP_AD_TIMEOUT]:null,[pn.AD_LOADED_TIMEOUT]:null},this.Km=null,this.Zm=()=>{this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.Timeout}}),this.ig()},this.eg=()=>{this.tg({type:Et.b.AdSkipped}),this.ig()},this.sg=()=>{this.tg({type:Et.b.AdStopped}),this.ig()},this.ng=()=>{this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.TimeoutLoaded}}),this.ig()},this.rg=()=>{this.hg(pn.AD_LOADED_TIMEOUT,this.ng,bn[pn.AD_LOADED_TIMEOUT])},this.creativeId=this.settings.externalCreativeId,this.ag=`cnx-ad-slot-${this.settings.id}`}skipAd(){this.og()}stopAd(t){this.cg()}startAd(){this.Xm&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"startAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.ag}`,level:h.ProtoLoggingLevelEnum.FATAL}),this.Xm=!0,this.ug()}initAd(t,i,e,s,r,a,o){this.Qm&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"initAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.ag}`,level:h.ProtoLoggingLevelEnum.FATAL}),this.Qm=!0,this.rg(),this.em(o),this.dg=new vn(this),this.dg.onTrackingLifecycleEvent(fn.Win)}setAdVolume(t){this.Gm.volume=t,Object(E.O)(this.Gm,t),t<=0?this.settings.adEnforcer.start(cn.Mute):this.settings.adEnforcer.stop(cn.Mute)}get impressionStarted(){return this.Jm}get creativeId(){return this.qm}set creativeId(t){Object(v.h)(this.creativeId)||(this.qm=t)}fg(t){let i;Object(v.d)(t.payload.skipOffset)&&(i=t.payload.skipOffset);const e={type:Et.b.AdLoaded,payload:{adLoadedData:{skipOffset:i},adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode}};return this.settings.adLoadedPayload=e,e}pg(t){return{type:Et.b.AdImpression,payload:{adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),adVideoUrl:this.adVideoUrl,name:wn},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}vg(t){return{type:Et.b.AdVideoStart,payload:{adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),name:wn},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}tg(t){if(this.bg(t))switch(t.type){case Et.b.AdLoaded:this.dg.onTrackingLifecycleEvent(fn.AdLoaded),this.mg(),this.Dm.dispatch(this.fg(t));break;case Et.b.AdImpression:this.dg.onTrackingLifecycleEvent(fn.AdImpression),this.gg(),Object(E.a)(this.Wm,yn),this.Dm.dispatch(this.pg(t)),this.Jm=!0;break;case Et.b.AdVideoStart:this.dg.onTrackingLifecycleEvent(fn.AdStarted),this.Dm.dispatch(this.vg(t));break;case Et.b.AdStopped:case Et.b.AdSkipped:case Et.b.AdError:this.Dm.dispatch(t),this.Ru&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_double_destroy",exception:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,level:h.ProtoLoggingLevelEnum.WARNING}),this.wl();break;default:this.Dm.dispatch(t)}else this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.InvalidVpaidEvent}})}em(t){this.Wm=this.settings.globalDomUtilsService.createElementByString(`<div class= "${gn}"></div>`),this.zm=this.settings.globalDomUtilsService.createElementByString(`<div class="cnx-ad-slot" id="${this.ag}"></div>`),this.Gm=this.settings.globalDomUtilsService.createElementByString('<video class="cnx-ad-slot cnx-ad-video-slot"></video>'),this.Gm.setAttribute("playsinline",""),this.Gm.setAttribute("webkit-playsinline",""),this.Gm.volume=t,Object(E.O)(this.Gm,t),this.Wm.appendChild(this.Gm),this.Wm.appendChild(this.zm),this.settings.adContainer.appendChild(this.Wm),this.settings.adEnforcer.registerContainer(this.Wm,this.ag),this.yg=this.settings.adEnforcer.onEnforcerEvent.subscribe(t=>{this.wg(t)}),this.settings.adEnforcer.start(cn.All)}wl(){this.Ru=!0,this.yg(),this.ig(),this.settings.adEnforcer.deregisterContainer(this.Wm),null!==this.Km&&clearTimeout(this.Km),this.Km=setTimeout(()=>{this.settings.adContainer.removeChild(this.Wm)},mn)}ug(){this.hg(pn.IMPRESSION_TIMEOUT,this.Zm,bn[pn.IMPRESSION_TIMEOUT])}gg(){this.xg(pn.IMPRESSION_TIMEOUT)}og(){this.hg(pn.SKIP_AD_TIMEOUT,this.eg,bn[pn.SKIP_AD_TIMEOUT])}cg(){this.hg(pn.STOP_AD_TIMEOUT,this.sg,bn[pn.STOP_AD_TIMEOUT])}mg(){this.xg(pn.AD_LOADED_TIMEOUT)}hg(t,i,e){this.Ym[t]=setTimeout(()=>{i()},e)}xg(t){const i=this.Ym[t];null!==i&&(clearTimeout(i),this.Ym[t]=null)}ig(){Object.keys(this.Ym).forEach(t=>{this.xg(t)})}bg(t){return!(!this.Jm&&(t.type===Et.b.AdStopped||t.type===Et.b.AdSkipped))}wg(t){if(t.detectedContainer!==this.Wm)return;let i;switch(t.type){case on.BADURI_DETECTED:i="AdManager_enforcer_BadUri";break;case on.MALWARE_DETECTED:i="AdManager_enforcer_malware",this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.EnforcementMalware}});break;case on.VOLUME_DETECTED:i="AdManager_enforcer_soundBlock",this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.EnforcementVolume}})}Object(n.a)({message:i,exception:t.message,level:h.ProtoLoggingLevelEnum.WARNING})}kg(t,i,e){var s,r;const a=this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,o=this.creativeId;Object(n.a)({message:`AdManager_${t}_${i}`,exception:`advertiserLineItemId:${a}_creativeId:${o}_errorMessage:${null===(s=e)||void 0===s?void 0:s.message}`,callStack:null===(r=e)||void 0===r?void 0:r.stack,throttle:5,level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0})}}var kn=e(44);const Sn=25;class On extends dn{constructor(t,i,e,s){super(),this.Sg=t,this.Og=i,this._g=e,this.$n=s,this.jg=null,this.Ag=null,this.Ig=new Xs.SimpleEventDispatcher,this.Cg=t=>{this.jg=t.getAdsManager(this.Tg,{loadVideoTimeout:Sn*Zt.f}),this.jg.setVolume(0),this.Pg(),this.Mg()},this.Eg=t=>{let i="";try{i=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()+"_"+this.Og}catch(t){}this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.ImaError+"_"+i}})},this.Rg=t=>{const i=this.Sg.AdEvent.Type;switch(t.type){case i.CLICK:this.Dm.dispatch({type:Et.b.AdClickThru,payload:{}});break;case i.LOADED:this.Ag=t.getAd(),this.Ig.dispatch(this.Ag.getCreativeId()),Object(kn.b)(this._g,t.getAdData().clickThroughUrl).then(t=>{if(t)return void this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.DomainBlocked}});const i=this.Ag?this.Ag.getSkipTimeOffset():-1;this.Dm.dispatch({type:Et.b.AdLoaded,payload:{skipOffset:i}})});break;case i.IMPRESSION:const e={adsManager:this.jg,adContainer:this.Bg,viewMode:this.Dg(this.Fg),adTag:this.Og};this.Dm.dispatch({type:Et.b.AdVideoStart}),this.Dm.dispatch({type:Et.b.AdImpression,payload:{imaMetadata:e}});break;case i.STARTED:this.Dm.dispatch({type:Et.b.AdStarted});break;case i.FIRST_QUARTILE:this.Dm.dispatch({type:Et.b.AdVideoFirstQuartile});break;case i.MIDPOINT:this.Dm.dispatch({type:Et.b.AdVideoMidpoint});break;case i.THIRD_QUARTILE:this.Dm.dispatch({type:Et.b.AdVideoThirdQuartile});break;case i.COMPLETE:this.Dm.dispatch({type:Et.b.AdVideoComplete}),this.Dm.dispatch({type:Et.b.AdStopped});break;case i.ALL_ADS_COMPLETED:break;case i.DURATION_CHANGE:this.Dm.dispatch({type:Et.b.AdDurationChange});break;case i.PAUSED:this.Dm.dispatch({type:Et.b.AdPaused});break;case i.RESUMED:this.Dm.dispatch({type:Et.b.AdPlaying});break;case i.LINEAR_CHANGED:this.Dm.dispatch({type:Et.b.AdLinearChange});break;case i.SKIPPABLE_STATE_CHANGED:this.Dm.dispatch({type:Et.b.AdSkippableStateChange});break;case i.SKIPPED:this.Dm.dispatch({type:Et.b.AdSkipped});break;case i.VOLUME_CHANGED:this.Dm.dispatch({type:Et.b.AdVolumeChange});break;case i.USER_CLOSE:this.Dm.dispatch({type:Et.b.AdUserClose});break;case i.LOG:this.Dm.dispatch({type:Et.b.AdLog})}},this.Vg=new Promise(t=>{this.Mg=t})}get onCreativeReceived(){return this.Ig.asEvent()}initAd(t,i,e,s,n,r){this.Bg=r.slot,this.Tg=r.videoSlot,this.Ll=t,this.Rl=i,this.Fg=e||Et.a.Normal;try{this.Ug()}catch(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.ImaInitSdkError}})}}startAd(){try{this.jg.start()}catch(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.WrapperStartAdError+`_${t.message}`}})}}stopAd(t){var i;null===(i=this.Vg)||void 0===i||i.then(()=>{var t;null===(t=this.jg)||void 0===t||t.stop()})}resizeAd(t,i,e){this.jg.resize(t,i,this.Dg(e))}pauseAd(){this.jg.pause()}resumeAd(){this.jg.resume(),this.$n===_t.b.Ios&&Object(E.z)(this.Tg)}expandAd(){this.jg.expand()}collapseAd(){this.jg.collapse()}skipAd(){this.jg.skip()}getAdRemainingTime(){return this.jg.getRemainingTime()}getAdDuration(){return this.Ag?this.Ag.getDuration():0}getAdVolume(){return this.jg.getVolume()}setAdVolume(t){this.jg.setVolume(t)}getMediaFile(){var t;return null===(t=this.Ag)||void 0===t?void 0:t.getMediaUrl()}Ug(){this.Ng=new this.Sg.AdDisplayContainer(this.Bg,this.Tg),this.Sg.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.Ng.initialize(),this.$g=new this.Sg.AdsLoader(this.Ng),this.$g.getSettings().setVpaidMode(this.Sg.ImaSdkSettings.VpaidMode.INSECURE),this.$g.addEventListener(this.Sg.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.Cg),this.$g.addEventListener(this.Sg.AdErrorEvent.Type.AD_ERROR,this.Eg),this.Hg=new this.Sg.AdsRequest,this.Hg.adTagUrl=this.Og,this.Hg.linearAdSlotWidth=this.Hg.nonLinearAdSlotWidth=this.Ll,this.Hg.linearAdSlotHeight=this.Hg.nonLinearAdSlotHeight=this.Rl,this.$g.requestAds(this.Hg)}Pg(){this.jg.addEventListener(this.Sg.AdErrorEvent.Type.AD_ERROR,this.Eg),Object.keys(this.Sg.AdEvent.Type).forEach(t=>{this.jg.addEventListener(this.Sg.AdEvent.Type[t],this.Rg,!1)});try{this.jg.init(this.Ll,this.Rl,this.Dg(this.Fg))}catch(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.ImaManagerInit}})}}Dg(t){return t===Et.a.Fullscreen?this.Sg.ViewMode.FULLSCREEN:this.Sg.ViewMode.NORMAL}destroy(){var t;try{this.$g&&this.$g.destroy(),this.Ng&&this.Ng.destroy(),null===(t=this.Vg)||void 0===t||t.then(()=>{var t;null===(t=this.jg)||void 0===t||t.destroy(),this.Vg=void 0})}catch(t){}}}const _n="//imasdk.googleapis.com/js/sdkloader/ima3.js";class jn extends xn{constructor(t){super(t),this.settings=t,this.adMediaType="ima",this.adSourceType=h.ProtoAdsourceTypeEnum.Ima,this.qg=[]}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),this.zg=this.Gg().then(r=>{this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.Wg(),this.Jg=new On(r,this.settings.url,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.os),this.qg.push(this.Jg.onCreativeReceived.subscribe(t=>{this.creativeId=t}),this.Jg.onVpaidEvent.subscribe(t=>{this.tg(t)})),this.Jg.initAd(t,i,e,s,n,{slot:this.zm,videoSlot:this.Gm})}).catch(t=>{const i=Object(v.g)(t)?t:un.c.ImaInitSdkError;this.tg({type:Et.b.AdError,payload:{errorMessage:i}})})}catch(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.Jg.startAd()}catch(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){var i;try{super.stopAd(t),null===(i=this.zg)||void 0===i||i.then(()=>{this.Jg.stopAd(t)})}catch(t){this.kg("ImaBidAdaptor","stopAd",t)}}resizeAd(t,i,e){try{this.Jg.resizeAd(t,i,e)}catch(t){this.kg("ImaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Jg.pauseAd()}catch(t){this.kg("ImaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Jg.resumeAd()}catch(t){this.kg("ImaBidAdaptor","resumeAd",t)}}expandAd(){try{this.Jg.expandAd()}catch(t){this.kg("ImaBidAdaptor","expandAd",t)}}collapseAd(){try{this.Jg.collapseAd()}catch(t){this.kg("ImaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Jg.skipAd()}catch(t){this.kg("ImaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Jg.getAdRemainingTime()}catch(t){return this.kg("ImaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Jg&&this.Jg.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.kg("ImaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Jg.getAdVolume()}catch(t){return this.kg("ImaBidAdaptor","getAdVolume",t),0}}setAdVolume(t){try{super.setAdVolume(t),this.Jg.setAdVolume(t)}catch(t){this.kg("ImaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){var t;return null===(t=this.Jg)||void 0===t?void 0:t.getMediaFile()}get declaredDurationInSeconds(){var t;return null===(t=this.Jg)||void 0===t?void 0:t.getAdDuration()}pg(t){const i=super.pg(t);return i.payload.adSourceData.imaMetadata=t.payload.imaMetadata,i}Gg(){return new Promise((t,i)=>{const e=this.Qg(window);e?t(e):Object(E.x)({src:_n},window.document.head,window,()=>{const e=this.Qg(window);if(e)t(e);else{Object(Yt.k)([95,5])&&Object(n.a)({message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:h.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),i(un.c.ImaObjectNotFound)}},()=>{i(un.c.ImaScriptFailure)},1===Object(Yt.k)([95,5]),"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")})}Qg(t){return t.google&&t.google.ima}Wg(){const t=this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame;this.Qg(t)||Object(E.x)({src:_n},t.document.head,t)}wl(){var t;try{super.wl(),this.qg.forEach(t=>t()),null===(t=this.zg)||void 0===t||t.then(()=>{var t;null===(t=this.Jg)||void 0===t||t.destroy(),this.zg=void 0})}catch(t){this.kg("ImaBidAdaptor","_destroy",t)}}}class An{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();const t=new jn({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,url:this.settings.url,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,externalCreativeId:this.settings.creativeId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(t)}}function In(t,i){t.sort((t,i)=>t.width===i.width?t.bitrate-i.bitrate:t.width-i.width);for(let e=0;e<t.length;e++)if(t[e].width>=i)return t[e-1]||t[e];return t[t.length-1]}var Cn=e(15);const Tn=Cn&&Cn.isSupported(),Pn=t=>t.canPlayType("application/vnd.apple.mpegurl"),Mn={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class En{constructor(t,i,e){this.Xg=t,this.Yg=i,this.fc=e,this.Kg=(t,i)=>{if(i.fatal)switch(i.type){case Cn.ErrorTypes.NETWORK_ERROR:if(i.details===Cn.ErrorDetails.MANIFEST_PARSING_ERROR||i.details===Cn.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.Zg();this.ty.startLoad();break;case Cn.ErrorTypes.MEDIA_ERROR:this.ty.recoverMediaError();break;default:this.Zg()}},this.iy=()=>{this.ty.off(Cn.Events.MEDIA_ATTACHED,this.iy),this.ty.loadSource(this.Xg),this.ty.once(Cn.Events.MANIFEST_PARSED,this.ey)},this.ey=()=>{this.ty.off(Cn.Events.MANIFEST_PARSED,this.ey),this.sy()}}start(t,i){this.sy=t,this.Zg=i,Tn?(this.ty=this.fc.initHls(Mn),this.ny()):this.Zg()}destroy(){this.ty&&(this.ty.destroy(),this.ty=null)}ny(){this.ty.on(Cn.Events.ERROR,this.Kg),this.ty.attachMedia(this.Yg),this.ty.once(Cn.Events.MEDIA_ATTACHED,this.iy)}}class Ln extends dn{constructor(t,i,e,s,r,a,o,c=!1){super(),this.Gn=t,this.hy=i,this.Tg=e,this.$n=s,this.ay=r,this.oy=a,this.uy=o,this.ly=c,this.py=!1,this.vy=Object(u.a)(w),this.by=!1,this.my=[{event:Et.b.AdVideoStart,position:0},{event:Et.b.AdVideoFirstQuartile,position:25},{event:Et.b.AdVideoMidpoint,position:50},{event:Et.b.AdVideoThirdQuartile,position:75},{event:Et.b.AdVideoComplete,position:100}],this.gy=this.my[0],this.yy=t=>{try{switch(t.type){case w.Pause:this.by=!1;break;case w.Play:if(!this.by&&this.ly)return void this.Tg.pause();break;case w.Canplay:case w.Durationchange:this.wy();break;case w.Timeupdate:this.Dm.dispatch({type:Et.b.AdRemainingTimeChange});const i=Object(Xt.d)(0,this.Tg.duration,0,100,this.Tg.currentTime);if(this.gy&&i>=this.gy.position){this.Dm.dispatch({type:this.gy.event});const t=this.gy;this.gy=this.my[this.my.indexOf(this.gy)+1],t.event===Et.b.AdVideoComplete&&this.stopAd("videoComplete")}break;case w.Error:this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.VastVideoTagEventError}});break;case"click":this.Dm.dispatch({type:Et.b.AdClickThru,payload:{}})}}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:t.message,throttle:10,sendMaxLog:!1})}}}initAd(t,i,e,s,n,r){try{this.Tg=r.videoSlot,this.width=t,this.height=i,this.xy(this.ay,this.Tg.parentElement),this.resizeAd(t,i,e),this.addVideoEvents(this.Tg),this.uy&&Tn?this.ky():(this.Tg.setAttribute("src",this.hy),this.Tg.setAttribute("preload","metadata"),this.Tg.load())}catch(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.WrapperInitAdError+`_${t.message}`}})}}startAd(){try{Object(E.a)(this.Tg,"cnx-ad-video-slot"),this.by=!0,this.Tg.play().then(()=>{this.Dm.dispatch({type:Et.b.AdStarted}),this.Dm.dispatch({type:Et.b.AdImpression,payload:{}})}).catch(t=>{this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.VastPlayPromiseReject}})})}catch(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.WrapperStartAdError+`_${t.message}`}})}}stopAd(t){this.ly&&this.Tg.pause(),this.Dm.dispatch({type:Et.b.AdStopped})}resizeAd(t,i,e){Object(E.L)(this.Tg,{width:`${t}px`,height:`${i}px`}),this.Dm.dispatch({type:Et.b.AdSizeChange})}pauseAd(){this.by=!1,this.oy&&void 0===this.gy&&(this.gy=this.my[0]),this.Tg.pause(),this.Dm.dispatch({type:Et.b.AdPaused})}resumeAd(){this.by=!0,this.Tg.play(),this.$n===_t.b.Ios&&Object(E.z)(this.Tg),this.Dm.dispatch({type:Et.b.AdPlaying})}expandAd(){}collapseAd(){}skipAd(){this.Dm.dispatch({type:Et.b.AdSkipped})}getAdRemainingTime(){return this.Tg.duration-this.Tg.currentTime}getAdDuration(){return this.Tg.duration?this.Tg.duration:0}getAdVolume(){return this.Tg.volume}setAdVolume(t){this.Tg.volume=t}destroy(){if(!this.oy)try{Object(E.H)(this.Tg,"cnx-ad-video-slot"),this.Sy(this.Tg),this.Tg.removeAttribute("src"),this.Oy&&(this.Oy.destroy(),this.Oy=null)}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_VastIntegrator_destroyAd",exception:t.message,callStack:t.stack})}}ky(){this.Oy=new En(this.hy,this.Tg,this.Gn),this.Oy.start(()=>{this.wy()},()=>{this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.CnxMediaSrcNotSupported}})})}xy(t,i){this._y=this.Gn.createElement("a"),t&&(this._y.href=t,this._y.target="_blank"),Object(E.a)(this._y,"cnx-ad-slot"),i.appendChild(this._y),this._y.addEventListener("click",this.yy)}addVideoEvents(t){this.vy.forEach(i=>{t.addEventListener(i,this.yy)}),this._y&&this._y.addEventListener("click",this.yy)}Sy(t){this.vy.forEach(i=>{t.removeEventListener(i,this.yy)}),this._y&&this._y.removeEventListener("click",this.yy)}wy(){this.py||(this.py=!0,this.Dm.dispatch({type:Et.b.AdLoaded,payload:{}}))}}var Rn;!function(t){t.errorIframe="Error creating iframe"}(Rn||(Rn={}));const Bn="IframeLoader";class Dn{constructor(t,i){this.Gn=t,this.gh=i}jy(t,i,e){let s=!1;return n=>{if(n.contentWindow&&!s)return s=!0,this.Ay(n,this.Iy(t,i),e)?void 0:(n&&n.parentNode&&n.parentNode.removeChild(n),null)}}Cy(t,i,e,s,n){return this.Ty(t,this.jy(i,e,s),n)}Ty(t,i,e){const s=this.Gn.createElement("iframe",e);return s.allow="autoplay",s.src="javascript:false",s.srcdoc="",s.width="100%",s.height="100%",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.margin="0px",s.style.padding="0px",s.style.border="0px",s.style.width="100%",s.style.height="100%",s.setAttribute("SCROLLING","NO"),s.onload=()=>{i(s)},t.appendChild(s),i(s),s}Ay(t,i,e){try{const s=t.contentWindow&&t.contentWindow.document;s.open(),s.write(i),e(t)}catch(i){return this.Gn.isDetachedFromDOM(t)?Object(n.a)({message:"iframeLoader_(inDom_false)",exception:i.message,callStack:i.stack,level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:1}):Object(n.a)({message:"iframeLoader_(inDom_true)",exception:i.message,level:h.ProtoLoggingLevelEnum.WARNING,logJsonState:!0,sendMaxLog:!1,throttle:1}),!1}return!0}Iy(t,i){return Object.keys(i).forEach(function(e){let s;s="object"==typeof s?JSON.stringify(i[e]):i[e],t=t.replace(new RegExp(`{{${e}}}`,"g"),s)}),t}loadIframe(t){const i='<!DOCTYPE html><html lang="en"><head>'+(t.customHead?t.customHead:"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(t.customHtml?t.customHtml:"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',e="cnx-iframe_"+Object(Yt.d)();return new Promise((s,n)=>{this.Py=this.Cy(t.container,i,{iframeID:e},t=>{null===t&&n(Rn.errorIframe);const i=r=>{let h;try{h=JSON.parse(r.data)}catch(t){return}h.id===e&&(t.contentWindow?(t.contentWindow.document.close(),t.contentWindow.removeEventListener("message",i),s({iframe:t})):n("The Iframe is no longer in the DOM"))};t.contentWindow.addEventListener("message",i)},this.gh),this.My=new b(this.Py.contentWindow,`${Bn}_${t.customReportingLog.name}`,t.customReportingLog.advertiserLineItemId)})}get iframe(){return this.Py}destroy(){this.My.destroy(),this.Py=null}}class Fn{constructor(t,i,e,s){this.Ey=t,this.Gn=i,this.Vn=e,this.yo=s,this.Ly={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.Ey}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Vn}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Vn}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.Ry=new Dn(this.Gn)}By(t){return this.Ry.loadIframe({customHead:this.Ly.headTamplate,customHtml:this.Ly.bodyTamplate,container:t,customReportingLog:{name:"VPAIDClient",advertiserLineItemId:this.yo}})}loadAdUnitIframe(t){return new Promise((i,e)=>{this.By(t).then(t=>{t.adContainer=t.iframe.contentWindow.document.querySelector(".ad-element"),i(t)}).catch(t=>{e(t)})})}destroyAdUnit(){var t,i;try{const e=this.Ry.iframe.contentWindow.clearAll;e&&e()}catch(e){Object(n.a)({message:"AdManager_VPAIClient_destroyAdUnit",exception:null===(t=e)||void 0===t?void 0:t.message,callStack:null===(i=e)||void 0===i?void 0:i.stack,level:h.ProtoLoggingLevelEnum.WARNING,throttle:2,sendMaxLog:!0})}this.Ry.destroy(),this.Ry=null}}var Vn;!function(t){t[t.handshakeVersion=0]="handshakeVersion",t[t.initAd=1]="initAd",t[t.startAd=2]="startAd",t[t.stopAd=3]="stopAd",t[t.skipAd=4]="skipAd",t[t.resizeAd=5]="resizeAd",t[t.pauseAd=6]="pauseAd",t[t.resumeAd=7]="resumeAd",t[t.expandAd=8]="expandAd",t[t.collapseAd=9]="collapseAd",t[t.subscribe=10]="subscribe",t[t.unsubscribe=11]="unsubscribe"}(Vn||(Vn={}));class Un extends dn{constructor(t,i,e,s,r,a){super(),this.hy=t,this.Gn=i,this.Dy=e,this.yo=s,this.qm=r,this.$n=a,this.Fy=[],this.Vy=new Set,this.Uy=new Set,this.Ny=(t,i,e)=>{const s={url:t,playerHandles:e};this.$y(Et.b.AdClickThru,s)},this.$y=(t,i)=>{if(this.Uy.add(t),!this.Vy.has(t))return t!==Et.b.AdImpression||this.Uy.has(Et.b.AdLoaded)?void this.Hy(t,i):(Object(n.a)({message:"AdManager_AdVpaidWrapper_ImpressionBeforeAdLoaded",exception:`advertiserLineItemId:${this.yo}_creativeId:${this.qm}_vpaidSrc:${this.hy}`,callStack:JSON.stringify(Object(l.d)(this.Uy)),throttle:1e3,level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0}),this.Vy.add(Et.b.AdLoaded),void this.Hy(Et.b.AdLoaded,i))},this.Hy=(t,i)=>{switch(t){case Et.b.AdError:this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:Object(v.g)(i)?i:JSON.stringify(i)}});break;case Et.b.AdLoaded:this.Dm.dispatch({type:Et.b.AdLoaded,payload:{skipOffset:Object(v.f)(i)?i.skipOffset:void 0}});break;case Et.b.AdImpression:this.Dm.dispatch({type:Et.b.AdImpression,payload:{}});break;case Et.b.AdClickThru:this.Dm.dispatch({type:Et.b.AdClickThru,payload:Object(v.f)(i)?i:{}});break;default:this.Dm.dispatch({type:Et.b[t]})}}}initAd(t,i,e,s,n,r){try{this.Ll=t,this.Rl=i,this.Fg=e,this.qy=s,this.zy=n,this.Gy=r,this.Wy=new Fn(this.hy,this.Gn,this.Dy,this.yo),this.Jy=this.Wy.loadAdUnitIframe(r.slot).then(t=>{this.Qy(t)}).catch(t=>{this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.VpaidOnLoad}})})}catch(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.VpaidOnLoad}})}}startAd(){try{this.Uy.has(Et.b.AdImpression)&&!this.Vy.has(Et.b.AdImpression)&&(Object(n.a)({message:"AdManager_AdVpaidWrapper_brokenImpressionHandle",exception:`advertiserLineItemId:${this.yo}_creativeId:${this.qm}_vpaidSrc:${this.hy}`,callStack:JSON.stringify(Object(l.d)(this.Uy)),throttle:1e3,level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0}),this.Vy.add(Et.b.AdImpression),this.Dm.dispatch({type:Et.b.AdImpression,payload:{}})),this.Xy.startAd()}catch(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.WrapperStartAdError}})}}stopAd(t){var i;null===(i=this.Jy)||void 0===i||i.then(()=>{this.Xy?this.Xy.stopAd(t):Object(n.a)({message:"stopAd",exception:t,level:h.ProtoLoggingLevelEnum.WARNING})})}resizeAd(t,i,e){this.Xy.resizeAd(t,i,e)}pauseAd(){this.Xy.pauseAd()}resumeAd(){this.Xy.resumeAd(),this.$n===_t.b.Ios&&Object(E.z)(this.Gy.videoSlot)}expandAd(){this.Xy.expandAd()}collapseAd(){this.Xy.collapseAd()}skipAd(){this.Xy.skipAd()}getAdRemainingTime(){return this.Xy.getAdRemainingTime()}getAdDuration(){var t;return null===(t=this.Xy)||void 0===t?void 0:t.getAdDuration()}getAdVolume(){return this.Xy.getAdVolume()}setAdVolume(t){this.Xy.setAdVolume(t)}destroy(){var t;this.Yy(),this.Fy.length=0,this.Xy=null,null===(t=this.Wy)||void 0===t||t.destroyAdUnit()}Qy(t){const i=t.iframe.contentWindow.getVPAIDAd;if("function"==typeof i){const e=i();this.Xy=e,this.af(),this.Ky(e)?e.initAd(this.Ll,this.Rl,this.Fg,this.qy,this.zy,{slot:t.adContainer,videoSlot:this.Gy.videoSlot}):this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.VpaidInvalid}})}else this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.VpaidGetVpaidAdError}})}af(){Object.keys(Et.b).forEach(t=>{let i=this.$y.bind(this,Et.b[t]);Et.b[t]===Et.b.AdClickThru&&(i=this.Ny),this.Fy.push({handler:i,event:t}),this.Xy.subscribe(i,t)})}Yy(){this.Fy.forEach(t=>{this.Xy.unsubscribe(t.handler,t.event)})}Ky(t){return Object.keys(Object(l.f)(Vn)).every(i=>Object(v.b)(t[Vn[i]]))}}const Nn="video/mp4";class $n extends xn{constructor(t){super(t),this.settings=t,this.adSourceType=h.ProtoAdsourceTypeEnum.Unknown,this.Zy=()=>{},this.creativeId=t.vastResponse.creativeId}initAd(t,i,e,s,n,r,a){try{super.initAd(t,i,e,s,n,r,a),Object(kn.b)(this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.vastResponse.clickThrough).then(n=>{if(n)return void this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.DomainBlocked}});if(this.tw=this.iw(t,this.Gm),null===this.tw)return void this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.VastUnsupportedMedia}});this.adMediaType=this.tw.type,this.tw.getMediaFileType()===un.d.Video?(this.ew=new Ln(this.settings.globalDomUtilsService,this.tw.src,this.Gm,this.settings.os,this.settings.vastResponse.clickThrough),this.adSourceType=h.ProtoAdsourceTypeEnum.VastMedia):(this.ew=new Un(this.tw.src,this.settings.globalDomUtilsService,this.ag,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.creativeId,this.settings.os),this.adSourceType=h.ProtoAdsourceTypeEnum.Vpaid),this.Zy=this.ew.onVpaidEvent.subscribe(t=>{if(t.type===Et.b.AdLoaded&&(t.payload.skipOffset=this.settings.vastResponse.skipoffset),t.type===Et.b.AdClickThru){this.sw=t.payload.url;const i=t.payload.url||this.settings.vastResponse.clickThrough;i&&t.payload.playerHandles&&this.settings.globalDomUtilsService.open(i,At.c.Blank)}this.tg(t)});const r={AdParameters:this.settings.vastResponse.adParameters,adParameters:this.settings.vastResponse.adParameters};this.ew.initAd(t,i,e,s,r,{slot:this.zm,videoSlot:this.Gm})}).catch(t=>this.nw(t))}catch(t){this.nw(t)}}startAd(){try{super.startAd(),this.ew.startAd()}catch(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.ew?this.ew.stopAd(t):Object(n.a)({message:"stopAd",exception:t,level:h.ProtoLoggingLevelEnum.WARNING})}resizeAd(t,i,e){try{this.ew.resizeAd(t,i,e)}catch(t){this.kg("VastBidAdaptor","resizeAd",t)}}pauseAd(){try{this.ew.pauseAd()}catch(t){this.kg("VastBidAdaptor","pauseAd",t)}}resumeAd(){try{this.ew.resumeAd()}catch(t){this.kg("VastBidAdaptor","resumeAd",t)}}expandAd(){try{this.ew.expandAd()}catch(t){this.kg("VastBidAdaptor","expandAd",t)}}collapseAd(){try{this.ew.collapseAd()}catch(t){this.kg("VastBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.ew.skipAd()}catch(t){this.kg("VastBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.ew.getAdRemainingTime()}catch(t){return this.kg("VastBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.ew&&this.ew.getAdDuration()||Math.round(this.settings.vastResponse.duration/Zt.f)}catch(t){return this.kg("VastBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.ew.getAdVolume()}catch(t){return this.kg("VastBidAdaptor","getAdVolume",t),0}}setAdVolume(t){try{super.setAdVolume(t),this.ew.setAdVolume(t)}catch(t){this.kg("VastBidAdaptor","setAdVolume",t)}}get adVideoUrl(){var t;return null===(t=this.tw)||void 0===t?void 0:t.src}get declaredDurationInSeconds(){return this.settings.vastResponse.duration/Zt.f}vg(t){const i=super.vg(t);return this.rw(i)}pg(t){const i=super.pg(t);return this.rw(i)}wl(){var t;try{super.wl(),this.Zy(),null===(t=this.ew)||void 0===t||t.destroy()}catch(t){this.kg("VastBidAdaptor","_destroy",t)}}rw(t){var i;return t.payload.adSourceData.name=null===(i=this.settings.vastResponse)||void 0===i?void 0:i.adTitle,t.payload.clickThroughUrl=this.sw||this.settings.vastResponse.clickThrough,t}hw(t,i){return t.filter(t=>t.getMediaFileType()===un.d.Video&&i.canPlayType(t.type))}iw(t,i){const e=this.hw(this.settings.vastResponse.mediaFiles,i),s=e.filter(t=>t.type===Nn);if(s.length)return In(s,t);if(e.length)return In(e,t);const n=this.settings.vastResponse.mediaFiles.filter(t=>t.getMediaFileType()===un.d.Javascript);return n.length?In(n,t):null}nw(t){this.Dm.dispatch({type:Et.b.AdError,payload:{errorMessage:un.c.AdaptorInitAdError+`_${t.message}`}})}}var Hn,qn;!function(t){function i(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):isFinite(Date.parse(t))?new Date(t):"string"==typeof t?t.trim():t}t.JXONTree=function t(e){let s=0,n="";if(this.keyAttributes||(this.keyAttributes={}),e.hasChildNodes()){for(let i,s,r,h=0;h<e.childNodes.length;h++)((i=e.childNodes.item(h)).nodeType-1|1)===Node.TEXT_NODE?n+=i.nodeType===Node.TEXT_NODE?i.nodeValue.trim():i.nodeValue:1!==i.nodeType||i.prefix||(s=i.nodeName.toLowerCase(),r=new t(i),this.hasOwnProperty(s)?(this[s].constructor!==Array&&(this[s]=[this[s]]),this[s].push(r)):this[s]=r);this.keyValue=n?i(n):null}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes()){let t;for(;s<e.attributes.length;s++)t=e.attributes.item(s),this.keyAttributes[t.name.toLowerCase()]=i(t.value.trim())}},t.getKeyValue=function(t){if(t&&t.keyValue)return t.keyValue},t.decodeXMLText=function(t){if("string"==typeof t)return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}}(Hn||(Hn={}));class zn{constructor(t){this.aw=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this.ow="VPAID",this.delivery=void 0,this.type=void 0,this.width=void 0,this.height=void 0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.delivery=t.keyAttributes.delivery,this.type=t.keyAttributes.type,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.codec=t.keyAttributes.codec,this.id=t.keyAttributes.id,this.bitrate=t.keyAttributes.bitrate,this.minBitrate=t.keyAttributes.minbitrate,this.maxBitrate=t.keyAttributes.maxbitrate,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.src=Hn.getKeyValue(t)}isSupported(){return!("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)}getMediaFileType(){return this.apiFramework===this.ow||Object(l.g)(this.type,this.aw)?un.d.Javascript:un.d.Video}}class Gn{constructor(t,i){this.name=t.keyAttributes.event,this.uri=Hn.getKeyValue(t),"progress"===this.name&&(this.offset=Object(at.e)(t.keyAttributes.offset,i))}}class Wn{constructor(t){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=Hn.getKeyValue(t.clickthrough),this.clickTrackings=this.cw(Object(l.m)(t.clicktracking)),this.customClicks=this.cw(Object(l.m)(t.customclick))}cw(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(Hn.getKeyValue(t))}),i}}class Jn{constructor(t){this.duration=void 0,this.mediaFiles=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=Object(at.a)(Hn.getKeyValue(t.duration)),this.skipoffset=Object(at.e)(t.keyAttributes.skipoffset,this.duration),t.mediafiles&&(this.mediaFiles=this.uw(Object(l.m)(t.mediafiles.mediafile))),t.trackingevents&&(this.trackingEvents=this.lw(Object(l.m)(t.trackingevents.tracking))),t.videoclicks&&(this.videoClicks=new Wn(t.videoclicks)),t.adparameters&&(this.adParameters=Hn.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=Hn.decodeXMLText(this.adParameters)))}lw(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(new Gn(t,this.duration))}),i}uw(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{const e=new zn(t);e.isSupported()&&i.push(e)}),i}isSupported(){return!0}}class Qn{constructor(t){this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,this.adId=t.keyAttributes.adid,t.linear&&(this.linear=new Jn(t.linear))}isSupported(){return!0}}!function(t){function i(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(Hn.getKeyValue(t))}),i}t.parseImpressions=function(t){return i(t)},t.parseCretives=function(t){const i=[];return t.forEach(t=>{i.push(new Qn(t))}),i},t.parseErrors=function(t){return i(t)}}(qn||(qn={}));class Xn{constructor(t){this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adTitle=Hn.getKeyValue(t.adtitle),this.adSystem=Hn.getKeyValue(t.adsystem),this.impressions=qn.parseImpressions(Object(l.m)(t.impression)),this.creatives=qn.parseCretives(Object(l.m)(t.creatives.creative)),this.description=Hn.getKeyValue(t.description),this.advertiser=Hn.getKeyValue(t.advertiser),this.surveys=Hn.getKeyValue(t.survey),this.errors=qn.parseErrors(Object(l.m)(t.error)),this.pricing=Hn.getKeyValue(t.pricing),this.extensions=Hn.getKeyValue(t.extensions)}isSupported(){return!0}}class Yn{constructor(t){this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.extensions=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adSystem=Hn.getKeyValue(t.adSystem),this.impressions=qn.parseImpressions(Object(l.m)(t.impression)),this.VASTAdTagURI=Hn.getKeyValue(t.vastadtaguri),this.creatives=t.creatives.creative?qn.parseCretives(Object(l.m)(t.creatives.creative)):[],this.errors=qn.parseErrors(Object(l.m)(t.error)),this.extensions=t.extensions,this.fallowAdditionalWrappers=!t.keyAttributes.followadditionalwrappers||t.keyAttributes.followadditionalwrappers,this.allowMultipleAds=t.keyAttributes.allowmultipleads,this.fallbackOnNoAd=t.keyAttributes.fallbackonnoad}}class Kn{constructor(t){this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,t.inline?this.inLine=new Xn(t.inline):t.wrapper&&(this.wrapper=new Yn(t.wrapper))}isSupported(){return!0}}class Zn{constructor(t=2){this.dw=t}parseVastXml(t){try{if(!this.fw(t))return{error:!0,errorReason:hn.XmlInvalidString};const i=(new DOMParser).parseFromString(t,"application/xml"),e=new Hn.JXONTree(i.documentElement);if(!this.pw(e,this.dw))return{error:!0,errorReason:hn.XmlInvalidTree};const s=new Kn(e.ad);return this.vw(s)?{error:!1,result:s}:{error:!0,errorReason:hn.XmlInvalidAd}}catch(t){return{error:!0,errorReason:hn.XmlParseGeneral}}}fw(t){return Object(v.h)(t)}pw(t,i){if(!t.ad)return!1;const e=parseInt(t.keyAttributes.version,10);return!(e&&e<i)}vw(t){const i=t.wrapper,e=t.inLine;if(!e&&!i)return!1;if(i&&!i.VASTAdTagURI)return!1;if(!i){if(![...e.creatives].filter(t=>{var i,e;return null===(e=null===(i=t)||void 0===i?void 0:i.linear)||void 0===e?void 0:e.mediaFiles.length}).length)return!1}return!0}}class tr{constructor(t){this.mediaFiles=[],this.adTitle=void 0,this.adParameters=void 0,this.clickThrough=void 0,this.creativeId=void 0,t.forEach(t=>{t.inLine?(this.adTitle=t.inLine.adTitle,this.Pm(t.inLine.creatives)):t.wrapper&&this.Pm(t.wrapper.creatives)})}Mm(t){this.duration=t.duration,this.mw(t.mediaFiles),this.gw(t.skipoffset),this.yw(t.adParameters),t.videoClicks&&t.videoClicks.clickThrough&&this.xy(t.videoClicks.clickThrough)}yw(t){this.adParameters=t}gw(t){this.skipoffset=t}mw(t){this.mediaFiles=[...this.mediaFiles,...t]}xy(t){this.clickThrough=t}Pm(t){t.forEach(t=>{t.linear&&(this.creativeId=t.id,this.Mm(t.linear))})}}const ir=2,er=10;class sr{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()},this.settings.vastAdsChain||(this.settings.vastAdsChain=[]),void 0===this.settings.maxWrapperLimit&&(this.settings.maxWrapperLimit=er)}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.ww(this.settings.xml).then(t=>(this.metrics.fetchEnd=(new Date).getTime(),t)).catch(t=>{throw this.metrics.fetchEnd=(new Date).getTime(),t})}ww(t){return new Promise((i,e)=>{const s=new Zn(ir).parseVastXml(t);!0!==s.error?(this.xw(s.result),i(this.kw(s.result))):e(s.errorReason)})}kw(t){return new Promise((i,e)=>{if(t.wrapper){this.settings.maxWrapperLimit<=0&&e(hn.XmlAdaptorWrapperLimit);const s=this.settings.maxWrapperLimit-1;i(new or({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,maxWrapperLimit:s,url:t.wrapper.VASTAdTagURI,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,creativeId:this.settings.creativeId}).fetchBid())}else{i(new $n({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,vastResponse:new tr(this.settings.vastAdsChain),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,externalCreativeId:this.settings.creativeId}))}})}xw(t){!function(t,i){const e=new Zs(t);i.adError.push(...rn(e.errorUrls)),i.adImpression.push(...rn(e.impressions)),i.adClick.push(...rn(e.clickTrackings)),i.adMute.push(...rn(e.trackingEvents.mute)),i.adPause.push(...rn(e.trackingEvents.pause)),i.adQuartileFirst.push(...rn(e.trackingEvents.firstQuartile)),i.adQuartileSecond.push(...rn(e.trackingEvents.midpoint)),i.adQuartileThird.push(...rn(e.trackingEvents.thirdQuartile)),i.adQuartileFourth.push(...rn(e.trackingEvents.complete)),i.adResume.push(...rn(e.trackingEvents.resume)),i.adSkip.push(...rn(e.trackingEvents.skip)),i.adStarted.push(...rn(e.trackingEvents.creativeView)),i.adVideoStart.push(...rn([...e.trackingEvents.start])),i.adUnmute.push(...i.adUnmute,...rn(e.trackingEvents.unmute)),i.adUserAcceptInvitation.push(...rn([...e.trackingEvents.acceptInvitation,...e.trackingEvents.acceptInvitationLinear])),i.adUserClose.push(...rn(e.trackingEvents.close)),i.adUserMinimize.push(...i.adUserMinimize,...rn([...e.trackingEvents.collapse,...e.trackingEvents.playerCollapse,...e.trackingEvents.adCollapse]))}(t,this.settings.trackersInformation),this.settings.vastAdsChain.push(t)}}var nr,rr=e(27);!function(t){t[t.None=0]="None",t[t.Ima=1]="Ima"}(nr||(nr={}));const hr={[nr.Ima]:".g.doubleclick.net"},ar=!0;class or{constructor(t){this.settings=t,void 0===this.settings.requestWithCredentials&&(this.settings.requestWithCredentials=ar),this.metrics={created:(new Date).getTime()}}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.Sw(this.settings.url).then(t=>t.fetchBid()).then(t=>(this.metrics.fetchEnd=(new Date).getTime(),t)).catch(t=>{throw this.metrics.fetchEnd=(new Date).getTime(),t})}Ow(t){let i=nr.None;return Object.keys(hr).forEach(e=>{-1!==t.indexOf(hr[e])&&(i=parseInt(e,10))}),i}Sw(t){const i=this._w(t);switch(this.Ow(t)){case nr.None:return this.jw(i);case nr.Ima:return this.Aw(i);default:return Promise.reject(hn.HandlingSdkUrl)}}Aw(t){return Promise.resolve(new An({url:t,id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,creativeId:this.settings.creativeId}))}jw(t){return rr.a.fetchXMLRequest(t,this.settings.requestWithCredentials).catch(t=>Promise.reject(hn.NetworkRequestUrl)).then(t=>new sr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,vastAdsChain:this.settings.vastAdsChain,xml:t,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,creativeId:this.settings.creativeId}))}_w(t){const{width:i,height:e}=this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType),s={adHeight:e,adWidth:i,adPostion:this.settings.callingState.adBreakState.adBreakType},n={mediaDescription:this.settings.callingState.media.mediaDescription,mediaDuration:this.settings.callingState.media.mediaDuration,mediaId:this.settings.callingState.media.mediaId,mediaTitle:this.settings.callingState.media.mediaTitle,mediaUrl:this.settings.callingState.media.mediaUrl};return this.settings.adMacroReplacer.replace(t,this.settings.adManagerLineItem.protoLineItem.vendorId,{adMacros:s,mediaMacros:n})}}class cr{constructor(t={}){this.data=t,Object(v.h)(this.data.cnxBidId)||(this.data.cnxBidId=Object(Yt.c)())}}var ur,lr=e(33),dr=e(22);function fr(t,i){return t.find(t=>t.adManagerLineItem.protoLineItem.advertiserLineItemId===i).adManagerLineItem}function pr(t){const i=[];return t.callers.forEach(t=>{const e=t.settings.requestMetadata.data.requestedFloorPriceIndex;void 0===e||Object(l.g)(e,i)||i.push(e)}),t.bids.forEach(t=>{const e=t.settings.requestMetadata.data.requestedFloorPriceIndex;void 0===e||Object(l.g)(e,i)||i.push(e)}),i}function vr(t){return[h.ProtoCreativeTypeEnum.Tam,h.ProtoCreativeTypeEnum.Rtb,h.ProtoCreativeTypeEnum.HeaderBidder].includes(t)}!function(t){t[t.FirstQuartile=0]="FirstQuartile",t[t.SecondQuartile=1]="SecondQuartile",t[t.ThirdQuartile=2]="ThirdQuartile",t[t.FourthQuartile=3]="FourthQuartile"}(ur||(ur={}));class br{constructor(t,i,e,s){this.Iw=t,this.Cw=i,this.yo=e,this.Gn=s,this.Tw="div-cnx-display",this.Pw=new Xs.SignalDispatcher,this.Mw=new Xs.SimpleEventDispatcher}get onDisplayAd(){return this.Pw.asEvent()}get onError(){return this.Mw.asEvent()}initializeAd(t,i){try{this.zm=t,this.Ry=new Dn(this.Gn);let e="";this.Iw===un.b.Html&&(e=this.Cw);const s=this.Ew(this.zm,i);this.Ry.loadIframe({customHead:"<style>html, body {position:relative;width:100%;height:100%}#"+this.Tw+"{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}#"+this.Tw+"{border:3px solid white}#"+this.Tw+" iframe{display:block}</style>",customHtml:'<div id="'+this.Tw+'">'+e+"</div>",container:s,customReportingLog:{name:"DisplayIntegrator",advertiserLineItemId:this.yo}}).then(t=>{if(this.Lw=t.iframe,this.Iw===un.b.Javascript){const i=t.iframe.contentWindow,e=i.document.getElementById(this.Tw);Object(E.w)(e,i,this.Cw)}if(""===this.Lw.contentWindow.document.head.innerHTML){const t="html, body {position:relative;width:100%;height:100%;margin:0;border:0}";this.Rw(t)}Object(E.F)(this.Lw.contentWindow,"AdHtmlWrapper"),this.Pw.dispatch()}).catch(t=>{this.Mw.dispatch(un.c.DisplayIntegratorIframeLoad)})}catch(t){this.Mw.dispatch(un.c.WrapperInitAdError)}}destroy(){this.Lw&&this.zm&&Object(E.I)(this.Lw),this.Ry&&(this.Ry.destroy(),this.Ry=null)}Ew(t,i){if(!i.width||!i.height)return t;const e=this.Gn.createElementByString(`<div class="cnx-iframe-container" style="width: ${i.width}px; height: ${i.height}px"></div>`);return this.zm.appendChild(e),e}Rw(t){const i=this.Lw.contentWindow.document.createElement("style"),e=this.Lw.contentWindow.document.createTextNode(t);i.appendChild(e),this.Lw.contentWindow.document.head.appendChild(i)}}class mr{constructor(t=0,i=1e3,e=1){this.timerDuration=t,this.Bw=i,this.Dw=e,this.Fw=0,this.Vw=null,this.Uw=!1,this.Nw=!1,this.$w=new Xs.SignalDispatcher,this.Hw=new Xs.SignalDispatcher,this.qw=new Xs.SimpleEventDispatcher,this.zw=[{event:ur.FirstQuartile,quartile:1},{event:ur.SecondQuartile,quartile:2},{event:ur.ThirdQuartile,quartile:3},{event:ur.FourthQuartile,quartile:4}],this.Gw=null,this.Ww=()=>{this.Jw(),this.$w.dispatch(),this.Qw(),this.Xw=(new Date).getTime()},t||this.disable()}start(){this.Nw=!0,null===this.Vw&&this.Yw()}stop(){this.Nw=!1,null!==this.Vw&&(this.Jw(),this.Kw())}reset(t){t&&(this.timerDuration=t),this.Fw=0,this.Uw=!1,this.Gw=null,(null!==this.Vw||this.Nw)&&(this.Kw(),this.Yw())}get timeElapsed(){return this.Fw}get timeRemaining(){return this.timerDuration-this.Fw}disable(){this.Uw=!0,this.Kw()}get onTimeUpdate(){return this.$w.asEvent()}get onTimeElapsed(){return this.Hw.asEvent()}get onQuartile(){return this.qw.asEvent()}Jw(){this.Fw+=(new Date).getTime()-this.Xw}Yw(){this.Uw||(this.Qw(),this.Xw=(new Date).getTime(),this.Vw=setInterval(this.Ww,this.Bw))}Kw(){clearInterval(this.Vw),this.Vw=null}Zw(){this.disable(),this.Hw.dispatch(),this.tx(this.Fw,this.timerDuration,this.Dw),this.Fw=0}Qw(){this.Fw/Zt.f>=this.timerDuration/Zt.f&&this.Zw()}tx(t,i,e){const s=Object(Xt.e)(t/Zt.f,e);this.ex(s,i)}ex(t,i){const e=Math.floor(Object(Xt.d)(0,i,0,4,t));this.Gw<=e&&(this.zw.forEach(({event:t,quartile:i})=>{i===e&&this.qw.dispatch(t)}),this.Gw++)}}const gr={[ur.FirstQuartile]:Et.b.AdVideoFirstQuartile,[ur.SecondQuartile]:Et.b.AdVideoMidpoint,[ur.ThirdQuartile]:Et.b.AdVideoThirdQuartile,[ur.FourthQuartile]:Et.b.AdVideoComplete};class yr extends xn{constructor(t){super(t),this.settings=t,this.adMediaType="displayHtml",this.adSourceType=h.ProtoAdsourceTypeEnum.Unknown,this.sx="html",this.Bw=500,this.Dw=1,this.qg=[];const i=this.settings.adManagerLineItem.protoLineItem.overlayTime*Zt.f;this.nx=new mr(i,this.Bw,this.Dw),this.qg.push(this.nx.onTimeUpdate.subscribe(()=>{this.tg({type:Et.b.AdRemainingTimeChange})}),this.nx.onTimeElapsed.subscribe(()=>{this.stopAd("htmlTimerElapsed")}),this.nx.onQuartile.subscribe(t=>{this.tg({type:gr[t],payload:{}})}))}get adVideoUrl(){return this.sx}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.overlayTime}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),this.Ll=t,this.Rl=i,this.tg({type:Et.b.AdLoaded,payload:{}})}catch(t){this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.nx.start(),this.hx=new br(this.settings.mime,this.settings.html,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.globalDomUtilsService),this.qg.push(this.hx.onDisplayAd.subscribe(()=>{this.tg({type:Et.b.AdStarted}),this.tg({type:Et.b.AdVideoStart}),this.tg({type:Et.b.AdImpression,payload:{}})}),this.hx.onError.subscribe(t=>{this.tg({type:Et.b.AdError,payload:{errorMessage:t}}),this.nx.stop()})),this.hx.initializeAd(this.zm,{width:this.Ll,height:this.Rl})}catch(t){this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){try{super.stopAd(t),this.nx.stop(),this.tg({type:Et.b.AdStopped})}catch(t){this.kg("HtmlBidAdaptor","stopAd",t)}}skipAd(){try{super.skipAd(),this.tg({type:Et.b.AdSkipped})}catch(t){this.kg("HtmlBidAdaptor","skipAd",t)}}pauseAd(){try{this.nx.stop(),this.tg({type:Et.b.AdPaused})}catch(t){this.kg("HtmlBidAdaptor","pauseAd",t)}}resumeAd(){try{this.nx.start(),this.tg({type:Et.b.AdPlaying})}catch(t){this.kg("HtmlBidAdaptor","resumeAd",t)}}collapseAd(){}expandAd(){}getAdDuration(){return this.nx.timerDuration/Zt.f}getAdRemainingTime(){return this.nx.timeRemaining/Zt.f}getAdVolume(){return 0}setAdVolume(t){}resizeAd(t,i,e){this.Ll=t,this.Rl=i}wl(){var t;try{super.wl(),this.nx.stop(),this.qg.forEach(t=>t()),null===(t=this.hx)||void 0===t||t.destroy()}catch(t){this.kg("HtmlBidAdaptor","_destroy",t)}}}class wr{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){if(this.metrics.fetchStart=(new Date).getTime(),!this.ax(this.settings.mime))return Promise.reject(hn.HTMLUnknownMimeType);const t=new yr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,html:this.settings.html,mime:this.settings.mime,minDimensions:this.settings.dimensions,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,externalCreativeId:this.settings.creativeId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(t)}ax(t){return Object.keys(un.b).some(i=>un.b[i]===t)}}const xr="cnxRtbTest";class kr{constructor(t,i,e,s,n,r,h){this.ox=t,this.ux=i,this.Lb=e,this.lx=s,this.px=n,this.vx=r,this.bx=h,this.mx=0,this.gx=new Map}request(t){const{width:i,height:e}=t.callingState.adContainerState.get(h.ProtoAdType.Video),s=this.yx(i,e),r=this.wx(t);return!s||Object.keys(r.lineItems).length<=0?Promise.resolve({bids:[],noBids:[]}):this.xx(r).then(i=>this.kx(i,t)).catch(t=>(Object(n.a)({message:"RtbCallAggregator",exception:t.message,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),{bids:[],noBids:[]}))}destroy(){}kx(t,i){const e={bids:[],noBids:[]};return t.lineItemResponses.forEach(s=>{const n=fr(i.lineItemRequestDataList,s.id);Object(v.d)(s.cachedFloorPrice)&&this.gx.set(s.id,s.cachedFloorPrice),s.bids.forEach(s=>{const r=this.Sx(s,n,t,i.callingState);r&&e.bids.push(r)}),s.noBids.forEach(i=>{e.noBids.push(this.Ox(i,n,t))})}),e}Ox(t,i,e){return{lineItem:i,requestMetadata:new cr({requestedFloorPrice:t.requestedFloorPrice,requestedFloorPriceIndex:t.floorPriceFactorIndex,rtbRequestNumber:this.mx,syncedUser:t.syncedUser,partnerCustomHeaders:t.partnerCustomHeaders,partnerReason:t.partnerReason,requestTrackingHandledByServer:!0}),reason:t.connatixReason}}Sx(t,i,e,s){const n=this._x(t,i),r=new cr({requestedFloorPrice:t.requestedFloorPrice,requestedFloorPriceIndex:t.floorPriceFactorIndex,syncedUser:t.syncedUser,rtbRequestNumber:this.mx,encryptedPrice:t.encryptedPrice,dspId:t.dspId,rtbAdomain:t.adomain,rtbSeatId:t.seatId,rtbCampainId:t.campaignId,cnxBidId:t.cnxBidId,requestTrackingHandledByServer:!0});switch(i.protoLineItem.adType){case h.ProtoAdType.Video:return new sr({id:Object(Yt.d)(Es.c),adManagerLineItem:i,replaceTrackingMacros:!0,trackersInformation:n,xml:t.vastTag,requestMetadata:r,callingState:s,adMacroReplacer:this.lx,adContainer:this.px.get(i.protoLineItem.adType),globalDomUtilsService:this.Lb.services.GlobalDomUtilsService,obfuscatedPrice:t.gtkpbp,adEnforcer:this.bx,creativeId:t.creativeId,successRate:t.successRate,os:this.Lb.config.os.os});case h.ProtoAdType.Overlay:return new wr({id:Object(Yt.d)(Es.c),adManagerLineItem:i,dimensions:{width:t.width,height:t.height},html:t.vastTag,mime:t.mime,replaceTrackingMacros:!0,requestMetadata:r,trackersInformation:n,callingState:s,adContainer:this.px.get(i.protoLineItem.adType),globalDomUtilsService:this.Lb.services.GlobalDomUtilsService,obfuscatedPrice:t.gtkpbp,adEnforcer:this.bx,creativeId:t.creativeId,successRate:t.successRate,os:this.Lb.config.os.os})}}_x(t,i){const e=new en;sn(i.protoLineItem.trackers,e);const s=[...t.billingNoticeUrlList,t.adQualityCheckUrl].filter(t=>Object(v.h)(t)).map(t=>nn(t));return e.adImpression.push(...s),Object(v.h)(t.winNoticeUrl)&&e.adWin.push(nn(t.winNoticeUrl)),e}jx(t,i){if(t.protoLineItem.adType===h.ProtoAdType.Overlay){const e=i.adContainerState.get(h.ProtoAdType.Video),s=i.adContainerState.get(t.protoLineItem.adType);if(e.height!==s.height||e.width!==s.width)return{width:s.width,height:s.height}}return null}Ax(t,i){const e={};return t.filter(t=>this.vx.shouldRequestLineItem(t.adManagerLineItem.protoLineItem.advertiserLineItemId)).forEach(t=>{var s,n;const r=t.adManagerLineItem,h=this.jx(r,i),a=this.gx.get(r.protoLineItem.advertiserLineItemId);e[r.protoLineItem.advertiserLineItemId]={availableRequests:t.maxAvailableRequests,gdprConsent:this.Lb.services.UserManagerService.isConsent(r.protoLineItem.vendorId),cachedFloorPrice:a||void 0,ignoredFloorPriceFactorIndexes:pr(r),publisherLineItemId:r.protoLineItem.publisherLineItemId,slotHeight:null===(s=h)||void 0===s?void 0:s.height,slotWidth:null===(n=h)||void 0===n?void 0:n.width}}),e}wx(t){const{width:i,height:e,viewability:s}=t.callingState.adContainerState.get(h.ProtoAdType.Video);return{metadata:this.Lb.services.TrackingService.getMetadataModel(),gdprCompliant:this.Lb.services.UserManagerService.isGDPR(),gdprConsentData:this.Lb.services.UserManagerService.getConsentPayload(),soundOn:t.callingState.sound,videoHeight:e,videoWidth:i,testMode:"true"===Object(dr.b)(xr,this.Lb.config.pageUrl),explorationMode:this.Lb.config.explorationMode,viewability:s,outstream:this.ox,domainURL:this.Lb.config.domainURL,isClickToPlay:t.callingState.clickToPlay,appVersion:this.Lb.config.appVersion,deviceID:this.Lb.services.UserManagerService.getDeviceId(),isCcpaBlockingUserInfo:!this.Lb.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.Lb.services.UserManagerService.getUsPrivacyString(),adSkippability:this.ux.adSkippability,skipAdAfter:this.ux.skipAdAfter,gdprConsentMode:this.Lb.services.UserManagerService.gdprConsentMode,customMacros:this.Lb.services.MacrosService.getExtraMacros(),maxAdDuration:t.maxAdDuration,lineItems:this.Ax(t.lineItemRequestDataList,t.callingState)}}xx(t){return this.mx++,rr.a.sendProtoRequest({endpoint:ni.a.endPoints.api.rtb,ProtoRequest:h.ProtoRtbRequest,ProtoResponse:h.ProtoRtbResponse,requestData:t,queryParams:{[lr.b]:oe.a.version},logError:!1})}yx(t,i){return 0!==t&&0!==i||(Object(n.a)({message:"AdManager_BidderCaller_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.a.isPlayerDestroyed()}`,throttle:5,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}}var Sr=e(24),Or=e(38);const _r=[Or.a.P1,Or.a.P2,Or.a.P4,Or.a.P7,Or.a.P8];class jr{constructor(t){this.Ra=t}Ix(t,i){let e=[];switch(i){case Sr.a.CmpApi:e=Fs;break;case Sr.a.TcfApi:e=Vs}return Object(l.g)(t,e)}Cx(t){const i=this.Ra.getGdprConsentApiType();if(this.Ix(t,i))return!0;const e=Ds[t]||"";return this.Ra.isConsent(e,_r)}Tx(t){return!!Object(l.g)(t,Us)||!!this.Ra.isSellUserAllowed()}isBidderCallable(t){return this.Ra.isGDPR()?this.Cx(t):!this.Ra.isCcpaApplicable()||this.Tx(t)}}const Ar=(t,i,e)=>{const s=(()=>({usePrebidCache:!0,cache:{url:Ns},userSync:{iframeEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"}}},ix:{timeout:900}}))();return e&&(s.schain=(t=>({validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:t.businessDomain,hp:1,sid:t.supplyChainId?t.supplyChainId:null}]}}))(e)),(t||i)&&(s.consentManagement=((t,i)=>t?{gdpr:{cmpApi:"iab",timeout:2e3,defaultGdprScope:!0,allowAuctionWithoutConsent:!1,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0}]}}:i?{usp:{cmpApi:"iab",timeout:2e3}}:{})(t,i)),s},Ir=[...qs],Cr=[zs.VAST_2_WRAPPER,zs.VAST_2,zs.VAST_3,zs.VAST_3_WRAPPER],Tr=[Ws.VPAID_1,Ws.VPAID_2],Pr=(t,i,e,s,n)=>{const r={code:Object(Yt.d)(),mediaTypes:{video:{playerSize:[Math.floor(t),Math.floor(i)],context:e?"outstream":"instream",mimes:Ir,protocols:Cr,linearity:Gs,api:Tr,frameworks:[Ws.VPAID_1,Ws.VPAID_2],maxduration:s,minDuration:0}},bids:[]};return Object(v.e)(n)&&(r.floors=(t=>({currency:"USD",schema:{fields:["mediaType"]},values:{video:t}}))(n)),r},Mr={[Rs.Telaria]:(t,i)=>{const e=Object.assign({},t);return t.srcPageUrl||(e.srcPageUrl=i.pageUrl),e},[Rs.OneVideo]:(t,i)=>{Object(v.h)(t.pubId)||Object(n.a)({message:"AdManager_HeaderBidder_OneVideo_pubId_missing",level:h.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1});const e=Object.assign(Object.assign({},t),{pubId:t.pubId,video:{playerWidth:Math.floor(i.playerWidth),playerHeight:Math.floor(i.playerHeight),mimes:Ir,protocols:Cr,api:Tr},site:{page:i.pageUrl}}),s=i.floorPrice;return Object(v.e)(s)&&(e.bidfloor=s),e},[Rs.IndexExchange]:(t,i)=>{const e=t.siteId;if(!Object(v.h)(e))return void Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IX_adapter_missing_siteId",callStack:i.lineItemId});const s=Object.keys(zs).map(t=>zs[t]),r={siteId:e,size:[Math.floor(i.playerWidth),Math.floor(i.playerHeight)],video:{mimes:qs,minduration:0,maxduration:i.maxDuration,protocols:s}};Object(v.d)(t.minduration)&&(r.video.minduration=t.minduration),Object(v.d)(t.maxduration)&&t.maxduration<=i.maxDuration&&(r.video.maxduration=t.maxduration),Object(v.h)(t.id)&&(r.id=t.id);const a=i.floorPrice;return Object(v.e)(a)&&(r.bidFloor=a,r.bidFloorCur="USD"),r},[Rs.Rubicon]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(v.e)(s)&&(e.floor=s),e},[Rs.RhythmOne]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(v.e)(s)&&(e.floor=s),e},[Rs.Pubmatic]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(v.e)(s)&&(e.kadfloor=String(s)),e},[Rs.SpotX]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(v.e)(s)&&(e.price_floor=s),e},[Rs.MediaNet]:(t,i)=>{const e=Object.assign({},t);Object(v.h)(e.cid)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_MediaNet_adapter_missing_cid",callStack:i.lineItemId}),Object(v.h)(e.crid)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_MediaNet_adapter_missing_crid",callStack:i.lineItemId});const s=i.floorPrice;return Object(v.e)(s)&&(e.bidFloor=s),e.video={api:Object.keys(Ws).map(t=>Ws[t]),mimes:Object.keys(qs).map(t=>qs[t]),protocols:Object.keys(zs).map(t=>zs[t]),maxDuration:i.maxDuration,w:i.playerWidth,h:i.playerHeight},e},[Rs.Adman]:(t,i)=>{const e=Object.assign({},t);return Object(v.h)(e.placementId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Adman_adapter_missing_placementId",callStack:i.lineItemId}),e},[Rs.IronSource]:(t,i)=>{const e=Object.assign({},t);Object(v.h)(e.isOrg)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IronSource_adapter_missing_isOrg_string",callStack:i.lineItemId});const{floorPrice:s}=i;return Object(v.e)(s)&&(e.floorPrice=s),e},[Rs.Undertone]:(t,i)=>{const e=Object.assign({},t);return Object(v.h)(e.placementId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Undertone_adapter_missing_placementId",callStack:i.lineItemId}),Object(v.d)(e.publisherId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Undertone_adapter_missing_publisherId",callStack:i.lineItemId}),e},[Rs.SynacorMedia]:(t,i)=>{const e=Object.assign({},t);Object(v.h)(e.seatId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SynacorMedia_adapter_missing_seatId",callStack:i.lineItemId}),Object(v.h)(e.tagId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SynacorMedia_adapter_missing_tagId",callStack:i.lineItemId});const s=i.floorPrice;return Object(v.e)(s)&&(e.bidfloor=s),e.video={api:Object.keys(Ws).map(t=>Ws[t]),mimes:Object.keys(qs).map(t=>qs[t]),protocols:Object.keys(zs).map(t=>zs[t]),maxduration:i.maxDuration},e}},Er=(t,i)=>{try{const e=JSON.parse(t);return e.length>1&&Object(n.a)({message:"AdManager_AdSourceWrappe_multiple_bidders",level:h.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:1,sendMaxLog:!1}),e[0].bidder}catch(e){Object(n.a)({message:"AdManager_AdSourceWrapper_cannot_get_bidder",level:h.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:2,sendMaxLog:!1})}};class Lr{constructor(t,i,e,s,n){this.Px=t,this.He=i,this.ox=e,this.Mx=s,this.Ex=n}requestHeaderBidder(t,i,e){return new Promise((s,n)=>{this.Lx().then(()=>{const n=t.map(t=>this.Rx(t,i,e).then(t=>t));Promise.all(n).then(t=>{s(t)})}).catch(t=>{n(h.ConnatixNoBidReasonEnum.NoBid)})})}Rx(t,i,e){return new Promise(s=>{let n=[];const r=t.lineItem.floorPrices;if(Object(l.h)(r)){n=this.Bx(r,t.ignoredFloorPriceIndexes,t.availableRequests).map(s=>this.Dx(t.lineItem,s.floorPrice,s.floorPriceIndex,i,e,r,t.maxAdDuration))}else if(!Object(l.h)(t.ignoredFloorPriceIndexes)&&t.availableRequests>0){const s=0,h=this.Dx(t.lineItem,t.lineItem.floorPrice,s,i,e,r,t.maxAdDuration);n.push(h)}Promise.all(n).then(i=>{const e=[],n=[],r=t.lineItem.advertiserLineItemId;i.forEach(t=>{t.reason?n.push(t):e.push(t)}),s({bids:e,noBids:n,lineItemId:r})})})}Dx(t,i,e,s,n,r,h){return new Promise(a=>{this.Fx(t,i,e,s,n,r,h).then(t=>{a(t)}).catch(t=>{a(t)})})}Lx(){return new Promise((t,i)=>{window.pbjs?(this.Vx=window.pbjs,t()):Object(E.x)({src:Hs},window.document.head,window,()=>{this.Vx=window.pbjs,this.Ux(),t()},()=>{i(h.ConnatixNoBidReasonEnum.NoBid)},!0,"AdManager_HeaderBidder_unable_to_insert_prebidJs_script")})}Ux(){const t=Ar(this.Mx,this.Ex,this.Px);window.pbjs.setConfig(t)}Fx(t,i,e,s,r,a,o){return new Promise((c,u)=>{const l=Pr(s,r,this.ox,o,i);try{const s=t.headerBidderBids;l.bids=JSON.parse(s)}catch(t){return Object(n.a)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.WARNING}),void u({reason:h.ConnatixNoBidReasonEnum.NoBid,floorPrice:i,floorPriceIndex:e})}l.bids.forEach(e=>this.Nx(e,s,r,i,t.advertiserLineItemId,o)),this.Vx.que.push(()=>{this.Vx.addAdUnits(l);const s={timeout:t.headerBidderTimeout,adUnits:[l],bidsBackHandler:()=>{try{let s;if(!(s=this.Vx.getHighestCpmBids(l.code)[0]))return void u({reason:h.ConnatixNoBidReasonEnum.CsEmptyResponse,floorPrice:i,floorPriceIndex:e});if(!this.$x(s))return Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(s)}),void u({reason:h.ConnatixNoBidReasonEnum.CsInvalidResponse,floorPrice:i,floorPriceIndex:e});const r=this.Hx(s),o=s.cpm||s.adResponse.ad.cpm,{advertiserLineItemId:d}=t,f={adTag:r,lineItemId:d,floorPrice:i,floorPriceIndex:e,cpm:o};Object(v.e)(i)&&o<i&&Object(n.a)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:5,exception:`floorPrices_${a}_index_${e}_cpm_${o}_li_${t.advertiserLineItemId}`,callStack:Er(t.headerBidderBids,t.advertiserLineItemId)}),c(f)}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_Prebidjs_error",exception:t.message,callStack:t.stack}),u({reason:h.ConnatixNoBidReasonEnum.NoBid,floorPrice:i,floorPriceIndex:e})}}};this.Vx.requestBids(s)})})}Nx(t,i,e,s,n,r){const h=Mr[t.bidder];h&&(t.params=h(t.params,{playerWidth:i,playerHeight:e,maxDuration:r,pageUrl:this.He,floorPrice:s,lineItemId:n}))}$x(t){return t.adserverTargeting&&Object(v.h)(t.adserverTargeting.hb_cache_id)}Hx(t){return`${Ns}?uuid=${t.adserverTargeting.hb_cache_id}`}Bx(t,i,e){const s=[];let n=0;for(let r=0;r<t.length;r++)-1===i.indexOf(r)&&n<e&&(s.push({floorPrice:t[r],floorPriceIndex:r}),n++);return s}}class Rr{constructor(t,i,e,s,n,r){this.ox=t,this.Px=i,this.Lb=e,this.lx=s,this.px=n,this.bx=r,this.qx=new Map,this.zx=new Lr(this.Px,this.Lb.config.pageUrl,this.ox,this.Lb.services.UserManagerService.isGDPR(),this.Lb.services.UserManagerService.isCcpaApplicable()),this.Gx=new jr(this.Lb.services.UserManagerService)}request(t){const{width:i,height:e}=t.callingState.adContainerState.get(h.ProtoAdType.Video),s=this.yx(i,e),n=this.Wx(t.lineItemRequestDataList);return Object(l.h)(n)&&s?(t.lineItemRequestDataList=n,this.Jx(t).then(i=>Promise.resolve(this.Qx(i,t))).catch(()=>Promise.resolve({bids:[],noBids:[]}))):Promise.resolve({bids:[],noBids:[]})}destroy(){}Qx(t,i){const e={bids:[],noBids:[]};return t.forEach(t=>{const s=fr(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach(t=>{const n=new en,r=new cr({requestedFloorPrice:t.floorPrice,requestedFloorPriceIndex:t.floorPriceIndex,prebidJsBidderName:this.Xx(s)});sn(s.protoLineItem.trackers,n),e.bids.push(new or({id:Object(Yt.d)(Es.c),adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:r,trackersInformation:n,url:t.adTag,callingState:i.callingState,adMacroReplacer:this.lx,adContainer:this.px.get(s.protoLineItem.adType),globalDomUtilsService:this.Lb.services.GlobalDomUtilsService,cpm:t.cpm,adEnforcer:this.bx,os:this.Lb.config.os.os}))}),t.noBids.forEach(t=>{const i=new cr({requestedFloorPrice:t.floorPrice,requestedFloorPriceIndex:t.floorPriceIndex});e.noBids.push({lineItem:s,requestMetadata:i,reason:t.reason})})}),e}Jx(t){const{width:i,height:e}=t.callingState.adContainerState.get(h.ProtoAdType.Video),s=t.lineItemRequestDataList.map(i=>this.Yx(i,t.maxAdDuration));return this.zx.requestHeaderBidder(s,i,e)}Yx(t,i){const e=t.adManagerLineItem;return{availableRequests:t.maxAvailableRequests,lineItem:e.protoLineItem,ignoredFloorPriceIndexes:pr(e),maxAdDuration:i}}Wx(t){return t.filter(t=>{const i=this.Xx(t.adManagerLineItem);return this.Kx(i)})}yx(t,i){return 0!==t&&0!==i||(Object(n.a)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.a.isPlayerDestroyed()}`,throttle:5,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}Kx(t){return this.Gx.isBidderCallable(t)}Xx(t){const i=this.qx.get(t);return Object(v.h)(i)?i:Er(t.protoLineItem.headerBidderBids,t.protoLineItem.advertiserLineItemId)||""}}const Br={libPropertyName:"apstag",mediaType:"video"},Dr="load";class Fr{constructor(t,i){this.Lb=t,this.Zx=i,this.tk=()=>{this.ik||this.ek(),this.sk&&clearInterval(this.sk),this.ik||Object(n.a)({message:"TamRequester_TAM_lib_not_found_on_page_loaded",level:h.ProtoLoggingLevelEnum.WARNING})};const e=this.Lb.config.topWindow;this.nk=Object(Yt.f)(e).topFrame,this.ek()}requestBids(t){const i=t.map(t=>this.rk(t));return Promise.all(i)}destroy(){this.sk&&clearInterval(this.sk),this.nk.removeEventListener(Dr,this.tk)}rk(t){return this.hk(this.Zx,Br.mediaType).then(i=>this.ak(t,i)).then(i=>({bids:[i],lineItemId:t.advertiserLineItemId,noBids:[]})).catch(i=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:i}]}))}hk(t,i){return new Promise((e,s)=>{this.ik||s(h.ConnatixNoBidReasonEnum.NoLibInPage),this.ik.fetchBids({slots:[{slotID:t,mediaType:i}]},t=>{Object(l.h)(t)?e(t[0]):s(h.ConnatixNoBidReasonEnum.EmptyResponse)})})}ak(t,i){const e={lineItemId:t.advertiserLineItemId,code:i.amznbid,metadata:this.Lb.services.TrackingService.getMetadataModel(),exploration:this.Lb.config.explorationMode};return new Promise((t,s)=>{rr.a.sendProtoRequest({endpoint:ni.a.endPoints.api.tam,ProtoRequest:h.ProtoCoreTamBidRequest,ProtoResponse:h.ProtoCoreTamBidResponse,requestData:e,queryParams:{[lr.b]:oe.a.version},logError:!0}).then(e=>{Object(v.h)(e.errorMessage)?s(h.ConnatixNoBidReasonEnum.RequestException):e.encryptedBidPrice?t({encryptedPrice:e.encryptedBidPrice,vastTag:`https://aax.amazon-adsystem.com/e/dtb/vast?b=${i.amzniid}&rnd=${Object(Yt.d)()}&pp=${i.amznbid}`,ofskp:e.ofskp,successRate:e.successRate}):s(h.ConnatixNoBidReasonEnum.InvalidResponse)}).catch(()=>{s(h.ConnatixNoBidReasonEnum.RequestException)})})}ek(){this.nk[Br.libPropertyName]?this.ik=this.nk[Br.libPropertyName]:this.sk||"complete"!==this.nk.document.readyState&&(this.nk.addEventListener(Dr,this.tk),this.sk=setInterval(()=>{this.ek()},Zt.f)),this.ik&&clearInterval(this.sk)}}class Vr{constructor(t,i,e,s,n){this.Lb=t,this.ck=i,this.lx=e,this.px=s,this.bx=n,this.uk=new Fr(this.Lb,this.ck)}request(t){const{width:i,height:e}=t.callingState.adContainerState.get(h.ProtoAdType.Video);return this.yx(i,e)?this.lk(t).then(i=>Promise.resolve(this.dk(i,t))).catch(()=>Promise.resolve({bids:[],noBids:[]})):Promise.resolve({bids:[],noBids:[]})}destroy(){this.uk.destroy()}lk(t){const i=t.lineItemRequestDataList.map(t=>t.adManagerLineItem.protoLineItem);return this.uk.requestBids(i)}dk(t,i){const e={bids:[],noBids:[]};return t.forEach(t=>{const s=fr(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach(t=>{const n=new en,r=new cr({encryptedPrice:t.encryptedPrice});sn(s.protoLineItem.trackers,n),e.bids.push(new or({id:Object(Yt.d)(Es.c),adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:r,trackersInformation:n,url:t.vastTag,callingState:i.callingState,adMacroReplacer:this.lx,adContainer:this.px.get(s.protoLineItem.adType),globalDomUtilsService:this.Lb.services.GlobalDomUtilsService,adEnforcer:this.bx,requestWithCredentials:!1,successRate:t.successRate,obfuscatedPrice:t.ofskp,os:this.Lb.config.os.os}))}),t.noBids.forEach(t=>{e.noBids.push({lineItem:s,requestMetadata:new cr,reason:t.reason})})}),e}yx(t,i){return 0!==t&&0!==i||(Object(n.a)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.a.isPlayerDestroyed()}`,throttle:5,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}}const Ur=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]],Nr="domains";class $r{constructor(t,i,e){this.fk=t,this.pk=i,this.vk=e,this.Tw=`div-gpt-ad-1589549806211-${Object(Yt.d)()}`,this.Pw=new Xs.SignalDispatcher,this.Mw=new Xs.SimpleEventDispatcher,this.Ig=new Xs.SimpleEventDispatcher}get onCreativeReceived(){return this.Ig.asEvent()}get onDisplayAd(){return this.Pw.asEvent()}get onError(){return this.Mw.asEvent()}initializeAd(t,i){try{this.bk=t,this.mk(t);const e=this.gk(i.width,i.height);this.fk.cmd.push(()=>{this.yk=this.fk.defineSlot(this.vk,e,this.Tw).addService(this.fk.pubads()).setTargeting(Nr,this.pk),this.fk.enableServices(),this.wk(this.yk),this.fk.pubads().isInitialLoadDisabled()&&this.fk.pubads().refresh([this.yk]),this.fk.display(this.Tw)})}catch(t){this.Mw.dispatch(un.c.WrapperInitAdError)}}destroy(){this.fk.cmd.push(()=>{this.fk.destroySlots&&this.yk&&this.fk.destroySlots([this.yk])})}wk(t){this.fk.pubads().addEventListener("slotOnload",i=>{var e,s,r;if(i.slot===t){try{const t=null===(r=null===(s=null===(e=i)||void 0===e?void 0:e.slot)||void 0===s?void 0:s.getResponseInformation())||void 0===r?void 0:r.creativeId;t&&this.Ig.dispatch(t.toString())}catch(t){Object(n.a)({message:"AdManager_GptWrapper_creativeId",level:h.ProtoLoggingLevelEnum.WARNING,exception:t.message,callStack:t.stack})}this.Pw.dispatch()}}),this.fk.pubads().addEventListener("slotRenderEnded",t=>{var i;if(t.slot!==this.yk)return;const e=null===(i=this.bk)||void 0===i?void 0:i.getElementsByTagName("iframe")[0];Object(v.a)(e)&&Object(E.F)(e.contentWindow,"GPTWrapper"),t.isEmpty&&this.Mw.dispatch(un.c.AdxOverlayNoFill)})}mk(t){t.id=this.Tw}gk(t,i){return Ur.filter(e=>!Array.isArray(e)||!Object(l.i)(e)||Object(l.h)(e)&&e[0]<=t&&e[1]<=i)}}var Hr=e(50);const qr=500;class zr extends xn{constructor(t){super(t),this.settings=t,this.adMediaType="displayAdx",this.adSourceType=h.ProtoAdsourceTypeEnum.Unknown,this.sx="adx",this.xk={[ur.FirstQuartile]:Et.b.AdVideoFirstQuartile,[ur.SecondQuartile]:Et.b.AdVideoMidpoint,[ur.ThirdQuartile]:Et.b.AdVideoThirdQuartile,[ur.FourthQuartile]:Et.b.AdVideoComplete},this.qg=[];const i=this.settings.adManagerLineItem.protoLineItem.overlayTime*Zt.f;this.nx=new mr(i,qr),this.qg.push(this.nx.onTimeUpdate.subscribe(()=>{this.tg({type:Et.b.AdRemainingTimeChange})}),this.nx.onTimeElapsed.subscribe(()=>{this.stopAd("adxTimerElapsed")}),this.nx.onQuartile.subscribe(t=>{this.tg({type:this.xk[t],payload:{}})}))}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),this.kk={width:t,height:i},this.Sk().then(t=>{this.Ok=new $r(t,this.settings.domain,this.settings.adxAdUnitPath),this.qg.push(this.Ok.onCreativeReceived.subscribe(t=>{this.creativeId=t})),this.tg({type:Et.b.AdLoaded,payload:{skipOffset:0}})}).catch(t=>{this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.AdxOverlayGptScriptLoad+`_${t.message}`}})})}catch(t){this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.qg.push(this.Ok.onDisplayAd.subscribe(()=>{this.tg({type:Et.b.AdStarted}),this.tg({type:Et.b.AdVideoStart}),this.tg({type:Et.b.AdImpression,payload:{}}),this.nx.start()}),this.Ok.onError.subscribe(t=>{this.tg({type:Et.b.AdError,payload:{errorMessage:t}}),this.nx.stop()})),this.Ok.initializeAd(this.zm,this.kk)}catch(t){this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.AdaptorStartAdError+`_${t.exception}`}})}}stopAd(t){try{super.stopAd(t),this.nx.stop(),this.tg({type:Et.b.AdStopped})}catch(t){this.kg("AdxBidAdaptor","stopAd",t)}}resizeAd(t,i,e){this.kk&&(this.kk.width=t,this.kk.height=i)}pauseAd(){try{this.nx.stop(),this.tg({type:Et.b.AdPaused})}catch(t){this.kg("AdxBidAdaptor","pauseAd",t)}}resumeAd(){try{this.nx.start(),this.tg({type:Et.b.AdPlaying})}catch(t){this.kg("AdxBidAdaptor","resumeAd",t)}}expandAd(){}collapseAd(){}skipAd(){try{super.skipAd(),this.tg({type:Et.b.AdSkipped})}catch(t){this.kg("AdxBidAdaptor","skipAd",t)}}getAdRemainingTime(){return this.nx.timeRemaining/Zt.f}getAdDuration(){return this.nx.timerDuration/Zt.f}getAdVolume(){return 0}setAdVolume(t){}get adVideoUrl(){return this.sx}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}Sk(){const t=Object(Yt.f)(window).topFrame;if(t.googletag)return Promise.resolve(t.googletag);{const i={cmd:[]};return t.googletag=window.googletag||i,new Promise((i,e)=>{Object(E.x)({src:Hr.a},t.document.head,t,()=>{i(t.googletag)},()=>{e()})})}}wl(){var t;try{super.wl(),this.nx.stop(),this.qg.forEach(t=>t()),null===(t=this.Ok)||void 0===t||t.destroy()}catch(t){this.kg("AdxBidAdaptor","_destroy",t)}}}const Gr="https://adx.connatix.com";class Wr{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();const t=new zr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,adxAdUnitPath:this._k(this.settings.url),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,domain:this.settings.pageDomain,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,cpm:this.settings.cpm,successRate:this.settings.successRate,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,os:this.settings.os});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(t)}_k(t){return t.substr(Gr.length)}}class Jr extends xn{constructor(t){super(t),this.settings=t,this.adMediaType="cnxMedia",this.adSourceType=h.ProtoAdsourceTypeEnum.CnxMedia,this.Zy=()=>{}}initAd(t,i,e,s,n,r,h){try{let a;super.initAd(t,i,e,s,n,r,h);let o=!1;if(Object(v.h)(this.settings.externalMediaFile))a=this.settings.externalMediaFile;else if(Object(v.h)(this.settings.externalHlsFile))a=this.settings.externalHlsFile,o=!0;else{if(!Object(l.h)(this.settings.renditions))return void this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.CnxMediaNoRenditions}});a=this.jk(this.settings.renditions,i,this.settings.mediaId)}this.Ak=a,this.Ik=new Ln(this.settings.globalDomUtilsService,this.Ak,this.Gm,this.settings.os,this.settings.clickUrl,this.settings.pauseAdWhenFinished,o,this.settings.inApp),this.Zy=this.Ik.onVpaidEvent.subscribe(t=>{this.tg(t)}),this.Ik.initAd(t,i,e,s,n,{slot:this.zm,videoSlot:this.Gm})}catch(t){this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.Ik.startAd()}catch(t){this.tg({type:Et.b.AdError,payload:{errorMessage:un.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.Ik?this.Ik.stopAd(t):Object(n.a)({message:"stopAd",exception:t,level:h.ProtoLoggingLevelEnum.WARNING})}resizeAd(t,i,e){try{this.Ik.resizeAd(t,i,e)}catch(t){this.kg("CnxMediaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Ik.pauseAd()}catch(t){this.kg("CnxMediaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Ik.resumeAd()}catch(t){this.kg("CnxMediaBidAdaptor","resumeAd",t)}}expandAd(){try{this.Ik.expandAd()}catch(t){this.kg("CnxMediaBidAdaptor","expandAd",t)}}collapseAd(){try{this.Ik.collapseAd()}catch(t){this.kg("CnxMediaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Ik.skipAd()}catch(t){this.kg("CnxMediaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Ik.getAdRemainingTime()}catch(t){return this.kg("CnxMediaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Ik?this.Ik.getAdDuration():this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.kg("CnxMediaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Ik.getAdVolume()}catch(t){return this.kg("CnxMediaBidAdaptor","getAdVolume",t),0}}setAdVolume(t){try{super.setAdVolume(t),this.Ik.setAdVolume(t)}catch(t){this.kg("CnxMediaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.Ak}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}wl(){var t;if(!this.settings.pauseAdWhenFinished)try{super.wl(),this.Zy(),null===(t=this.Ik)||void 0===t||t.destroy()}catch(t){this.kg("CnxMediaBidAdaptor","_destroy",t)}}jk(t,i,e){let s,n;return n=t.filter(t=>t.codec===S.H264),s=Object(Xt.a)(i,n.map(t=>t.height)),(n=n.filter(t=>t.height===s)).length>0?`${ni.a.endPoints.base.video}${e}/${n[0].file}`:null}}class Qr{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();const t=new Jr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,mediaId:this.settings.mediaId,renditions:this.settings.renditions,clickUrl:this.settings.clickUrl,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,externalMediaFile:this.settings.adManagerLineItem.protoLineItem.externalMediaFile,externalHlsFile:this.settings.adManagerLineItem.protoLineItem.externalHlsFile,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,inApp:this.settings.inApp,os:this.settings.os});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(t)}}var Xr,Yr;!function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.STOPPING=2]="STOPPING"}(Xr||(Xr={}));class Kr{constructor(t){this.Ck=t,this.Ft=Xr.IDLE,this.Tk=Promise.resolve()}start(){this.Ft===Xr.IDLE?(this.Ft=Xr.RUNNING,this.Pk()):this.Ft===Xr.STOPPING&&(this.Ft=Xr.RUNNING)}stop(){this.Ft=Xr.STOPPING}setPromiseNotifier(t){return this.Mk=t,this}setIdleNotifier(t){return this.Ek=t,this}getState(){return this.Ft}Lk(){const t=this.Ck();void 0!==t?this.Tk=t.then(t=>{this.Mk&&this.Mk(t)}).then(()=>{this.Ft===Xr.STOPPING&&(this.Ft=Xr.IDLE)}):this.Ft=Xr.IDLE}Pk(){this.Ft===Xr.IDLE?this.Ek&&this.Ek():this.Ft===Xr.RUNNING&&(this.Lk(),this.Tk.then(()=>{this.Pk()}))}}class Zr{constructor(t,i=1){this.Ck=t,this.Rk=i,this.Bk=[],this.Dk(i)}start(){return this.Bk.forEach(t=>{t.start()}),this}stop(){return this.Bk.forEach(t=>{t.start()}),this}setPromiseNotifier(t){return this.Bk.forEach(i=>{i.setPromiseNotifier(t)}),this}setAllThreadsIdleNotifier(t){return this.Fk=t,this.Vk(),this}setNumberOfThreads(t){if(t<=0)return;this.Rk=t;const i=t-this.Rk;i>0?this.Dk(i):i<0&&this.Uk(i)}getState(){return this.Bk.reduce((t,i)=>(t[i.getState()]++,t),{[Xr.IDLE]:0,[Xr.RUNNING]:0,[Xr.STOPPING]:0})}Dk(t){for(let i=0;i<t;i++){const t=new Kr(this.Ck).setPromiseNotifier(this.Mk);this.Bk.push(t)}}Uk(t){t=Math.min(t,this.Bk.length);for(let i=0;i<t;i++)this.Bk.pop().stop()}Vk(){const t=()=>{this.getState()[Xr.IDLE]===this.Bk.length&&this.Fk()};this.Bk.forEach(i=>{i.setIdleNotifier(t)})}}class th{constructor(){this.Nk=[]}canCall(t){return this.Nk.every(i=>i.canCall(t))}registerRequestForLineItem(t){return this.Nk.forEach(i=>{i.registerRequestForLineItem(t)}),this}registerImpressionForLineItem(t){return this.Nk.forEach(i=>{i.registerImpressionForLineItem(t)}),this}registerCallingValidator(t){return this.Nk.push(t),this}registerCallingValidators(t){return t.forEach(t=>{this.registerCallingValidator(t)}),this}destroy(){this.Nk.forEach(t=>{t.destroy()})}}!function(t){t.prebid="prebid",t.bid="bid",t.win="win",t.impression="impression",t.postbid="postbid"}(Yr||(Yr={}));const ih=4;class eh{constructor(t){this.settings=t,this.$k=new Map,this.co=[],this.Hk=!1,this.qk=new Xs.SimpleEventDispatcher,this.zk=()=>{const t=this.Gk();if(t)return this.Wk(t.lineItemList),this.Jk(t.lineItemList,t.state).then(()=>{this.Qk(t.lineItemList),this.Xk()}).catch(()=>{this.Qk(t.lineItemList),this.Xk()})},this.Yk=(t,i)=>{return this.settings.adCallerYo.getWinningYoScore(i.settings.id)-this.settings.adCallerYo.getWinningYoScore(t.settings.id)},this.settings.lineItemList.forEach(t=>{vr(t.protoLineItem.creativeType)?t.protoLineItem.timeBetweenRequests=10:t.protoLineItem.timeBetweenRequests=6}),this.co.push(this.settings.lineItemServices.lineItemServicesTimer.onTimer().subscribe(()=>{this.Kk()}),this.settings.adBidPool.onBidConsumed.subscribe(()=>{this.Kk()}),this.settings.adBidPool.onBidLoadingConsumed.subscribe(()=>{this.Kk()}),this.settings.adBidPool.onBidReadyConsumed.subscribe(()=>{this.Kk()})),this.Zk=(new th).registerCallingValidators([this.settings.lineItemServices.requestCapsService,this.settings.lineItemServices.impressionCapsService,this.settings.lineItemServices.timeBetweenRequestsService]),this.tS=new Zr(this.zk,ih),this.settings.lineItemList.find(t=>t.protoLineItem.creativeType===h.ProtoCreativeTypeEnum.Rtb)&&this.$k.set(h.ProtoCreativeTypeEnum.Rtb,{auctionPending:!1,caller:new kr(this.settings.isOutstream,this.settings.skipAdSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adRequestGatekeeper,this.settings.adEnforcer)}),this.settings.lineItemList.find(t=>t.protoLineItem.creativeType===h.ProtoCreativeTypeEnum.HeaderBidder)&&this.$k.set(h.ProtoCreativeTypeEnum.HeaderBidder,{auctionPending:!1,caller:new Rr(this.settings.isOutstream,this.settings.schainSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer)}),this.settings.lineItemList.find(t=>t.protoLineItem.creativeType===h.ProtoCreativeTypeEnum.Tam)&&this.$k.set(h.ProtoCreativeTypeEnum.Tam,{auctionPending:!1,caller:new Vr(this.settings.app,this.settings.amazonSlotId,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer)}),this.tS.setAllThreadsIdleNotifier(()=>{this.settings.lineItemServices.lineItemServicesTimer.start()})}get onAuctionFinished(){return this.qk.asEvent()}call(t){this.tS.setNumberOfThreads(t.maxParallelCalls),this.iS=t,this.Hk=!0,this.Kk()}stop(){this.Hk=!1,this.tS.stop()}destroy(){this.stop(),this.Zk.destroy(),this.$k.forEach(t=>{t.caller.destroy()}),this.co.forEach(t=>{t()})}Xk(){let t=!0;this.$k.forEach(i=>{i.auctionPending&&(t=!1)}),t&&this.qk.dispatch(void 0)}eS(t){return t.filter(t=>!(t.aggregators.size>0)&&(!(!vr(t.protoLineItem.creativeType)&&(t.bids.size>0||t.callers.size>0))&&this.Zk.canCall(t))).filter(t=>!this.settings.platformCappedLineItemRepo.isLineItemPlatformCapped(t.protoLineItem.advertiserLineItemId))}Kk(){this.Hk&&this.tS.start()}Gk(){const t=this.eS(this.settings.lineItemList),i=this.settings.adCallerYo.getBestCallable(t,this.iS.stateSettings);if(i&&this.sS(i.lineItemList[0],i.state))return i}sS(t,i){if(vr(t.protoLineItem.creativeType))return!0;const e=this.settings.adBidPool.bids.filter(t=>this.settings.adCallerYo.isBidWinnable(t,i,this.settings.lineItemServices.impressionCapsService,this.settings.platformCappedLineItemRepo)),s=this.settings.adBidPool.callingLineItems,n=[...e.map(t=>this.settings.adCallerYo.getWinningYoScore(t.settings.id)),...s.map(t=>this.settings.adCallerYo.getCallingYoScore(t.protoLineItem.advertiserLineItemId))],r=this.settings.adCallerYo.getCallingYoScore(t.protoLineItem.advertiserLineItemId);for(let t=0;t<n.length;t++)if(r<n[t])return!1;return!0}Wk(t){this.settings.adBidPool.callingLineItems=[...this.settings.adBidPool.callingLineItems,...t]}Qk(t){this.settings.adBidPool.callingLineItems=this.settings.adBidPool.callingLineItems.filter(i=>!Object(l.g)(i,t))}Jk(t,i){return vr(t[0].protoLineItem.creativeType)?this.nS(t,i):this.rS(t[0],i)}rS(t,i){this.Zk.registerRequestForLineItem(t);const e=this.hS(t,i);return this.aS(e),this.oS(e)}nS(t,i){const e=this.$k.get(t[0].protoLineItem.creativeType);t.forEach(t=>t.aggregators.add(e.caller)),e.auctionPending=!0;const s={lineItemRequestDataList:t.map(t=>({adManagerLineItem:t,maxAvailableRequests:this.settings.lineItemServices.requestCapsService.getAvailableRequestsForLineItem(t)})),callingState:i,maxAdDuration:i.adBreakState.maxAdDuration};return e.caller.request(s).then(s=>{s.bids.length||s.noBids.length||t.forEach(t=>{this.Zk.registerRequestForLineItem(t)}),t.forEach(t=>t.aggregators.delete(e.caller)),s.noBids.forEach(t=>{this.Zk.registerRequestForLineItem(t.lineItem),this.cS(i,t.lineItem,t.reason,t.requestMetadata)}),s.bids.forEach(t=>this.aS(t)),s.bids.sort(this.Yk);const n=s.bids.map(t=>(this.Zk.registerRequestForLineItem(t.settings.adManagerLineItem),this.oS(t)));return Promise.all(n)}).catch().then(()=>{e.auctionPending=!1})}oS(t){return t.settings.adManagerLineItem.callers.add(t),t.fetchBid().catch(i=>{t.settings.adManagerLineItem.callers.delete(t),this.settings.adCallerYo.registerPreBid(t.settings.id);const e=an[i]?an[i]:h.ConnatixNoBidReasonEnum.RequestException;return this.cS(t.settings.callingState,t.settings.adManagerLineItem,e,t.settings.requestMetadata,t.settings.trackersInformation,Date.now()-t.metrics.fetchStart),Promise.reject()}).then(i=>{t.settings.adManagerLineItem.callers.delete(t),this.uS(i,Date.now()-t.metrics.fetchStart)}).catch(t=>{void 0!==t&&Object(n.a)({message:"AdManager_AdCallerController_handleCallAdaptorRequest",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL,throttle:5,sendMaxLog:!0})})}uS(t,i){const e=t.settings.adManagerLineItem,s=t.settings.requestMetadata;t.settings.requestMetadata.data.requestTrackingHandledByServer||this.settings.trackingService.addBid({advertiserLineItemId:e.protoLineItem.advertiserLineItemId,publisherLineItemId:e.protoLineItem.publisherLineItemId,requestedFloorPrice:s.data.requestedFloorPrice,rtbRequestNumber:s.data.rtbRequestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,customClientPrice:t.settings.cpm,timeSpent:i,dspId:s.data.dspId,encryptedPrice:s.data.encryptedPrice,rtbAdomain:s.data.rtbAdomain,creativeId:t.creativeId,rtbSeatId:s.data.rtbSeatId,cnxBidId:t.settings.requestMetadata.data.cnxBidId}),this.settings.adRequestGatekeeper.addBid(e.protoLineItem.advertiserLineItemId,s.data.requestedFloorPrice),this.settings.adCallerYo.isBidWinnableEverInSession(t,t.settings.callingState)?(t.settings.adManagerLineItem.bids.add(t),this.settings.adBidPool.addBid(t)):this.settings.adCallerYo.registerPreBid(t.settings.id)}cS(t,i,e,s,n,r){n&&en.track(n.adError,this.settings.adMacroReplacer,i.protoLineItem,t),s.data.requestTrackingHandledByServer||this.settings.trackingService.addPrebid({advertiserLineItemId:i.protoLineItem.advertiserLineItemId,publisherLineItemId:i.protoLineItem.publisherLineItemId,partnerCustomHeaders:s.data.partnerCustomHeaders,partnerReason:s.data.partnerReason,requestedFloorPrice:s.data.requestedFloorPrice,rtbRequestNumber:s.data.rtbRequestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,reason:e,timeSpent:r}),this.settings.adRequestGatekeeper.addPrebid(i.protoLineItem.advertiserLineItemId)}hS(t,i){const e=new en;sn(t.protoLineItem.trackers,e);const s={id:Object(Yt.d)(Es.c),adManagerLineItem:t,replaceTrackingMacros:!0,requestMetadata:new cr,trackersInformation:e,callingState:i,adContainer:this.settings.adContainerMap.get(t.protoLineItem.adType),globalDomUtilsService:this.settings.app.services.GlobalDomUtilsService,cpm:t.protoLineItem.floorPrice||t.protoLineItem.customCpm,adEnforcer:this.settings.adEnforcer,os:this.settings.os};switch(t.protoLineItem.creativeType){case h.ProtoCreativeTypeEnum.External:case h.ProtoCreativeTypeEnum.ThirdParty:return t.protoLineItem.adType===h.ProtoAdType.Overlay?new Wr(Object.assign(Object.assign({},s),{url:t.protoLineItem.adTag,pageDomain:this.settings.app.config.pageDomain})):new or(Object.assign(Object.assign({},s),{url:t.protoLineItem.adTag,adMacroReplacer:this.settings.adMacroReplacer}));case h.ProtoCreativeTypeEnum.MediaFile:return new Qr(Object.assign(Object.assign({},s),{clickUrl:t.protoLineItem.mediaCreativeClickUrl,mediaId:t.protoLineItem.mediaCreativeId,renditions:t.protoLineItem.renditions,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,inApp:this.settings.app.config.isInApp}))}}aS(t){const{creativeType:i,floorPrice:e,successRate:s,advertiserLineItemId:n,lineItemPriority:r}=t.settings.adManagerLineItem.protoLineItem;this.settings.adCallerYo.registerBiddingInformation({creativeType:i,floorPrice:e,lineItemId:n,priority:r,bidId:t.settings.id,cpm:t.settings.cpm,obfuscatedPrice:t.settings.obfuscatedPrice,successRate:t.settings.successRate||s})}}class sh{resetCapsBasedOnExternalEvent(t){const i=this.lS.keys();for(const e of i)this.dS(e,t)&&this.fS(e)}dS(t,i){return t.protoLineItem.resetCapType===i}pS(t){return this.dS(t,h.ProtoResetCapTypeEnum.TimeCapping)&&this.vS(t)>0}}class nh extends sh{constructor(t=Date.now()){super(),this.bS=t,this.lS=new Map}canCall(t){this.mS(t);const i=this.lS.get(t);return void 0===i||(0===t.protoLineItem.impressionCap||i.numberOfImpressions<t.protoLineItem.impressionCap)}registerImpressionForLineItem(t){let i=this.lS.get(t);return void 0===i&&(this.lS.set(t,{numberOfImpressions:0}),i=this.lS.get(t),this.pS(t)&&(i.nextImpressionCapResetTimestamp=this.gS(this.vS(t)))),i.numberOfImpressions++,this}registerRequestForLineItem(t){return this}destroy(){this.lS.clear()}fS(t){this.lS.get(t).numberOfImpressions=0}vS(t){return t.protoLineItem.resetImpressionsCapTime*Zt.f}mS(t,i=Date.now()){if(!this.pS(t))return;const e=this.lS.get(t);void 0!==e&&this.yS(t,i)&&(e.numberOfImpressions=0,e.nextImpressionCapResetTimestamp=this.gS(this.vS(t),i))}yS(t,i){return i>=this.lS.get(t).nextImpressionCapResetTimestamp}gS(t,i=Date.now()){const e=Math.ceil((i-this.bS)/t)*t;return this.bS+e}}class rh extends sh{constructor(t=Date.now()){super(),this.bS=t,this.lS=new Map}canCall(t){this.mS(t);const i=this.lS.get(t);return void 0===i||(0===t.protoLineItem.requestCap||i.numberOfRequests<t.protoLineItem.requestCap)}registerRequestForLineItem(t,i=Date.now()){let e=this.lS.get(t);return void 0===e&&(this.lS.set(t,{numberOfRequests:0}),e=this.lS.get(t),this.pS(t)&&(e.nextRequestCapResetTimestamp=this.gS(this.vS(t)))),e.numberOfRequests++,this}registerImpressionForLineItem(t){return this}getAvailableRequestsForLineItem(t){const i=this.lS.get(t);return void 0===i?t.protoLineItem.requestCap:t.protoLineItem.requestCap-i.numberOfRequests}restoreOneCapForLineItem(t){if(t.protoLineItem.ignoreFilledRequests){const i=this.lS.get(t);if(void 0===i)return;i.numberOfRequests>0&&i.numberOfRequests--}}destroy(){this.lS.clear()}fS(t){this.lS.get(t).numberOfRequests=0}vS(t){return t.protoLineItem.resetRequestsCapTime*Zt.f}mS(t,i=Date.now()){if(!this.pS(t))return;const e=this.lS.get(t);void 0!==e&&this.yS(t,i)&&(e.numberOfRequests=0,e.nextRequestCapResetTimestamp=this.gS(this.vS(t),i))}yS(t,i){return i>=this.lS.get(t).nextRequestCapResetTimestamp}gS(t,i=Date.now()){const e=Math.ceil((i-this.bS)/t)*t;return this.bS+e}}class hh{constructor(){this.lS=new Map}registerRequestForLineItem(t,i=Date.now()){let e=this.lS.get(t);return void 0===e&&(this.lS.set(t,{}),e=this.lS.get(t)),e.lastRequestTimestamp=i,this}registerImpressionForLineItem(t){return this}canCall(t,i=Date.now()){const e=this.lS.get(t);return void 0===e||(0===t.protoLineItem.timeBetweenRequests||i>=e.lastRequestTimestamp+t.protoLineItem.timeBetweenRequests*Zt.f)}destroy(){this.lS.clear()}}const ah=500;class oh{constructor(){this.wS=null,this.xS=new Xs.SimpleEventDispatcher}start(){return this.kS(),this}stop(){return this.SS(),this}onTimer(){return this.xS.asEvent()}destroy(){this.SS()}kS(){null===this.wS&&(this.wS=setInterval(()=>{this.xS.dispatch(void 0)},ah))}SS(){clearInterval(this.wS),this.wS=null}}class ch extends o.a{constructor(t,i,e,s){super(),this.OS=t,this._S=i,this.kl=e,this.jS=s,this.AS=new Xs.SimpleEventDispatcher,this.updateState=t=>{this.OS.forEach((i,e)=>{this.IS.set(e,this.CS(i,t))})},this.TS=t=>{this.PS(t)},this.ar=()=>{this.PS()},this.PS=t=>{this.updateState(t),this.AS.dispatch(void 0)},this.IS=new Map,this.updateState(),this.OS.forEach(t=>{this._S.on(t,this.ar),this.kl.on(t,this.TS,{threshold:this.jS})})}get onContainerStateUpdate(){return this.AS.asEvent()}getContainerMap(){return this.OS}getContainerStateMap(){return this.IS}destroy(){this.OS.forEach(t=>{this._S.off(t,this.ar),this.kl.off(t,this.TS)})}CS(t,i){let e=i;return void 0===e&&(e=this.kl.check({element:t,threshold:this.jS})),{width:t.clientWidth,height:t.clientHeight,viewability:e}}}const uh="cnxpl-vl",lh="cnxpl-rf";class dh{constructor(){this.MS=!0,this.ES=new Xs.SimpleEventDispatcher,this.LS=t=>{if(this.MS)return;const i=t.target;if(i.volume>0&&(i.volume=0,!i.paused)){const t=i.getAttribute(lh);this.ES.dispatch(t)}t.preventDefault?t.preventDefault():t.returnValue=!1}}get onVolumeDetected(){return this.ES.asEvent()}enforce(t,i){let e=t;Object(v.c)(t)&&(e=t.contentDocument||t.contentWindow.document),this.MS=!1,Object(l.c)(e.getElementsByTagName("video")).forEach(t=>{this.RS(t,i)})}stopEnforce(){this.MS=!0}clearEnforce(){}RS(t,i){t&&!t.getAttribute("cnxpl-vl")&&(t.volume=0,t.setAttribute(uh,"true"),t.setAttribute(lh,i),t.addEventListener("volumechange",this.LS))}}class fh{constructor(){}BS(t){const i=function(){};t.Element.prototype.scrollIntoView=i,t.Element.prototype.scrollIntoViewIfNeeded=i,t.scroll=i,t.scrollTo=i,t.scrollBy=i}enforce(t){Object(v.c)(t)&&this.BS(t.contentWindow)}stopEnforce(){}clearEnforce(){}}class ph{constructor(t){this.DS=t=>t.cnxEnfStorage?t.cnxEnfStorage:null,this.ue=t;try{this.DS(this.ue)||this.FS(this.ue)}catch(t){Object(n.a)({message:"AdManager_EnforcerMemory_bind_enforcement",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}FS(t){Object(E.w)(t.document.head,t,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(t,i){if(Object(v.c)(t))try{t.contentWindow.self===top||t.contentWindow.Function.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i}),t.contentWindow.self===top||t.contentWindow.Object.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i})}catch(t){}}stopEnforce(){}clearEnforce(t){try{const i=this.DS(this.ue);i.eventListeners[t]&&(i.eventListeners[t].forEach(t=>{t.element.removeEventListener(t.type,t.handler,t.options)}),i.eventListeners[t]=[]),i.setInterval[t]&&(i.setInterval[t].forEach(t=>this.ue.clearInterval(t)),i.setInterval[t]=[]),i.setTimeout[t]&&(i.setTimeout[t].forEach(t=>this.ue.clearTimeout(t)),i.setTimeout[t]=[])}catch(t){}}}class vh{constructor(){this.VS=["viralgains","serving-sys.com","commercialadsdistributor"],this.NS=["beachfrontmedia","commercialadsdistributor"],this.$S=["commercialadsdistributor"],this.HS=["pixel.clearstream.tv","pixel.clrstm.com"],this.qS=new Xs.SimpleEventDispatcher,this.zS=new Xs.SimpleEventDispatcher}get onMalwareDetected(){return this.qS.asEvent()}get onBadUriDetected(){return this.zS.asEvent()}enforce(t,i){if(Object(v.c)(t)){this.GS=i;try{this.WS(t),this.JS(t),this.QS(t),this.XS(t)}catch(t){}}}stopEnforce(){}clearEnforce(){}YS(t,i,e,s){t.every(t=>-1===e.indexOf(t))&&!i.getAttribute("cnx")&&(i.setAttribute("cnx","true"),this.zS.dispatch({referenceId:this.GS,enforcementMessage:`${s}-${i}`}))}WS(t){const i=t.getAttribute("src");i&&(this.VS.forEach(t=>{i.indexOf(t)>-1&&this.qS.dispatch({referenceId:this.GS,enforcementMessage:`malware-${t}`})}),this.YS(["//","about:blank","about:self","javascript:"],t,i,"iframe"))}JS(t){Object(l.c)(t.contentDocument.getElementsByTagName("script")).forEach(t=>{const i=t.getAttribute("src");i&&(this.NS.forEach(t=>{i.indexOf(t)>-1&&this.qS.dispatch({referenceId:this.GS,enforcementMessage:`malware-${t}`})}),this.YS(["//"],t,i,"script"))})}QS(t){Object(l.c)(t.contentDocument.getElementsByTagName("a")).forEach(t=>{const i=t.getAttribute("href");i&&this.$S.forEach(t=>{i.indexOf(t)>-1&&this.qS.dispatch({referenceId:this.GS,enforcementMessage:`malware-${t}`})})})}XS(t){Object(l.c)(t.contentDocument.getElementsByTagName("img")).forEach(t=>{const i=t.getAttribute("src");i&&this.HS.forEach(t=>{i.indexOf(t)>-1&&this.qS.dispatch({referenceId:this.GS,enforcementMessage:`malware-${t}`})})})}}class bh{constructor(t,i,e){if(this.KS=e,this.ZS=null,this.tO=new Map,this.iO=cn.None,this.eO=300,this.sO=[],this.nO=new Map,this.wg=new Xs.SimpleEventDispatcher,this.tO.set(cn.MemoryLeak,new ph(i)),e||this.tO.set(cn.ScrollHijack,new fh),!t){const t=new dh;this.tO.set(cn.Mute,t),this.sO.push(t.onVolumeDetected.subscribe(t=>{this.rO(on.VOLUME_DETECTED,t,"")}))}const s=new vh;this.sO.push(s.onBadUriDetected.subscribe(t=>{this.rO(on.BADURI_DETECTED,t.referenceId,t.enforcementMessage)}),s.onMalwareDetected.subscribe(t=>{this.rO(on.MALWARE_DETECTED,t.referenceId,t.enforcementMessage)})),this.tO.set(cn.Malware,s)}get onEnforcerEvent(){return this.wg.asEvent()}registerContainer(t,i){this.nO.get(t)||this.nO.set(t,i)}deregisterContainer(t){this.nO.get(t)&&(this.tO.forEach(i=>{i.clearEnforce(this.nO.get(t))}),this.nO.delete(t),this.nO.size||this.stop(cn.All))}start(t){this.KS&&(t^=cn.ScrollHijack),this.iO|=t,null===this.ZS&&(this.ZS=setInterval(()=>{try{this.nO.forEach((t,i)=>{this.hO(i,t)})}catch(t){}},this.eO))}stop(t){this.iO&=~t,this.iO===cn.None&&(clearInterval(this.ZS),this.ZS=null),this.tO.forEach((i,e)=>{t&e&&i.stopEnforce()})}destroy(){this.stop(cn.All),this.nO.forEach((t,i)=>{this.deregisterContainer(i)})}hO(t,i){Object(l.c)(t.getElementsByTagName("iframe")).forEach(t=>{try{this.hO(t,i)}catch(t){}}),this.tO.forEach((e,s)=>{this.iO&s&&e.enforce(t,i)})}rO(t,i,e){let s;this.nO.forEach((t,e)=>{t===i&&(s=e)}),this.wg.dispatch({message:e,type:t,detectedContainer:s})}}class mh{constructor(t){this.Rn=t,this.aO=!1,this.oO=void 0,this.cO=[],this.co=[],this.uO=!1,this.lO=new Xs.SimpleEventDispatcher,this.dO=new Xs.SimpleEventDispatcher,this.fO=[],this.co.push(this.Rn.adBidPool.onBidReady.subscribe(()=>{this.pO()}),this.Rn.impressionCapsTimer.onTimer().subscribe(()=>{this.pO()}))}get onAdSelected(){return this.lO.asEvent()}get onAdFinished(){return this.dO.asEvent()}start(t){this.vO=t,this.aO=!0,this.pO()}stop(){this.aO=!1}destroy(){this.stop(),this.oO||this.bO()}pO(){if(!this.aO||this.uO)return;const t=this.mO(this.vO);if(!t)return;const i=this.gO(t);this.oO&&this.Rn.removeBidIfHigherYoScore&&i?(this.bO(),this.oO.stopAd("removeStartedBid"),this.yO(t)):this.oO||this.yO(t)}yO(t){this.oO=t,this.fO=[],this.Rn.adBidPool.moveBidToStarted(t),this.lO.dispatch(t),this.wO(t),t.startAd()}bO(){this.oO&&(this.cO.forEach(t=>t()),this.cO=[],this.Rn.adBidPool.consumeBidStarted(this.oO),this.oO=void 0,this.fO=[])}xO(t){const i=t.settings.adManagerLineItem;return this.Rn.impressionCapsService.canCall(i)}mO(t){const i=this.Rn.adBidPool.bidsReady.filter(t=>this.xO(t));return this.Rn.adImpressionerYo.getBestBid(i,t)}gO(t){return!!this.oO&&this.Rn.adImpressionerYo.getBetterBid(t,this.oO)!==this.oO}kO(t,i){this.uO&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_multipleImpressions",exception:`advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}`,callStack:`${t.adMediaType}`,throttle:1e3,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),this.Rn.adImpressionerYo.registerImpression(t.settings.id,t.settings.adManagerLineItem.protoLineItem.creativeType),this.uO=!0,this.Rn.adRequestGatekeeper.addImpression(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.obfuscatedPrice),this.Rn.impressionCapsService.registerImpressionForLineItem(t.settings.adManagerLineItem),this.Rn.requestCapsService.restoreOneCapForLineItem(t.settings.adManagerLineItem),t.settings.adManagerLineItem.bids.delete(t),this.SO(t,i)}OO(t,i,e){this.uO?(this.uO=!1,this.Rn.trackingService.adFinished()):(this.Rn.adImpressionerYo.registerPostBid(t.settings.id,t.settings.adManagerLineItem.protoLineItem.creativeType,e),this._O(t,e,i),t.settings.adManagerLineItem.bids.delete(t)),this.Rn.pauseAdWhenFinished?t.pauseAd():(this.dO.dispatch(t),this.bO(),this.pO())}jO(){this.oO.settings.adManagerLineItem.protoLineItem.adType===h.ProtoAdType.Overlay?this.Rn.trackingService.setAdViewabilityDelay(Es.a):this.Rn.trackingService.setAdViewabilityDelay(Es.b)}SO(t,i){var e,s;this.jO();const n=this.vO.adBreakState;this.Rn.trackingService.trackVideoAdImpression({adPodSlotPosition:n.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,customClientPrice:t.settings.cpm,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,syncedUser:t.settings.requestMetadata.data.syncedUser,timeSpent:i,vastMediaType:t.adMediaType,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(e=t.settings.bidLifecycle)||void 0===e?void 0:e.winToAdLoadedTime,startAdToImpressionTime:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.startAdToImpressionTime,impressionDuration:Object(Xt.e)(t.getAdDuration(),2),declaredDuration:Object(Xt.e)(t.declaredDurationInSeconds,2),useExploration:this.Rn.explorationMode})}_O(t,i,e){var s;const n=this.vO.adBreakState;this.Rn.trackingService.addPostBid({adPodSlotPosition:n.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:i,loaded:!0,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,syncedUser:t.settings.requestMetadata.data.syncedUser,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,timeSpent:e,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.winToAdLoadedTime})}AO(t,i){this.fO.indexOf(i)>=0&&!this.Rn.pauseAdWhenFinished?1===Object(Yt.k)([99,1])&&Object(n.a)({message:"AdManager_AdImpressionerController_handleQuartilesTracking_track_same_quartile_twice",level:h.ProtoLoggingLevelEnum.WARNING,exception:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,callStack:t.adMediaType}):(this.fO.push(i),this.Rn.trackingService.trackVideoAdQuartile({advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,quartile:i}))}wO(t){const i=Date.now();this.cO.push(t.onVpaidEvent.subscribe((e,s)=>{const r=function(t,i){switch(t){case Et.b.AdImpression:return i.adImpression;case Et.b.AdClickThru:return i.adClick;case Et.b.AdStarted:return i.adStarted;case Et.b.AdVideoStart:return i.adVideoStart;case Et.b.AdVideoFirstQuartile:return i.adQuartileFirst;case Et.b.AdVideoMidpoint:return i.adQuartileSecond;case Et.b.AdVideoThirdQuartile:return i.adQuartileThird;case Et.b.AdVideoComplete:return i.adQuartileFourth;case Et.b.AdPaused:return i.adPause;case Et.b.AdPlaying:return i.adResume;case Et.b.AdSkipped:return i.adSkip;case Et.b.AdUserClose:return i.adUserClose;case Et.b.AdUserAcceptInvitation:return i.adUserAcceptInvitation;case Et.b.AdUserMinimize:return i.adUserMinimize;case Et.b.AdError:return i.adError}}(e.type,t.settings.trackers),a=Date.now()-i;switch(r||e.type!==Et.b.AdImpression||(this.IO("AdManager_AdImpressionController_tracker_impression_not_found"),Object(n.a)({sendMaxLog:!1,message:"AdManager_AdImpressionController_tracker_impression_not_found",level:h.ProtoLoggingLevelEnum.FATAL})),en.track(r,this.Rn.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState),e.type){case Et.b.AdError:this.OO(t,a,e.payload.errorMessage);break;case Et.b.AdSkipped:case Et.b.AdStopped:this.OO(t,a,un.c.AdStopped);break;case Et.b.AdImpression:this.kO(t,a);break;case Et.b.AdVideoFirstQuartile:this.AO(t,h.ProtoQuartilesEnum.First);break;case Et.b.AdVideoMidpoint:this.AO(t,h.ProtoQuartilesEnum.Second);break;case Et.b.AdVideoThirdQuartile:this.AO(t,h.ProtoQuartilesEnum.Third);break;case Et.b.AdVideoComplete:this.AO(t,h.ProtoQuartilesEnum.Fourth)}}))}IO(t,i){var e,s;Object(n.a)({message:t,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,exception:null===(e=i)||void 0===e?void 0:e.message,callStack:null===(s=i)||void 0===s?void 0:s.stack})}}const gh={[h.ProtoAdBreakTypeEnum.PreRoll]:"preRoll",[h.ProtoAdBreakTypeEnum.MidRoll]:"midRoll",[h.ProtoAdBreakTypeEnum.PostRoll]:"postRoll"};class yh{constructor(t,i){this.CO=t,this.Ra=i}replace(t,i,e){this.CO.setAdWidth(e.adMacros.adWidth),this.CO.setAdHeight(e.adMacros.adHeight),this.CO.setAdPosition(gh[e.adMacros.adPostion]),e.mediaMacros.mediaDescription&&this.CO.setVideoDescription(e.mediaMacros.mediaDescription),e.mediaMacros.mediaDuration&&this.CO.setVideoDuration(e.mediaMacros.mediaDuration),e.mediaMacros.mediaId&&this.CO.setVideoId(e.mediaMacros.mediaId),e.mediaMacros.mediaTitle&&this.CO.setVideoTitle(e.mediaMacros.mediaTitle),e.mediaMacros.mediaUrl&&this.CO.setVideoUrl(e.mediaMacros.mediaUrl);const s=this.Ra.isConsent(i);this.CO.setGDPR(this.Ra.isConsentRequired()?1:0),this.CO.setConsent(s?1:0),this.CO.setGDPRConsent(this.Ra.getConsentPayload());const n=this.Ra.getTrackableUser(),r=this.Ra.isConsentConnatix()&&s?n:void 0;return this.CO.setUUID(r),this.CO.setupMacros(t)}}const wh=30*Zt.f;class xh{constructor(){this.TO=null}onAdRemoved(){this.TO=null,this.PO()}pauseViaUserInteraction(){this.TO&&(this.TO.pausedWithUserInteraction=!0)}resumeViaUserInteraction(){this.TO&&(this.TO.pausedWithUserInteraction=!1,this.PO())}MO(t){this.TO={currentAd:t,isPaused:!1,pausedWithUserInteraction:!1,remainingTimeForAdToBePaused:wh,lastAdPausedStartedTimestamp:void 0},this.PO()}checkPauseAd(t,i){t&&(null===this.TO&&this.MO(t),i?this.EO(t):this.LO(t))}LO(t){this.RO(t)&&(this.TO.isPaused=!0,this.TO.lastAdPausedStartedTimestamp=Date.now(),t.pauseAd(),this.PO(),this.BO=setTimeout(()=>{t.stopAd("pauseOutOfView"),this.TO=null,this.PO()},this.TO.remainingTimeForAdToBePaused))}EO(t){t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&this.TO.isPaused&&!this.TO.pausedWithUserInteraction&&(this.PO(),this.TO.isPaused=!1,this.TO.remainingTimeForAdToBePaused=this.TO.remainingTimeForAdToBePaused-(Date.now()-this.TO.lastAdPausedStartedTimestamp),t.resumeAd())}PO(){clearTimeout(this.BO),this.BO=void 0}RO(t){return t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&!this.TO.isPaused&&!this.TO.pausedWithUserInteraction}}class kh{constructor(t){this.bid=t,this.cancelled=!1,this.DO=new Xs.SimpleEventDispatcher,this.FO=new Xs.SimpleEventDispatcher,this.VO=()=>{}}get onSuccess(){return this.DO.asEvent()}get onFailure(){return this.FO.asEvent()}loadBid(t,i,e,s,n){this.UO(),this.bid.initAd(t,i,e,s,void 0,void 0,n)}cancelLoad(){this.cancelled=!0,this.NO(),this.FO.dispatch(un.c.Cancelled),this.bid.stopAd("cancel")}UO(){this.VO=this.bid.onVpaidEvent.subscribe(t=>{t.type===Et.b.AdLoaded&&(this.NO(),this.DO.dispatch(void 0)),t.type===Et.b.AdError&&(this.NO(),this.FO.dispatch(t.payload.errorMessage))})}NO(){this.VO()}}const Sh=1,Oh=500,_h=!0;class jh{constructor(t){this.Rn=t,this.$O=new Set,this.HO=new Map,this.co=[],this.Ol=!1,this.qO=null,this.zO=()=>{if(this.GO())return;const t=this.WO(this.Rn.adBidPool.bids);if(!t)return;const i=new kh(t.bid);return this.$O.add(i),this.Rn.adBidPool.moveBidToLoading(t.bid),this.JO(t.bid,i,t.state,this.QO.vastViewMode).catch(e=>{throw this.$O.delete(i),this.Rn.adBidPool.consumeBidLoading(t.bid),t.bid.settings.adManagerLineItem.bids.delete(t.bid),this.Rn.adWinnerYo.registerPostBid(t.bid.settings.id,t.bid.settings.adManagerLineItem.protoLineItem.creativeType,e),this.XO(),i}).then(()=>{this.$O.delete(i),this.Rn.adBidPool.moveBidToReady(t.bid),this.XO()}).catch(t=>{})},this.tS=new Zr(this.zO,Sh),this.co.push(this.Rn.adBidPool.onBid.subscribe(t=>{_h?(null!==this.qO&&clearTimeout(this.qO),this.qO=setTimeout(()=>{this.qO=null,this.YO(this.Rn.adBidPool.bids)},Oh)):this.YO([t]),this.XO()}),this.Rn.adBidPool.onBidReadyConsumed.subscribe(()=>{this.XO()}),this.Rn.impressionCapsTimer.onTimer().subscribe(()=>{this.XO()}))}isLoadingBids(){return this.$O.size>0}win(t){this.QO=t,this.tS.setNumberOfThreads(t.maxParallelWins),this.Ol=!0,this.XO()}stop(){this.Ol=!1,this.tS.stop()}destroy(){this.stop(),this.co.forEach(t=>t()),this.HO.forEach(t=>t())}XO(){this.Ol&&this.tS.start()}KO(t,i){if(t===i)return!1;if(!this.Rn.adWinnerYo.isBetterBid(t,i))return!1;const e=vr(t.settings.adManagerLineItem.protoLineItem.creativeType),s=vr(i.settings.adManagerLineItem.protoLineItem.creativeType);return e||!e&&!s}YO(t){if(!this.Rn.removeLoadingBids||!this.Ol||!this.GO())return;const i=this.WO(t);if(!i)return;const e=Object(l.d)(this.$O).sort((t,i)=>this.Rn.adWinnerYo.getWinningYoScore(t.bid.settings.id)-this.Rn.adWinnerYo.getWinningYoScore(i.bid.settings.id))[0];e&&!e.cancelled&&this.KO(i.bid,e.bid)&&e.cancelLoad()}GO(){return this.Rn.adBidPool.bidsReady.length+this.$O.size+(this.Rn.adBidPool.bidStarted?1:0)>=this.Rn.maxNumberOfWins}WO(t){return this.Rn.adWinnerYo.getBestBid(t,this.QO.stateSettings,this.Rn.impressionCapsService,this.Rn.platformCappedLineItemRepo)}JO(t,i,e,s){return new Promise((n,r)=>{const h=Date.now(),{width:a,height:o}=e.adContainerState.get(t.settings.adManagerLineItem.protoLineItem.adType);en.track(t.settings.trackers.adWin,this.Rn.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,e),i.onSuccess.subscribe(()=>{n()}),i.onFailure.subscribe(i=>{this.ZO(t,i,Date.now()-h),r(i)}),i.loadBid(a,o,s,this.Rn.desiredBitRateForWins,e.soundValue)})}ZO(t,i,e){var s;const n=this.QO.stateSettings.currentState.adBreakState;en.track(t.settings.trackers.adError,this.Rn.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState),this.Rn.trackingService.addPostBid({adPodSlotPosition:n.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:i,loaded:!1,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,syncedUser:t.settings.requestMetadata.data.syncedUser,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,timeSpent:e,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.winToAdLoadedTime})}}var Ah;!function(t){function i(t,i){if(Object(l.h)(i.items)&&Array.isArray(t)){const e=Object(l.b)(t,i.items).length;return i.choiceCriteria===h.ProtoChoiceCriteriaEnum.Only?e>0:0===e}const e=Object(l.g)(t,i.items);return i.choiceCriteria===h.ProtoChoiceCriteriaEnum.Only?e:!e}t.isAllowedBySound=function(t,i){return!t.protoLineItem.sound||i.sound},t.isAllowedByViewability=function(t,i){const e=i.adContainerState.get(t.protoLineItem.adType).viewability;return!t.protoLineItem.viewability||e},t.isAllowedByAdBreakType=function(t,i){return!t.protoLineItem.adBreakSettings||t.protoLineItem.adBreakSettings.adBreakTargeting.some(t=>{if(t.adRollType===i.adBreakState.adBreakType)return function(t,i){switch(t){case h.ProtoLineItemAdBreakTypeEnum.All:return!0;case h.ProtoLineItemAdBreakTypeEnum.AdPod:return i;case h.ProtoLineItemAdBreakTypeEnum.SingleAd:return!i}}(t.adBreakTypeEnum,i.adBreakState.isAdPodBreak)})},t.isAllowedByMediaTargeting=function(t,e){return!(t.protoLineItem.mediaIdTargeting&&!i(e.media.mediaId,t.protoLineItem.mediaIdTargeting)||t.protoLineItem.mediaKeywordsTargeting&&!i(e.media.mediaKeywords,t.protoLineItem.mediaKeywordsTargeting)||t.protoLineItem.mediaLanguageTargeting&&!i(e.media.mediaLanguage,t.protoLineItem.mediaLanguageTargeting))},t.isAllowedByPodTargeting=function(t,i){var e;const s=null===(e=t.protoLineItem.adBreakSettings)||void 0===e?void 0:e.adPodTargeting;if(!s)return!0;if(!i.adBreakState.isAdPodBreak)return!0;const n=i.adBreakState.adPodSlotIndex;let r=!0;switch(s.adSlotTargetingType){case h.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(n<s.adSlotPositions[0]||n>s.adSlotPositions[1])&&(r=!1);break;case h.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===s.adSlotPositions.indexOf(n)&&(r=!1)}return s.targetingType===h.ProtoLineItemTargetingTypeEnum.Except&&(r=!r),r},t.isAllowedRegardingDuration=function(t,i){return!t||0===i||t<=i},t.isAllowedRegardingSkippability=function(t,i,e){switch(e){case h.ProtoPlayerAdSkippability.IfLongerThan31Sec:if(i===h.ProtoAdSkipMode.Never&&t>Es.g)return!1;break;case h.ProtoPlayerAdSkippability.Always:if(i===h.ProtoAdSkipMode.IfLongerThan31Sec&&t&&t<Es.g)return!1}return!0}}(Ah||(Ah={}));class Ih{constructor(t,i){this.t_=t,this.i_=i}getCallingYoScore(t){return this.t_.getCallingYoScore(t)}getWinningYoScore(t){return this.t_.getWinningYoScore(t)}getImpressionYoScore(t){return this.t_.getImpressionYoScore(t)}registerBiddingInformation(t){this.t_.registerBiddingInformation(t)}registerPreBid(t){this.t_.registerPreBid(t)}registerImpression(t,i){this.t_.registerImpression(t,i)}registerPostBid(t,i,e){this.t_.registerPostBid(t,i,e)}e_(t,i){return Ah.isAllowedByViewability(t,i)&&Ah.isAllowedBySound(t,i)&&Ah.isAllowedByAdBreakType(t,i)&&Ah.isAllowedByMediaTargeting(t,i)&&Ah.isAllowedByPodTargeting(t,i)}s_(t,i){const e=t.getAdDuration(),s=t.settings.adManagerLineItem.protoLineItem.skipMode,n=i.adBreakState.sessionMaxAdDuration;return Ah.isAllowedRegardingDuration(e,n)&&Ah.isAllowedRegardingSkippability(e,s,this.i_)}n_(t,i){const e=t.getAdDuration(),s=i.adBreakState.remainingAdDuration;return Ah.isAllowedRegardingDuration(e,s)}r_(t,i,e,s){return!s.isLineItemPlatformCapped(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId)&&e.canCall(t.settings.adManagerLineItem)&&this.e_(t.settings.adManagerLineItem,i)&&this.s_(t,i)&&this.n_(t,i)}}class Ch extends Ih{getBestCallable(t,i){return this.h_(t,i.currentState)||this.h_(t,i.predictedState)}isBidWinnable(t,i,e,s){return this.r_(t,i,e,s)}isBidWinnableEverInSession(t,i){return this.s_(t,i)}h_(t,i){const e=this.a_(t,i),s=this.o_(e);if(s)return{state:i,lineItemList:this.c_(s,e)}}o_(t){let i=t;return t.some(t=>vr(t.protoLineItem.creativeType))&&(i=i.filter(t=>vr(t.protoLineItem.creativeType))),this.u_(i)[0]}u_(t=[]){return t.sort((t,i)=>this.getCallingYoScore(i.protoLineItem.advertiserLineItemId)-this.getCallingYoScore(t.protoLineItem.advertiserLineItemId))}a_(t,i){return t.filter(t=>this.e_(t,i))}c_(t,i){const{creativeType:e}=t.protoLineItem;return vr(e)?this.u_(i.filter(t=>e===t.protoLineItem.creativeType)):[t]}}class Th extends Ih{getBestBid(t,i){return this.l_(t,i)}getBetterBid(t,i){return this.getImpressionYoScore(t.settings.id)>this.getImpressionYoScore(i.settings.id)?t:i}l_(t,i){return[...t].sort((t,i)=>this.getImpressionYoScore(i.settings.id)-this.getImpressionYoScore(t.settings.id))[0]}}class Ph extends Ih{getBestBid(t,i,e,s){const n=t.filter(t=>this.r_(t,i.currentState,e,s));return this.d_(n,i.currentState,e,s)||this.d_(n,i.predictedState,e,s)}isBetterBid(t,i){return this.getWinningYoScore(t.settings.id)>this.getWinningYoScore(i.settings.id)}d_(t,i,e,s){const n=this.f_(t,i,e,s);if(n)return{state:i,bid:n}}f_(t,i,e,s){return[...t].filter(t=>this.r_(t,i,e,s)).sort((t,i)=>this.getWinningYoScore(i.settings.id)-this.getWinningYoScore(t.settings.id))[0]}}class Mh{constructor(t){this.Rn=t,this.p_=new Xs.SignalDispatcher,this.v_=!1,this.b_=!1,this.m_=null,this.g_=!1,this.y_=(t,i)=>{return this.Rn.yoScoreManager.getCallingYoScore(i.protoLineItem.advertiserLineItemId)-this.Rn.yoScoreManager.getCallingYoScore(t.protoLineItem.advertiserLineItemId)},this.v_=t.locked,t.adBidPool.onBid.subscribe(()=>{this.v_||this.w_()})}get onAuctionEnd(){return this.p_.asEvent()}startAuction(t){this.b_=!1,0!==t||this.v_||null!==this.m_?this.w_()||(this.g_=!1,this.x_(),this.m_=setTimeout(()=>{this.g_=!0,this.v_||this.p_.dispatch()},t)):this.p_.dispatch()}lock(){this.v_=!0}unlock(){this.v_=!1,this.g_?this.p_.dispatch():this.w_()}cancel(){this.b_=!0,this.x_()}x_(){clearTimeout(this.m_),this.m_=null}w_(){var t;if(this.b_)return!1;this.Rn.adBidPool.bids.sort((t,i)=>this.Rn.yoScoreManager.getWinningYoScore(i.settings.id)-this.Rn.yoScoreManager.getWinningYoScore(t.settings.id));const i=this.Rn.adBidPool.bids[0];if(!i)return!1;this.Rn.adBidPool.callingLineItems.sort(this.y_);const e=this.Rn.adBidPool.callingLineItems[0],s=this.Rn.yoScoreManager.getWinningYoScore(i.settings.id),n=this.Rn.yoScoreManager.getCallingYoScore(null===(t=e)||void 0===t?void 0:t.protoLineItem.advertiserLineItemId);return(!e||s>=n)&&(this.p_.dispatch(),this.x_(),!0)}}class Eh{constructor(t){this.protoLineItem=t,this.allowedSlots=[],this.bids=new Set,this.callers=new Set,this.aggregators=new Set}}function Lh(t){return[t-(t-t%100),t-t%100]}function Rh(t,i=!1){if(i)return Math.random();const{successRate:e,cpm:s,priority:n}=t;return(0===e?Math.random():e)*s+Es.h*n}function Bh(t){switch(t.creativeType){case h.ProtoCreativeTypeEnum.Tam:case h.ProtoCreativeTypeEnum.Rtb:return(t.obfuscatedPrice+Es.e)*Es.d;case h.ProtoCreativeTypeEnum.HeaderBidder:return t.cpm;default:return t.floorPrice}}class Dh{constructor(t,i){this.k_=i,this.S_=this.O_(t)}registerBiddingInformation(t){const i=Bh(t),{priority:e,successRate:s,lineItemId:n,bidId:r}=t,h=Rh({cpm:i,priority:e,successRate:s},this.k_);this.__(n,r,h)}registerPreBid(t){this.j_(t)}registerImpression(t,i){this.j_(t),vr(i)||this.A_(t)}registerPostBid(t,i,e){this.j_(t),vr(i)||e===un.c.Cancelled||this.I_(t)}getCallingYoScore(t){const i=this.C_(t);return i?i.yoScore:0}getWinningYoScore(t){const i=this.T_(t);return i?i.bidMap.get(t):(Object(n.a)({message:"YoScoreManager_getWinningYoScore_error",exception:`bid was not yet registered: ${t}`,level:h.ProtoLoggingLevelEnum.WARNING}),0)}getImpressionYoScore(t){return this.getWinningYoScore(t)}I_(t){const i=this.T_(t);if(!i)return;const e=function(t){const i=Lh(t);return i[1]+i[0]*Es.i}(i.yoScore);this.P_(i,e)}A_(t){const i=this.T_(t);if(!i)return;const e=function(t){const i=Lh(t);return i[1]+i[0]*Es.j}(i.yoScore);this.P_(i,e)}P_(t,i){t&&(t.yoScore=i)}__(t,i,e){const s=this.C_(t);if(!s)return;const n=this.M_(s);!this.k_||s.bidMap.has(i)||-1===n?this.E_(s,i)&&s.bidMap.set(i,e):s.bidMap.set(i,n)}M_(t){const i=[...t.bidMap.values()];return Object(l.h)(i)?i[0]:-1}E_(t,i){return!this.k_||!t.bidMap.has(i)}O_(t){return t.map(t=>{const{floorPrice:i,lineItemPriority:e,successRate:s,advertiserLineItemId:n,creativeType:r}=t;let h;return{lineItemId:n,yoScore:h=vr(r)?Math.random():Rh({cpm:i,priority:e,successRate:s}),bidMap:new Map}})}C_(t){return this.S_.find(i=>i.lineItemId===t)}T_(t){return this.S_.find(i=>i.bidMap.has(t))}j_(t){if(!t)return;const i=this.T_(t);i&&0!==i.bidMap.size&&i.bidMap.delete(t)}}const Fh=0,Vh=5,Uh=1,Nh=1,$h=1,Hh=!0,qh=.5;class zh{constructor(t){this.Rn=t,this.L_=!1,this.R_=!1,this.co=[],this.B_=null,this.D_=!1,this.Dm=new Xs.SimpleEventDispatcher,this.F_=new Xs.SimpleEventDispatcher,this.V_=new Qs,this.U_=new xh,this.Rn.app.services.TrackingService.addPlatformCappedLineItemSubscriber(this),this.Rn.app.services.TrackingService.setImpressionRevenueSubscriber(this),this.Rn.app.services.TrackingService.startBidRequests();const i=this.Rn.lineItemList.map(t=>new Eh(t)),e=new Dh(this.Rn.lineItemList,this.Rn.app.config.explorationMode);this.N_=new oh,this.H_=new nh,this.q_=new rh,this.z_=new hh,this.Hb=new ch(this.Rn.adContainerMap,this.Rn.app.services.ResizeObserver,this.Rn.app.services.ViewabilityService,qh),this.G_=new Ys,this.W_=new Mh({adBidPool:this.G_,locked:!0,yoScoreManager:e}),this.vx=new Js,this.lx=new yh(this.Rn.app.services.MacrosService,this.Rn.app.services.UserManagerService),this.J_=new eh({adBidPool:this.G_,adCallerYo:new Ch(e,this.Rn.skipAdsSettings.adSkippability),adContainerMap:this.Hb.getContainerMap(),adMacroReplacer:this.lx,amazonSlotId:this.Rn.amazonTamSlotId,app:this.Rn.app,isOutstream:this.Rn.outstream,lineItemList:i,schainSettings:this.Rn.pbjsSchainSettings,skipAdSettings:this.Rn.skipAdsSettings,trackingService:this.Rn.app.services.TrackingService,lineItemServices:{impressionCapsService:this.H_,lineItemServicesTimer:this.N_,requestCapsService:this.q_,timeBetweenRequestsService:this.z_},adRequestGatekeeper:this.vx,platformCappedLineItemRepo:this.V_,adEnforcer:new bh(this.Rn.app.config.isMobile,Object(E.s)(this.Rn.adContainerMap.get(h.ProtoAdType.Video)),this.Rn.disableScrollHijackEnforcement),pauseAdWhenFinished:this.Rn.pauseAdWhenFinished,os:this.Rn.app.config.os.os}),this.Q_=new jh({adBidPool:this.G_,adWinnerYo:new Ph(e,this.Rn.skipAdsSettings.adSkippability),desiredBitRateForWins:$h,maxNumberOfWins:Nh,removeLoadingBids:Hh,trackingService:this.Rn.app.services.TrackingService,impressionCapsService:this.H_,impressionCapsTimer:this.N_,platformCappedLineItemRepo:this.V_,adMacroReplacer:this.lx}),this.X_=new mh({adBidPool:this.G_,adImpressionerYo:new Th(e,this.Rn.skipAdsSettings.adSkippability),impressionCapsService:this.H_,impressionCapsTimer:this.N_,requestCapsService:this.q_,playerSkippability:this.Rn.skipAdsSettings.adSkippability,removeBidIfHigherYoScore:Hh,trackingService:this.Rn.app.services.TrackingService,adRequestGatekeeper:this.vx,pauseAdWhenFinished:this.Rn.pauseAdWhenFinished,adMacroReplacer:this.lx,explorationMode:this.Rn.app.config.explorationMode}),this.co.push(this.W_.onAuctionEnd.subscribe(()=>{this.L_=!0,this.Y_()}),this.Hb.onContainerStateUpdate.subscribe(()=>{if(this.B_){const{width:t,height:i,viewability:e}=this.K_();this.Z_(e),this.B_.resizeAd(t,i,this.tj),this.Rn.app.services.TrackingService.setAdViewability(e)}this.R_&&this.ij(),this.L_&&this.Y_()}),this.X_.onAdSelected.subscribe(t=>{this.B_=t,this.ej();const{viewability:i}=this.K_();this.Rn.app.services.TrackingService.setAdViewability(i),t.setAdVolume(this.sj.sound)}),this.X_.onAdFinished.subscribe(t=>{this.nj()}),this.J_.onAuctionFinished.subscribe(()=>{this.W_.unlock()}))}get onVpaidEvent(){return this.Dm.asEvent()}get onImpressionRevenueEvent(){return this.F_.asEvent()}setAdVolume(t){this.B_&&(this.rj(t),this.B_.setAdVolume(t))}setAdViewMode(t){if(this.B_){this.tj=t;const{width:i,height:e}=this.K_();this.B_.resizeAd(i,e,t)}}stopAd(t){this.B_&&this.B_.stopAd(t)}pauseAd(t){this.B_&&this.B_.pauseAd(),t&&this.U_.pauseViaUserInteraction()}resumeAd(t){this.B_&&this.B_.resumeAd(),t&&this.U_.resumeViaUserInteraction()}skipAd(){this.B_&&(this.B_.setAdVolume(0),this.B_.skipAd())}getCurrentAdMetadata(){if(this.B_)return{advertiserLineItemId:this.B_.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:this.B_.settings.adManagerLineItem.protoLineItem.publisherLineItemId,adType:this.B_.settings.adManagerLineItem.protoLineItem.adType,duration:this.B_.getAdDuration(),adSkipMode:this.B_.settings.adManagerLineItem.protoLineItem.skipMode,moatTrackingEnabled:this.B_.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled}}enableImpressions(t){this.sj=t,this.hj||(this.hj=this.sj),this.Hb.updateState(),this.aj(t),this.R_=!0,this.ij(),t.adOpportunity?this.W_.startAuction(Fh):this.W_.startAuction(0)}disableImpressions(){this.L_&&(this.W_.cancel(),this.X_.stop(),this.J_.stop(),this.Q_.stop(),this.L_=!1,this.R_=!1,this.B_&&!this.D_&&this.Rn.app.config.isInApp&&this.B_.stopAd("inApp_disable"))}predictEnable(t,i){this.hj=t}setPlatformCappedLineItemIdList(t){this.V_.addPlatformCappedLineItemIdList(t)}notifyImpressionRevenue(t){this.F_.dispatch(t)}destroy(){this.disableImpressions(),this.co.forEach(t=>t()),this.J_.destroy(),this.Q_.destroy(),this.X_.destroy(),this.N_.destroy(),this.B_&&(this.oj(),this.B_.stopAd("adManagerDestroy"),this.nj()),this.Rn.app.services.TrackingService.removePlatformCappedLineItemSubscriber(this),this.Rn.app.services.TrackingService.unsubscribeToImpressionRevenue(this)}isLoadingAds(){return!!this.B_||!!this.Q_.isLoadingBids()}Y_(){this.Q_.win(this.cj()),this.X_.start(this.uj(this.sj))}ij(){this.J_.call(this.lj())}lj(){return{maxParallelCalls:Vh,stateSettings:{currentState:this.uj(this.sj),predictedState:this.uj(this.hj)}}}cj(){return{desiredBitRate:$h,maxParallelWins:Uh,vastViewMode:this.sj?this.sj.vastViewMode:this.hj.vastViewMode,stateSettings:{currentState:this.uj(this.sj),predictedState:this.uj(this.hj)}}}uj(t){return{clickToPlay:t.clickToPlay,media:t.mediaMetada,sound:!!t.sound,soundValue:t.sound,adContainerState:this.Hb.getContainerStateMap(),adBreakState:t.adBreakState}}ej(){var t;this.Dm.dispatch({type:Et.b.AdLoaded,payload:null===(t=this.B_.settings.adLoadedPayload)||void 0===t?void 0:t.payload}),this.dj=this.B_.onVpaidEvent.subscribe(t=>{if(t.type===Et.b.AdImpression){this.D_=!0;const{viewability:t}=this.K_();this.Z_(t)}this.Dm.dispatch(t)})}K_(){return this.Hb.getContainerStateMap().get(this.B_.settings.adManagerLineItem.protoLineItem.adType)}oj(){this.dj&&(this.dj(),this.dj=null)}nj(){this.D_=!1,this.U_.onAdRemoved(),this.B_=null,this.oj()}Z_(t){this.U_.checkPauseAd(this.B_,t)}aj(t){const i=[this.H_,this.q_];t.adOpportunity&&i.forEach(t=>{t.resetCapsBasedOnExternalEvent(h.ProtoResetCapTypeEnum.OpportunityCapping)}),t.newContent&&i.forEach(t=>{t.resetCapsBasedOnExternalEvent(h.ProtoResetCapTypeEnum.ContentCapping)})}rj(t){const i=this.B_.getAdVolume();let e=null;0===i&&t>0?e=this.B_.settings.trackers.adUnmute:i>0&&0===t&&(e=this.B_.settings.trackers.adMute),e&&en.track(e,this.lx,this.B_.settings.adManagerLineItem.protoLineItem,this.uj(this.sj))}}const Gh={[h.ProtoAdSlotsEnum.PreRoll]:h.ProtoAdBreakTypeEnum.PreRoll,[h.ProtoAdSlotsEnum.MidRoll]:h.ProtoAdBreakTypeEnum.MidRoll,[h.ProtoAdSlotsEnum.PostRoll]:h.ProtoAdBreakTypeEnum.PostRoll};class Wh extends o.a{constructor(t,i,e,s,n,r=!1,a,o,c,u,l,d){super(),this.mediator=t,this.fj=i,this.pj=e,this.ux=s,this.Lb=n,this.vj=r,this.Eb=o,this.Zx=c,this.bj=l,this.oy=d,this.co=[],this.mj=!1,this.gj=!1,this.px=new Map,this.sj={mediaMetada:{},clickToPlay:!1,adOpportunity:!1,newContent:!1,sound:0,vastViewMode:Et.a.Normal,adBreakState:this.yj(this.Eb.getMaxAdSlotDuration(),h.ProtoAdBreakTypeEnum.MidRoll)}}get adInWin(){return this.Nb.isLoadingAds()}enableAds(){this.mj=!0,this.wj(),this.mediator.publish(this,$t.AdsEnabled)}disableAds(){this.mj=!1,this.Nb&&this.Nb.disableImpressions()}updateFilterConfig(t){this.sj.mediaMetada.mediaId=t.mediaId,this.sj.mediaMetada.mediaLanguage=t.mediaLanguage,this.sj.mediaMetada.mediaKeywords=t.mediaKeywords;const i=Object.assign(this.sj.mediaMetada,t);this.wj({mediaMetada:i})}userInteraction(t){this.wj({clickToPlay:!0})}newAdOpportunity(){this.wj({adOpportunity:!0})}initAd(t,i,e,s,n,r){r.forEach(t=>{this.px.set(t.type,t.container),this.px.get(h.ProtoAdType.Overlay)||this.px.set(h.ProtoAdType.Overlay,this.px.get(h.ProtoAdType.Video))}),this.$b(),this.gj=!0,this.wj({sound:n})}setAdVolume(t){var i;null===(i=this.Nb)||void 0===i||i.setAdVolume(t),this.wj({sound:t})}resizeAd(t,i,e){var s;this.xj!==e&&(this.setVastViewMode(e),null===(s=this.Nb)||void 0===s||s.setAdViewMode(e))}stopAd(t){var i;null===(i=this.Nb)||void 0===i||i.stopAd(t)}pauseAd(t){var i;null===(i=this.Nb)||void 0===i||i.pauseAd(t)}resumeAd(t){var i;null===(i=this.Nb)||void 0===i||i.resumeAd(t)}skipAd(){var t;null===(t=this.Nb)||void 0===t||t.skipAd()}getCurrentAdClickTrackingProperties(){var t;const{publisherLineItemId:i,advertiserLineItemId:e}=null===(t=this.Nb)||void 0===t?void 0:t.getCurrentAdMetadata();return{publisherLineItemId:i,advertiserLineItemId:e}}getAdDuration(){return this.Nb.getCurrentAdMetadata().duration}getCurrentAdType(){return this.Nb.getCurrentAdMetadata().adType}getLastAdSlot(t){const i=this.px.get(t);return{height:i.clientHeight,width:i.clientWidth}}updatePodRemainingTime(t){if(t<=0)return;const i=this.sj.adBreakState;Math.round(t/Zt.f)>i.remainingAdDuration||this.wj({adBreakState:this.yj(t,i.adBreakType)})}onAdStateChange(t,i){const e=Gh[t];this.wj({adBreakState:this.yj(i,e)})}onContentChange(){this.wj({newContent:!0})}setVastViewMode(t){this.xj=t,this.kj({vastViewMode:t})}destroy(){this.co.forEach(t=>{t()})}wj(t){this.kj(t),this.mj&&this.gj&&(this.Nb.enableImpressions(this.sj),this.Sj())}kj(t){Object.assign(this.sj,t),this.sj.adBreakState=this.yj(this.sj.adBreakState.remainingAdDuration,this.sj.adBreakState.adBreakType)}Sj(){this.kj({clickToPlay:!1,adOpportunity:!1,newContent:!1})}yj(t,i){return{isAdPodBreak:this.Eb.isCurrentBreakInPod(),adPodSlotIndex:this.Eb.isCurrentBreakInPod()?this.Eb.getNextSlotIndex():0,maxAdDuration:Math.round(this.Eb.getMaxAdSlotDuration()/Zt.f||$s),remainingAdDuration:Math.round(t/Zt.f),sessionMaxAdDuration:Math.round(this.Eb.getMaxAdSlotPossibleDuration()/Zt.f),adBreakType:i}}$b(){this.Nb=new zh({adBreakHelper:this.Eb,adContainerMap:this.px,amazonTamSlotId:this.Zx,app:this.Lb,lineItemList:this.fj.lineItems,outstream:this.vj,pbjsSchainSettings:this.pj,prerollTimeMs:this.bj,skipAdsSettings:this.ux,disableScrollHijackEnforcement:!this.fj.disableScrollHijackEnforcement,pauseAdWhenFinished:this.oy}),this.co.push(this.Nb.onVpaidEvent.subscribe(t=>{switch(t.type){case Et.b.AdLoaded:this.Oj(t);break;case Et.b.AdImpression:this._j(t);break;case Et.b.AdVideoStart:case Et.b.AdError:this.mediator.publish(this,t.type,{payload:t.payload});break;default:{const i={payload:{}};this.mediator.publish(this,t.type,i)}}})),this.Nb.onImpressionRevenueEvent.subscribe(t=>{this.mediator.publish(this,Mt.b.ImpressionPrice,{payload:t})})}Oj(t){const i={payload:{adSkipMode:t.payload.adSkipMode,adLoadedData:{skipOffset:t.payload.adLoadedData.skipOffset}}};this.mediator.publish(this,t.type,i)}_j(t){var i,e;const{adId:s,adVideoUrl:n,creativeId:r,name:h,length:a,imaMetadata:o,moatTrackingEnabled:c}=t.payload.adSourceData,u=this.Nb.getCurrentAdMetadata(),l={payload:{adSkipMode:t.payload.adSkipMode,adSourceData:{moatTrackingEnabled:c,adId:s,length:a,imaMetadata:o,adVideoUrl:n,creativeId:r,name:h},clickThroughUrl:t.payload.clickThroughUrl,customAdData:{ADVERTISER:null===(i=t.payload.customAdData)||void 0===i?void 0:i.ADVERTISER,CAMPAIGN_ID:null===(e=t.payload.customAdData)||void 0===e?void 0:e.CAMPAIGN_ID,CREATIVE_ID:t.payload.customAdData.CREATIVE_ID},adDuration:t.payload.adSourceData.length,selectedAdSlot:this.px.get(u.adType)}};this.mediator.publish(this,t.type,l)}}class Jh extends Ls{getNewAdManager(){const t={adSkippability:this.mr.adSkippability,skipAdAfter:this.mr.skipAdAfter};return new Wh(this,this.mr.lineItemSettings,this.mr.supplyChainSettings,t,this.Lb,this.mr.isOutStreamType(),this.mr.adSkippability,this.Eb,this.mr.amazonTamSlotId,this.mr.global,this.mr.preRollBreak,this.mr.pauseAdWhenFinished)}Zb(t){super.Zb(t),this.mr.outstreamAdAsContent&&this.jj()}Kb(){super.Kb(),this.subscribe(Ot[Ot.SkipAd],this.zb,()=>this.Aj()),this.mr.outstreamAdAsContent&&(this.unsubscribe(Et.b.AdStopped,this.Nb),this.unsubscribe(Et.b.AdError,this.Nb))}Aj(){this.skipAd()}jj(){this.zb.hideProgressBar(),this.zb.hideAdMarker(),this.Yb()}}const Qh={TimeElapsed:"timeElapsed",TimeUpdate:"timeUpdate"};class Xh{constructor(t,i=0,e=1e3){this.mediator=t,this.timerDuration=i,this.Bw=e,this.Fw=0,this.Vw=null,this.Uw=!1,this.Ww=()=>{this.Jw(),this.mediator.publish(this,Qh.TimeUpdate),this.Qw(),this.Xw=(new Date).getTime()},i||this.disable()}Jw(){this.Fw+=(new Date).getTime()-this.Xw}Yw(){this.Uw||(this.Qw(),this.Xw=(new Date).getTime(),this.Vw=setInterval(this.Ww,this.Bw))}Kw(){clearInterval(this.Vw),this.Vw=null}Zw(){this.disable(),this.mediator.publish(this,Qh.TimeElapsed),this.Fw=0}Qw(){this.Fw/Zt.f>=this.timerDuration/Zt.f&&this.Zw()}start(){this.Nw=!0,null===this.Vw&&this.Yw()}stop(){this.Nw=!1,null!==this.Vw&&(this.Jw(),this.Kw())}reset(t){t&&(this.timerDuration=t),this.Fw=0,this.Uw=!1,(null!==this.Vw||this.Nw)&&(this.Kw(),this.Yw())}get timeElapsed(){return this.Fw}get timeRemaining(){return this.timerDuration-this.Fw}disable(){this.Uw=!0,this.Kw()}}class Yh extends o.a{constructor(t,i,e,s){super(),this.mediator=t,this.controlData=e,this.app=s,this.Ij=0,this.Cj=0,this.Tj=null,this.currentPlayerAdSlot=R.ProtoAdSlotsEnum.PreRoll,this.Pj={stopped:!1,viewability:!1,inImpression:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1,inAppRecyclerViewViewability:!1},this.firstAdBreakStarted=!1,this.Mj=!1,this.viewabilityStateChanged(i),this.onResize(this.controlData.playerDimensions.width,this.controlData.playerDimensions.height),this.controlData.totalAdBreakLength&&(this.Ej=new Xh(this,this.controlData.totalAdBreakLength),this.subscribe(Qh.TimeElapsed,this.Ej,()=>{this.mediator.publish(this,Ht.TotalAdBreakLengthExpired)}))}Lj(){return this.Cj>=this.controlData.numberOfMidRolls&&-1!==this.controlData.numberOfMidRolls}Rj(t){if(t)return t.stop(),this.unsubscribeAll(t),null}Bj(){if(this.Mj){this.Mj=!1;const t={[h.ProtoAdSlotsEnum.PreRoll]:h.ProtoAdBreakTypeEnum.PreRoll,[h.ProtoAdSlotsEnum.MidRoll]:h.ProtoAdBreakTypeEnum.MidRoll,[h.ProtoAdSlotsEnum.PostRoll]:h.ProtoAdBreakTypeEnum.PostRoll};this.mediator.publish(this,Ht.AdOpportunity,{payload:{adBreakType:t[this.currentPlayerAdSlot]}})}this.mediator.publish(this,Ht.EnableAds),this.Ej&&this.Ej.start()}canEnableAds(){return!(this.Pj.stopped||this.Pj.viewability||this.Pj.inImpression||this.Pj.forceDisable||this.Pj.zeroDimension||this.Pj.isAppBackgrounded||this.Pj.inAppRecyclerViewViewability)&&((this.currentPlayerAdSlot!==R.ProtoAdSlotsEnum.MidRoll||!this.Lj())&&!(this.currentPlayerAdSlot!==R.ProtoAdSlotsEnum.MidRoll&&this.Ij>0))}toggleEnableAds(){this.canEnableAds()?this.Bj():(this.mediator.publish(this,Ht.DisableAds),this.Ej&&!this.Pj.inImpression&&this.Ej.stop())}startAds(){this.Pj.stopped=!1,this.toggleEnableAds()}forceRecheck(){this.toggleEnableAds()}onAdImpression(t){this.currentPlayerAdSlot===R.ProtoAdSlotsEnum.MidRoll&&(this.firstAdBreakStarted||(this.firstAdBreakStarted=!0)),this.Pj.inImpression=!0,this.toggleEnableAds(),this.Dj(),this.Fj(),this.Vj(t.payload.adSkipMode,t.payload.adDuration)&&(this.Tj=setTimeout(()=>{this.mediator.publish(this,Ht.ForceStopAdSlot)},Es.g*Zt.f))}Fj(){this.controlData.maxAdPodDuration&&!this.Uj&&(this.Uj=new Xh(this,this.controlData.maxAdPodDuration),this.Uj.start(),this.subscribe(Qh.TimeElapsed,this.Uj,()=>{this.mediator.publish(this,Ht.ForceStopAdPod)}),this.subscribe(Qh.TimeUpdate,this.Uj,()=>{const t=this.Uj.timeRemaining;this.mediator.publish(this,Ht.AdPodRemainingTime,{payload:{remainingTime:t}})}))}Dj(){this.controlData.maxAdSlotDuration&&!this.Nj&&(this.Nj=new Xh(this,this.controlData.maxAdSlotDuration),this.Nj.start(),this.subscribe(Qh.TimeElapsed,this.Nj,()=>{this.mediator.publish(this,Ht.ForceStopAdSlot)}))}Vj(t,i){switch(this.controlData.playerAdsSkippability){case h.ProtoPlayerAdSkippability.IfLongerThan31Sec:if((t===h.ProtoAdSkipMode.Never||t===h.ProtoAdSkipMode.IfLongerThan31Sec)&&!i)return!0;if(t===h.ProtoAdSkipMode.Never&&i>Es.g)return!0;break;case h.ProtoPlayerAdSkippability.NoRestrictions:if(t===h.ProtoAdSkipMode.IfLongerThan31Sec&&!i)return!0}return!1}onAdFinished(t,i=!1){this.Nj=this.Rj(this.Nj),i||(this.Uj=this.Rj(this.Uj),this.currentPlayerAdSlot===R.ProtoAdSlotsEnum.MidRoll?this.Cj++:this.Ij++),this.Lj()&&!i&&this.mediator.publish(this,Ht.MidRollCapped),t&&(this.Mj=!0),this.Pj.inImpression=!1,i?this.Bj():this.toggleEnableAds(),clearTimeout(this.Tj)}onAdPause(){this.Uj&&this.Uj.stop(),this.Nj&&this.Nj.stop(),this.Ej&&this.Ej.stop()}onAdPlay(){this.Uj&&this.Uj.start(),this.Nj&&this.Nj.start(),this.Ej&&this.Ej.start()}onStop(){this.currentPlayerAdSlot=null,this.Pj.stopped=!0,this.toggleEnableAds()}onAdStateChange(t,i,e){this.controlData.maxAdSlotDuration=i.maxAdSlotDuration,this.controlData.maxAdPodDuration=i.maxAdPodDuration,t===this.currentPlayerAdSlot&&t===R.ProtoAdSlotsEnum.MidRoll||(null===t&&this.$j===R.ProtoAdSlotsEnum.MidRoll||(this.Mj=!0),t!==R.ProtoAdSlotsEnum.MidRoll&&(this.Ij=0,this.firstAdBreakStarted=!1),this.currentPlayerAdSlot=t,this.$j=t,this.startAds())}contentChanged(){this.Cj=0,this.firstAdBreakStarted=!1,this.toggleEnableAds()}viewabilityStateChanged(t,i=!1,e=!1){this.od=t,this.controlData.viewabilityPolicy===R.ProtoAdViewabilityPolicy.Strict&&(this.Pj.viewability=!t),e||this.toggleEnableAds()}setToggleAdsReason(t){this.Pj.isAppBackgrounded=t.isAppBackgrounded,this.Pj.inAppRecyclerViewViewability=t.inAppRecyclerViewViewability,this.toggleEnableAds()}disableAdvertising(){this.Pj.forceDisable=!0,this.toggleEnableAds()}enableAdvertising(){this.Pj.forceDisable=!1,this.toggleEnableAds()}destroy(){this.Ej&&this.Ej.disable(),clearTimeout(this.Tj),this.Nj=this.Rj(this.Nj),this.Uj=this.Rj(this.Uj)}get inView(){return this.od}onResize(t,i){this.Pj.zeroDimension=0===t||0===i,this.toggleEnableAds()}}const Kh=480;class Zh extends Yh{constructor(t,i,e,s){super(t,i,e,s),this.mediator=t,this.Hj=!1,this.Pj.inTimeout=!1,this.Pj.limitAdsOnMidRoll=!0,this.onStop(),this.qj=new Xh(this,this.controlData.minTimeBeforeAdBreak),this.subscribe(Qh.TimeElapsed,this.qj,()=>{this.firstAdBreakStarted||(this.firstAdBreakStarted=!0),this.Pj.inTimeout=!1,this.Hj=!0,this.toggleEnableAds()})}zj(){this.currentPlayerAdSlot!==R.ProtoAdSlotsEnum.MidRoll||this.Pj.inTimeout||this.Hj||(this.firstAdBreakStarted?this.controlData.timeBetweenAds&&this.od&&this.Gj():this.controlData.minTimeBeforeAdBreak&&this.Wj(),this.toggleEnableAds())}Gj(){this.Pj.inTimeout=!0,this.qj.reset(this.controlData.timeBetweenAds)}Wj(){this.Pj.inTimeout=!0,this.qj.reset(this.controlData.minTimeBeforeAdBreak)}Jj(t,i){this.Pj.limitAdsOnMidRoll=this.controlData.midRollOnlyOnLongContent&&t===R.ProtoAdSlotsEnum.MidRoll&&(!i||i<Kh)}canEnableAds(){return(this.currentPlayerAdSlot!==R.ProtoAdSlotsEnum.MidRoll||!(this.Pj.limitAdsOnMidRoll||this.Pj.inTimeout&&this.od))&&super.canEnableAds()}startAds(){this.zj(),super.startAds()}contentChanged(){this.Pj.inTimeout=!1,this.Pj.limitAdsOnMidRoll=!0,this.qj.stop(),this.firstAdBreakStarted=!1,this.Hj=!1,this.zj(),super.contentChanged()}onAdStateChange(t,i,e){const s=this.Pj.limitAdsOnMidRoll;this.Jj(t,e),s!==this.Pj.limitAdsOnMidRoll&&this.toggleEnableAds(),t===this.currentPlayerAdSlot&&t===R.ProtoAdSlotsEnum.MidRoll||(this.Hj=!1,super.onAdStateChange(t,i))}contentPlaybackStateChanged(t){t?this.qj.start():this.qj.stop()}onAdImpression(t){super.onAdImpression(t),this.Qj=!this.od}onAdFinished(t,i=!1){this.Hj=!1,this.firstAdBreakStarted&&!this.Qj&&this.od&&!i&&this.zj(),super.onAdFinished(t,i)}viewabilityStateChanged(t,i=!1,e=!1){i||this.zj(),super.viewabilityStateChanged(t,i,e)}destroy(){this.qj.disable(),super.destroy()}}class ta extends si{constructor(){super(...arguments),this.Rf=D,this.Bf=d.r,this.jf=0}get type(){return this.uf.playerType}hf(){return new Jh(this,this.uf,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.sf,this.app)}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.b.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString("<cnx class='cnx-video-container'></cnx>"),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer)}addPlayerSize(){this.uf.playerSize.responsive?(this.$playerWrapper.appendChild(this.xf()),Object(E.a)(this.$playerWrapper,d.i.Responsive)):(this.setFixedSize(this.$experienceContainer),Object(E.a)(this.$playerWrapper,d.i.Fixed))}setFixedSize(t){Object(E.L)(t,{width:`${this.uf.playerSize.fixedWidth}px`,height:`${this.uf.playerSize.fixedHeight}px`})}pf(){return new Zh(this,this.isViewable(),{numberOfMidRolls:this.uf.midRollNumber,minTimeBeforeAdBreak:this.uf.minTimeBeforeFirstAd,timeBetweenAds:this.uf.timeBetweenAds,viewabilityPolicy:this.uf.adViewabilityPolicy,totalAdBreakLength:this.uf.outstreamSettings?this.uf.outstreamSettings.totalAdBreakLength:void 0,maxAdSlotDuration:this.sf.getMaxAdSlotDuration(),maxAdPodDuration:this.sf.getMaxAdPodDuration(),playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight},playerAdsSkippability:this.uf.adSkippability,midRollOnlyOnLongContent:this.uf.midRollOnlyOnLongContent},this.app)}}var ia;!function(t){t.PreRoll="pre-roll",t.MidRoll="mid-roll",t.PostRoll="post-roll"}(ia||(ia={}));var ea=ia;const sa=1200;class na{constructor(t,i,e,s,n=sa){this.Xj=t,this.Yj=i,this.Kj=e,this.Zj=s,this.tA=n,this.iA=null,this.eA=!1,this.sA=()=>{if(this.x_(),!this.eA&&this.Yj&&this.Yj.adInWin)return this.eA=!0,void this.nA(this.tA);this.Xj.startContent()}}destroy(){this.x_()}changeState(t){switch(t){case k.PrerollState:this.eA=!1,this.nA(this.Kj);break;case k.PostrollState:this.eA=!1,this.nA(this.Zj);break;default:this.iA&&this.x_()}}x_(){clearTimeout(this.iA),this.iA=null}nA(t){this.x_(),this.iA=setTimeout(this.sA,t)}}const ra="Video";class ha extends ta{constructor(){super(...arguments),this.events=Object.assign(Object.assign({},Mt.b),P),this.rA=!1,this.hA=!0,this.aA={[k.PlayingState]:()=>{this.Kd(h.ProtoAdSlotsEnum.MidRoll);this.gd.contentPlaybackStateChanged(!0)},[k.PrerollState]:()=>{this.Kd(h.ProtoAdSlotsEnum.PreRoll)},[k.PostrollState]:()=>{this.Kd(h.ProtoAdSlotsEnum.PostRoll)},[k.PausedState]:()=>{this.ph===h.ProtoAdSlotsEnum.PreRoll&&this.Kd(h.ProtoAdSlotsEnum.MidRoll)},[k.StoppedState]:()=>{this.ph===h.ProtoAdSlotsEnum.PostRoll&&this.uf.upNextMode!==R.ProtoPlayerUpNextMode.Stop?(this.Kd(h.ProtoAdSlotsEnum.MidRoll),this.qd()):(this.gd.onStop(),this.qd())}},this.oA=({payload:t})=>{t===k.PlayingState&&(this.unsubscribe(T.StateChanged,this.Xj,this.oA),this.mediator.publish(this,P.VideoStarted,{payload:this.getVideoDetails()}))},this.cA=t=>{const i=this.aA[t];return()=>{if(t!==k.PlayingState){const t=!1;this.gd.contentPlaybackStateChanged(t)}t===k.PausedState?this.vd=!0:this.vd=!1,i&&i()}},this.uA=()=>{this.lA.enterFullScreen().then(()=>{this.Xj.enterFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!0)}).catch(t=>{Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"BaseVideoExperience_enterFullscreen"})})},this.wf=()=>{this.Xj.exitFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!1),this.app.config.os.os===_t.b.Ios&&(this.rA=this.Xj.isIosFullscreen=!1,this.Kd(this.ph)),this.mediator.publish(this,Mt.c.FullscreenChanged,{payload:!1}),super.wf()},this.yf=()=>{this.app.config.os.os===_t.b.Ios&&(this.rA=this.Xj.isIosFullscreen=!0,this.gd.onStop()),this.mediator.publish(this,Mt.c.FullscreenChanged,{payload:!0}),super.yf()}}start(){try{super.start(),this.dA(),this.fA(this.Xj,this.adHandler),this.pA(),this.Xj.start(),this.Tf(this.Xj),this.vA()}catch(t){Object(n.a)({message:"BaseVideoExperience_Start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}changeVideo(t,i=!1){if(this.adHandler){if(this.adHandler.inImpression)this.adHandler.stopAd("changeVideo");else{const t=!0;this.xd(t)}this.adHandler.userInteraction(i)}this.Xj.setVideo(t)}play(t=!0){this.adHandler&&this.adHandler.inImpression?this.adHandler.play():this.Xj.play(t)}pause(t=!0){this.adHandler&&this.adHandler.inImpression?this.adHandler.pause():this.Xj.pause(t)}setNewVolume(t){super.setNewVolume(t),this.Xj.volume=t}getVolume(){return this.Xj.volume}get currentTime(){return this.Xj.currentTime}get duration(){return this.Xj.duration}getVideoDetails(){let t;return this.Xj.getCurrentVideoData(i=>{t=this.bA(i)}),t}toggleFullscreen(t){Object(v.a)(t)||(t=!this.lA.isFullscreen),this.lA.isFullscreen!==t&&(t?this.uA():this.lA.exitFullScreen())}showCaptions(){this.Xj.showCaptions()}hideCaptions(){this.Xj.hideCaptions()}toggleExpandButton(t){this.Xj.toggleExpandButton(t)}getPlaylistId(){return this.uf.playlistId}getQuality(){return this.Xj.getQuality()}setQuality(t){this.Xj.setQuality(t)}setAutoQuality(){this.Xj.setAutoQuality()}getAvailableQualities(){return this.Xj.getAvailableQualities()}destroy(){super.destroy(),this.mA.destroy(),this.Xj&&(this.Xj.destroy(),this.unsubscribeAll(this.Xj))}bA(t){return{id:t.id,title:t.title,description:t.description,duration:Object(v.d)(t.duration)?t.duration:this.Xj.duration,keywords:t.keywords,url:t.clickUrl?this.app.services.MacrosService.setupMacros(t.clickUrl):"",customFields:t.customFields}}Ud(){if(this.sd)return;this.rd||this.Nd();const t=ea[h.ProtoAdSlotsEnum[this.ph]];this.sd=!0,this.nd=!1;const i={adBreakPosition:t};this.ph===h.ProtoAdSlotsEnum.PostRoll&&(this.hd=!0),this.app.services.EventsStorageService.emitAdBreakStart(i)}Sd(){this.sd&&(this.sd=!1,this.app.services.EventsStorageService.emitAdBreakComplete(),this.hd&&(this.hd=!1,this.qd()))}$d(){this.nd||(this.sd&&this.Sd(),this.rd||this.Nd(),this.nd=!0,this.app.services.EventsStorageService.emitPlay())}Hd(){this.nd&&(this.nd=!1,this.app.services.EventsStorageService.emitPause())}Nd(){this.rd||(this.rd=!0,this.Xj.getCurrentVideoData(({title:t,id:i,sourceItemId:e,keywords:s,duration:n,customFields:r})=>{const h=this.Xj.streamFormat,a=ra,o=e||i;this.app.services.EventsStorageService.emitSessionStart({name:t,keywords:s,mediaId:o,length:n,streamFormat:h,customFieldList:r,feed:a})}))}qd(){this.rd&&(this.rd=!1,this.nd=!1,this.sd&&this.Sd(),this.app.services.EventsStorageService.emitSessionEnd())}zd(){this.rd&&(this.app.services.EventsStorageService.emitContentComplete(),this.uf.postRollBreak||this.qd())}yd(){super.yd(),this.Xj.hide()}jl(t,i=!1){super.jl(t,i)}eh(){super.eh(),this.Xj&&this.Xj.resize(this.breakPointsHandler.currentBreakpointClass)}resizeAdHandler(){this.adHandler&&this.adHandler.resizeAd(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.lA.isFullscreen?Et.a.Fullscreen:Et.a.Normal)}handleClose(){this.floatingModule&&this.floatingModule.isInFloating?(this.floatingModule.destroy(),this.pause(!1)):this.lA.isFullscreen?this.lA.exitFullScreen():this.triggerDestroy()}generateHTML(){super.generateHTML(),this.gA=this.app.services.GlobalDomUtilsService.createElementByString(`<img class="${d.b.ImagePlaceholder}">`),this.$playerWrapper.appendChild(this.gA)}yA(t){this.adHandler&&this.adHandler.updateFilterConfig(t)}pA(){this.subscribe(Ot[Ot.Volume],this.Xj,({payload:{volume:t}})=>{this.Jr(t),this.adHandler&&this.adHandler.setVolume(t)}),this.subscribe(O.NewVideo,this.Xj,()=>{this.subscribe(T.StateChanged,this.Xj,this.oA),this.Xj.getCurrentVideoData(t=>{const i={mediaId:t.id,mediaKeywords:t.keywords,mediaLanguage:t.languageId};this.yA(i),this.app.services.TrackingService.setNewMedia({mediaId:t.id,clickUrl:t.clickUrl});const e=t.getThumbnailUrl(this.$experienceContainer.clientWidth,this.$experienceContainer.clientHeight);this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(e),this.wA(e,t.altText),this.mediator.publish(this,T.MediaMetaUpdate,{payload:{title:t.title,description:t.description}})})}),this.subscribe(T.FirstFramePlayed,this.Xj,()=>{this.app.services.TimeLogService.add(this.app.config.playerId,ti.a.Content_FirstFramePlayed),this.app.services.TrackingService.setMediaStart(),this.Ff(),this.Nd()}),this.subscribe(T.StateChanged,this.Xj,({payload:t})=>{switch(this.mA.changeState(t),this.xA(t),t){case k.PlayingState:this.mediator.publish(this,Mt.d.Play,{payload:this.getVideoDetails()}),this.$d();break;case k.PausedState:this.mediator.publish(this,Mt.d.Pause,{payload:this.getVideoDetails()}),this.app.services.TrackingService.setSessionPlayback(!1),this.Hd();break;case k.StoppedState:this.app.services.TrackingService.setSessionPlayback(!1);break;case k.PrerollState:case k.PostrollState:this.app.services.TrackingService.setSessionPlayback(!0),this.Ud();break;case k.HiddenState:this.app.services.TrackingService.setSessionPlayback(!0),this.Hd(),this.Ud();break;default:this.app.services.TrackingService.setSessionPlayback(!0)}}),this.floatingModule&&this.subscribe(c.b.UserInteraction,this.Xj,this.Ed),this.adHandler&&this.subscribe(c.b.UserInteraction,this.Xj,({payload:{playback:t}})=>{!1===t&&this.gd.onStop(),this.adHandler.userInteraction(t)}),this.subscribe(c.b.UserInteraction,this.Xj,({payload:{clickedNext:t,clickedPrev:i}})=>{(t||i)&&this.qd()}),this.subscribe(T.ContentQuartiles,this.Xj,({payload:t})=>{let i;switch(this.app.services.TrackingService.trackMediaQuartile(t),t){case h.ProtoQuartilesEnum.First:i=P.VideoCompleted25;break;case h.ProtoQuartilesEnum.Second:i=P.VideoCompleted50;break;case h.ProtoQuartilesEnum.Third:i=P.VideoCompleted75;break;case h.ProtoQuartilesEnum.Fourth:i=P.VideoCompleted100}i&&this.mediator.publish(this,i,{payload:this.getVideoDetails()})}),this.subscribe(T.ContentQuartiles,this.Xj,({payload:t})=>{t===h.ProtoQuartilesEnum.Fourth&&this.zd()}),this.subscribe(Ot[Ot.OverlayClick],this.Xj,()=>this.mediator.publish(this,P.PlayerClicked,{payload:this.getVideoDetails()})),this.subscribe(_.Change,this.Xj,t=>this.mediator.publish(this,Mt.d.QualityChanged,t)),this.subscribe(O.PlayError,this.Xj,t=>{this.mediator.publish(this,Mt.d.PlayError,t),this.app.services.EventsStorageService.emitPlayError()}),this.subscribe(Ot[Ot.CaptionOn],this.Xj,()=>this.mediator.publish(this,P.SubtitlesVisibilityChanged,{payload:!0})),this.subscribe(Ot[Ot.CaptionOff],this.Xj,()=>this.mediator.publish(this,P.SubtitlesVisibilityChanged,{payload:!1})),this.subscribe(Ot[Ot.Volume],this.adHandler,({payload:{volume:t}})=>{this.Jr(t),this.Xj.volume=t}),this.subscribe(O.NewVideo,this.Xj,()=>{this.hA?(this.hA=!1,this.adHandler&&(this.adHandler.start(this.Xj.width,this.Xj.height,this.Xj.volume),this.gd.forceRecheck()),this.uf.adPlaybackMode===h.ProtoAdPlaybackMode.Autoplay&&this.uf.playbackMode!==h.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.uf.preRollBreak&&this.Kd(h.ProtoAdSlotsEnum.MidRoll)):this.nf()}),this.uf.isCloseButton&&this.subscribe(Ot[Ot.Close],this.Xj,()=>this.handleClose()),this.subscribe(c.b.GeneralUserInteraction,this.Xj,({payload:{type:t}})=>{this.app.services.TrackingService.trackMediaClick(t)})}xA(t){this.cA(t)()}tf(t){!this.rA&&this.adHandler&&this.adHandler.adStateChange(t,this.sf.getMaxAdSlotDuration())}if(t){const{duration:i}=this.Xj;this.gd.onAdStateChange(t,{maxAdPodDuration:this.sf.getMaxAdPodDuration(),maxAdSlotDuration:this.sf.getMaxAdSlotDuration()},i)}vA(){this.lA=new It(this,this.app.services.GlobalDomUtilsService,this.$playerContainer,this.app.config.os.os),this.kA()}kA(){this.subscribe(Ot[Ot.Expand],this.Xj,this.uA),this.subscribe(Ot[Ot.Collapse],this.Xj,()=>this.lA.exitFullScreen()),this.subscribe(St.exit,this.lA,this.wf),this.subscribe(St.enter,this.lA,this.yf)}wA(t,i){this.gA.style.display="none",this.gA.onload=()=>{this.gA.style.display="block"},Object(v.h)(t)&&this.gA.setAttribute("src",t),this.gA.setAttribute("alt",i)}fA(t,i){const{preRollBreak:e,postRollBreak:s}=this.uf;this.mA=new na(t,i,e,s)}}var aa,oa;!function(t){t[t.StateChanged=0]="StateChanged",t[t.ContentEnd=1]="ContentEnd"}(aa||(aa={}));class ca{constructor(t,i,e,s,n,r=!1,h){this.mediator=t,this.SA=i,this.OA=e,this._A=s,this.jA=n,this.AA=r,this.IA=h,this.CA=!1,this.TA=!1,this.PA=!1,this.MA=!1,this.EA=500,this.LA=!1,this.RA()}RA(){this.BA=k.StoppedState,this.DA=k.StoppedState,this.IA&&(this.CA=!0)}FA(t){this.BA!==t&&(this.DA=this.BA,this.BA=t,this.mediator.publish(this,aa[aa.StateChanged],{payload:this.BA}))}VA(t){return this.BA===t}UA(){this.FA(k.PrerollState),this.CA=!0}NA(){this.$A===k.PlayingState?this.HA():this.qA()}zA(){this.FA(k.PostrollState)}GA(){this.$A===k.PausedState?(this.PA=!0,this.stop()):(this.PA=!1,this.mediator.publish(this,aa[aa.ContentEnd]))}WA(t){t.then(()=>{this.LA=!0,this.BA!==k.HiddenState&&this.FA(k.PlayingState)}).catch(()=>{this.BA!==k.HiddenState&&(this.OA.isPlayPending()&&this.LA?this.FA(k.PlayingState):this.FA(k.StoppedState))})}qA(){this.OA.pause(),this.FA(k.PausedState)}HA(){this.FA(k.BufferingState),this.SA.getCurrentVideoData(()=>{this.VA(k.HiddenState)||this.$A===k.PausedState||this.WA(this.OA.play())})}JA(){this.BA!==k.PostrollState&&(this.CA=!1)}resume(){this.DA&&this.FA(this.DA)}play(){this.$A=k.PlayingState,this.VA(k.PlayingState)||this.VA(k.PrerollState)||this.VA(k.PostrollState)||this.VA(k.HiddenState)||(!this._A||this.CA||this.TA?this.VA(k.StoppedState)&&this.PA?this.GA():this.HA():this.UA())}isInPlayingState(){return this.VA(k.PlayingState)}setVideo(t){if(this.OA.pause(),this.JA(),this.FA(k.BufferingState),this.QA&&this.QA.isPending)try{this.QA.reject(),this.QA=null}catch(t){this.QA=null}const i=this.SA.setVideo(t);this.QA=new jt.a,this.QA.resolve(i),this.QA.promise.then(t=>{this.QA=null,this.OA.setSource(t).then(()=>this.play())})}pause(t=!1){this.$A=k.PausedState,this.VA(k.PrerollState)||this.VA(k.PostrollState)||this.VA(k.HiddenState)||this.qA()}pauseToggle(){if(this.VA(k.PausedState)||this.VA(k.PlayingState))return this.VA(k.PausedState)&&this.MA?(this.MA=!1,void this.play()):this.VA(k.PlayingState)?(this.MA=!0,void this.pause()):void 0}stop(){this.OA.pause(),this.FA(k.StoppedState)}hide(){this.OA.hide(),this.OA.pause(),this.FA(k.HiddenState)}show(t=!0){this.VA(k.HiddenState)&&(this.OA.show(),this.DA!==k.PostrollState?t&&(this.$A===k.PlayingState?this.HA():this.qA()):this.GA())}handleVideoEnd(){this.jA&&!this.TA?this.zA():this.GA()}onEnterBuffering(){this.VA(k.PlayingState)&&this.FA(k.BufferingState)}onExitBuffering(){this.VA(k.BufferingState)&&(this.$A===k.PlayingState?this.HA():this.qA())}getCurrentState(){return this.BA}replay(){this.OA.currentTime=0,!this._A||this.TA?this.HA():this.UA()}exitRollBreak(){this.BA!==k.PostrollState?this.NA():this.GA()}onFullScreenChange(t){this.AA&&(this.TA=t,t||setTimeout(()=>{this.$A===k.PlayingState?(this.pause(),this.play()):this.pause()},this.EA))}}class ua{constructor(t){this.XA=[],this.XA=t,this.YA(0)}KA(){this.ZA(this.tI).getMetadata()}YA(t){this.tI=t,this.KA()}ZA(t){return this.XA[t]}setAvailableQualitiesForSourceMeta(t,i){t.setAvailableQualities(i)}get nextVideoIndex(){return this.tI===this.XA.length-1?0:this.tI+1}get prevVideoIndex(){return 0===this.tI?this.XA.length-1:this.tI-1}get currentVideoIndex(){return this.tI}getCurrentVideoData(t){this.ZA(this.tI).getMetadata(t)}getVideoData(t,i){this.ZA(t).getMetadata(i)}setVideo(t){return new Promise(i=>{this.ZA(t).getMetadata(e=>{this.YA(t),i(e)})})}get length(){return this.XA.length}destroy(){this.XA=[]}}!function(t){t.Autoplay="autoplay",t.Autochain="autochain",t.UserInitiated="user initiated"}(oa||(oa={}));class la{constructor(t){this.streamFormat=oa.Autoplay,this.isMuted=!0,t===h.ProtoPlayerPlaybackModeEnum.ClickToPlay&&(this.streamFormat=oa.UserInitiated)}get streamFormatValue(){return`${this.streamFormat}${this.isMuted?" muted":""}`}}const da={[h.ProtoVideoQuality.High1080p]:{quality:x.Strict,height:1080},[h.ProtoVideoQuality.High720p]:{quality:x.Strict,height:720},[h.ProtoVideoQuality.Medium360p]:{quality:x.Strict,height:360}};class fa extends o.a{constructor(t,i,e,s,n){super(),this.mediator=t,this.uf=i,this.Lb=e,this.Pb=s,this.jb=n,this.iI=!1,this.eI=!0,this.sI(),this.nI(),this.rI(),this.hI=new la(this.uf.playbackMode)}start(){this.Kb()}get streamFormat(){return this.hI.streamFormatValue}play(t=!1){t&&(this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}}),this.hI.streamFormat=oa.UserInitiated),this.aI.play()}pause(t=!1){t&&this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}}),this.aI.pause(t)}setVideo(t){this.aI.setVideo(t)}show(t=!0){this.aI.show(t)}hide(){this.aI.hide()}get isHidden(){return this.aI.getCurrentState()===k.HiddenState}enterFullscreen(){this.mu=!0,this.oI.expand(),this.aI.onFullScreenChange(!0)}exitFullscreen(){this.mu=!1,this.oI.collapse(),this.aI.onFullScreenChange(!1)}resize(t){this.oI.onResize(t)}get width(){return this.OA.width}get height(){return this.OA.height}get volume(){return this.OA.volume}set volume(t){this.OA.volume=t,this.oI.updateVolume(t),this.hI.isMuted=t<=0}getCurrentVideoData(t){return this.SA.getCurrentVideoData(t)}getVideoData(t,i){return this.SA.getVideoData(t,i)}get isIosFullscreen(){return this.OA.isIosFullscreen}set isIosFullscreen(t){this.OA.isIosFullscreen=t}get currentTime(){return this.OA.currentTime}get duration(){return this.OA.duration}showCaptions(){this.OA.showCaptions(),this.oI.toggleCaptionState(!0),this.mediator.publish(this,Ot[Ot.CaptionOn])}hideCaptions(){this.OA.hideCaptions(),this.oI.toggleCaptionState(!1),this.mediator.publish(this,Ot[Ot.CaptionOff])}toggleExpandButton(t){this.oI.toggleExpandButtonDisplay(t)}getQuality(){let t;return this.SA.getCurrentVideoData(i=>{t=i.getClosestSourceQuality(this.OA.currentQualitySettings.height).videoHeight}),t}setQuality(t){this.SA.getCurrentVideoData(i=>{const e=i.getClosestSourceQuality(t);this.OA.setQuality({height:e.videoHeight,quality:x.Strict})})}setAutoQuality(){this.OA.setQuality({height:this.OA.height,quality:x.Auto})}getAvailableQualities(){let t=[];return this.SA.getCurrentVideoData(i=>{t=i.getAvailableQualities().map(t=>t.videoHeight)}),t}stop(){this.aI&&this.aI.stop()}resume(){this.aI&&this.aI.resume()}startContent(){this.aI.exitRollBreak()}destroy(){this.oI.destroy(),this.SA.destroy(),this.OA.destroy()}cI(){this.SA.getCurrentVideoData(t=>{this.OA.setSource(t),this.oI.updateCurrentVideo(t),this.uI(t,this.OA.currentQualitySettings),this.uf.closedCaptionDefault?this.showCaptions():this.hideCaptions()})}lI(){this.subscribe(aa[aa.StateChanged],this.aI,({payload:t})=>{this.oI.changeState(t),this.mediator.publish(this,T.StateChanged,{payload:t})}),this.subscribe(aa[aa.ContentEnd],this.aI,()=>{this.dI()})}fI(){this.subscribe(Ot[Ot.Play],this.oI,()=>{if(this.eI&&this.uf.playbackMode===h.ProtoPlayerPlaybackModeEnum.ClickToPlay){const t=this.uf.soundMode===h.ProtoPlayerSoundMode.On?1:0;this.volume=t,this.mediator.publish(this,Ot[Ot.Volume],{payload:{volume:t}})}this.eI=!1,this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}}),this.play()}),this.subscribe(Ot[Ot.Volume],this.oI,({payload:t})=>{this.OA.volume=t,this.hI.isMuted=t<=0,this.mediator.publish(this,c.b.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,Ot[Ot.Volume],{payload:{volume:t}})}),this.subscribe(Ot[Ot.Pause],this.oI,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}});this.pause(!0)}),this.subscribe(Ot[Ot.Seek],this.oI,({payload:t})=>{this.OA.forceCurrentTime(t)}),this.subscribe(Ot[Ot.SeekingStart],this.oI,()=>{this.aI.pauseToggle()}),this.subscribe(Ot[Ot.SeekingStopped],this.oI,()=>{this.aI.pauseToggle()}),this.subscribe(Ot[Ot.OverlayClick],this.oI,()=>{this.SA.getCurrentVideoData(t=>{Object(v.h)(t.clickUrl)&&(this.uf.disableClickUrl||(this.Lb.services.MacrosService.setVideoTime(this.OA.currentTime),this.Lb.services.GlobalDomUtilsService.open(this.Lb.services.MacrosService.setupMacros(t.clickUrl),At.c.Blank)),this.mediator.publish(this,c.b.GeneralUserInteraction,{payload:{type:h.ProtoMediaClickTypeEnum.UrlClick}})),this.mediator.publish(this,Ot[Ot.OverlayClick])})}),this.subscribe(Ot[Ot.Expand],this.oI,()=>{this.mediator.publish(this,Ot[Ot.Expand])}),this.subscribe(Ot[Ot.Collapse],this.oI,()=>{this.mediator.publish(this,Ot[Ot.Collapse])}),this.subscribe(Ot[Ot.Quality],this.oI,({payload:t})=>{this.OA.setQuality(t)}),this.subscribe(Ot[Ot.Close],this.oI,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1,isFullscreenClose:this.mu}}),this.mediator.publish(this,Ot[Ot.Close])}),this.subscribe(Ot[Ot.CaptionOn],this.oI,()=>{this.showCaptions()}),this.subscribe(Ot[Ot.CaptionOff],this.oI,()=>{this.hideCaptions()}),this.subscribe(Ot[Ot.CaptionOn],this.OA,()=>{this.oI.toggleCaptionState(!0)}),this.subscribe(Ot[Ot.CaptionOff],this.OA,()=>{this.oI.toggleCaptionState(!1)}),this.subscribe(Ot[Ot.CaptionUpdate],this.OA,({payload:t})=>{this.oI.updateCaptions(t)}),this.subscribe(c.b.UserInteraction,this.oI,()=>{this.mediator.publish(this,Ot[c.b.UserInteraction],{payload:{videoIndex:this.SA.currentVideoIndex}})}),this.relay(c.b.GeneralUserInteraction,this.oI,this,this.mediator)}JA(t=!0){t&&(this.SA.getCurrentVideoData(t=>{this.pI(t),this.oI.updateCurrentVideo(t),this.uI(t,this.OA.currentQualitySettings)}),this.oI.updateCaptions()),this.mediator.publish(this,O.NewVideo,{payload:{videoIndex:this.SA.currentVideoIndex}}),this.iI=!1,this.vI()}Kb(){this.fI(),this.bI(),this.mI(),this.gI()}yI(){return{logoPosition:this.uf.logoPosition,logoUrl:this.uf.logoUrl,isMobile:this.Lb.config.isMobile,hasUpNext:this.uf.upNextMode===R.ProtoPlayerUpNextMode.Next,accentColor:this.uf.accentColor||d.l.Connatix,iconsColor:this.uf.iconsColor||d.l.Icons,tooltipBackgroundColor:this.uf.tooltipBackgroundColor||d.l.Connatix,tooltipTextColor:this.uf.tooltipTextColor||d.l.Icons,closeButtonMode:this.uf.closeButtonMode,floatingCloseButtonMode:this.uf.floatingCloseButtonMode,isCloseButton:this.uf.isCloseButton,uiComponentsVisibility:this.uf.uiComponentsVisibility,sharingDestinations:this.uf.sharingDestinations,closedCaptionDefault:this.uf.closedCaptionDefault,alwaysDisplayControls:this.uf.alwaysDisplayControls,os:this.Lb.config.os.os}}rI(){const t={browser:this.Lb.config.browser.browserType,os:this.Lb.config.os.os,osVersion:this.Lb.config.os.osVersion},i=this.uf.soundMode===h.ProtoPlayerSoundMode.On&&this.uf.playbackMode!==h.ProtoPlayerPlaybackModeEnum.ClickToPlay?1:0;this.wI=da[this.uf.videoQuality],this.xI(t,i),this.subscribe(_.Loaded,this.OA,({payload:{qualityList:t,videoMeta:i}})=>{this.SA.setAvailableQualitiesForSourceMeta(i,t.qualityList),this.oI.updateCurrentVideo(i)}),this.subscribe(O.Buffering,this.OA,()=>{this.aI.onEnterBuffering()}),this.subscribe(O.Buffered,this.OA,()=>{this.aI.onExitBuffering()})}uI(t,i){const e=t.getAvailableQualities();Object(l.h)(e)&&this.oI.updateQuality(t,i)}pI(t){this.Lb.services.MacrosService.setVideoDuration(t.duration),this.Lb.services.MacrosService.setVideoTitle(t.title),this.Lb.services.MacrosService.setVideoDescription(t.description),this.Lb.services.MacrosService.setVideoUrl(t.clickUrl),this.Lb.services.MacrosService.setVideoId(t.id)}nI(){this.SA=new ua(this.uf.playlist),1===this.SA.length&&this.oI.togglePlaylistControls(!1)}sI(){const t=this.yI();this.kI(t),this.oI.updateVolume(this.uf.soundMode===h.ProtoPlayerSoundMode.On?1:0)}bI(){this.relay(O.PlayError,this.OA,this,this.mediator),this.subscribe(O.NewVideo,this.OA,()=>{this.JA()})}mI(){this.subscribe(w.Timeupdate,this.OA,({payload:t})=>{this.oI.updateDuration(this.OA.currentTime,this.OA.duration),this.Lb.services.MacrosService.setVideoTime(this.OA.currentTime),!this.iI&&t&&(this.iI=!0,this.mediator.publish(this,T.FirstFramePlayed)),this.OA.currentTime!==this.SI&&this.OI(t),this.SI=this.OA.currentTime}),this.subscribe(w.Ended,this.OA,()=>{this.aI.handleVideoEnd()})}gI(){this.subscribe(_.CurrentQuality,this.OA,({payload:t})=>{this.SA.getCurrentVideoData(i=>{this.uI(i,t)})}),this.subscribe(_.Change,this.OA,({payload:t})=>{this.SA.getCurrentVideoData(i=>{const e=i.getAvailableQualities();if(Object(l.h)(e)){const e=i.getClosestSourceQuality(t);this.wI={quality:x.Strict,height:e.videoHeight},this.mediator.publish(this,_.Change,{payload:e.videoHeight})}})})}}var pa=e(114),va=e.n(pa);class ba{constructor(t,i=!1){this.settings=t,this._I=i,this.logoGeneralPosition={top:[R.ProtoLogoPositionMode.TopLeft,R.ProtoLogoPositionMode.TopRight],bottom:[R.ProtoLogoPositionMode.BottomLeft,R.ProtoLogoPositionMode.BottomRight],center:[R.ProtoLogoPositionMode.Center],controlbar:[R.ProtoLogoPositionMode.ControlBar]},this.jI=(t,i="")=>`<cnx class="cnx-ui-btn ${i}">[[${t}]]</cnx>`}getLogoTemplate(t){if(t.indexOf(this.settings.logoPosition)>-1){if(this.settings.logoPosition===R.ProtoLogoPositionMode.ControlBar)return`<cnx class="cnx-ui-btn cnx-d-sm-none cnx-d-md-none cnx-hide-on-volume-hover">[[${ci.LogoComponent}]]</cnx>`;if(!1===this._I||this.settings.logoPosition!==R.ProtoLogoPositionMode.BottomLeft)return`<cnx class="cnx-logo-bar">[[${ci.LogoComponent}]]</cnx>`}return""}get castButton(){return this.settings.uiComponentsVisibility.casting?this.jI(ci.CastButton):""}get shareButton(){return Object(l.h)(this.settings.sharingDestinations)?this.jI(ci.ShareButton):""}expandButton(t){return!(this.settings.isInApp&&this.settings.os===_t.b.Android)&&this.settings.uiComponentsVisibility.expandButton?this.jI(ci.ExpandButton,t):""}settingsButton(){return this.settings.isInApp?"":`<cnx class="cnx-ui-btn cnx-d-md-none">[[${ci.SettingsButton}]]</cnx>`}get muteWatermark(){return this.settings.uiComponentsVisibility.muteWatermark&&this.settings.logoPosition!==R.ProtoLogoPositionMode.BottomLeft?va.a:""}get closeButton(){return this.settings.isCloseButton?`<cnx class="cnx-ui-btn cnx-close-button">[[${ci.CloseButton}]]</cnx>`:""}get upNextBox(){return this.settings.hasUpNext?`[[${ci.UpNextBox}]]`:""}get livePoster(){return this._I?`[[${ci.LivePoster}]]`:""}getLogoPositionClass(t){return t===R.ProtoLogoPositionMode.TopRight&&this.settings.closeButtonMode?"":this.settings.logoPosition===t?"logo-right":""}isAlwaysOn(){return this.settings.closeButtonMode===h.ProtoPlayerCloseButtonMode.AlwaysOn}get desktopTemplate(){return`\n            <cnx class="cnx-ui-gradient-top"></cnx>\n            [[${ci.QueStateOverlay}]]\n            <cnx class="cnx-ui-head cnx-d-sm-none cnx-ui-bar cnx-lock-bar-on-hover ${this.getLogoPositionClass(R.ProtoLogoPositionMode.TopRight)}">\n                <cnx class="cnx-ui-head-buttons">\n                    ${this.castButton}\n                    ${this.shareButton}\n                    ${this.closeButton}\n                </cnx>\n                ${this.getLogoTemplate(this.logoGeneralPosition.top)}\n            </cnx>\n            <cnx class="cnx-ui-spacer cnx-d-sm-none"></cnx>\n            <cnx class="cnx-ui-content cnx-ui-bar cnx-center-align"><cnx class="cnx-ui-btn">[[${ci.BigPlayButton}]]</cnx></cnx>\n            <cnx class="cnx-ui-spacer cnx-d-sm-none"></cnx>\n            <cnx class="cnx-ui-content cnx-ui-bar cnx-d-sm-none ${this.getLogoPositionClass(R.ProtoLogoPositionMode.BottomRight)}">\n                ${this.muteWatermark}\n                ${this.upNextBox}\n                ${this.getLogoTemplate(this.logoGeneralPosition.bottom)}\n                [[${ci.CaptionComponent}]]\n            </cnx>\n            <cnx class="cnx-ui-progress cnx-ui-bar cnx-d-sm-none">\n                ${this.beforeProgressBarLabel}\n                <cnx class="cnx-ui-progress-bar">[[${ci.ProgressBar}]]</cnx>\n                ${this.afterProgressBarLabel}\n            </cnx>\n            <cnx class="cnx-ui-buttons cnx-ui-bar cnx-lock-bar-on-hover">\n                <cnx class="cnx-ui-btn cnx-hide-on-single-video">[[${ci.PreviousButton}]]</cnx>\n                <cnx class="cnx-ui-btn">[[${ci.PlayButton}]]</cnx>\n                <cnx class="cnx-ui-btn cnx-hide-on-single-video">[[${ci.UpNextButton}]]</cnx>\n                <cnx class="cnx-d-sm-none cnx-d-md-none">[[${ci.VolumeControls}]]</cnx>\n                <cnx class="cnx-ui-btn cnx-d-sm-none cnx-d-lg-none cnx-d-xl-none">[[${ci.VolumeButton}]]</cnx>\n                <cnx class="cnx-ui-spacer cnx-d-sm-none"></cnx>\n                <cnx class="cnx-ui-btn cnx-d-sm-none cnx-d-md-none cnx-hide-on-volume-hover">[[${ci.CaptionButton}]]</cnx>\n                ${this.settingsButton()}\n                ${this.expandButton("cnx-d-sm-none cnx-hide-on-volume-hover")}\n                ${this.getLogoTemplate(this.logoGeneralPosition.controlbar)}\n            </cnx>\n            <cnx class="cnx-ui-gradient-bottom"></cnx>\n    `.trim()}get mobileTemplate(){return`\n            [[${ci.QueStateOverlay}]]\n            <cnx class="cnx-ui-head cnx-d-sm-none cnx-ui-bar ${this.getLogoPositionClass(R.ProtoLogoPositionMode.TopRight)}">\n                <cnx class="cnx-ui-head-buttons">\n                    ${this.castButton}\n                    ${this.shareButton}\n                    <cnx class="cnx-ui-btn ${d.g.ContextController}">[[${ci.MoreButton}]]</cnx>\n                    ${this.closeButton}\n                </cnx>\n                ${this.getLogoTemplate(this.logoGeneralPosition.top)}\n            </cnx>\n            <cnx class="cnx-ui-spacer cnx-d-sm-none"></cnx>\n            <cnx class="cnx-ui-content cnx-ui-bar cnx-center-align">\n                <cnx class="cnx-ui-btn">[[${ci.BigPlayButton}]]</cnx>\n            </cnx>\n            <cnx class="cnx-ui-content-mobile cnx-ui-bar cnx-vertical-align">\n                <cnx class="cnx-ui-spacer"></cnx>\n                <cnx class="cnx-ui-btn cnx-hide-on-single-video">[[${ci.PreviousButton}]]</cnx>\n                <cnx class="cnx-ui-spacer"></cnx>\n                <cnx class="cnx-ui-btn">[[${ci.PlayButton}]]</cnx>\n                <cnx class="cnx-ui-spacer"></cnx>\n                <cnx class="cnx-ui-btn cnx-hide-on-single-video">[[${ci.UpNextButton}]]</cnx>\n                <cnx class="cnx-ui-spacer"></cnx>\n            </cnx>\n            <cnx class="cnx-ui-spacer cnx-d-sm-none"></cnx>\n            <cnx class="cnx-ui-content cnx-ui-bar cnx-d-sm-none">\n                ${this.muteWatermark}\n                ${this.upNextBox}\n            </cnx>\n            <cnx class="cnx-mobile-captions-bar cnx-ui-bar ">\n                [[${ci.CaptionComponent}]]\n            </cnx>\n            <cnx class="cnx-ui-buttons cnx-ui-bar cnx-d-sm-none ">\n                <cnx class="cnx-ui-btn">[[${ci.VolumeButton}]]</cnx>\n                <cnx class="cnx-ui-progress-bar">[[${ci.ProgressBar}]]</cnx>\n                <cnx class="cnx-ui-btn cnx-d-md-none cnx-d-lg-none">[[${ci.CaptionButton}]]</cnx>\n                ${this.settingsButton()}\n                ${this.expandButton()}\n                ${this.getLogoTemplate(this.logoGeneralPosition.controlbar)}\n                ${this.liveBottomLogoIfNeeded}\n            </cnx>\n        `.trim()}get template(){const t=this.settings.isMobile?d.g.Mobile:"",i=this.settings.isMobile?this.mobileTemplate:this.desktopTemplate;return`<cnx class="cnx-ui cnx-ui-video ${this.isLiveFlag} ${t}">\n                    ${this.livePoster}\n                    ${i}\n                    [[${ci.QualityMenu}]]\n                    [[${ci.ContextMenu}]]\n                    [[${ci.ElementsSettingsMenu}]]\n                    [[${ci.Loader}]]\n                </cnx>`.trim()}get beforeProgressBarLabel(){return this._I?`[[${ci.LiveIcon}]]`:`<cnx class="cnx-ui-progress-label cnx-d-md-none"><cnx-span>[[${ci.ElapsedTimeLabel}]]</cnx-span></cnx>`}get afterProgressBarLabel(){return this._I?'<cnx class="cnx-ui-progress-label-live cnx-d-md-none"></cnx>':`<cnx class="cnx-ui-progress-label cnx-d-md-none"><cnx-span>[[${ci.TotalDurationLabel}]]</cnx-span></cnx>`}get liveBottomLogoIfNeeded(){return this._I&&this.settings.logoPosition===R.ProtoLogoPositionMode.BottomRight?`<cnx class="cnx-live-bottom-logo">[[${ci.LogoComponent}]]</cnx>`:""}get isLiveFlag(){return this._I?"cnx-live":""}}class ma extends gi{onClick(){this.context.mediator.publish(this.context,Ot[Ot.OverlayClick])}initState(){super.initState(),this.context.overlayModule.showUiControls()}exitState(){super.exitState()}}class ga extends wi{onClick(){}initState(){super.initState(),this.context.overlayModule.disableMouseMove(),this.context.overlayModule.disableHover(),this.context.overlayModule.removeOverlayClickEvents(),this.context.overlayModule.showUiControls(!1)}exitState(){super.exitState(),this.context.overlayModule.enableMouseMove(),this.context.overlayModule.addOverlayClickEvents(),this.context.overlayModule.enableHover()}}class ya extends o.a{constructor(t,i,e,s,n,r=!1){super(),this.mediator=t,this.up=i,this.AI=e,this.II=s,this.pc=n,this.Fn=r,this.CI=!1,this.TI=3e3,this.MI=!1,this.EI=t=>{"margin-top"!==t.propertyName&&"margin"!==t.propertyName&&"margin-bottom"!==t.propertyName||this.mediator.publish(this,Ot[Ot.UIShowStart])},this.LI=t=>{"margin-top"!==t.propertyName&&"margin"!==t.propertyName&&"margin-bottom"!==t.propertyName||this.mediator.publish(this,Ot[Ot.UIEndShowHide])},this.RI=()=>{this.AI&&(this.AI.show(),Object(E.i)(this.up)),Object(E.t)(this.up,d.j.Paused)||this.showUiControls()},this.BI=()=>{this.DI(this.TI)},this.FI=()=>{this.Fn&&this.CI?this.showUiControls():this.mediator.publish(this,Ot[Ot.OverlayClick])},this.Ju=t=>{"transform"===t.propertyName&&(this.AI&&this.AI.hide(),this.up.removeEventListener("transitionend",this.Ju))},this.VI=()=>{this.showUiControls()},this.addOverlayClickEvents=()=>{this.unsubscribe(ot.a[ot.a.Click],this.pc,this.FI),this.subscribe(ot.a[ot.a.Click],this.pc,this.FI)},this.removeOverlayClickEvents=()=>{this.unsubscribe(ot.a[ot.a.Click],this.pc,this.FI)},this.enableMouseMove=()=>{this.II||this.Fn||this.up.addEventListener("mousemove",this.VI)},this.disableMouseMove=()=>{this.Fn||this.up.removeEventListener("mousemove",this.VI)},this.enableHover=()=>{this.II||(this.Fn?this.up.addEventListener("touchstart",this.RI):(this.up.addEventListener("mouseenter",this.RI),this.up.addEventListener("mouseleave",this.BI)))},this.disableHover=()=>{this.Fn?this.up.removeEventListener("touchstart",this.RI):(this.up.removeEventListener("mouseenter",this.RI),this.up.removeEventListener("mouseleave",this.BI)),clearTimeout(this.UI)},i.addEventListener("transitionend",this.LI),i.addEventListener("transitionstart",this.EI),this.Fn||this.NI(i)}NI(t){const i=t.getElementsByClassName("cnx-lock-bar-on-hover");Object(l.c)(i).forEach(t=>{t.addEventListener("mouseenter",()=>{this.uiSticky=!0}),t.addEventListener("mouseleave",()=>{this.uiSticky=!1})})}DI(t){clearTimeout(this.UI),this.UI=setTimeout(()=>{this.hideUiControls()},t)}showUiControls(t=!0){if(t&&!this.II&&this.DI(this.TI),this.Fn){const t=Object(E.t)(this.up,d.g.ShowControls);this.CI=!t}!0!==this.$I&&(this.$I=!0,this.up.removeEventListener("transitionend",this.Ju),Object(E.a)(this.up,d.g.ShowControls),this.AI&&this.AI.show())}hideUiControls(){!1===this.$I||this.MI||(this.$I=!1,this.mediator.publish(this,Ot[Ot.UIHideStart]),this.AI&&this.up.addEventListener("transitionend",this.Ju),Object(E.H)(this.up,d.g.ShowControls))}start(){this.pc.register(this.up,this,this.pc),this.relay(ot.a[ot.a.Scroll],this.pc,this,this.mediator),this.enableHover(),this.addOverlayClickEvents()}destroy(){this.disableHover(),this.disableMouseMove(),this.unsubscribeAll(this.pc),this.pc.unregisterAll(this),clearTimeout(this.UI)}set uiSticky(t){this.MI=t,!1!==t||this.II||this.DI(this.TI)}}class wa{constructor(t){this.HI=t}qI(t){return this.HI.filter(i=>t.instance!==i.instance)}zI(t){return this.HI.find(({name:i})=>t===i)}GI(t){t.forEach(({instance:t})=>{t.isOpen&&t.close()})}toggleContextMenu(t,i={}){const e=this.zI(t);if(e.instance.isOpen)return e.instance.close(),!1;{const{targetCoordinates:t,holdPause:s}=i,n=t||e.instance.getAnchorCoordinatesTo(e.linkedComponent);return e.instance.open(n,s),this.GI(this.qI(e)),!0}}isAnyContextMenuOpen(){return!!this.HI.find(({instance:t})=>t.isOpen)}closeContextMenu(t){const i=this.zI(t).instance;i.isOpen&&i.close()}closeAllContextMenus(){this.GI(this.HI)}}class xa extends oi{onClick(){}initState(){this.context.$uiContainer.classList.add(d.j.Loading);const t=this.context.getComponent(ci.Loader);t&&t.show()}exitState(){this.context.$uiContainer.classList.remove(d.j.Loading);const t=this.context.getComponent(ci.Loader);t&&t.hide()}}class ka extends ga{initState(){super.initState(),this.context.overlayModule.hideUiControls()}exitState(){super.exitState()}}class Sa extends oi{onClick(){}initState(){Object(E.u)(this.context.$uiContainer)}exitState(){Object(E.M)(this.context.$uiContainer)}}class Oa extends oi{onClick(){}initState(){this.context.$uiContainer.classList.add(d.j.Preroll),this.context.getComponent(ci.QueStateOverlay).show();const t=this.context.getComponent(ci.UpNextBox);t&&t.hide()}exitState(){this.context.$uiContainer.classList.remove(d.j.Preroll),this.context.getComponent(ci.QueStateOverlay).hide()}}class _a extends Ti{constructor(t,i,e,s,n,r={},h,a){super(t,s,i,n,new js(i,e,s,r,a)),this.mediator=t,this.globalDomUtilsService=i,this.interactionService=e,this.$container=s,this.settings=r,this.appId=h,this.cp={[k.PlayingState]:new ma(this),[k.PausedState]:new ga(this),[k.BufferingState]:new xa(this),[k.StoppedState]:new ka(this),[k.HiddenState]:new Sa(this),[k.PrerollState]:new Oa(this),[k.PostrollState]:new Oa(this)},this.ot=0,this.WI=null,this.JI=2e3,this.QI=t=>{if(this.jb===d.r.Sm)return;if(t.preventDefault(),!this.getComponent(ci.ContextMenu))return;clearTimeout(this.WI),this.XI.closeAllContextMenus();const i={targetCoordinates:{clientX:t.pageX,clientY:t.pageY,height:0,width:0}};this.XI.toggleContextMenu(ci.ContextMenu,i),this.WI=setTimeout(()=>{this.XI.closeContextMenu(ci.ContextMenu)},this.JI)},this.YI=()=>{this.jp.disableTooltips()},this.KI=()=>{this.jp.enableTooltips()},this.FI=()=>{this.XI.isAnyContextMenuOpen()?this.XI.closeAllContextMenus():this.currentState.onClick()},this.ZI=()=>{this.XI.closeAllContextMenus()},this.tC=t=>{t.preventDefault()},this.jb=a}iC(){const t=`id_${this.appId}`;this.$uiContainer.id=t;const i=`\n            #${t} .${d.f.Icons} {\n                fill: ${this.settings.iconsColor};\n                background-color: ${this.settings.iconsColor};\n            }\n            #${t} .${d.f.AccentColor} {\n                fill: ${this.settings.accentColor};\n                background-color: ${this.settings.accentColor};\n                color: ${this.settings.accentColor};\n                stroke: ${this.settings.accentColor};\n            }\n            #${t} svg.${d.f.AccentColor} {\n                fill: ${this.settings.accentColor}!important;\n                background-color: ${this.settings.accentColor};\n                color: ${this.settings.accentColor};\n                stroke: ${this.settings.accentColor};\n            }\n            #${t} .${d.f.TooltipText} {\n                color: ${this.settings.tooltipTextColor};\n            }\n            #${t} .${d.f.TooltipBackground} {\n                background-color: ${this.settings.tooltipBackgroundColor};\n            }\n            @keyframes ${t}-bar {\n                1% {\n                  fill: transparent; transform: scaleY(1)\n                }\n                30% {fill: ${this.settings.accentColor}; transform: scaleY(1.1)}\n                60% {fill: transparent; transform: scaleY(1)}\n                100% {fill: transparent; transform: scaleY(1)}\n            }\n\n            #${t} .cnx-ui-loader polygon {\n                animation-name: ${t}-bar;\n            }\n        `.trim();this.globalDomUtilsService.addCssString(i)}eC(){const t=[],i=this.getComponent(ci.ElementsSettingsMenu);i&&t.push({instance:i,linkedComponent:this.getComponent(ci.MoreButton),name:ci.ElementsSettingsMenu});const e=this.getComponent(ci.QualityMenu);e&&t.push({instance:e,linkedComponent:this.getComponent(ci.SettingsButton),name:ci.QualityMenu});const s=this.getComponent(ci.ContextMenu);s&&t.push({instance:s,name:ci.ContextMenu}),this.XI=new wa(t)}sC(){this.overlayModule=new ya(this,this.$uiContainer,this.getComponent(ci.ProgressBar),this.settings.alwaysDisplayControls,this.interactionService,this.settings.isMobile),this.subscribe(Ot[Ot.OverlayClick],this.overlayModule,this.FI),this.subscribe(Ot[Ot.UIHideStart],this.overlayModule,this.ZI),this.subscribe(Ot[Ot.UIShowStart],this.overlayModule,this.YI),this.subscribe(Ot[Ot.UIEndShowHide],this.overlayModule,this.KI),this.subscribe(ot.a[ot.a.Scroll],this.overlayModule,()=>{this.nC(ot.a[ot.a.Scroll])}),this.overlayModule.start()}rC(t){this.jb!==d.r.Lg&&t||this.hC.forEach(i=>{t?Object(E.a)(i,d.h.Invisible):Object(E.H)(i,d.h.Invisible)})}aC(t){t?Object(E.a)(this.$uiContainer,d.g.Muted):Object(E.H)(this.$uiContainer,d.g.Muted)}oC(t){const i=this.getComponent(ci.CaptionButton),e=this.getComponent(ci.ElementsSettingsMenu);t?(i&&i.showComponent(),e&&e.showCaptionOption()):(i&&i.hideComponent(),e&&e.hideCaptionOption())}handleComponentEvent(t,i,e){switch(super.handleComponentEvent(t,i,e),this.nC(t),t){case Ot[Ot.DraggingStart]:this.overlayModule.uiSticky=!0;break;case Ot[Ot.DraggingStopped]:this.overlayModule.uiSticky=!1;break;case ci[ci.UpNextButton]:this.mediator.publish(this,Ot[Ot.Next],i);break;case ci[ci.PreviousButton]:this.mediator.publish(this,Ot[Ot.Prev],i);break;case Ot[Ot.Seek]:const s=0,n=100,r=0,h=this.ot;this.mediator.publish(this,Ot[Ot.Seek],{payload:Object(Xt.d)(s,n,r,h,i.payload)});break;case Ot[Ot.Mute]:this.aC(!0),this.mediator.publish(this,Ot[Ot.Volume],{payload:0});break;case Ot[Ot.Unmute]:this.aC(!1),this.mediator.publish(this,Ot[Ot.Volume],{payload:1});break;case Ot[Ot.Volume]:this.aC(!i.payload),this.mediator.publish(this,Ot[Ot.Volume],i);break;case Ot[Ot.VolumeHoverStart]:this.rC(!0);break;case Ot[Ot.VolumeHoverStopped]:this.rC(!1);break;case Ot[Ot.Settings]:this.XI.toggleContextMenu(ci.QualityMenu);break;case Ot[Ot.Quality]:i.payload&&this.mediator.publish(this,Ot[Ot.Quality],{payload:i.payload});break;case ci[ci.MoreButton]:this.XI.toggleContextMenu(ci.ElementsSettingsMenu);break;case ci[ci.CloseButton]:this.mediator.publish(this,Ot[Ot.Close]);break;case Ot[Ot.AboutClick]:this.globalDomUtilsService.open(lr.a,At.c.Blank);break;case Ot[Ot.ContextMenuClose]:this.overlayModule.uiSticky=!1;break;case Ot[Ot.ContextMenuOpen]:this.overlayModule.uiSticky=!0;break;default:this.mediator.publish(this,t,i)}}nC(t){let i;switch(t){case ot.a[ot.a.Scroll]:i=h.ProtoMediaClickTypeEnum.ScrollClick;break;case Ot[Ot.Volume]:i=h.ProtoMediaClickTypeEnum.VolumeClick;break;case ci[ci.PlayButton]:case ci[ci.BigPlayButton]:case ci[ci.ClickToPlayButton]:case Ot[Ot.Play]:i=h.ProtoMediaClickTypeEnum.PlayClick;break;case Ot[Ot.Pause]:i=h.ProtoMediaClickTypeEnum.PauseClick;break;case ci[ci.UpNextButton]:i=h.ProtoMediaClickTypeEnum.NextClick;break;case Ot[Ot.Prev]:case ci[ci.PreviousButton]:i=h.ProtoMediaClickTypeEnum.PreviousClick;break;case Ot[Ot.Mute]:i=h.ProtoMediaClickTypeEnum.MuteClick;break;case Ot[Ot.Unmute]:i=h.ProtoMediaClickTypeEnum.UnmuteClick;break;case Ot[Ot.Close]:case ci[ci.CloseButton]:i=h.ProtoMediaClickTypeEnum.CloseClick;break;case Ot[Ot.CaptionOff]:case Ot[Ot.CaptionOn]:i=h.ProtoMediaClickTypeEnum.SubtitleClick;break;case Ot[Ot.Expand]:i=h.ProtoMediaClickTypeEnum.FullScreenClick;break;case Ot[Ot.Collapse]:i=h.ProtoMediaClickTypeEnum.ExitFullScreenClick}void 0!==i&&this.mediator.publish(this,c.b.GeneralUserInteraction,{payload:{mediaClick:!0,type:i}})}updateUpNextBox(t,i){const e=this.getComponent(ci.UpNextBox);e&&e.updateCard(t,i)}updateVolume(t){this.aC(!t);const i=this.getComponent(ci.VolumeButton),e=this.getComponent(ci.VolumeControls);e?e.setVolume(t):i&&i.setState(t>0?Xe.Unmute:Xe.Mute)}updateDuration(t,i){super.updateDuration(t,i),this.ot=i;const e=this.getComponent(ci.UpNextBox);e&&(i-t<=5?e.isInView()||e.show():e.isInView()&&e.hide())}updateCaptions(t){const i=this.getComponent(ci.CaptionComponent);i&&i.updateCaptions(t)}toggleCaptionState(t){const i=this.getComponent(ci.CaptionButton),e=this.getComponent(ci.ElementsSettingsMenu);i&&i.isActive!==t&&(i.isActive=t),e&&e.toggleCaptionState(t)}updateQuality(t,i){const e=this.getComponent(ci.SettingsButton),s=t.getClosestSourceQuality(i.height).isHD;e&&e.toggleHDFlag(s);const n=this.getComponent(ci.QualityMenu);n&&n.updateQuality(i)}changeState(t){super.changeState(t)}onResize(t){this.jb=t;const i=this.getComponent(ci.QualityMenu),e=this.getComponent(ci.SettingsButton);i&&e&&i.onResize(e.getCoordinates());const s=this.getComponent(ci.ContextMenu);if(s&&s.onResize(),this.settings.isMobile){const t=this.getComponent(ci.ElementsSettingsMenu),i=this.getComponent(ci.MoreButton);t&&i&&t.onResize(t.getAnchorCoordinatesTo(i),this.jb)}}updateCurrentVideo(t){const i=t.getAvailableQualities(),e=this.getComponent(ci.QualityMenu);e&&e.createQualityMenu(i);const s=t.getThumbnailUrl(this.$uiContainer.clientWidth,this.$uiContainer.clientHeight);this.mediator.publish(this,C.NewThumbnail,{payload:{thumbnailUrl:s}}),this.oC(!!t.subtitle)}togglePlaylistControls(t){const i=this.$uiContainer.getElementsByClassName(d.h.HideOnSingleVideo);Object(l.c)(i).forEach(i=>{t?Object(E.M)(i):Object(E.u)(i)})}toggleExpandButtonDisplay(t){const i=this.getComponent(ci.ExpandButton);i&&(t?i.showComponent():i.hideComponent())}start(){try{this.sC(),this.eC(),this.cC(),this.$container.addEventListener("mousedown",this.tC),this.hC=Object(l.c)(this.$uiContainer.getElementsByClassName(d.h.HideOnVolumeHover)),this.settings.isMobile||this.$uiContainer.addEventListener("contextmenu",this.QI),this.iC()}catch(t){Object(n.a)({message:"BaseUiContent_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}destroy(){super.destroy(),this.$container.removeEventListener("mousedown",this.tC)}}class ja extends ka{initState(){super.initState();const t=this.context.getComponent(ci.BigPlayButton);t&&t.toggleReplay(!0)}exitState(){super.exitState();const t=this.context.getComponent(ci.BigPlayButton);t&&t.toggleReplay(!1)}}class Aa extends _a{constructor(){super(...arguments),this.uC={[k.ReplayState]:new ja(this)}}start(){this.cp=Object.assign(Object.assign({},this.cp),this.uC),super.start()}cC(){this.cp[k.StoppedState].enterState()}}class Ia{constructor(t){this.lC=[{id:S.H264,extension:"mp4",type:"video/mp4"},{id:S.Hevc,extension:"mp4",type:"video/mp4"}],this.Xo=this.lC.find(i=>i.id===t)}get type(){const t=this.Xo.codecs?`codecs=${this.Xo.codecs}`:"";return`${this.Xo.type}; ${t}`}get id(){return this.Xo.id}}class Ca{constructor(t,i,e){this.mediator=t,this.Tu=i,this.Ou=e,this.dC={quality:x.Auto,height:360},this.resizeObserverBinded=!1,this.fC=30,this.Nu=()=>{const t=this.Ou.clientHeight;if(this.pC(t)&&this.currentQualitySettings.quality===x.Auto){const i={height:t,quality:x.Auto};this.setCurrentQualitySettings(i),this.mediator.publish(this,_.CurrentQuality,{payload:i})}}}setCurrentQualitySettings(t){this.dC.quality=t.quality,this.dC.height!==t.height&&(this.dC.height=t.height,this.mediator.publish(this,_.Change))}pC(t){return!this.dC.height||t/this.dC.height*100-100>this.fC}addResizeObserver(){this.resizeObserverBinded=!0,this.Tu.on(this.Ou,this.Nu)}removeResizeObserver(){this.resizeObserverBinded=!1,this.Tu.off(this.Ou,this.Nu)}setQuality(t){t.quality===x.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:t.height,quality:t.quality}),this.addResizeObserver(),this.Nu()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(t)),this.mediator.publish(this,_.CurrentQuality,{payload:this.dC})}get currentQualitySettings(){return this.dC}destroy(){this.removeResizeObserver()}}const Ta={TrackLoaded:"trackLoaded"},Pa={height:0,quality:x.Auto},Ma="en",Ea="subtitle";class La extends o.a{constructor(t,i,e){super(),this.mediator=t,this.fc=i,this.Yg=e,this.vC=[],this.bC=()=>{this.mediator.publish(this,Ta.TrackLoaded)}}mC(t){this.gC=t,this.yC()}wC(t){this.Yg.innerHTML="",t.forEach(t=>{this.Yg.appendChild(t)})}xC(){return this.vC}yC(){if(this.vC=[],this.gC&&this.gC.subtitle){const t=this.fc.createElement("track");t.src=this.gC.subtitle,t.srclang=Ma,t.kind=Ea,t.default=!0,t.addEventListener("load",this.bC,!1),t.addEventListener("loaded",this.bC,!1),this.vC.push(t)}}}class Ra extends La{constructor(t,i,e,s,n,r={},h){super(t,i,n),this.Tu=e,this.Pb=s,this.wI=h,this.kC=null,this.SC=10.13,this.OC=this._C(r)}start(){try{this.jC=new Ca(this,this.Tu,this.Pb),this.Iu(),this.setQuality(this.wI)}catch(t){Object(n.a)({message:"Mp4SourceHandler_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}onQualityChanged(){return this.attachMedia()}setSource(t,i=!1){this.mC(t),this.AC(this.IC(),i)}setQuality(t){this.jC.setQuality(t)}get currentQualitySettings(){return this.jC.currentQualitySettings}attachMedia(){return new Promise(t=>{this.CC(),t()})}detachMedia(){this.Yg.removeAttribute("src"),this.AC(null)}destroy(){this.jC.destroy()}Iu(){this.relay(_.CurrentQuality,this.jC,this,this.mediator),this.subscribe(_.Change,this.jC,()=>{this.TC()})}TC(){this.AC(this.IC()),this.mediator.publish(this,_.Change,{payload:this.jC.currentQualitySettings.height})}PC(t){this.wC(t),this.Yg.load()}IC(){return[...this.MC(),...this.xC()]}MC(){if(!this.Yg||!this.gC)return[];const t=[];return this.gC.getSources(this.jC.currentQualitySettings.height,this.OC).forEach(i=>{const e=this.fc.createElement("source");e.src=i.src,e.type=i.type,t.push(e)}),t}CC(){this.kC&&(this.PC(this.kC),this.kC=null)}AC(t,i=!1){this.kC=t,i&&this.CC()}_C(t){let i;switch(t.os){case _t.b.Ios:i=[S.Hevc,S.H264];break;case _t.b.Mac:i=t.osVersion>this.SC&&t.browser===At.a.Safari?[S.Hevc,S.H264]:[S.H264];break;default:i=[S.H264]}return i.map(t=>new Ia(t))}}const Ba={UnexpectedError:"unexpectedError",BufferingError:"bufferingError",FragBuffered:"fragBuffered",ManifestLoaded:"manifestLoaded",LevelSwitching:"levelSwitching",StreamEnded:"streamEnded"};var Da;!function(t){t.Http="http",t.Https="https"}(Da||(Da={}));const Fa={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class Va extends La{constructor(t,i,e,s,n,r){super(t,i,e),this.EC=s,this.wI=n,this.LC=r,this.RC=[],this.BC=x.Auto,this.DC=320,this.FC=!1,this.VC=!1,this.UC=!1,this.iy=()=>{this.ty.off(Cn.Events.MEDIA_ATTACHED,this.iy);const t=this.NC(this.$C);this.ty.loadSource(t),this.ty.once(Cn.Events.MANIFEST_PARSED,this.ey)},this.ey=()=>{this.ty.off(Cn.Events.MANIFEST_PARSED,this.ey),this.ty.on(Cn.Events.LEVEL_SWITCHING,this.HC),this.ty.on(Cn.Events.LEVEL_SWITCHED,this.qC),this.ty.on(Cn.Events.FRAG_BUFFERED,this.zC),this.ty.on(Cn.Events.FRAG_LOADING,this.GC),this.ty.on(Cn.Events.FRAG_LOADED,this.WC),this.ty.on(Cn.Events.BUFFER_APPENDING,this.JC),this.ty.on(Cn.Events.BUFFER_APPENDED,this.QC),this.ty.on(Cn.Events.BUFFER_EOS,this.XC),this.$C=null,this.YC(),this.KC(),this.ZC(),this.tT.resolve()},this.iT=()=>{this.$C=null,this.Yg.removeEventListener(w.LoadedMetadata,this.iT),this.eT.resolve()},this.KC=()=>{const t=this.RC.map(t=>({videoHeight:t.height,isHD:t.height>=A,label:t.level.toString()}));this.mediator.publish(this,Ba.ManifestLoaded,{payload:{qualityList:t}})},this.zC=()=>{this.mediator.publish(this,Ba.FragBuffered)},this.GC=()=>{this.FC=!0},this.WC=()=>{this.FC=!1},this.JC=()=>{this.VC=!0},this.QC=()=>{this.VC=!1},this.XC=()=>{this.mediator.publish(this,Ba.StreamEnded)},this.Kg=(t,i)=>{if(i.details===Cn.ErrorDetails.BUFFER_STALLED_ERROR&&(this.FC||this.VC?this.mediator.publish(this,Ba.BufferingError):(this.UC||(this.ty.recoverMediaError(),this.Yg.play().then(()=>{this.UC=!1}).catch(()=>{this.UC=!1})),this.UC=!0)),i.fatal)switch(i.type){case Cn.ErrorTypes.NETWORK_ERROR:if(i.details===Cn.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.sT("hls_network_error_manifest_parsing_error_FATAL");if(i.details===Cn.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.mediator.publish(this,Ba.UnexpectedError);this.ty.startLoad();break;case Cn.ErrorTypes.MEDIA_ERROR:this.ty.recoverMediaError();break;default:this.sT("hls_unexpected_error_FATAL",`type_${i.type}_details_${i.details}`)}else i.type===Cn.ErrorTypes.MEDIA_ERROR&&i.details===Cn.ErrorDetails.BUFFER_APPENDING_ERROR&&this.sT("hls_media_error_buffer_appending_error"),i.type===Cn.ErrorTypes.NETWORK_ERROR&&i.details===Cn.ErrorDetails.MANIFEST_PARSING_ERROR&&this.sT("hls_network_error_manifest_parsing_error")},this.nT=()=>{this.sT("hls_video_tag_error",`code_${this.Yg.error.code}_message_${this.Yg.error.message}`)},this.qC=(t,i)=>{this.DC=this.RC.find(t=>t.level===i.level).height,this.mediator.publish(this,_.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,_.CurrentQuality,{payload:this.currentQualitySettings})},this.HC=()=>{this.mediator.publish(this,Ba.LevelSwitching)},Tn&&(this.ty=this.fc.initHls(Fa),this.LC&&(this.ty.autoLevelCapping=1)),this.DC=this.wI.height,this.BC=this.wI.quality}start(){}get liveSyncPosition(){if(this.ty)return this.ty.liveSyncPosition}setSource(t,i=!1){this.rT=t.id,this.mC(t),this.$C=t,i&&this.attachMedia()}attachMedia(){return new Promise(t=>{if(this.ty?this.ty.on(Cn.Events.ERROR,this.Kg):this.Yg.addEventListener(w.Error,this.nT),this.$C){const i=this.xC();this.wC(i),this.ty?this.hT().then(()=>{t()}):this.aT().then(()=>{t()})}else t()})}detachMedia(){this.RC=[],this.ty?(this.ty.detachMedia(),this.oT()):(this.Yg.removeAttribute("src"),this.Yg.removeEventListener(w.LoadedMetadata,this.iT),this.Yg.removeEventListener(w.Error,this.nT))}setQuality(t){this.BC=t.quality,this.DC=t.height,this.ty&&this.ZC(),this.mediator.publish(this,_.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,_.CurrentQuality,{payload:this.currentQualitySettings})}get currentQualitySettings(){return{quality:this.BC,height:this.DC}}onQualityChanged(){return new Promise(()=>{})}destroy(){this.ty?(this.oT(),this.ty.destroy(),this.ty=null):(this.Yg.removeEventListener(w.LoadedMetadata,this.iT),this.Yg.removeEventListener(w.Error,this.nT))}hT(){return this.tT=new jt.a,this.ty.attachMedia(this.Yg),this.ty.once(Cn.Events.MEDIA_ATTACHED,this.iy),this.tT.promise}aT(){return this.eT=new jt.a,this.Yg.src=this.NC(this.$C),this.Yg.addEventListener(w.LoadedMetadata,this.iT),this.eT.promise}oT(){this.ty.off(Cn.Events.MEDIA_ATTACHED,this.iy),this.ty.off(Cn.Events.MANIFEST_PARSED,this.ey),this.ty.off(Cn.Events.ERROR,this.Kg),this.ty.off(Cn.Events.LEVEL_SWITCHING,this.HC),this.ty.off(Cn.Events.LEVEL_SWITCHED,this.qC),this.ty.off(Cn.Events.FRAG_BUFFERED,this.zC),this.ty.off(Cn.Events.FRAG_LOADING,this.GC),this.ty.off(Cn.Events.FRAG_LOADED,this.WC),this.ty.off(Cn.Events.BUFFER_APPENDING,this.JC),this.ty.off(Cn.Events.BUFFER_APPENDED,this.QC),this.ty.off(Cn.Events.BUFFER_EOS,this.XC)}YC(){this.ty.levels.forEach((t,i)=>{this.LC&&i>1||this.RC.push({level:i,height:t.height})})}sT(t,i){Object(n.a)({message:t,exception:this.rT,level:h.ProtoLoggingLevelEnum.WARNING,callStack:i}),this.mediator.publish(this,Ba.UnexpectedError)}ZC(){if(this.BC===x.Auto)this.ty.currentLevel=-1;else try{this.ty.currentLevel=this.RC.find(t=>t.height===this.DC).level}catch(t){Object(n.a)({message:"HlsSourceHandler_quality_not_present_in_hls_manifest",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}NC(t){try{const i=t.getHlsSource(),e=Object(Yt.g)(i);return e&&e.protocol?i:`${this.EC}:${i}`}catch(t){Object(n.a)({exception:t.message,message:"HlsSourceHandler_undefined_sourceMeta",level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,throttle:5,sendMaxLog:!1})}}}var Ua;!function(t){t.Disabled="disabled",t.Hidden="hidden",t.Showing="showing"}(Ua||(Ua={}));class Na{constructor(t,i,e,s,n){this.mediator=t,this.Yg=i,this.vy=e,this.Lb=n,this.cT=!1,this.uT=!1,this.lT=Ua.Hidden,this.dT=0,this.by=!1,this.fT=t=>{switch(t.type){case w.Pause:this.by=!1;break;case w.Play:if(!this.by&&this.Lb.config.isInAppAndroid)return void this.pause();this.cT=!0;break;case w.Timeupdate:this.mediator.publish(this,t.type,{payload:this.cT});break;case w.Error:const i=this.Yg.error?this.Yg.error.message:"";this.mediator.publish(this,O.PlayError,{payload:i});break;case w.LoadedMetadata:this.uT=!0,Object(v.d)(this.pT)&&(this.currentTime=this.pT,this.pT=null),this.mediator.publish(this,t.type);break;default:this.mediator.publish(this,t.type)}},this.play=()=>{this.Lb.services.TimeLogService.add(this.Lb.config.playerId,ti.a.Content_StartLoadingVideo),this.by=!0;const t=this.Yg.play();return t?(this.dT++,t.then(()=>{this.cT=!0,this.Lb.config.os.os===_t.b.Ios&&Object(E.z)(this.Yg),this.dT--,this.vT()}).catch(t=>{throw this.mediator.publish(this,O.PlayError,{payload:t}),this.cT=!1,this.dT--,t})):Promise.resolve()},this.pause=()=>{this.Yg.pause(),this.cT=!1},this.volume=s,this.Iu()}Iu(){this.vy.forEach(t=>{this.Yg.addEventListener(t,this.fT)})}vT(){this.Yg.textTracks&&0!==this.Yg.textTracks.length&&Object.keys(this.Yg.textTracks).forEach(t=>{this.Yg.textTracks[t].mode=this.lT})}set poster(t){Object(v.h)(t)&&(this.Yg.poster=t)}get poster(){return this.Yg.poster}get volume(){return this.bf}set volume(t){this.bf=t<=1?t:t/100,this.Yg.volume=this.bf,Object(E.O)(this.Yg,this.bf)}get currentTime(){return this.Yg.currentTime}set currentTime(t){this.uT?this.Yg.currentTime=t:this.pT=t}get duration(){return this.Yg.duration}get playing(){return this.cT}destroy(){this.vy.forEach(t=>{this.Yg.removeEventListener(t,this.fT)})}setTrackModes(t){this.lT=t,this.vT()}setMetaLoaded(t){this.uT=t}setCrossOriginAttribute(){this.Yg.getAttribute("crossorigin")||this.Yg.setAttribute("crossorigin","anonymous")}setPoster(t){this.poster=t.getThumbnailUrl(this.Yg.clientWidth,this.Yg.clientHeight)}getCurrentTrack(){return this.Yg.textTracks&&0!==this.Yg.textTracks.length?this.Yg.textTracks[0]:null}isPlayPending(){return this.dT>0}}class $a extends o.a{constructor(t,i,e,s,r,a,o={},c,u){if(super(),this.mediator=t,this.Lb=i,this.fc=e,this.Pb=s,this.Tu=r,this.bT=a,this.Xo=o,this.IA=c,this.wI=u,this.mT=!0,this.rA=!1,this.gT=!1,this.yT=()=>{let t;this.currentTrack.activeCues&&this.currentTrack.activeCues.length>0&&(t=this.currentTrack.activeCues[0]),this.mediator.publish(this,Ot[Ot.CaptionUpdate],{payload:t})},this.bC=()=>{this.currentTrack&&(this.currentTrack.mode=this.wT?Ua.Hidden:Ua.Disabled,this.currentTrack.oncuechange=this.yT)},this.xT(),this.kT.appendChild(this.Yg),this.Pb.appendChild(this.kT),this.wI=this.wI||Pa,this.ST=new Ra(this,e,this.Tu,this.Pb,this.Yg,this.Xo,this.wI),Tn||Pn(this.Yg)){const t=this.fc.isHttpsProtocolUsed()?Da.Https:Da.Http,i=Object(v.h)(this.Lb.config.bundleID);this.Oy=new Va(this,this.fc,this.Yg,t,this.wI,i),this.OT()}else this.mT=!1,Object(n.a)({message:"Hls_not_supported",level:h.ProtoLoggingLevelEnum.INFO})}start(){try{this.vy=Object(u.a)(w),this._T=new Na(this,this.Yg,this.vy,this.bT,this.Lb),this.jT(),this.AT(),this.IT()}catch(t){Object(n.a)({message:"VideoHandler_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}CT(){const t=this.currentTime;this.setSource(this.TT,!0,this.ST),this.PT.attachMedia().then(()=>{this._T.play().then(()=>{this.gT=!1,this.MT.resolve(),this._T.currentTime=t}).catch(t=>{this.MT&&this.MT.isPending&&(this.gT=!1,this.MT.reject(),Object(n.a)({message:"VideoHandler_hls_error_content_player_play",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL}))})}).catch(t=>{this.MT&&this.MT.isPending&&(this.gT=!1,this.MT.reject()),Object(n.a)({message:"VideoHandler_hls_error_attach_media",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})})}OT(){this.subscribe(Ba.UnexpectedError,this.Oy,()=>{this.gT=!0,this.CT()}),this.subscribe(Ba.ManifestLoaded,this.Oy,({payload:t})=>{this.mediator.publish(this,_.Loaded,{payload:{qualityList:t,videoMeta:this.TT}}),this._T.setMetaLoaded(!0)}),this.subscribe(Ba.BufferingError,this.Oy,()=>{this.mediator.publish(this,O.Buffering)}),this.subscribe(Ba.FragBuffered,this.Oy,()=>{this.mediator.publish(this,O.Buffered)}),this.subscribe(Ba.StreamEnded,this.Oy,()=>{this.mediator.publish(this,O.EndOfStream)}),this.subscribe(Ba.LevelSwitching,this.Oy,()=>{this.mediator.publish(this,O.LevelSwitching)})}jT(){this.ET(this.ST)}AT(){this.Oy&&this.ET(this.Oy)}ET(t){t.start(),this.LT(t)}IT(){this.vy.forEach(t=>{this.subscribe(t,this._T,i=>{t===w.Canplay&&this.IA&&(this.currentTime=this.IA,this.IA=null),this.mediator.publish(this,t,i)})}),this.relay(O.PlayError,this._T,this,this.mediator)}LT(t){this.relay([_.CurrentQuality,O.NewVideo],t,this,this.mediator),this.subscribe(_.Change,t,({payload:t})=>{this.onQualityChanged(t)}),this.subscribe(Ta.TrackLoaded,t,()=>{this.bC()})}get width(){return this.kT.getBoundingClientRect().width}get height(){return this.kT.getBoundingClientRect().height}get currentTime(){return this._T.currentTime}set currentTime(t){this._T.currentTime=t}forceCurrentTime(t){this._T.currentTime=t,this.IA=t}get duration(){return this._T.duration}get volume(){return this._T.volume}set volume(t){this._T.volume=t}get playing(){return this._T.playing}get isIosFullscreen(){return this.rA}set isIosFullscreen(t){this.rA=t,this.rA&&this.wT?this.RT():this.BT()}get currentQualitySettings(){return this.PT.currentQualitySettings}hide(){Object(E.a)(this.kT,d.d)}show(){Object(E.H)(this.kT,d.d)}setSource(t,i=!1,e){return this.IA=null,new Promise((s,r)=>{try{this.TT=t,this.PT&&this.PT.detachMedia(),e?this.DT(e):Object(v.h)(t.hlsFilePath)&&this.Oy?this.PT=this.Oy:this.DT(this.ST),t&&t.subtitle&&this._T.setCrossOriginAttribute(),this._T.setPoster(t),this._T.setTrackModes(this.wT?Ua.Hidden:Ua.Disabled),i&&this._T.setMetaLoaded(!1),this.PT.setSource(t,i),this.mediator.publish(this,O.NewVideo),s()}catch(t){Object(n.a)({message:"VideoHandler_set_video_source",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL}),r()}})}setQuality(t){this.PT.setQuality(t)}pause(){this._T.pause()}play(){return this.MT=new jt.a,this.PT.attachMedia().then(()=>{this._T.play().then(()=>{this.MT.resolve()}).catch(t=>{!this.gT&&this.MT&&this.MT.isPending&&(this.MT.reject(),Object(n.a)({message:"VideoHandler_public_play_content_player_play",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL}))})}).catch(t=>{this.MT&&this.MT.isPending&&this.MT.reject(t),Object(n.a)({message:"VideoHandler_public_play_attach_media_error",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})}),this.MT.promise}isPlayPending(){return this._T.isPlayPending()}showCaptions(){this.wT=!0,this._T.setTrackModes(Ua.Hidden)}hideCaptions(){this.wT=!1,this._T.setTrackModes(Ua.Disabled),this.currentTrack&&this.mediator.publish(this,Ot[Ot.CaptionUpdate])}destroy(){this.PT.destroy(),this.kT.parentNode.removeChild(this.kT)}xT(){this.kT=this.fc.createElementByString('<cnx class="cnx-video-wrapper"></cnx>'),this.Yg=this.fc.createElementByString('<video class="cnx-video-tag"></video>'),this.Xo.os===_t.b.Ios&&(this.Yg.setAttribute("playsinline",""),this.Yg.setAttribute("webkit-playsinline",""))}DT(t){this.PT=t,this.PT.setQuality({quality:x.Auto,height:0})}onQualityChanged(t){const i=this._T.playing;this.IA=this.currentTime,i&&this.PT.onQualityChanged&&this.PT.onQualityChanged().then(()=>{this._T.setMetaLoaded(!1),this._T.play().catch(t=>{Object(n.a)({message:"VideoHandler_quality_changed",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})})}),this.mediator.publish(this,_.Change,{payload:t})}get currentTrack(){return this._T.getCurrentTrack()}RT(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,Ot[Ot.CaptionUpdate]),this.currentTrack.mode=Ua.Showing)}BT(){if(this.currentTrack){switch(this.currentTrack.mode){case Ua.Showing:case Ua.Hidden:this.wT=!0;break;case Ua.Disabled:this.wT=!1}this.mediator.publish(this,this.wT?Ot[Ot.CaptionOn]:Ot[Ot.CaptionOff])}this.bC()}}const Ha={width:168,height:91},qa=6;class za extends fa{constructor(){super(...arguments),this.FT=!1,this.Gw=h.ProtoQuartilesEnum.Start,this.VT=new Map}start(){super.start(),this.OA.start(),this.cI(),this.lI()}kI(t){t=Object.assign(Object.assign({},t),{isInApp:Object(v.h)(this.Lb.config.bundleID)});const i=new ba(t,!1);this.oI=new Aa(this,this.Lb.services.GlobalDomUtilsService,this.Lb.services.InteractionService,this.Pb,i.template,t,this.Lb.config.appId,this.jb),this.oI.start()}OI(t){this.uf.upNextMode===R.ProtoPlayerUpNextMode.Next&&this.OA.duration-this.OA.currentTime<=qa&&!this.FT&&(this.FT=!0,this.SA.getVideoData(this.SA.nextVideoIndex,t=>{const i=t.getThumbnailUrl(Ha.width,Ha.height);this.oI.updateUpNextBox(i,t.description)})),this.UT(this.OA.currentTime,this.OA.duration)}vI(){this.FT=!1,this.Gw=h.ProtoQuartilesEnum.Start}dI(){switch(this.uf.upNextMode){case R.ProtoPlayerUpNextMode.Loop:this.NT();break;case R.ProtoPlayerUpNextMode.Next:this.$T(),this.hI.streamFormat=oa.Autochain;break;case R.ProtoPlayerUpNextMode.Stop:this.aI.stop(),this.oI.changeState(k.ReplayState)}}lI(){const{preRollBreak:t,postRollBreak:i}=this.uf,e=Object(v.e)(t),s=Object(v.e)(i);this.aI=new ca(this,this.SA,this.OA,e,s,this.Lb.config.os.os===_t.b.Ios,this.uf.videoPosition),super.lI()}fI(){super.fI(),this.subscribe(Ot[Ot.Replay],this.oI,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}}),this.NT()}),this.subscribe(Ot[Ot.Next],this.oI,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0,clickedNext:!0}}),this.$T(),this.hI.streamFormat=oa.UserInitiated}),this.subscribe(Ot[Ot.Prev],this.oI,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0,clickedPrev:!0}}),this.HT()})}xI(t,i){this.OA=new $a(this,this.Lb,this.Lb.services.GlobalDomUtilsService,this.Pb,this.Lb.services.ResizeObserver,i,t,this.uf.videoPosition,this.wI)}qT(t,i){return i&&t?Math.floor(Object(Xt.d)(0,i,0,4,t)):h.ProtoQuartilesEnum.Start}UT(t,i){const e=this.qT(t,i);e>h.ProtoQuartilesEnum.Start&&e!==this.Gw&&(this.VT.get(e)||(this.mediator.publish(this,T.ContentQuartiles,{payload:e}),this.VT.set(e,!0)),this.Gw=e)}HT(){this.setVideo(this.SA.prevVideoIndex),this.hI.streamFormat=oa.UserInitiated}$T(){this.setVideo(this.SA.nextVideoIndex)}JA(t=!0){super.JA(t),this.VT.clear()}NT(){this.aI.replay(),this.JA(!1)}}var Ga;!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(Ga||(Ga={}));class Wa{constructor(t,i){switch(this.mediator=t,this.inView=!1,this.zT=!1,this.GT=!1,this.WT=()=>{},i){case h.ProtoPlayerPlaybackModeEnum.Autoplay:this.JT(this.QT);break;case h.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.JT(this.XT);break;case h.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.JT(this.YT)}}JT(t){this.WT=()=>{this.zT||t.call(this)}}QT(){!this.GT&&this.inView&&(this.GT=!0,this.mediator.publish(this,Ga[Ga.Play]))}YT(){this.inView?this.mediator.publish(this,Ga[Ga.Play]):this.mediator.publish(this,Ga[Ga.Pause])}XT(){}setViewability(t){this.inView=t,this.WT()}setUserPlayback(t){!this.GT&&t&&(this.GT=t),this.zT=!t}}class Ja extends ha{constructor(){super(...arguments),this.KT=!0}start(){try{super.start(),this.ZT(),this.tP()}catch(t){Object(n.a)({message:"VideoExperience_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}destroy(){this.unsubscribeAll(this.iP),super.destroy()}cf(){this.sf.isInAdPod()?this.df(()=>{super.cf(),this.gd.onAdFinished(this.adHandler.inImpression,this.sf.isInAdPod());this.Xj.show(!0)}):(super.cf(),this.Xj.show(this.KT),this.KT=!0)}eh(){super.eh(),this.eP&&this.sP(),this.iP&&this.iP.onResize(this.$experienceContainer.clientWidth)}generateHTML(){super.generateHTML(),this.uf.gallery&&this.nP()}dA(){this.Xj=new za(this,this.uf,this.app,this.$playerContainer,this.breakPointsHandler.currentBreakpointClass)}jl(t,i=!1){super.jl(t,i),this.rP.setViewability(t)}ZT(){this.rP=new Wa(this,this.uf.playbackMode),this.subscribe(Ga[Ga.Play],this.rP,()=>{this.Xj.play()}),this.subscribe(Ga[Ga.Pause],this.rP,()=>{this.Xj.pause()}),this.subscribe(c.b.UserInteraction,this.Xj,({payload:{playback:t}})=>{Object(v.a)(t)&&this.rP.setUserPlayback(t)})}sP(){this.uf.gallery.orientation===R.ProtoGalleryOrientationEnum.Landscape&&Object(E.L)(this.eP,{height:`${this.$playerWrapper.clientHeight}px`})}nP(){this.eP=this.app.services.GlobalDomUtilsService.createElementByString('<cnx class="cnx-g-container"></cnx>'),this.$experienceContainer.appendChild(this.eP);const t=this.uf.gallery.orientation===R.ProtoGalleryOrientationEnum.Landscape?d.g.GalleryLandscape:d.g.GalleryPortrait;Object(E.a)(this.$experienceContainer,t)}tP(){this.uf.gallery&&(this.iP=new kt(this,this.app.services.ResizeObserver,this.app.services.GlobalDomUtilsService,this.app.services.InteractionService,this.eP,this.app.config.device,this.uf.gallery.style,this.uf.gallery.orientation,this.uf.playlist),this.subscribe(T.ChangeVideo,this.iP,({payload:{videoIndex:t}})=>{this.KT=!this.Xj.isHidden,this.sf.endPod(),this.changeVideo(t,!0),this.Xj.getVideoData(t,t=>{this.mediator.publish(this,P.GalleryCardClicked,{payload:this.bA(t)}),this.app.services.TrackingService.trackMediaClick(h.ProtoMediaClickTypeEnum.GalleryClick)}),this.qd()}),this.subscribe(O.NewVideo,this.Xj,({payload:{videoIndex:t}})=>{this.iP.setCurrentIndex(t)}),this.subscribe(ot.a[ot.a.Scroll],this.iP,()=>{this.app.services.TrackingService.trackMediaClick(h.ProtoMediaClickTypeEnum.ScrollClick)}),this.iP.start(),this.iP.onResize(this.$experienceContainer.clientWidth))}Ef(t){t===h.ProtoPlayerCloseButtonMode.AlwaysOn?Object(E.a)(this.$playerContainer,d.g.AlwaysOn):Object(E.H)(this.$playerContainer,d.g.AlwaysOn)}}class Qa{constructor(){this.co={}}on(t,i){if(this.co[t]=this.co[t]||[],!Object(v.b)(i))throw new Error(`${t} event callback is not a function`);return this.co[t].push(i),()=>this.co[t]=this.co[t].filter(t=>t!==i)}once(t,i){const e=this.on(t,t=>{try{i(t)}catch(t){}e()})}remove(t,i){this.co[t]&&(this.co[t]=this.co[t].filter(t=>t!==i))}removeAll(){this.co={}}trigger(t,i){this.co[t]&&this.co[t].forEach(t=>{try{t(i)}catch(t){}})}}class Xa{constructor(t){this.experience=t,this.hP=(t,i)=>this.So.on(t,i),this.aP=(t,i)=>{this.So.remove(t,i)},this.oP=()=>{this.So.removeAll()},this.cP=(t,i)=>{this.So.once(t,i)},this.uP=()=>this.experience.isViewable(),this.lP=t=>{this.experience.setViewableThreshold(t)},this.dP=()=>{this.experience.play()},this.fP=()=>{this.experience.pause()},this.pP=()=>this.experience.getVolume(),this.vP=t=>{this.experience.setVolume(t)},this.wl=()=>{this.experience.triggerDestroy()},this.bP=()=>{this.experience.disableAdvertising()},this.mP=()=>{this.experience.enableAdvertising()},this.gP=t=>{this.experience.setCustomMacros(t)},this.yP=t=>{this.experience.setAmpUserConsent(t)},this.So=new Qa}trigger(t,i){this.So.trigger(t,i)}setDestroyed(){this.trigger(Mt.b.Removed)}getApiMethods(){return{on:this.hP,remove:this.aP,removeAll:this.oP,once:this.cP,isViewable:this.uP,setViewableThreshold:this.lP,play:this.dP,pause:this.fP,getVolume:this.pP,setVolume:this.vP,disableAdvertising:this.bP,enableAdvertising:this.mP,setMacros:this.gP,setAmpUserConsent:this.yP,destroy:this.wl}}}class Ya extends Xa{constructor(){super(...arguments),this.wP=()=>this.experience.type,this.xP=()=>this.experience.getSize(),this.kP=(t,i)=>{this.experience.setSize(t,i)}}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getPlayerType:this.wP,getSize:this.xP,setSize:this.kP})}}class Ka extends Ya{constructor(t){super(t),this.experience=t,this.SP=()=>this.experience.getVideoDetails(),this.OP=()=>this.experience.getPlaylistId(),this._P=()=>this.experience.currentTime,this.jP=()=>this.experience.duration,this.AP=t=>{this.experience.toggleFullscreen(t)},this.IP=t=>{t?this.experience.showCaptions():this.experience.hideCaptions()},this.CP=t=>{this.experience.toggleExpandButton(t)},this.TP=()=>this.experience.getQuality(),this.PP=t=>{this.experience.setQuality(t)},this.MP=()=>{this.experience.setAutoQuality()},this.EP=()=>this.experience.getAvailableQualities()}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getVideoDetails:this.SP,getVideoCurrentPosition:this._P,getVideoDuration:this.jP,toggleFullscreen:this.AP,toggleSubtitles:this.IP,toggleFullscreenButton:this.CP,getPlaylistId:this.OP,getQuality:this.TP,setQuality:this.PP,setAutoQuality:this.MP,getAvailableQualities:this.EP})}}class Za extends Oi{constructor(t,i,e,s,n={},r){super(t,i,e,r,new js(e,s,i,n)),this.mediator=t,this.$container=i,this.cp={},this.$uiContainer.style.backgroundColor=`${n.backgroundColor}`}handleComponentEvent(t){t===ci[ci.CloseButton]&&this.mediator.publish(this,Ot[Ot.Close])}}class to extends ba{getLogoPositionClass(t){switch(t){case R.ProtoLogoPositionMode.BottomLeft:return"ui-home-screen-logo-bottom-left";case R.ProtoLogoPositionMode.BottomRight:return"ui-home-screen-logo-bottom-right";case R.ProtoLogoPositionMode.TopLeft:return"ui-home-screen-logo-top-left";case R.ProtoLogoPositionMode.TopRight:return this.settings.isCloseButton?"ui-home-screen-logo-top-left":"ui-home-screen-logo-top-right";case R.ProtoLogoPositionMode.Center:return"ui-home-screen-logo-center";default:return}}getLogoTemplate(){return`<cnx class="cnx-logo-bar ${this.getLogoPositionClass(this.settings.logoPosition)}">[[${ci.LogoOutstream}]]</cnx>`}get template(){return`\n        <cnx class="cnx-ui cnx-ui-home-screen">\n        ${this.getLogoTemplate()}\n            <cnx class="cnx-ui-bar">\n                <cnx class="cnx-ui-head-buttons">\n                    ${this.isAlwaysOn()?"":this.closeButton}\n                </cnx>\n                ${this.isAlwaysOn()?this.closeButton:""}\n            </cnx>\n        </cnx>`.trim()}}class io extends ta{constructor(){super(...arguments),this.events=Object.assign(Object.assign({},Mt.b),M),this.LP=!1,this.RP=!1,this.BP=!1,this.DP=t=>{"max-height"===t.propertyName&&(this.$experienceContainer.removeEventListener("transitionend",this.DP),this.handleClose())}}FP(){this.adHandler&&this.adHandler.inImpression?this.LP=!0:this.VP()}VP(){this.adHandler&&this.unsubscribeAll(this.adHandler),this.gd.onStop(),this.uf.outstreamSettings.endAdBreakPolicy===R.ProtoOutstreamEndAdBreakPolicyEnum.Hide&&this.UP(!0),this.mediator.publish(this,M.AdCycleComplete)}NP(){const t={logoPosition:this.uf.logoPosition,logoUrl:this.uf.logoUrl,isCloseButton:this.uf.isCloseButton,closeButtonMode:this.uf.closeButtonMode,backgroundColor:this.uf.outstreamSettings.houseScreenBackgroundColor},i=new to(t).template;this.$P=new Za(this,this.$playerContainer,this.app.services.GlobalDomUtilsService,this.app.services.InteractionService,t,i),this.subscribe(Ot[Ot.Close],this.$P,()=>{this.handleClose()})}HP(){this.BP&&(Object(E.H)(this.$experienceContainer,d.g.Collapsed),this.mediator.publish(this,M.Collapsed,{payload:!1}),this.BP=!1,this.Yd())}UP(t=!1){if(!this.BP){if(t){const t=setTimeout(()=>{this.$experienceContainer.removeEventListener("transitionend",this.DP),this.handleClose()},1e3);this.$experienceContainer.addEventListener("transitionend",i=>{clearTimeout(t),this.DP(i)})}Object(E.a)(this.$experienceContainer,d.g.Collapsed),this.mediator.publish(this,M.Collapsed,{payload:!0}),this.BP=!0,this.Xd()}}qP(){this.$experienceContainer.style.maxHeight=`${this.$playerContainer.clientHeight}px`}zP(){this.$P&&this.$P.hide()}GP(){this.$P&&this.$P.show()}handleClose(){this.triggerDestroy()}resizeAdHandler(){this.qP(),this.adHandler&&this.adHandler.resizeAd(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,Et.a.Normal)}xd(t=!1){super.xd(t),this.LP&&this.VP()}jl(t,i=!1){super.jl(t,i),!this.RP&&t&&(this.RP=!0,this.WP())}cf(){this.sf.isInAdPod()?this.df(()=>{this.gd.onAdFinished(this.adHandler.inImpression,this.sf.isInAdPod()),super.cf(),this.GP(),this.sf.setNewBreak(R.ProtoAdSlotsEnum.MidRoll)}):(super.cf(),this.sf.setNewBreak(R.ProtoAdSlotsEnum.MidRoll),this.GP())}yd(){super.yd(),this.zP()}addPlayerSize(){super.addPlayerSize(),this.uf.playerSize.responsive?this.$playerWrapper.appendChild(this.xf()):this.setFixedSize(this.$playerWrapper)}mf(){}WP(){if(this.uf.adPlaybackMode===R.ProtoAdPlaybackMode.ScrollToPlay&&!this.RP)return;this.Kd(R.ProtoAdSlotsEnum.MidRoll);this.gd.contentPlaybackStateChanged(!0)}ef(){this.Gd(Jt.a.Standalone)}Ef(){}start(){try{super.start(),this.adHandler?(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.uf.soundMode===R.ProtoPlayerSoundMode.On?1:0),this.gd.forceRecheck(),this.subscribe(Et.b.AdImpression,this.adHandler,()=>{this.HP()}),this.subscribe(Ot[Ot.Volume],this.adHandler,({payload:{volume:t}})=>{this.Jr(t)})):this.UP(),this.WP(),this.subscribe(Ht.MidRollCapped,this.gd,()=>{this.FP()}),this.subscribe(Ht.TotalAdBreakLengthExpired,this.gd,()=>{this.FP()}),this.uf.outstreamSettings.initialRendering===R.ProtoOutstreamInitialRenderingEnum.ExpandWithAd&&(this.UP(),Object(E.i)(this.$playerContainer)),Object(E.a)(this.$experienceContainer,d.h.Collapsable),this.qP(),this.uf.outstreamAdAsContent||this.NP()}catch(t){Object(n.a)({message:"Outsream_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}getVolume(){if(this.adHandler)return this.adHandler.getVolume()}get currentTime(){return 0}get duration(){return 0}destroy(){super.destroy(),this.$P&&this.$P.destroy()}}class eo extends Ya{}class so extends ca{play(){if(this.JP)return this.$A=k.PlayingState,this.JP=!1,void this.UA();this.VA(k.LiveStreamStarting)?this.SA.getCurrentVideoData(()=>{this.OA.play().then(()=>{this.qA()}).catch(()=>{})}):super.play()}pause(t=!1){this.VA(k.LiveStreamEnded)||this.VA(k.LiveStreamStarting)||this.VA(k.LiveStreamStopped)||(t&&(this.JP=!0),super.pause())}endOfStream(){this.pause(),this.handleVideoEnd()}enterLiveNotSupported(){this.FA(k.LiveStreamNotSupported)}RA(){this.BA=k.LiveStreamStarting,this.DA=k.LiveStreamStarting}GA(){this.FA(k.LiveStreamEnded)}qA(){this.OA.pause(),this.FA(k.LiveStreamStopped)}}class no extends oi{initState(){const t=this.context.getComponent(ci.LivePoster);t.setMessageToStarting(),t.show(),this.context.overlayModule.removeOverlayClickEvents(),this.context.overlayModule.disableHover()}exitState(){this.context.getComponent(ci.LivePoster).hide(),this.context.setFullProgressBarUI(),this.context.overlayModule.addOverlayClickEvents(),this.context.overlayModule.enableHover()}}class ro extends oi{initState(){const t=this.context.getComponent(ci.LivePoster);this.context.$uiContainer.classList.add(d.j.LiveEnded),t.setMessageToEnded(),t.show(),this.context.getComponent(ci.LiveIcon).hideComponent(),this.context.overlayModule.removeOverlayClickEvents(),this.context.overlayModule.disableHover()}exitState(){}}class ho extends ga{initState(){super.initState();const t=this.context.getComponent(ci.LivePoster);t.hideMessage(),t.show(),this.context.getComponent(ci.LiveIcon).showComponent()}exitState(){super.exitState();const t=this.context.getComponent(ci.LivePoster);t.hide(),t.showMessage()}}class ao extends oi{initState(){const t=this.context.getComponent(ci.LivePoster);Object(E.a)(this.context.$uiContainer,d.j.LiveEnded),t.setMessageToNotSupported(),t.show(),this.context.overlayModule.hideUiControls(),this.context.overlayModule.destroy()}exitState(){}}class oo extends _a{constructor(){super(...arguments),this.QP={[k.LiveStreamStarting]:new no(this),[k.LiveStreamEnded]:new ro(this),[k.LiveStreamStopped]:new ho(this),[k.LiveStreamNotSupported]:new ao(this)}}start(){this.cp=Object.assign(Object.assign({},this.cp),this.QP),super.start()}onResize(t){super.onResize(t),this.setFullProgressBarUI()}updateDuration(){this.setFullProgressBarUI()}setFullProgressBarUI(){const t=this.getComponent(ci.ProgressBar);t&&t.setProgress(100)}cC(){this.cp[k.LiveStreamStarting].enterState()}updateCurrentVideo(t){super.updateCurrentVideo(t);const i=this.getComponent(ci.LivePoster);if(i){const e=t.getThumbnailUrl(this.$uiContainer.clientWidth,this.$uiContainer.clientHeight);i.setPosterSrc(e),i.setPosterAltText(t.altText),Object(v.h)(t.startDate)&&i.handleDelayedStart(t.startDate)}}}class co extends $a{play(){const t=this.PT.liveSyncPosition;return t&&(this._T.currentTime=t),super.play()}endOfStream(){this.PT.detachMedia()}get hlsSupported(){return this.mT}CT(){this.MT&&this.MT.isPending&&this.MT.reject(),this.PT.detachMedia(),this.mediator.publish(this,O.LiveStreamNotPlayable)}}const uo=10,lo=10;class fo extends fa{constructor(){super(...arguments),this.XP=()=>{this.play()},this.YP=()=>{this.aI.endOfStream(),this.OA.endOfStream()}}start(){super.start(),this.KP(),this.ZP(),this.lI(),this.OA.hlsSupported?(this.OA.start(),this.cI(),this.XP()):this.aI.enterLiveNotSupported()}destroy(){this.tM(),this.iM(),super.destroy()}KP(){this.subscribe(O.EndOfStream,this.OA,this.YP),this.subscribe(O.LevelSwitching,this.OA,()=>{this.aI.onEnterBuffering()})}ZP(){this.relay(C.NewThumbnail,this.oI,this,this.mediator)}kI(t){const i=new ba(t,!0);this.oI=new oo(this,this.Lb.services.GlobalDomUtilsService,this.Lb.services.InteractionService,this.Pb,i.template,t,this.Lb.config.appId,this.jb),this.oI.start()}OI(t){this.eM(t)}vI(){}dI(){}lI(){const{preRollBreak:t,postRollBreak:i}=this.uf,e=Object(v.e)(t),s=Object(v.e)(i);this.aI=new so(this,this.SA,this.OA,e,s,this.Lb.config.os.os===_t.b.Ios,this.uf.videoPosition),super.lI()}rI(){super.rI(),this.subscribe(O.LiveStreamNotPlayable,this.OA,()=>{clearTimeout(this.sM),this.sM=setTimeout(this.XP,lo*Zt.f)})}xI(t,i){this.OA=new co(this,this.Lb,this.Lb.services.GlobalDomUtilsService,this.Pb,this.Lb.services.ResizeObserver,i,t,this.uf.videoPosition)}eM(t){this.tM(),t&&(this.nM=setInterval(()=>{this.aI.isInPlayingState()&&(this.YP(),this.tM())},uo*Zt.f))}tM(){this.nM&&(clearInterval(this.nM),this.nM=null)}iM(){this.sM&&(clearInterval(this.sM),this.sM=null)}}class po extends ha{start(){try{super.start()}catch(t){Object(n.a)({message:"LiveExperience_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}dA(){this.Xj=new fo(this,this.uf,this.app,this.$playerContainer,this.breakPointsHandler.currentBreakpointClass)}cf(){this.sf.isInAdPod()?this.df(()=>{this.gd.onAdFinished(this.adHandler.inImpression,this.sf.isInAdPod()),super.cf(),this.Xj.show(!0)}):(super.cf(),this.Xj.show(!0))}pA(){super.pA(),this.subscribe(C.NewThumbnail,this.Xj,({payload:{thumbnailUrl:t}})=>{this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(t)})}Ef(t){t===h.ProtoPlayerCloseButtonMode.AlwaysOn?Object(E.a)(this.$playerContainer,d.g.AlwaysOn):Object(E.H)(this.$playerContainer,d.g.AlwaysOn)}}class vo extends y{constructor(){super(...arguments),this.Do="cnx-el"}createExperience(t,i){t.isInStreamType()?(this.experience=new Ja(this,this.Es,i),this.experienceApi=new Ka(this.experience)):t.isLiveType()?(this.experience=new po(this,this.Es,i),this.experienceApi=new Ka(this.experience)):(this.experience=new io(this,this.Es,i),this.experienceApi=new eo(this.experience))}isSupportedBreakpoint(t){return!0}subscribeToEvents(){super.subscribeToEvents(),this.playerModel.html&&this.subscribe(T.MediaMetaUpdate,this.experience,({payload:{title:t,description:i}})=>{this.updateMacroContent(this.macroElements.title,t),this.updateMacroContent(this.macroElements.description,i)})}getApiMethods(){return this.experienceApi.getApiMethods()}}class bo{constructor(){this.rM=[],this.hM=0,this.aM=!1,this.oM=t=>{this.rM.forEach(i=>{t&&t!==i.element||this.cM(i,this.hM)})}}uM(t){let i=this.rM.find(i=>i.element===t);return i||(i={element:t,list:[],cachedPercentInView:0},this.rM.push(i)),i.list}cM(t,i){t.list.forEach(t=>{!t.callbackSent&&t.threshold<=i?(t.callbackSent=!0,t.timeout=Object(Yt.a)(t.callback,t.callbackDelay,!0,this.aM)):t.callbackSent&&t.threshold>i&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=Object(Yt.a)(t.callback,0,!1,this.aM))})}on(t,i,e){this.uM(t).push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.oM()}off(t,i){const e=this.rM.find(i=>i.element===t);if(e){for(let t=e.list.length;t--;)e.list[t].callback===i&&e.list.splice(t,1);0===e.list.length&&this.rM.splice(this.rM.indexOf(e))}}check(t={threshold:.1}){return this.hM>=t.threshold}triggerRecheck(t){this.oM(t)}lM(t){this.aM=t}setViewableThreshold(t){this.hM=t,this.triggerRecheck()}getIsTabInFocus(){return!0}subscribe(t,i){}destroy(){for(let t=this.rM.length;t--;){const i=this.rM[t];for(let t=i.list.length;t--;)clearTimeout(i.list[t].timeout),this.off(i.element,i.list[t].callback)}}}var mo,go,yo=e(32);!function(t){t[t.none=0]="none",t[t.friendly=1]="friendly",t[t.safe=2]="safe"}(mo||(mo={}));class wo{constructor(t,i,e){this.ue=t,this.dM=i,this.rM=[],this.fM=mo.none,this.pM={intersectionObserver:!1,fallbackImplementation:!1},this.vM=null,this.bM=[0,.01,.1,.2,.5],this.mM=250,this.gM=!1,this.yM=t=>{this.gM=t,this.oM(),f.a.setFocusState(t),yo.a.pageFocus=t},this.oM=()=>{this.rM.forEach(t=>{const i=this.hM(t.element);this.onViewHandle(t,i)})},this.wM=()=>{null===this.vM&&(this.vM=setTimeout(()=>{this.oM(),clearTimeout(this.vM),this.vM=null},this.mM))},this.xM(e),this.kM(),this.SM()}SM(){this.dM.on(this.yM),yo.a.pageFocus=this.dM.isDocumentVisible()}xM(t){this.ue.IntersectionObserver&&!t?this.pM.intersectionObserver=!0:this.pM.fallbackImplementation=!0,this.ue.self!==this.ue.top?(this.OM=this._M(this.ue),null!==this.OM?this.fM=mo.friendly:this.fM=mo.safe):this.OM=this.ue.frameElement}_M(t){let i;try{if((i=t.parent)===this.ue.top)return t.frameElement}catch(t){return null}return this._M(i)}kM(){this.pM.intersectionObserver?this.jM=new this.ue.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.bM}):(this.ue.addEventListener("scroll",this.wM),this.ue.addEventListener("load",this.oM),this.ue.addEventListener("resize",this.oM))}AM(t){return this.rM.find(i=>i.element===t)}hM(t){if(this.fM===mo.safe){const i=this.AM(t);return i?i.cachedPercentInView:0}let i=1;const e=t.getBoundingClientRect(),s={bottomRatio:e.bottom/e.height,topRatio:(this.ue.top.innerHeight-e.top)/e.height,leftRatio:(this.ue.top.innerWidth-e.left)/e.width,rightRatio:e.right/e.width};return Object.keys(s).forEach(t=>{s[t]<=0&&(i=0),s[t]>0&&s[t]<1&&(i*=s[t])}),i}onObserverEnter(t){t.forEach(t=>{this.rM.filter(i=>i.element===t.target).forEach(i=>{this.onViewHandle(i,t.intersectionRatio)})})}onViewHandle(t,i){t.cachedPercentInView=i,t.list.forEach(t=>{!t.callbackSent&&t.threshold<=i&&this.gM?(t.callbackSent=!0,t.timeout=Object(Yt.a)(t.callback,t.callbackDelay,!0)):t.callbackSent&&(t.threshold>i||!this.gM)&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=Object(Yt.a)(t.callback,0,!1))})}on(t,i,e={}){let s=!1;if(this.pM.fallbackImplementation)if(this.fM===mo.friendly&&t.ownerDocument.defaultView!==this.ue.top)t=this.OM;else if(this.fM===mo.safe)return void Object(Yt.a)(i,0,!1);let n=this.rM.find(i=>i.element===t);n?s=!0:(n={element:t,list:[],cachedPercentInView:0},this.rM.push(n)),n.list.push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.pM.intersectionObserver?(s&&this.jM.unobserve(t),this.jM.observe(t)):this.pM.fallbackImplementation&&this.oM()}off(t,i){const e=this.rM.find(i=>i.element===t);if(e){let s=e.list.length;for(;s;)s--,e.list[s].callback===i&&e.list.splice(s,1);0===e.list.length&&(this.jM&&this.jM.unobserve(t),this.rM.splice(this.rM.indexOf(e),1))}}check(t={threshold:.1}){if(!t.element)return!1;let i=t.element;return this.fM===mo.friendly&&(i=this.OM),this.hM(i)>=t.threshold&&this.gM}triggerRecheck(t){this.pM.fallbackImplementation&&t&&this.rM.forEach(i=>{if(i.element===t){const t=this.hM(i.element);this.onViewHandle(i,t)}})}setViewableThreshold(t){}getIsTabInFocus(){return this.gM}subscribe(t,i){}destroy(){this.ue.removeEventListener("scroll",this.wM),this.ue.removeEventListener("load",this.oM),this.ue.removeEventListener("resize",this.oM),[].slice.call(this.rM).forEach(t=>{[].slice.call(t.list).forEach(i=>{this.off(t.element,i.callback),this.ue.clearTimeout(i.timeout)})}),this.dM.off(this.yM),clearTimeout(this.vM)}}class xo{constructor(t=0){this.IM=t,this.CM=16,this.TM=9}getHeightByRatio(t){return Math.round(t/this.CM*this.TM)+this.IM}}class ko{constructor(t,i,e={}){this.floatingMode=Object(v.a)(e.mode)?e.mode:t.floatingMode,Object(l.h)(e.devices)?this.floatingDeviceMode=e.devices:this.floatingDeviceMode=Object(l.h)(t.floatingDeviceMode)?t.floatingDeviceMode:[h.ProtoDeviceType.Desktop],Object(v.a)(e.closeButton)?this.floatingCloseButtonMode=e.closeButton:Object(v.a)(t.floatingCloseButtonMode)?this.floatingCloseButtonMode=t.floatingCloseButtonMode:this.floatingCloseButtonMode=h.ProtoPlayerCloseButtonMode.OnHover,this.floatingPosition=Object(v.a)(e.fixedPosition)?e.fixedPosition:t.floatingFixedPosition,this.floatingScrollPosition=Object(v.a)(e.scrollPosition)?e.scrollPosition:t.floatingScrollPosition,this.floatingWidth=Object(v.a)(e.floatingWidth)?e.floatingWidth:t.floatingWidth||Lt,this.floatingGutterX=Object(v.a)(e.floatingGutterX)?e.floatingGutterX:t.floatingGutterX,this.floatingGutterY=Object(v.a)(e.floatingGutterY)?e.floatingGutterY:t.floatingGutterY,this.pageElement=t.floatingPageElement,this.appendLocation=t.floatingAppendLocation,this.floatingYAxisPadding=t.floatingYAxisPadding,this.PM=this.floatingScrollPosition===h.ProtoPositionMode.BottomLeft||this.floatingScrollPosition===h.ProtoPositionMode.TopLeft,this.MM=this.floatingScrollPosition===h.ProtoPositionMode.BottomRight||this.floatingScrollPosition===h.ProtoPositionMode.TopRight,this.EM=this.floatingScrollPosition===h.ProtoPositionMode.TopLeft||this.floatingScrollPosition===h.ProtoPositionMode.TopRight,this.LM=this.floatingScrollPosition===h.ProtoPositionMode.BottomRight||this.floatingScrollPosition===h.ProtoPositionMode.BottomLeft,this.RM=new xo(i)}get isPositionedLeft(){return this.PM}get isPositionedRight(){return this.MM}get isPositionedTop(){return this.EM}get isPositionedBottom(){return this.LM}set isPositionedLeft(t){this.PM=t}set isPositionedRight(t){this.MM=t}set isPositionedBottom(t){this.LM=t}get positionClass(){switch(this.floatingScrollPosition){case h.ProtoPositionMode.BottomLeft:return"bottom-left";case h.ProtoPositionMode.TopLeft:return"top-left";case h.ProtoPositionMode.TopRight:return"top-right";default:return"bottom-right"}}set width(t){this.floatingWidth=t}get width(){return this.floatingWidth}getHeight(t){return`${this.RM.getHeightByRatio(t)}px`}}function So(t){return Object(v.f)(t)&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function Oo(t){return So(t)?_o({},t):t}function _o(t,i){return function(t,i){const e={};return So(t)&&Object.keys(t).forEach(i=>{e[i]=Oo(t[i])}),Object.keys(i).forEach(s=>{So(i[s])&&t[s]?e[s]=_o(t[s],i[s]):e[s]=Oo(i[s])}),e}(t,i)}!function(t){t[t.Normal=0]="Normal",t[t.Buzzfeed=1]="Buzzfeed"}(go||(go={}));class jo{constructor(t,i,e,s,r,a,o,c,u,d,f=0){if(this.global=t,this.targetContainer=i,this.BM=e,this.qc=s,this.secondLevelDomain=r,this.apiConfig=a,this.supplyChainSettings=c,this.isSeoTraffic=u,this.videoPosition=d,this.sharingDestinations=[],this.disableAdvertising=!1,this.adBreaks=[],this.disableClickUrl=!1,this.moatTrackingEnabled=!1,this.pauseAdWhenFinished=!1,Object(v.h)(e.initializationSettingsJson))try{const t=JSON.parse(e.initializationSettingsJson);this.apiConfig=_o(this.apiConfig,t)}catch(t){Object(n.a)({message:"invalid_init_json",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})}(this.apiConfig.playerMode===go.Buzzfeed||this.apiConfig.settings.pauseAdWhenFinished)&&(this.pauseAdWhenFinished=!0),this.DM(this.BM.lineItems);const p=[];this.soundMode=Object(v.a)(this.apiConfig.settings.defaultSoundMode)?this.apiConfig.settings.defaultSoundMode:e.soundMode,this.playbackMode=Object(v.a)(this.apiConfig.settings.playbackMode)?this.apiConfig.settings.playbackMode:e.playbackMode,this.playbackMode===h.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===h.ProtoPlayerSoundMode.Mute||Object(Yt.b)()||(this.soundMode=h.ProtoPlayerSoundMode.Mute),this.html=e.html,this.css=e.css,this.floatingSettings=new ko(e,f,this.apiConfig.settings.customization.floating),this.logoUrl=Object(v.h)(this.apiConfig.settings.customization.logoUrl)?this.apiConfig.settings.customization.logoUrl:e.logoUrl;const b=e.amazonTamSlotId;if(Object(v.h)(b)&&(this.amazonTamSlotId=b),Object(v.a)(this.apiConfig.settings.advertising.macros)&&(this.externalMacros=this.apiConfig.settings.advertising.macros),Object(v.a)(this.apiConfig.settings.disableAdvertising)&&(this.disableAdvertising=this.apiConfig.settings.disableAdvertising),this.FM(),this.VM(),Object(l.h)(this.apiConfig.settings.advertising.lineItems)){const t=e.lineItems.filter(t=>t.creativeType===h.ProtoCreativeTypeEnum.External);this.apiConfig.settings.advertising.lineItems.forEach(i=>{if(this.UM(i),o){const t=this.NM(),e=this.$M(i,t);p.push(e)}else t.forEach(t=>{if(i.id===t.advertiserLineItemId&&(i.url||i.headerBidderBids||i.externalMediaFile||i.externalHlsFile)){const e=this.$M(i,t);p.push(e)}})})}!0!==this.apiConfig.settings.advertising.blockConnatixDemand&&p.push(...e.lineItems.filter(t=>t.creativeType!==h.ProtoCreativeTypeEnum.External)),p.forEach(t=>{t.creativeType===h.ProtoCreativeTypeEnum.External&&(t.headerBidderBids&&"[]"!==t.headerBidderBids?t.creativeType=h.ProtoCreativeTypeEnum.HeaderBidder:t.externalMediaFile||t.externalHlsFile?t.creativeType=h.ProtoCreativeTypeEnum.MediaFile:t.creativeType=h.ProtoCreativeTypeEnum.ThirdParty)});const m=this.HM(p),g=Object(v.a)(this.apiConfig.settings.rendering.scrollHijackingProtection)?this.apiConfig.settings.rendering.scrollHijackingProtection:e.scrollHijackingProtection;this.lineItemSettings={lineItems:m,disableScrollHijackEnforcement:g},this.midRollNumber=Object(v.a)(this.apiConfig.settings.advertising.maxNumberOfMidRolls)?this.apiConfig.settings.advertising.maxNumberOfMidRolls:e.midRollNumber,this.adViewabilityPolicy=e.adViewabilityPolicy,this.preRollBreak=(Object(v.a)(this.apiConfig.settings.advertising.preRollBreak)?this.apiConfig.settings.advertising.preRollBreak:e.preRollBreak)*Zt.f,this.postRollBreak=(Object(v.a)(this.apiConfig.settings.advertising.postRollBreak)?this.apiConfig.settings.advertising.postRollBreak:e.postRollBreak)*Zt.f,this.playerId=e.playerId,this.floatingCloseButtonMode=this.floatingSettings.floatingCloseButtonMode,e.floatingMode===h.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingCloseButtonMode:this.closeButtonMode=Object(v.a)(this.apiConfig.settings.customization.closeButtonMode)?this.apiConfig.settings.customization.closeButtonMode:e.closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:Object(v.a)(this.apiConfig.settings.customization.showExpandButton)?this.apiConfig.settings.customization.showExpandButton:e.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=e.adPlaybackMode,Object(v.a)(this.apiConfig.settings.disableClickUrl)&&(this.disableClickUrl=this.apiConfig.settings.disableClickUrl);const{skipAdAfter:y}=a.settings.advertising.skipAdSettings||{},{adSkippability:w}=a.settings.advertising.skipAdSettings||{};this.skipAdAfter=Object(v.a)(y)?y:e.skipAdAfter,this.adSkippability=Object(v.a)(w)?w:e.adSkippability;const{disableTracking:x}=a.settings._connatixInternals;(x||o||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.BM.sessionId,this.moatTrackingEnabled=this.lineItemSettings.lineItems.some(t=>t.moatTrackingEnabled)}qM(t,i){i.adTag=Object(v.a)(t.url)?t.url:i.adTag,i.requestCap=Object(v.a)(t.contentRequestCap)?t.contentRequestCap:i.requestCap,i.impressionCap=Object(v.a)(t.contentImpressionCap)?t.contentImpressionCap:i.impressionCap,i.viewability=Object(v.a)(t.viewability)?t.viewability:i.viewability,i.sound=Object(v.a)(t.sound)?t.sound:i.sound,i.ignoreFilledRequests=Object(v.a)(t.ignoreFilledRequests)?t.ignoreFilledRequests:i.ignoreFilledRequests,i.headerBidderBids=Object(v.a)(t.headerBidderBids)?t.headerBidderBids:i.headerBidderBids,i.headerBidderTimeout=Object(v.a)(t.headerBidderTimeout)?t.headerBidderTimeout:i.headerBidderTimeout,i.resetRequestsCapTime=Object(v.a)(t.resetRequestsCapTime)?t.resetRequestsCapTime:i.resetRequestsCapTime,i.resetImpressionsCapTime=Object(v.a)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:i.resetImpressionsCapTime,i.resetCapType=Object(v.a)(t.resetCapType)?t.resetCapType:i.resetCapType,i.timeBetweenRequests=Object(v.a)(t.timeBetweenRequests)?t.timeBetweenRequests:i.timeBetweenRequests,i.skipMode=Object(v.a)(t.skipMode)?t.skipMode:i.skipMode,i.floorPrice=Object(v.a)(t.floorPrice)?t.floorPrice:i.floorPrice,i.adBreakSettings=Object(v.a)(t.adBreakSettings)?t.adBreakSettings:i.adBreakSettings,i.pauseAdOutOfView=Object(v.a)(t.pauseAdOutOfView)?t.pauseAdOutOfView:i.pauseAdOutOfView}FM(){this.zM(this.apiConfig.settings.advertising.preRollBreak,h.ProtoAdBreakTypeEnum.PreRoll),this.zM(this.apiConfig.settings.advertising.postRollBreak,h.ProtoAdBreakTypeEnum.PostRoll),this.zM(this.apiConfig.settings.advertising.maxNumberOfMidRolls,h.ProtoAdBreakTypeEnum.MidRoll)}zM(t,i){const e=this.GM(this.apiConfig.settings.advertising.adBreaks,i),s=this.GM(this.BM.adBreaks,i),n={maxAdPodDuration:0,maxAdSlotDuration:0,numberOfAdSlots:1,types:[i]};e?this.adBreaks.push(e):!Object(v.a)(t)||e||s?!e&&s&&this.adBreaks.push(s):this.adBreaks.push(n)}GM(t,i){if(!t)return;let e;return t.forEach(t=>{t.types.includes(i)&&((e=Object.assign({},t)).types=[i])}),e}HM(t){const{adBreaks:i}=this;let e=t;const s=[];return i.forEach(t=>{t.types.forEach(i=>s.push(Object.assign(Object.assign({},t),{types:[i]})))}),s.forEach(t=>{e=this.removeCompatibleLineItems(t,e)}),t.filter(t=>!e.includes(t))}removeCompatibleLineItems(t,i){const e=t.types[0],s=t.numberOfAdSlots>1?h.ProtoLineItemAdBreakTypeEnum.AdPod:h.ProtoLineItemAdBreakTypeEnum.SingleAd;return i.filter(t=>!t.adBreakSettings.adBreakTargeting.some(t=>t.adRollType===e&&(t.adBreakTypeEnum===h.ProtoLineItemAdBreakTypeEnum.All||t.adBreakTypeEnum===s)))}DM(t){t.forEach(t=>{t.adBreakSettings||this.WM(t),this.UM(t)})}WM(t){t.adBreakSettings={adBreakTargeting:[{adRollType:h.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:h.ProtoLineItemAdBreakTypeEnum.All},{adRollType:h.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:h.ProtoLineItemAdBreakTypeEnum.All},{adRollType:h.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:h.ProtoLineItemAdBreakTypeEnum.All}]}}UM(t){0===t.requestCap&&(t.requestCap=20)}VM(){this.adBreaks.forEach(t=>{t.maxAdSlotDuration*=Zt.f,t.maxAdPodDuration*=Zt.f,t.numberOfAdSlots<=1?t.maxAdPodDuration=0:t.maxAdSlotDuration>t.maxAdPodDuration&&(t.maxAdSlotDuration=t.maxAdPodDuration)})}$M(t,i){const e=Object.assign({},i);return this.qM(t,e),Object(v.a)(t.externalMediaFile)&&(e.externalMediaFile=t.externalMediaFile),Object(v.a)(t.externalHlsFile)&&(e.externalHlsFile=t.externalHlsFile),e.customCpm=t.cpm,e}NM(){return h.ProtoLineItem.toObject(h.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}}class Ao{constructor(t){this.Lv=[],this.JM=t.id,this.QM=t.title,this.El=t.altText,this.XM=t.description,this.YM=t.imageUrl,this.kC=t.sources,this.ay=t.clickUrl||"",this.KM=t.hlsFilePath||"",this.ZM=t.liveStreamFilePath||"",this.tE=t.liveStramStartDate||"",this.kC&&this.kC.forEach(t=>{this.Lv.push({label:j[t.quality],videoHeight:t.quality,isHD:t.quality>=A})})}get id(){return this.JM}get title(){return this.QM}get altText(){return Object(v.a)(this.El)?this.El:""}get description(){return this.XM}get clickUrl(){return this.ay}getSources(t){return[{src:this.kC.find(i=>i.quality===this.getClosestSourceQuality(t).videoHeight).file,type:new Ia(S.H264).type}]}getHlsSource(){return this.ZM||this.KM}getAvailableQualities(){return this.Lv.sort((t,i)=>t.videoHeight-i.videoHeight)}getThumbnailUrl(){return this.YM}get hlsFilePath(){return this.ZM||this.KM}getClosestSourceQuality(t){let i;const e=Object(Xt.a)(t,this.Lv.map(t=>t.videoHeight));return this.Lv.forEach(t=>{t.videoHeight===e&&(i=t)}),i}setAvailableQualities(t){this.Lv=t}get startDate(){return this.tE}}class Io{constructor(t){this.iE=new Ao(t)}getMetadata(t){t&&t(this.iE)}setAvailableQualities(t){this.iE.setAvailableQualities(t)}}class Co{constructor(t,i,e){this.eE=!1,this.sE=[],this.nE=!1,this.JM=t,this.rE=i,this.hE=e}getMetadata(t){this.eE?t&&t(this.iE):this.aE(t)}setAvailableQualities(t){this.iE.setAvailableQualities(t)}aE(t){t&&this.sE.push(t),this.nE||(this.nE=!0,this.oE().then(t=>{this.nE=!1,this.eE=!0,this.iE=this.cE(t),this.sE.forEach(t=>t(this.iE)),this.sE=[]}).catch(()=>{this.nE=!1}))}}class To{constructor(t,i,e){this.JM=t,this.hE=i,this.uE=[],this.lE=[],this.dE=[],this.fE=[],this.Lv=[],this.QM=e.title,this.El=e.altText,this.XM=e.description,this.ay=e.clickUrl,this.uE=e.keywordList,this.pE=e.languageId,this.lE=e.trackList,this.vE=e.thumbnail,this.ot=e.duration,this.fE=e.customFields,this.KM=e.hlsFilePath,this.bE=e.sourceItemId,Object(l.h)(e.renditionList)&&(this.dE=this.mE(e.renditionList),this.gE(e.renditionList))}mE(t){return t.sort((t,i)=>t.height-i.height)}setAvailableQualities(t){this.Lv=t}gE(t){Object(l.e)("height",t).forEach((t,i)=>{this.Lv.push({videoHeight:t.height,label:`${t.height}p`,isHD:t.height>=A})})}yE(t,i){return this.dE.find(e=>e.codec===t&&e.height===i)}wE(t,i){let e=`${t}${this.JM}/`;return Object(v.h)(this.hE)?e+=`${this.hE}/${i}`:e+=i,e}xE(t,i){const e=Object(Xt.a)(t,this.Lv.map(t=>t.videoHeight));return this.yE(i,e)}get hlsFilePath(){return this.KM}getAvailableQualities(){return this.Lv}getClosestSourceQuality(t){let i;const e=Object(Xt.a)(t,this.Lv.map(t=>t.videoHeight));return this.Lv.forEach(t=>{t.videoHeight===e&&(i=t)}),i}getSources(t,i){const e=[];return i.forEach(i=>{const s=this.xE(t,i.id);Object(l.h)(e)||s&&e.push({src:this.wE(ni.a.endPoints.base.video,s.file),type:i.type})}),e}getHlsSource(){return this.wE(ni.a.endPoints.base.video,this.KM)}getThumbnailUrl(t,i){const e=this.wE(ni.a.endPoints.base.image,this.vE);return ai.getSmartCroppedImageUrl(e,t,i)}get title(){return this.QM}get altText(){return Object(v.a)(this.El)?this.El:""}get description(){return this.XM}get clickUrl(){return this.ay}get keywords(){return this.uE}get languageId(){return this.pE}get sourceItemId(){return this.bE}get subtitle(){if(this.lE&&this.lE[0])return this.wE(ni.a.endPoints.base.video,this.lE[0].file)}get spriteSheet(){return this.kE}get duration(){return this.ot}get id(){return this.JM}get customFields(){return this.fE}}var Po=e(45);const Mo="VideoSourceWrapper";class Eo extends Co{constructor(t,i,e){super(t,i,e),this.SE=new Po.a(h.ProtoMediaMetadataResponse,Mo)}oE(){let t=`${ni.a.endPoints.base.metadata}${this.JM}/`;return Object(v.h)(this.hE)?t+=`${this.hE}/${this.rE}_media.bin`:t+=`${this.rE}_media.bin`,this.SE.fetchMetadata(t)}cE(t){return new To(this.JM,this.hE,t)}}class Lo{constructor(t,i){this.Lv=[],this.JM=t,this.El=i.altText,this.KM=i.outputUrl,this.vE=i.thumbnailUrl,this.OE=i.startDate}getSources(t,i){return null}setAvailableQualities(t){this.Lv=t}get hlsFilePath(){return this.KM}getAvailableQualities(){return this.Lv}getClosestSourceQuality(t){let i;const e=Object(Xt.a)(t,this.Lv.map(t=>t.videoHeight));return this.Lv.forEach(t=>{t.videoHeight===e&&(i=t)}),i}getHlsSource(){return this.KM}getThumbnailUrl(t,i){return this.vE}get id(){return this.JM}get altText(){return Object(v.a)(this.El)?this.El:""}get startDate(){return this.OE}}const Ro="LiveVideoSourceWrapper";class Bo extends Co{constructor(t,i,e){super(t,i,e),this.SE=new Po.a(h.ProtoLiveMediaMetadataResponse,Ro)}oE(){const t=`${ni.a.endPoints.base.metadata}${this.JM}/${this.rE}_liveStream.bin`;return this.SE.fetchMetadata(t)}cE(t){return new Lo(this.JM,t)}}const Do=10;class Fo extends jo{constructor(t,i,e,s,r,a,o,c,u,d){if(super(t,i,e,s,r,a,o,c,d,u),this.global=t,this.targetContainer=i,this.BM=e,this.videoPosition=u,this.playlist=[],this.outstreamAdAsContent=!1,this.alwaysDisplayControls=this.apiConfig.settings.customization.alwaysDisplayControls,this.playerSize=this._E(),this.midRollOnlyOnLongContent=Object(v.a)(this.apiConfig.settings.advertising.midRollOnlyOnLongContent)?this.apiConfig.settings.advertising.midRollOnlyOnLongContent:e.midRollOnlyOnLongContent,this.uiComponentsVisibility.watermark=Object(v.a)(this.apiConfig.settings.customization.showMuteWatermark)?this.apiConfig.settings.customization.showMuteWatermark:e.muteWatermark,this.playlistId=e.playlistId,this.accentColor=Object(v.h)(this.apiConfig.settings.customization.accentColor)?this.apiConfig.settings.customization.accentColor:e.accentColor,this.iconsColor=Object(v.h)(this.apiConfig.settings.customization.iconsColor)?this.apiConfig.settings.customization.iconsColor:e.iconsColor,this.tooltipTextColor=Object(v.h)(this.apiConfig.settings.customization.tooltipTextColor)?this.apiConfig.settings.customization.tooltipTextColor:e.tooltipTextColor,this.tooltipBackgroundColor=Object(v.h)(this.apiConfig.settings.customization.tooltipBackgroundColor)?this.apiConfig.settings.customization.tooltipBackgroundColor:e.tooltipBackgroundColor,this.minTimeBeforeFirstAd=(Object(v.a)(this.apiConfig.settings.advertising.timeBeforeFirstAd)?this.apiConfig.settings.advertising.timeBeforeFirstAd:e.minTimeBeforeFirstAd)*Zt.f,this.timeBetweenAds=(Object(v.a)(this.apiConfig.settings.advertising.timeBetweenAds)?this.apiConfig.settings.advertising.timeBetweenAds:e.timeBetweenAds)*Zt.f,this.upNextMode=Object(v.a)(this.apiConfig.settings.nextVideoMode)?this.apiConfig.settings.nextVideoMode:e.upNextMode,this.closedCaptionDefault=Object(v.a)(this.apiConfig.settings.customization.closedCaptionDefault)?this.apiConfig.settings.customization.closedCaptionDefault:e.closedCaption,this.logoPosition=Object(v.a)(this.apiConfig.settings.customization.logoPosition)?this.apiConfig.settings.customization.logoPosition:e.logoPosition,this.playerType=e.playerType,this.playerType!==R.ProtoElementsTypeEnum.OutStream||!this.apiConfig.settings.outstreamAdAsContent&&this.apiConfig.playerMode!==go.Buzzfeed||(this.outstreamAdAsContent=!0),Object(v.e)(this.minTimeBeforeFirstAd)||this.apiConfig.playerMode===go.Buzzfeed||this.outstreamAdAsContent||(this.minTimeBeforeFirstAd=Do),Object(v.h)(this.apiConfig._appSettings.bundleID)&&!this.isInApp()&&Object(n.a)({message:"Elements_PlayerModel_bundle_id_for_non_in_app",level:h.ProtoLoggingLevelEnum.FATAL}),!Object(v.h)(this.apiConfig._appSettings.bundleID)&&this.isInApp()&&Object(n.a)({message:"Elements_PlayerModel_bundle_id_missing_for_in_app",level:h.ProtoLoggingLevelEnum.FATAL}),this.videoQuality=Object(v.a)(this.BM.videoQuality)?this.BM.videoQuality:R.ProtoVideoQuality.Auto,Object(l.h)(this.apiConfig.settings.playlist)&&!Object(v.h)(this.apiConfig.mediaId)?this.apiConfig.settings.playlist.forEach(t=>{Object(v.h)(t.liveStreamFilePath)&&(this.playerType=R.ProtoElementsTypeEnum.Live,this.playbackMode=R.ProtoPlayerPlaybackModeEnum.ClickToPlay),this.playlist.push(new Io(t))}):e.playlist.length>0&&e.playlist.forEach(({mediaId:t,revisionNumber:i,mediaContentVersionId:e})=>{this.BM.playerType===R.ProtoElementsTypeEnum.Live?this.playlist.push(new Bo(t,i,e)):this.playlist.push(new Eo(t,i,e))}),this.isOutStreamType()){const t=Object(v.a)(this.apiConfig.settings.outstreamSettings.initialRendering)?this.apiConfig.settings.outstreamSettings.initialRendering:e.outstreamInitialRendering,i=Object(v.h)(this.apiConfig.settings.outstreamSettings.houseScreenColor)?this.apiConfig.settings.outstreamSettings.houseScreenColor:e.outstreamHouseBackgroundColor,s=(Object(v.a)(this.apiConfig.settings.outstreamSettings.totalAdBreakLength)?this.apiConfig.settings.outstreamSettings.totalAdBreakLength:e.outstreamTotalAdBreakLength)*Zt.f,n=Object(v.a)(this.apiConfig.settings.outstreamSettings.endAdBreakPolicy)?this.apiConfig.settings.outstreamSettings.endAdBreakPolicy:e.outstreamEndAdBreakPolicy;this.outstreamSettings={initialRendering:t,houseScreenBackgroundColor:i,totalAdBreakLength:s,endAdBreakPolicy:n}}(Object(v.a)(this.apiConfig.settings.gallery.style)&&this.apiConfig.settings.gallery.style!==R.ProtoGalleryStyleMode.None||!Object(v.a)(this.apiConfig.settings.gallery.style)&&e.galleryStyle!==R.ProtoGalleryStyleMode.None)&&this.floatingSettings.floatingMode!==R.ProtoPlayerFloatingMode.Always&&(this.gallery={style:Object(v.a)(this.apiConfig.settings.gallery.style)?this.apiConfig.settings.gallery.style:e.galleryStyle,orientation:this.jE()})}isInApp(){return Object(l.g)(this.playerType,[R.ProtoElementsTypeEnum.InStreamInApp])}isInStreamType(){return Object(l.g)(this.playerType,[R.ProtoElementsTypeEnum.InStream,R.ProtoElementsTypeEnum.InStreamInApp])}isOutStreamType(){return Object(l.g)(this.playerType,[R.ProtoElementsTypeEnum.OutStream])}isLiveType(){return Object(l.g)(this.playerType,[R.ProtoElementsTypeEnum.Live])}_E(){return{responsive:Object(v.a)(this.apiConfig.settings.customization.responsive)?this.apiConfig.settings.customization.responsive:this.BM.responsive,ratioWidth:Object(v.a)(this.apiConfig.settings.customization.ratioWidth)?this.apiConfig.settings.customization.ratioWidth:this.BM.ratioWidth,ratioHeight:Object(v.a)(this.apiConfig.settings.customization.ratioHeight)?this.apiConfig.settings.customization.ratioHeight:this.BM.ratioHeight,fixedWidth:Object(v.a)(this.apiConfig.settings.customization.fixedWidth)?this.apiConfig.settings.customization.fixedWidth:this.BM.fixedWidth,fixedHeight:Object(v.a)(this.apiConfig.settings.customization.fixedHeight)?this.apiConfig.settings.customization.fixedHeight:this.BM.fixedHeight}}jE(){return this.qc===h.ProtoDeviceType.Smartphone||this.qc===h.ProtoDeviceType.Tablet?R.ProtoGalleryOrientationEnum.Portrait:this.apiConfig.settings.gallery.orientation?this.apiConfig.settings.gallery.orientation:this.BM.galleryOrientation}}const Vo=Object.assign(Object.assign(Object.assign({},Mt.b),P),M),Uo={PlaybackModeEnum:{AutoPlay:h.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:h.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:h.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:h.ProtoPlayerSoundMode.On,Off:h.ProtoPlayerSoundMode.Mute,OnHover:h.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:h.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:h.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:h.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:h.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:h.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:h.ProtoPlayerCloseButtonMode.Off,On:h.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:h.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:h.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:h.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:h.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:j,LineItemExcludedSlotsEnum:{PreRoll:h.ProtoAdSlotsEnum.PreRoll,MidRoll:h.ProtoAdSlotsEnum.MidRoll,PostRoll:h.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:Mt.a.SetupError,NoPlayer:Mt.a.NoPlayer},FloatingModeEnum:{Off:h.ProtoPlayerFloatingMode.Off,OnPageLoad:h.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:h.ProtoPlayerFloatingMode.AfterInView,Always:h.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:h.ProtoDeviceType.Desktop,Smartphone:h.ProtoDeviceType.Smartphone,Tablet:h.ProtoDeviceType.Tablet,Other:h.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:h.ProtoFloatingFixedPositionMode.Page,Element:h.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:h.ProtoPositionMode.BottomRight,BottomLeft:h.ProtoPositionMode.BottomLeft,TopRight:h.ProtoPositionMode.TopRight,TopLeft:h.ProtoPositionMode.TopLeft},FloatingStatesEnum:{Float:Pt.Float,Embed:Pt.Embed},ImplementationTypeEnum:{Amp:h.ProtoImplementationType.Amp,Web:h.ProtoImplementationType.Web}},No=Object.assign(Object.assign({},Uo),{NextVideoModeEnum:{Next:R.ProtoPlayerUpNextMode.Next,Loop:R.ProtoPlayerUpNextMode.Loop,Stop:R.ProtoPlayerUpNextMode.Stop},LogoPositionEnum:{None:R.ProtoLogoPositionMode.None,ControlBar:R.ProtoLogoPositionMode.ControlBar,BottomRight:R.ProtoLogoPositionMode.BottomRight,BottomLeft:R.ProtoLogoPositionMode.BottomLeft,TopRight:R.ProtoLogoPositionMode.TopRight,TopLeft:R.ProtoLogoPositionMode.TopLeft},PlayerTypesEnum:{InStream:R.ProtoElementsTypeEnum.InStream,OutStream:R.ProtoElementsTypeEnum.OutStream,InStreamInApp:R.ProtoElementsTypeEnum.InStream,Live:R.ProtoElementsTypeEnum.Live},GalleryStyleModeEnum:{None:R.ProtoGalleryStyleMode.None,Detailed:R.ProtoGalleryStyleMode.Detailed,Visual:R.ProtoGalleryStyleMode.Visual},GalleryOrientationEnum:{Landscape:R.ProtoGalleryOrientationEnum.Landscape,Portrait:R.ProtoGalleryOrientationEnum.Portrait},InitialRenderingEnum:{ExpandWithAd:R.ProtoOutstreamInitialRenderingEnum.ExpandWithAd,FullyRendered:R.ProtoOutstreamInitialRenderingEnum.FullyRendered},EndAdBreakPolicyEnum:{Hide:R.ProtoOutstreamEndAdBreakPolicyEnum.Hide,HouseScreen:R.ProtoOutstreamEndAdBreakPolicyEnum.HouseScreen}});function $o(t,i){const e=t.toObject({},{defaults:!0,arrays:!0,objects:!0}),s=function(t){return t.toObject({},{defaults:!0,arrays:!0,objects:!0})}(i);return e.players.push(s),e.browser=h.Browser.toObject(h.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e.geoLocation=h.GeoLocation.toObject(h.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e}var Ho=e(26);class qo extends bo{constructor(t){super(),this.ue=t;try{this.So=new Qa,this.vs()}catch(t){Object(n.a)({message:"omid_verification_client_error",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})}}subscribe(t,i){return this.So.on(t,i)}vs(){const t=this.AE();if(this.IE=new t,!this.IE.isSupported())throw new Error("omid_not_implemented");this.CE(),this.Kb()}AE(){if(!this.ue.OmidVerificationClient)throw new Error("omid_verification_client_not_found");if(!this.ue.OmidVerificationClient[Ho.k])throw new Error("omid_verification_client_wrong_version");return this.ue.OmidVerificationClient[Ho.k]}CE(){this.IE.registerSessionObserver(t=>{t&&t.type===Ho.e.sessionError&&Object(n.a)({message:"omid_verification_client_session_error",exception:t.data.message,level:h.ProtoLoggingLevelEnum.WARNING})})}Kb(){this.IE.addEventListener(Ho.e.geometryChange,t=>{try{const{percentageInView:i,reasons:e}=t.data.adView,s=[Ho.a.backgrounded,Ho.a.notFound].some(t=>e.includes(t));this.lM(s);const r=i/100;this.setViewableThreshold(r),this.So.trigger(Mt.e.OmidViewabilityThreshold,r)}catch(t){Object(n.a)({message:"omid_verification_client_geometry_change_error",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL,throttle:1})}})}}const zo={src:ni.a.endPoints.assets.css.elements,id:"cnx-player-css"};class Go extends a.a{gn(){return zo}getDelegateHandler(){return{getCurrentPlaybackTime:()=>{if(!this.renderer)return 0;const t=this.renderer.getApiMethods();return t.getPlayerType()===R.ProtoElementsTypeEnum.OutStream?0:t.getVideoCurrentPosition()},getCurrentVolume:()=>{return this.renderer.getApiMethods().getVolume()}}}getRendererInstance(t,i,e,s,n){return new vo(this,t,i,e,s,n)}getViewabilityService(t,i,e=!1){return this.externalAttributes.settings.useExternalViewabilityService?new bo:this.ns?new qo(window):new wo(t.global,i,t.isOutStreamType()||e)}getPlayerResponse(t,i){return new Promise((i,e)=>{rr.a.sendProtoRequest({ProtoResponse:R.ProtoElementsResponse,ProtoRequest:R.ProtoElementsRequest,requestData:t,endpoint:ni.a.endPoints.api.pls,withCredentials:!0,queryParams:{[lr.b]:oe.a.version},logError:!0}).then(t=>{window.parent.connatixDummy&&Object(dr.b)("connatixDummy",this.pageUrl)&&(t.players[0]=Object.assign(Object.assign({},t.players[0]),window.parent.connatixDummy)),i(t)}).catch(t=>{e(t)})})}getPlayerModel(t,i,e){const s=new Fo(t.insertWindow?t.insertWindow:this.GLOBAL,t.insertContainer,i.players[e],i.browser.device,i.secondLevelDomain,this.externalAttributes,this.isServerlessMode,i.supplyChain,this.queryParams.cnxVideoPosition,i.isSeoTraffic||this.queryParams.cnxIsSeoTraffic);return 0===s.playlist.length?(Object(n.a)({message:"ElementsLoader_no_playlist_items",level:h.ProtoLoggingLevelEnum.FATAL}),null):s}getApiConfigEnums(){return No}getApiConfigEvents(){return Vo}getSpecificRequestData(){const t={localTimestamp:Object(at.c)()};this.queryParams.cnxMediaId?t.forceMediaId=this.queryParams.cnxMediaId:this.externalAttributes.mediaId&&(t.forceMediaId=this.externalAttributes.mediaId),this.queryParams.cnxPlaylistId?t.forcePlaylistId=this.queryParams.cnxPlaylistId:this.externalAttributes.playlistId&&!Object(l.h)(this.externalAttributes.settings.playlist)&&(t.forcePlaylistId=this.externalAttributes.playlistId);const i=this.externalAttributes.settings.forceSourceItemId;return Object(v.h)(i)&&(t.forceSourceItemId=i),t}Rs(){super.Rs(),this.externalAttributes.settings.gallery={},this.externalAttributes.settings.outstreamSettings={}}TE(t){t.forEach(t=>{t.ratioWidth=16,t.ratioHeight=9})}defaultInitFromProto(){const t=$o(R.ProtoElementsResponse,R.ProtoElements);return this.TE(t.players),t}}var Wo=e(12);class Jo{constructor(t=!1){this._debugLogging=t,this.PE="eventEmitted",this.So=new Qa}subscribe(t){return this.So.on(this.PE,t)}unsubscribe(t){this.So.remove(this.PE,t)}emitSessionStart(t){const i={videoMetadata:t};this.ME({metadata:i,name:Wo.a.SessionStart})}emitContentComplete(){this.ME({name:Wo.a.ContentComplete})}emitSessionEnd(){this.ME({name:Wo.a.SessionEnd})}emitPlay(){this.ME({name:Wo.a.Play})}emitPause(){this.ME({name:Wo.a.Pause})}emitAdPlay(){this.ME({name:Wo.a.AdPlay})}emitAdPause(){this.ME({name:Wo.a.AdPause})}emitAdPlaying(){this.ME({name:Wo.a.AdPlaying})}emitAdPaused(){this.ME({name:Wo.a.AdPaused})}emitAdImpression(t,i){const e={adMetadata:t,customAdMetadata:i};this.ME({metadata:e,name:Wo.a.AdImpression})}emitAdComplete(){this.ME({name:Wo.a.AdComplete})}emitAdStopped(){this.ME({name:Wo.a.AdStopped})}emitAdBreakStart(t){const i={adBreakMetadata:t};this.ME({metadata:i,name:Wo.a.AdBreakStart})}emitAdBreakComplete(){this.ME({name:Wo.a.AdBreakComplete})}emitPlayerResized(t){const i={playerDimensionsMetadata:t};this.ME({metadata:i,name:Wo.a.PlayerResized})}emitOnEnterFullscreen(){this.ME({name:Wo.a.OnEnterFullscreen})}emitOnExitFullscreen(){this.ME({name:Wo.a.OnExitFullscreen})}emitOnPlayerCollapsed(){this.ME({name:Wo.a.PlayerCollapsed})}emitOnPlayerExpanded(){this.ME({name:Wo.a.PlayerExpanded})}emitAdError(){this.ME({name:Wo.a.AdError})}emitPlayError(){this.ME({name:Wo.a.PlayError})}emitRenderError(){this.ME({name:Wo.a.RenderError})}emitAdClickThru(){this.ME({name:Wo.a.AdClickThru})}emitAdInteraction(){this.ME({name:Wo.a.AdInteraction})}emitAdVideoStart(t){const i={adVideoStartMetadata:t};this.ME({metadata:i,name:Wo.a.AdVideoStart})}emitAdLoaded(t){const i={adLoadedMetadata:t};this.ME({metadata:i,name:Wo.a.AdLoaded})}emitAdStateChange(t){const i={adStateChangedMetadata:t};this.ME({metadata:i,name:Wo.a.AdStateChange})}emitAdVideoFirstQuartile(){this.ME({name:Wo.a.AdVideoFirstQuartile})}emitAdVideoMidpoint(){this.ME({name:Wo.a.AdVideoMidpoint})}emitAdVideoThirdQuartile(){this.ME({name:Wo.a.AdVideoThirdQuartile})}emitAdVideoComplete(){this.ME({name:Wo.a.AdVideoComplete})}emitVolumeChange(t){this.ME({name:Wo.a.VolumeChange,metadata:{volume:t}})}emitAdVolumeChange(){this.ME({name:Wo.a.AdVolumeChange})}emitAdSkipped(){this.ME({name:Wo.a.AdSkipped})}ME(t){this._debugLogging&&console.log("Connatix Player Elements debugging: ",t),this.So.trigger(this.PE,t)}destroy(){this.ME({name:Wo.a.Destroy}),this.So.removeAll()}}var Qo=e(35);class Xo{constructor(t,i){this.EE=t,this.LE=i,this.XA=[],this.RE=0,this.BE=!1}add(t,i,e=!0){if(!this.LE.includes(t))return;if(e&&this.Lk(i))return;const s=(new Date).getTime(),n=0===this.XA.length?0:s-this.XA[this.XA.length-1].time;this.XA.push({type:i,time:s,delta:n}),this.RE+=n,this.logIfEndEntryReached(this.XA[this.XA.length-1])}logIfEndEntryReached(t){this.BE||t.type!==ti.a.Content_FirstFramePlayed&&t.type!==ti.a.AdImpression||(this.BE=!0,this.DE(t))}DE(t){const i=this.Lk(ti.a.FirstTimeInView),e=t.time-i.time,s=this.FE();Object(n.a)({callStack:e.toString(),level:h.ProtoLoggingLevelEnum.INFO,exception:JSON.stringify(s),message:`TimeLogService_log_playerId_${this.EE}`})}Lk(t){return this.XA.find(i=>i.type===t)}FE(){return{totalTimeSpent:this.RE,items:this.XA.map(t=>({type:ti.a[t.type],delta:t.delta}))}}}const Yo=window.parent,Ko=Object(Yt.f)(Yo).topFrame;Qo.a.abServiceType=Qo.b.ElementsABService;const Zo=(t,i)=>i.AMP_CONTEXT_DATA||t.settings.implementationType===h.ProtoImplementationType.Amp,tc=function(t,i,e,s,r,a){var o,c;e.TimeLogService.add(t.playerId,ti.a.T0);const u=Zo(t,Yo),l=new Go(e,Yo,s,u,r,a),d=function(){Object(Yt.j)(()=>new Promise((t,i)=>{if(Object(E.l)(zo.id,Ko))return t();Object(E.y)(zo,Ko.document.head,Ko,()=>t(),t=>i(t))})).then(()=>(Object(E.P)(Yo),l.updateQueryParams(),void(l.loadScriptTag(t,i)&&l.insertRenderer()))).catch(t=>Object(n.a)({message:"Loader_add_css_link",exception:t,level:h.ProtoLoggingLevelEnum.INFO}))};s?d():l.findPageUrl(Yo,null===(c=null===(o=t)||void 0===o?void 0:o.settings)||void 0===c?void 0:c.ampUrl).then(()=>d()).catch(t=>{Object(n.a)({message:"Elements_main_init",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL}),l.registerApiError()})},ic=(t,i)=>{const{settings:{plugins:e}}=t,{cmp:s,tcf:n,usPrivacyString:h,deviceID:a}=t._appSettings,o=Zo(t,Yo);return{UserManagerService:new r.b(Yo,i,o,{cmp:s,tcf:n,usPrivacyString:h,deviceID:a}),EventsStorageService:new Jo(e._debugLogging),TimeLogService:new Xo(t.playerId,["037749f4-7f5a-40d4-b91d-555e8c1d08c9","468c4c2f-9d1e-45d1-a0d2-88d505e14727","982ff3ea-6057-4ed5-b299-695a70c643f6","65d7704e-f535-4377-bf88-29e86f44d67a","c48d4ddc-3896-4252-b73b-62632d0efe0c"])}},ec=t=>{var i,e,s,n,r;const h=Object.assign({},t),a=null===(i=h._appSettings)||void 0===i?void 0:i.cmp;(Object(v.h)(null===(e=h._appSettings)||void 0===e?void 0:e.gdprConsentString)||Object(v.h)(null===(s=h._appSettings)||void 0===s?void 0:s.gdprParsedVendorString))&&(h._appSettings.cmp={consentString:Object(v.h)(null===(n=a)||void 0===n?void 0:n.consentString)?a.consentString:h._appSettings.gdprConsentString,parsedVendorConsents:Object(v.h)(null===(r=a)||void 0===r?void 0:r.parsedVendorConsents)?a.parsedVendorConsents:h._appSettings.gdprParsedVendorString});const o=Object.assign({},fe(Object.assign({},h._appSettings.cmp))),c=Object.assign({},fe(Object.assign({},h._appSettings.tcf))),{usPrivacyString:u,deviceID:l}=fe({usPrivacyString:h._appSettings.usPrivacyString,deviceID:h._appSettings.deviceID});return h._appSettings=Object.assign(Object.assign({},h._appSettings),{cmp:o,tcf:c,usPrivacyString:u,deviceID:l}),h};!function(){if(-1!==navigator.userAgent.toLowerCase().indexOf("msie"))return;let t=[];Yo.cnx&&(t=Yo.cnx.cmd),Yo.cnx=function(){function t(t){return t.settings=t.settings||{},t._appSettings=t._appSettings||{},t._appSettings.cmp=t._appSettings.cmp||{},t._appSettings.tcf=t._appSettings.tcf||{},t.settings.customization=t.settings.customization||{},t.settings.rendering=t.settings.rendering||{},t.settings.advertising=t.settings.advertising||{},t.settings.outstreamSettings=t.settings.outstreamSettings||{},t.settings.gallery=t.settings.gallery||{},t.settings._connatixInternals=t.settings._connatixInternals||{},t.settings.plugins=t.settings.plugins||{},t.settings.advertising.skipAdSettings=t.settings.advertising.skipAdSettings||{},t=ec(t),{render:function(i,e){const s=Object(v.h)(t._appSettings.bundleID),n=Object(v.h)(t._appSettings.sdkVersion);if(n){const i=parseInt(t._appSettings.sdkVersion.substr(0,1),10);t.settings.useExternalViewabilityService=!(i>=3)}const r=ic(t,s);tc(t,i,r,s,n,e)}}}return t.cmd={push:function(t){t()}},t.configEnums=No,t.configEvents=Vo,t}(),t.forEach(t=>t())}()}]);